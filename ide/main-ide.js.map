{"version":3,"sources":["../../../libs/remix-analyzer/src/index.ts","../../../../libs/remix-analyzer/src/solidity-analyzer/index.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/abstractAstView.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/algorithmCategories.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/assignAndCompare.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/blockBlockhash.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/blockTimestamp.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/categories.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/checksEffectsInteraction.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/constantFunctions.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/deleteDynamicArrays.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/deleteFromDynamicArray.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/erc20Decimals.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/etherTransferInLoop.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/forLoopIteratesOverDynamicArray.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/functionCallGraph.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/gasCosts.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/guardConditions.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/inlineAssembly.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/intDivisionTruncate.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/list.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/lowLevelCalls.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/noReturn.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/selfdestruct.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/similarVariableNames.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/staticAnalysisCommon.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/stringBytesLength.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/thisLocal.ts","../../../../../libs/remix-analyzer/src/solidity-analyzer/modules/txOrigin.ts","../../../libs/remix-astwalker/src/astWalker.ts","../../../libs/remix-astwalker/src/index.ts","../../../libs/remix-astwalker/src/sourceMappings.ts","../../../../libs/remix-debug/src/Ethdebugger.ts","../../../../../libs/remix-debug/src/cmdline/index.ts","../../../../../libs/remix-debug/src/code/breakpointManager.ts","../../../../../libs/remix-debug/src/code/codeManager.ts","../../../../../libs/remix-debug/src/code/codeResolver.ts","../../../../../libs/remix-debug/src/code/codeUtils.ts","../../../../../libs/remix-debug/src/code/opcodes.ts","../../../../../libs/remix-debug/src/debugger/VmDebugger.ts","../../../../../libs/remix-debug/src/debugger/debugger.ts","../../../../../libs/remix-debug/src/debugger/solidityLocals.ts","../../../../../libs/remix-debug/src/debugger/solidityState.ts","../../../../../libs/remix-debug/src/debugger/stepManager.ts","../../../../libs/remix-debug/src/eventManager.ts","../../../../libs/remix-debug/src/index.ts","../../../../libs/remix-debug/src/init.ts","../../../../../libs/remix-debug/src/solidity-decoder/astHelper.ts","../../../../../libs/remix-debug/src/solidity-decoder/decodeInfo.ts","../../../../../libs/remix-debug/src/solidity-decoder/index.ts","../../../../../libs/remix-debug/src/solidity-decoder/internalCallTree.ts","../../../../../libs/remix-debug/src/solidity-decoder/localDecoder.ts","../../../../../libs/remix-debug/src/solidity-decoder/solidityProxy.ts","../../../../../libs/remix-debug/src/solidity-decoder/stateDecoder.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/Address.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/ArrayType.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/Bool.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/DynamicByteArray.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/Enum.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/FixedByteArray.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/Int.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/Mapping.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/RefType.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/StringType.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/Struct.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/Uint.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/ValueType.ts","../../../../../../libs/remix-debug/src/solidity-decoder/types/util.ts","../../../../../libs/remix-debug/src/source/sourceLocationTracker.ts","../../../../../libs/remix-debug/src/source/sourceMappingDecoder.ts","../../../../../libs/remix-debug/src/storage/mappingPreimages.ts","../../../../../libs/remix-debug/src/storage/storageResolver.ts","../../../../../libs/remix-debug/src/storage/storageViewer.ts","../../../../../libs/remix-debug/src/trace/traceAnalyser.ts","../../../../../libs/remix-debug/src/trace/traceCache.ts","../../../../../libs/remix-debug/src/trace/traceHelper.ts","../../../../../libs/remix-debug/src/trace/traceManager.ts","../../../../../libs/remix-debug/src/trace/traceStepManager.ts","../../../../libs/remix-lib/src/eventManager.ts","../../../../../libs/remix-lib/src/execution/eventsDecoder.ts","../../../../../libs/remix-lib/src/execution/execution-context.ts","../../../../../libs/remix-lib/src/execution/logsManager.ts","../../../../../libs/remix-lib/src/execution/txExecution.ts","../../../../../libs/remix-lib/src/execution/txFormat.ts","../../../../../libs/remix-lib/src/execution/txHelper.ts","../../../../../libs/remix-lib/src/execution/txListener.ts","../../../../../libs/remix-lib/src/execution/txRunner.ts","../../../../../libs/remix-lib/src/execution/typeConversion.ts","../../../../../libs/remix-lib/src/helpers/compilerHelper.ts","../../../../../libs/remix-lib/src/helpers/txResultHelper.ts","../../../../../libs/remix-lib/src/helpers/uiHelper.ts","../../../../libs/remix-lib/src/index.ts","../../../../libs/remix-lib/src/init.ts","../../../../libs/remix-lib/src/storage.ts","../../../../libs/remix-lib/src/universalDapp.ts","../../../../libs/remix-lib/src/util.ts","../../../../../libs/remix-lib/src/web3Provider/dummyProvider.ts","../../../../../libs/remix-lib/src/web3Provider/web3Providers.ts","../../../../../libs/remix-lib/src/web3Provider/web3VmProvider.ts","../../../../libs/remix-simulator/src/genesis.ts","../../../../libs/remix-simulator/src/index.ts","../../../../../libs/remix-simulator/src/methods/accounts.ts","../../../../../libs/remix-simulator/src/methods/blocks.ts","../../../../../libs/remix-simulator/src/methods/debug.ts","../../../../../libs/remix-simulator/src/methods/filters.ts","../../../../../libs/remix-simulator/src/methods/misc.ts","../../../../../libs/remix-simulator/src/methods/net.ts","../../../../../libs/remix-simulator/src/methods/transactions.ts","../../../../../libs/remix-simulator/src/methods/txProcess.ts","../../../../libs/remix-simulator/src/provider.ts","../../../../../libs/remix-simulator/src/utils/logs.ts","../../../../libs/remix-solidity/src/compiler/compiler-input.ts","../../../../libs/remix-solidity/src/compiler/compiler-worker.ts","../../../../libs/remix-solidity/src/compiler/compiler.ts","../../../../libs/remix-solidity/src/compiler/txHelper.ts","../../../../libs/remix-solidity/src/compiler/types.ts","../../../libs/remix-solidity/src/index.ts","../../../../libs/remix-solidity/src/lib/eventManager.ts","../../../../libs/remix-tests/sol/tests.sol.ts","../../../../libs/remix-tests/sol/tests_accounts.sol.ts","../../../../libs/remix-tests/src/assertionEvents.ts","../../../../libs/remix-tests/src/compiler.ts","../../../../libs/remix-tests/src/deployer.ts","../../../../libs/remix-tests/src/fileSystem.ts","../../../../libs/remix-tests/src/index.ts","../../../../libs/remix-tests/src/logger.ts","../../../../libs/remix-tests/src/runTestFiles.ts","../../../../libs/remix-tests/src/runTestSources.ts","../../../../libs/remix-tests/src/testRunner.ts","../../../../libs/remix-tests/src/types.ts","../../../libs/remix-url-resolver/src/index.ts","../../../libs/remix-url-resolver/src/resolve.ts","D:/datn/remix-project/libs/remix-ui/clipboard/src/index.ts","webpack:///D:/datn/remix-project/libs/remix-ui/clipboard/src/lib/copy-to-clipboard/copy-to-clipboard.css?835d","D:/datn/remix-project/libs/remix-ui/clipboard/src/lib/copy-to-clipboard/copy-to-clipboard.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/index.ts","webpack:///D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/button-navigator/button-navigator.css?a3b0","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/button-navigator/button-navigator.tsx","webpack:///D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/debugger-ui.css?ebec","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/debugger-ui.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/slider/slider.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/step-manager/step-manager.tsx","webpack:///D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/tx-browser/tx-browser.css?28b6","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/tx-browser/tx-browser.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/assembly-items.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/calldata-panel.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/callstack-panel.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/code-list-view.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/dropdown-panel.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/full-storages-changes.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/function-panel.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/memory-panel.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/solidity-locals.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/solidity-state.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/stack-panel.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/step-detail.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/storage-panel.tsx","webpack:///D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/styles/assembly-items.css?b936","webpack:///D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/styles/dropdown-panel.css?ba04","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/vm-debugger-head.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/vm-debugger.tsx","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/reducers/assembly-items.ts","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/reducers/calldata.ts","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/utils/solidityTypeFormatter.ts","D:/datn/remix-project/libs/remix-ui/toaster/src/index.ts","webpack:///D:/datn/remix-project/libs/remix-ui/toaster/src/lib/toaster.css?a13e","D:/datn/remix-project/libs/remix-ui/toaster/src/lib/toaster.tsx","D:/datn/remix-project/libs/remix-ui/tree-view/src/index.ts","webpack:///D:/datn/remix-project/libs/remix-ui/tree-view/src/lib/remix-ui-tree-view.css?9274","D:/datn/remix-project/libs/remix-ui/tree-view/src/lib/remix-ui-tree-view.tsx","webpack:///D:/datn/remix-project/libs/remix-ui/tree-view/src/lib/tree-view-item/tree-view-item.css?d77b","D:/datn/remix-project/libs/remix-ui/tree-view/src/lib/tree-view-item/tree-view-item.tsx","D:/datn/remix-project/node_modules/@nrwl/web/node_modules/regenerator-runtime/runtime.js","D:/datn/remix-project/node_modules/colors/lib sync","D:/datn/remix-project/libs/remix-ui/clipboard/src/lib/copy-to-clipboard/copy-to-clipboard.css","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/button-navigator/button-navigator.css","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/debugger-ui.css","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/tx-browser/tx-browser.css","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/styles/assembly-items.css","D:/datn/remix-project/libs/remix-ui/debugger-ui/src/lib/vm-debugger/styles/dropdown-panel.css","D:/datn/remix-project/libs/remix-ui/toaster/src/lib/toaster.css","D:/datn/remix-project/libs/remix-ui/tree-view/src/lib/remix-ui-tree-view.css","D:/datn/remix-project/libs/remix-ui/tree-view/src/lib/tree-view-item/tree-view-item.css","(webpack)/buildin/global.js","./app.js","./app/compiler/compiler-abstract.js","./app/compiler/compiler-artefacts.js","./app/compiler/compiler-helpers.js","./app/compiler/compiler-imports.js","./app/compiler/compiler-sourceVerifier-fetchAndCompile.js","./app/compiler/compiler-utils.js","./app/components/hidden-panel.js","./app/components/local-plugin.js","./app/components/main-panel.js","./app/components/panel.js","./app/components/plugin-manager-component.js","./app/components/plugin-manager-settings.js","./app/components/side-panel.js","./app/components/vertical-icons.js","./app/editor/SourceHighlighters.js","./app/editor/contextView.js","./app/editor/contextualListener.js","./app/editor/editor.js","./app/editor/examples.js","./app/editor/sourceHighlighter.js","./app/editor/styles/contextView-styles.js","./app/files/compiler-metadata.js","./app/files/file-explorer.js","./app/files/fileManager.js","./app/files/fileProvider.js","./app/files/git-handle.js","./app/files/remixDProvider.js","./app/files/remixd-handle.js","./app/files/styles/file-explorer-styles.js","./app/panels/file-panel.js","./app/panels/main-view.js","./app/panels/styles/file-panel-styles.js","./app/panels/styles/terminal-styles.js","./app/panels/tab-proxy.js","./app/panels/terminal.js","./app/tabs/analysis-tab.js","./app/tabs/compile-tab.js","./app/tabs/compileTab/compileTab.js","./app/tabs/compileTab/compilerContainer.js","./app/tabs/compileTab/contractParser.js","./app/tabs/debugger-tab.js","./app/tabs/network-module.js","./app/tabs/runTab/contractDropdown.js","./app/tabs/runTab/model/dropdownlogic.js","./app/tabs/runTab/model/recorder.js","./app/tabs/runTab/recorder.js","./app/tabs/runTab/settings.js","./app/tabs/settings-tab.js","./app/tabs/staticanalysis/staticAnalysisView.js","./app/tabs/staticanalysis/styles/staticAnalysisView-styles.js","./app/tabs/styles/compile-tab-styles.js","./app/tabs/styles/debugger-tab-styles.js","./app/tabs/styles/run-tab-styles.js","./app/tabs/styles/settings-tab-styles.js","./app/tabs/styles/test-tab-styles.js","./app/tabs/test-tab.js","./app/tabs/testTab/testTab.js","./app/tabs/theme-module.js","./app/tabs/web3-provider.js","./app/udapp/index.js","./app/udapp/make-udapp.js","./app/udapp/run-tab.js","./app/ui/TreeView.js","./app/ui/auto-complete-popup.js","./app/ui/card.js","./app/ui/confirmDialog.js","./app/ui/contextMenu.js","./app/ui/copy-to-clipboard.js","./app/ui/landing-page/landing-page.js","./app/ui/modal-dialog-custom.js","./app/ui/modaldialog.js","./app/ui/multiParamManager.js","./app/ui/persmission-handler.js","./app/ui/renderer.js","./app/ui/sendTxCallbacks.js","./app/ui/styles/auto-complete-popup-styles.js","./app/ui/styles/modal-dialog-custom-styles.js","./app/ui/styles/modaldialog-styles.js","./app/ui/styles/renderer-styles.js","./app/ui/styles/tooltip-styles.js","./app/ui/svgLogo.js","./app/ui/tooltip.js","./app/ui/txLogger.js","./app/ui/universal-dapp-ui.js","./assets/js/editor/darkTheme.js","./blockchain/blockchain.js","./blockchain/pluginUDapp.js","./blockchain/providers/injected.js","./blockchain/providers/node.js","./blockchain/providers/vm.js","./blockchain/txResultHelper.js","./config.js","./framingService.js","./global/registry.js","./index.js","./lib/cmdInterpreterAPI.js","./lib/commands.js","./lib/events.js","./lib/gist-handler.js","./lib/helper.js","./lib/offsetToLineColumnConverter.js","./lib/panels-resize.js","./lib/publishOnIpfs.js","./lib/publishOnSwarm.js","./lib/query-params.js","./loadFilesFromParent.js","./main.js","./migrateFileSystem.js","./publishToStorage.js","./registry.js","./remixAppManager.js","./remixEngine.js","./universal-dapp-styles.js","util (ignored)","webpack:///buffer (ignored)?d465","webpack:///crypto (ignored)?cb98","decompress-response (ignored)","webpack:///util (ignored)?bf44","buffer (ignored)","crypto (ignored)","webpack:///buffer (ignored)?9207","webpack:///buffer (ignored)?8230","webpack:///buffer (ignored)?e79f","./leveldown (ignored)","./nextTick (ignored)"],"names":["CopyToClipboard","content","tip","icon","otherProps","message","setMessage","handleClick","JSON","stringify","e","console","error","reset","setTimeout","ButtonNavigation","stepOverBack","stepIntoBack","stepIntoForward","stepOverForward","jumpOut","jumpPreviousBreakpoint","jumpNextBreakpoint","jumpToException","revertedReason","stepState","jumpOutDisabled","state","setState","intoBackDisabled","overBackDisabled","intoForwardDisabled","overForwardDisabled","jumpNextBreakpointDisabled","jumpPreviousBreakpointDisabled","stepChanged","display","DebuggerUI","props","debuggerModule","debuggerAPI","isActive","statusMessage","debugger","currentReceipt","contractAddress","to","blockNumber","txNumber","debugging","opt","debugWithGeneratedSources","toastMessage","unLoad","debugHash","debug","debugHashRequest","removeHighlights","deleteHighlights","setEditor","editor","event","register","fileName","row","breakPointManager","remove","add","listenToEvents","debuggerInstance","discardHighlight","prevState","lineColumnPos","rawLocation","generatedSources","address","contracts","fetchContractAndCompile","path","getSourceName","file","source","id","name","getFile","log","contents","setFile","highlight","requestDebug","tx","startDebugging","unloadRequested","txIndex","isDebuggerActive","unload","ready","vmDebugger","vmDebuggerHead","web3","getDebugWeb3","eth","getTransactionReceipt","Debugger","offsetToLineColumnConverter","compilationResult","ret","catch","txHash","stepManager","jumpTo","step_manager","bind","traceLength","registerEvent","vmDebuggerLogic","triggerEvent","trigger","target","checked","Slider","sliderValue","currentValue","setValue","value","handleChange","parseInt","StepManager","revertWarning","setRevertWarning","updateStep","warning","step","TxBrowser","transactionNumber","handleSubmit","undefined","txInputChanged","AssemblyItems","assemblyItems","dispatch","reducer","initialState","selectedItem","setSelectedItem","refs","asmItemsRef","code","index","type","payload","indexChanged","currentItem","current","removeAttribute","firstChild","codeView","children","style","setProperty","setAttribute","scrollTop","offsetTop","map","item","i","ref","CalldataPanel","calldata","CallstackPanel","CodeListView","itemSelected","changed","DropdownPanel","calldataObj","dropdownName","dropdownMessage","header","loading","extractFunc","formatSelfFunc","loadMoreEvent","loadMoreCompletedEvent","extractDataDefault","parent","Array","key","self","isNode","isLeaf","Object","keys","formatSelfDefault","data","toggleDropdown","innerText","dropdownContent","title","copiableContent","updating","expandPath","updatedCalldata","update","setLoading","handleToggle","handleExpand","keyPath","includes","push","filter","startsWith","isEmpty","isArray","length","constructor","renderData","child","hasNext","cursor","toString","uniquePanelName","split","join","innerkey","FullStoragesChanges","FunctionPanel","setCalldata","MemoryPanel","SolidityLocals","formatSelf","color","isStruct","isMapping","indexOf","isProperty","whiteSpace","fontStyle","extractData","SolidityState","StackPanel","StepDetail","stepDetail","StoragePanel","VmDebuggerHead","functionPanel","setFunctionPanel","setStepDetail","solidityState","setSolidityState","solidityLocals","setSolidityLocals","stack","functions","func","functionDefinition","inputs","addmem","gas","remainingGas","VmDebugger","calldataPanel","setCalldataPanel","memoryPanel","setMemoryPanel","callStackPanel","setCallStackPanel","stackPanel","setStackPanel","storagePanel","setStoragePanel","returnValuesPanel","setReturnValuesPanel","fullStoragesChangesPanel","setFullStoragesChangesPanel","opCodes","top","bottom","isRequesting","isSuccessful","hasError","action","slice","findIndex","Error","mergeLocals","locals1","locals2","lastIndexOf","unshift","BN","replace","Toaster","hide","hiding","timeOutId","timeOut","showModal","shortTooltipText","substring","closeTheToaster","showFullMessage","hideFullMessage","clearTimeout","handleMouseEnter","handleMouseLeave","alignSelf","TreeView","TreeViewItem","label","expand","isExpanded","setIsExpanded","visibility","isElectron","require","csjs","yo","remixLib","registry","loadFileFromParent","OffsetToLineColumnConverter","QueryParams","GistHandler","Storage","RemixDProvider","Config","Renderer","examples","modalDialogCustom","FileManager","FileProvider","toolTip","CompilerMetadata","CompilerImport","Blockchain","PluginUDapp","PluginManagerComponent","CompilersArtefacts","CompileTab","SettingsTab","AnalysisTab","DebuggerTab","TestTab","FilePanel","Editor","Terminal","ContextualListener","css","App","api","events","opts","appManager","RemixAppManager","_components","_view","splashScreen","centered","document","body","appendChild","configStorage","config","put","filesProviders","browser","localhost","run","apply","el","iconpanel","sidepanel","mainpanel","resizeFeature","PanelsResize","remixIDE","render","module","exports","window","location","hostname","alert","pathname","protocol","hosts","host","onbeforeunload","pluginLoader","workspace","get","engine","RemixEngine","themeModule","ThemeModule","initTheme","removeChild","fileManager","saveCurrentFile","contentImport","blockchain","pluginUdapp","compilerMetadataGenerator","compilersArtefacts","fetchAndCompile","FetchAndCompile","networkModule","NetworkModule","web3Provider","Web3ProviderModule","terminal","getPosition","limitUp","limitDown","height","innerHeight","newpos","pageY","domEl","logHtml","contextualListener","appPanel","MainPanel","mainview","MainView","tabProxy","menuicons","VerticalIcons","landingPage","LandingPage","sidePanel","SidePanel","hiddenPanel","HiddenPanel","pluginManagerComponent","filePanel","settings","compileTab","RunTab","analysis","test","remixdHandle","gitHandle","registeredPlugins","activatePlugin","queryParams","params","then","deactivate","deactivatePlugin","select","call","callDetails","framingService","FramingService","start","gistHandler","loadedFromGist","loadFromGist","resolveDirectory","filesList","writeFile","embed","txHelper","execution","languageversion","getContract","calllback","visitContracts","sources","fileIndex","sourcesArray","profile","methods","version","packageJson","compilersArtefactsPerFile","saveCompilationPerFileResult","languageVersion","CompilerAbstract","on","__last","contractsData","targetFile","getContracts","compilerData","Plugin","compile","compilationTargets","contentResolverCallback","Promise","resolve","reject","compiler","Compiler","set","evmVersion","optimize","language","runs","loadVersion","success","compilationData","_","res","remixTests","globalRegistry","addTooltip","async","resolver","ImportsEngine","displayName","token","urlResolver","RemixURLResolver","previouslyHandled","url","exec","handlers","some","handler","match","cleanUrl","force","loadingCb","cb","temp","imported","getHandlers","found","forEach","handle","result","provider","err","targetPath","loadingMsg","fileProviderOf","addExternal","assertLibCode","importExternal","isConnected","exists","exist","localhostProvider","getProvider","splitted","tryEach","resolveAndSave","ethutil","unresolvedAddresses","sourceVerifierNetWork","toChecksumAddress","compilersartefacts","localCompilation","resolved","network","getCode","codeAtAddress","compilation","contract","util","compareByteCode","object","evm","deployedBytecode","addResolvedContract","emit","toLowerCase","metadata","urls","stdUrl","optimizer","enabled","compData","semver","minixhr","baseURLBin","baseURLWasm","pathToURL","urlFromVersion","endsWith","canUseWorker","selectedVersion","coerce","isNightly","browserSupportWorker","gt","Worker","promisedMiniXhr","json","description","pluginsContainer","view","AbstractPanel","modalDialog","defaultProfile","plugins","parse","localStorage","getItem","onValidation","create","form","fn","hash","setItem","radioSelection","updateProfile","updateName","updateDisplayName","updateUrl","EventEmitter","active","width","border","isIframe","tagName","plugItIn","addEventListener","contains","parentElement","showContent","HostPlugin","LocalPlugin","addToolTip","kind","documentation","views","root","items","localPlugin","reRender","actives","versionWarning","activationButton","open","getAll","getIds","plugin","IframePlugin","WebsocketPlugin","isFiltered","isNotRequired","isRequired","isNotHome","sortByName","profileA","profileB","nameA","toUpperCase","nameB","sort","reduce","inactives","activeTile","inactiveTile","PluginManagerSettings","rootView","pluginSearch","filterPlugins","pluginSearchInput","openLocalPlugin","pluginSearchButton","renderItem","ViewPlugin","fromLocal","permissions","currentSetting","from","method","permissionByToPlugin","toPlugin","funcObj","permissionByMethod","methodName","fromPlugins","togglePermission","fromPlugin","allow","fromName","fromPluginPermission","checkbox","permissionKey","clearPersmission","permissionsByFunctions","clearAllPersmission","byToPlugin","permissionForm","openDialog","verticalIcons","renderHeader","unlinkContent","linkContent","focus","docLink","getProfile","titleInfo","versionBadge","swapitHeader","swapitTitle","panel","helper","icons","iconKind","iconStatus","theme","onThemeChanged","quality","addIcon","listenOnStatus","removeIcon","types","status","setIconStatus","tooltip","c","toggle","classes","statusCheck","statusEl","querySelector","text","checkSpecialChars","resolveClasses","classList","images","querySelectorAll","im","currentActive","themeType","currentTheme","invert","brightness","nextActive","image","updateActivations","removeActive","addActive","home","homeIcon","fileexplorer","udapp","testing","none","SourceHighlighter","SourceHighlighters","highlighters","position","filePath","hexColor","sourceHighlight","find","currentSourceLocationFromfileName","currentSourceLocation","toStay","highlighter","highlightAllFrom","line","end","splice","ContextView","localRegistry","_deps","_nodes","_current","sourceMappingDecoder","previousElement","nodes","show","contextview","contextviewcontainer","container","_renderTarget","last","previous","isDefinition","declarationOf","_render","jumpToLine","lineColumn","column","gotoLine","lastCompilationResult","offsetToLineColumn","getSourceCode","getAsts","filename","node","nodeAtCursorPosition","references","referencesOf","typeDescriptions","typeString","nodeType","getActiveHighlights","k","nodeId","jump","dataset","_jumpToInternal","src","decode","showGasEstimation","gasEstimation","executionCost","codeDepositCost","estimatedGas","gasStationIcon","referencesnb","AstWalker","EventManager","pluginManager","_index","Declarations","FlatReferences","_activeHighlights","_stopHighlighting","astWalker","_buildIndex","setInterval","_highlightItems","getCursorPosition","referencedDeclaration","cursorPosition","currentPosition","currentFile","nodesAtPosition","_highlightExpressions","callback","s","walkFull","ast","eventId","_highlightInternal","fileTarget","addMarker","highlightref_fullLine","highlights","_highlight","results","eventKey","removeMarker","_loadContractInfos","fnName","_getInputParams","estimationObj","external","internal","creationCost","scope","gasEstimates","creation","totalCost","parameters","j","ace","Range","acequire","langTools","head","_themes","light","dark","remixDark","setTheme","sessions","sourceAnnotations","readOnlySessions","previousInput","saveTimeout","sourceHighlighters","emptySession","_createSession","modes","sol","yul","mvir","js","py","vy","zok","lex","txt","abi","rs","edit","commands","bindKeys","addCommand","bindKey","win","mac","editorFontSize","readOnly","setShowPrintMargin","resize","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","className","flowCompleter","getCompletions","session","pos","prefix","addCompleter","ctrlKey","Math","abs","wheelY","domEvent","getDocumentPosition","breakpoints","getBreakpoints","currentSession","clearBreakpoint","stop","setBreakpoint","_onChange","getSession","discardAllHighlights","hideHighlightsExcept","off","currentRequest","discardHighlightAt","input","setSession","setReadOnly","ext","mode","EditSession","setMode","setUndoManager","UndoManager","setTabSize","setUseSoftTabs","string","incr","newSize","getFontSize","setFontSize","_getMode","getValue","_switchSession","doc","positionToIndex","useWrapMode","setUseWrapMode","getUseWrapMode","characterWidth","renderer","contentWidth","ownerDocument","getElementsByClassName","clientWidth","setWrapLimit","cssClass","currentRange","center","animate","scrollToLine","markerId","clearAnnotations","annotation","setAnnotations","col","storage","owner","ballot","ballotTest","deployWithWeb3","deployWithEthers","readme","ballot_test","globlalRegistry","compilerArtefacts","statementMarker","fullLineMarker","highlightcode","customBackgroundColor","highlightcode_fullLine","networks","innerPath","contractName","currentFileProvider","currentPath","_JSONFileName","metadataFileName","_MetadataFileName","deploy","_syncContext","parsedMetadata","bytecode","methodIdentifiers","linkReferences","autoDeployLib","libFile","lib","fileLocation","pop","detectNetwork","Gists","Treeview","contextMenu","MENU_HANDLE","fileExplorer","files","menuItems","focusElement","focusPath","allItems","remixdDialog","currentContent","isReadOnly","setText","fileRemoved","fileRenamed","fileRenamedError","fileAdded","folderAdded","filepath","ensureRoot","folderpath","currentTree","treeView","nodeAt","fileTree","normalize","updateNodeFromJSON","labelAt","extractNameFromKey","updatePath","oldName","newName","isFolder","tree","newValue","isFile","keep","x","subkey","li","isRoot","leaf","folder","editModeOff","renderMenuItems","extractExternalFolder","firstSlIndex","secondSlIndex","readonly","actions","createNewFile","createNewFolder","isExternalFolder","folderPath","Rename","editModeOn","Delete","currentFoldername","confirm","removeFolder","substr","toGist","extractPathOf","currentFilename","removeFile","Run","childrenContainer","newFile","textUnderEdit","selectElementContents","range","createRange","selectNodeContents","sel","getSelection","removeAllRanges","addRange","rename","newPath","which","preventDefault","getAttribute","save","prototype","newTree","init","publishToGist","uploadFile","loadFile","fileReader","FileReader","onload","readAsText","proccedResult","html_url","documentation_url","errors","getOriginalFiles","fetch","packageFiles","packaged","tokenAccess","gists","originalFileList","updatedFileList","acc","deleteFileName","_items","_fileName","filesProvider","directory","eachSeries","isDirectory","parentFolder","prompt","createNonClashingName","createFile","stopPropagation","menu","element","newList","toaster","permission","errorMsg","ENOENT","EISDIR","ENOTDIR","EEXIST","EPERM","createError","openedFiles","isDir","_handleExists","_handleIsFile","openFile","setFileContent","getFileContent","dest","readFile","oldPath","newPathExists","createDir","_handleIsDir","browserExplorer","localhostExplorer","fileChangedEvent","fileRenamedEvent","fileRemovedEvent","removeTabsOf","getCurrentFile","getFolder","readdir","switchFile","discard","newFocus","newAbsolutePath","reg","askUserPermission","canCall","time","_setFileInternal","syncEditor","fileProvider","createNonClashingNameWithPrefix","copyName","tab","_openFile","getPathFromUrl","openReadOnly","browserProvider","fileList","dirPaths","collectList","ls","promises","curPath","all","filesSet","override","each","providerExternalsStorage","externalFolders","compilerImport","getNormalizedName","_exists","unprefixedpath","removePrefix","remixFileSystem","existsSync","readFileSync","writeFileSync","_normalizePath","paths","shift","currentCheck","mkdirSync","addNormalizedName","statSync","stat","readdirSync","rmdirSync","unlinkSync","unprefixedoldPath","unprefixednewPath","renameSync","absPath","GitHandle","_appManager","_isReady","_readOnlyFiles","_readOnlyMode","filesContent","remixdEvents","addPrefix","_registerEvent","RemixdHandle","fileSystemExplorer","locahostProvider","close","connectToLocalhost","connection","canceled","intervalId","socket","readyState","clearInterval","dialog","dialogParagraph","href","FileExplorer","canUpload","File","FileList","Blob","fileProviders","createProvider","explorers","treeview","template","fileExplorerTree","TabProxy","mainPanel","txListener","unselectCurrentFile","contextView","showApp","count","displayEmptyReadOnlySession","_layout","offset","_terminalTopOffset","delta","_adjustLayout","listenOnNetWork","setListenOnNetwork","direction","containerHeight","layout","tmp","mainPanelHeight","scroll2bottom","tabs","onmouseenter","command","msg","renderTabsbar","altKey","keyCode","switchNextTab","registerCommand","updateJournal","$","_handlers","loadedTabs","updateImgStyles","removeTab","filetabs","activateTab","addTab","closeFile","switchTab","fixInvert","tabName","switchTo","slash","tabPath","reverse","tempTitle","formatPath","titleLength","duplicateTabName","duplicateTabPath","duplicateTabFormatPath","duplicateTabTitle","switchToActiveTab","remix_tabs","detail","canAdd","zoomBtns","onZoomOut","onZoomIn","$filesEl","ev","javascriptserialize","jsbeautify","vm","CommandInterpreterAPI","AutoCompletePopup","TxLogger","KONSOLES","ghostbar","_api","_opts","lineLength","activeFilters","filterFns","bar","term","journal","cli","cmdInterpreter","autoCompletePopup","textList","putCursor2End","_commands","_JOURNAL","_jobs","_INDEX","allMain","commandsMain","_blocksRenderer","activate","execute","args","scopedCommands","append","script","String","_shell","output","basicFilter","query","registerFilter","shell","info","warn","html","paste","change","focusinput","hover","minimize","toggleTerminal","dragbar","mousedown","dragbarHorizontal","pendingTxCount","inputSearch","clear","verticalLine","listenOnNetwork","search","searchIcon","terminal_container","throttle","reattach","innerHTML","currentTarget","selection","rangeCount","clipboard","clipboardData","getData","createElement","textnode","createTextNode","textContent","getRangeAt","insertNode","empty","placeCaretAtEnd","collapse","wait","Date","now","debounce","arguments","css2","overlay","background","placeholder","anchor","inserted","metaKey","shiftKey","refocus","isBottomed","scrollHeight","clientHeight","onclick","check","nextElementSibling","next","messages","pos1","offsetHeight","pos2","opacity","right","borderBox","padding","pointerEvents","scrollIntoView","button","filtertimeout","moveGhostbar","removeGhostbar","cancelGhostbar","removeEventListener","_cmdHistory","_cmdIndex","_cmdTemp","intro","ul","txLogger","wrapScript","isKnownScript","trim","handleAutoComplete","removeAutoComplete","len","editable","selectNode","chars","lastChild","Node","TEXT_NODE","setEnd","toStart","toEnd","filterEvent","steps","gidx","cmd","df","createDocumentFragment","requestAnimationFrame","updateDOM","updateTerminal","logger","filterUndefined","values","val","idx","makeScopedCommand","_command","blockify","commandName","filterFn","ITEM","_appendItem","_scopeCommands","help","done","context","domTerminalFeatures","cmds","createContext","runInContext","remix","block","StaticAnalysis","staticanalysis","copy","copyToClipboard","parseContracts","CompileTabLogic","CompilerContainer","warnCompilationSlow","errorContainer","contractEl","contractsDetails","eventHandlers","compileTabLogic","compilerContainer","onContentChanged","onLoadingCompiler","onCompilerLoaded","onStartingCompilation","onCurrentFileChanged","onNoFileSelected","onCompilationFinished","getCurrentVersion","getSource","severity","contractMap","contractSelection","formattedMessage","panicError","img","getElementById","keydown","runCompiler","compileFile","currentVersion","setConfiguration","timeout","getFileName","part","contractList","selectEl","selectContract","compilerSection","compilerLabel","selectedContract","storageLogo","details","contractHelperButtons","copyButton","copyABI","copyIcon","copyBytecode","Assembly","Opcodes","functionHashes","metadataHash","swarmLocation","web3Deploy","contractProperties","detailsJSON","propertyName","copyDetails","questionMark","insertValue","property","getContractProperty","copyContractProperty","onActivationInternal","errorBlobs","unregister","removeListener","newOptimizeValue","newEvmVersion","lang","hideWarnings","autoCompile","compileTimeout","allversions","defaultVersion","extention","compileIcon","scheduleCompilation","bouncingIcon","spinningIcon","speed","_disableCompileBtn","_updateLanguageSelector","compileIfAutoCompileOn","displayed","disabled","isSolFileSelected","shouldDisable","btn","pragmaArr","pragmaStr","pragma","releasedVersions","obj","prerelease","allVersions","_retrieveVersion","currentCompilerName","versionSelector","selectedOptions","pureVersion","isNewestNightly","isInRange","satisfies","isOfficial","compilerToLoad","maxSatisfying","compilerPath","_updateVersionSelector","setVersionText","fetchAllVersion","isURL","autocompile","updateAutoCompile","hideWarningsBox","onchangeOptimize","onchangeRuns","onchangeLoadVersion","languageSelector","onchangeLanguage","evmVersionSelector","onchangeEvmVersion","options","selectedIndex","compilationButton","includeNightlies","compileContainer","promtCompiler","nightlyBuilds","compilerConfig","addCustomCompiler","_setCompilerVersionFromPragma","setOptimize","setRuns","setLanguage","v","setEvmVersion","setVersion","customUrl","_shouldBeAdded","build","option","longVersion","valid","lt","binRes","wasmRes","versions","builds","urlArr","allVersionsWasm","wasmIndex","wasmCompiler","solcTranslate","compiledSource","getDetails","gethDeploy","retrieveMetadataHash","fun","formatGasEstimates","devdoc","userdoc","assembly","prettyPrintLegacyAssemblyJSON","legacyAssembly","jsonInterface","funABI","getConstructorInterface","inp","gasToText","g","Creation","External","Internal","debuggerTabView","renderComponent","ReactDOM","remixDebug","web3DebugNode","webDebugNode","extendWeb3","traceManager","getTrace","receipt","traceHelper","isContractCreation","targetAddress","currentProvider","Web3","providers","IpcProvider","HttpProvider","addProvider","removeProvider","confirmDialog","MultiParamManager","ContractDropdownUI","dropdownLogic","logCallback","runView","ipfsCheckedState","exEnvironment","listenToContextChange","loadType","compilerFullName","selectContractNames","getCompiledContracts","enableAtAddress","enableContractNames","setInputParamsPlaceHolder","compFails","updateNetwork","networkName","savedConfig","setCheckedState","ipfsCheckbox","enable","atAddressButtonInput","atAddress","errorIcon","loadFromAddress","ataddressinput","atAddressChanged","contractNames","abiLabel","toggleCheckedState","deployCheckBox","checkboxAlign","createPanel","deployDropdown","orLabel","contractNamesContainer","settingsLabel","subcontainer","atAddressSect","getSelectedContract","clickCallback","valArray","inputsValues","createInstance","createConstructorInstance","getConstructorInputs","bytecodeObject","compilerAtributeName","continueCb","continueTxExecution","cancelCb","promptCb","okCb","promptPassphrase","statusCb","finalCb","contractObject","contractMetadata","compilerContracts","getCompilerContracts","confirmationCb","getConfirmationCb","isOverSizeLimit","deployContract","callbacks","deployContractAndLibraries","bytecodeLinkReferences","deployContractWithLibrary","amount","fromWei","determineGasFees","determineGasPrice","setUnpersistedProperty","gasPriceStatus","gasPrice","toWei","loadContractFromAddress","ethJSUtil","DropdownLogic","listenToCompilationEvents","broadcastCompilationResult","confirmCb","isValidAddress","isValidChecksumAddress","constructorInteface","inputParametersDeclarationToString","format","txFormat","Recorder","_listen","_replay","_createdContracts","_createdContractsReverse","_usedAccounts","_abis","_contractABIReferences","_linkReferences","timestamp","payLoad","useCall","record","funArgs","contractABI","keccak","bufferToHex","contractBytecode","creationTimestamp","funAbi","serializeInputs","p","thisarg","thistimestamp","getAccounts","accounts","txResult","_payload","rawAddress","stringAddress","addressToString","clearAll","listen","stamp","extractTimestamp","records","concat","transactions","A","B","stampA","stampB","abis","alertCb","logCallBack","newContractFn","setListen","eachOfSeries","resolveAddress","link","linkLibraryStandardFromlinkReferences","fnABI","getFallbackInterface","getReceiveInterface","getFunction","isString","RegExp","encodeData","dataHex","runTx","txArray","RecorderUI","recorder","runButton","runTxs","recordButton","triggerRecordButton","runScenario","saveScenario","txJSON","SettingsUI","lookupOnly","updateAccountBalances","onPersonalChange","accountListCallId","loadedAccounts","account","getBalanceInEther","balance","updated","shortenAddress","netUI","environmentEl","crow","environment","infoDeployAction","networkEl","accountEl","updatePlusButton","newAccount","signMessage","gasPriceEl","gasNval","col2","valueEl","gasValueContainer","gasNvalUnit","col2_2","selectExEnv","setDropdown","silent","setFinalContext","fillAccountsList","env","changeExecutionContext","web3ProviderDialogBody","setProviderFromEndpoint","alertMsg","thePath","origin","plusBtn","plusTitle","disableMouseEvents","promptPassphraseCreation","passphrase","signMessageDialog","inputvalue","$txOrigin","isInjectedWeb3","isWeb3Provider","modal","promptMulti","msgHash","signedData","getNetworkProvider","callid","txOrigin","loadedaddress","optionVM","optionVMLabel","personal","personalLabel","warnPersonalMode","generateContractMetadata","generateContractMetadataLabel","general","themes","textWrap","textWrapLabel","getThemes","onswitchTheme","switchTheme","aTheme","gistAccessToken","removeToken","saveToken","gistAddToken","gistRemoveToken","gistToken","onchangeOption","elementStateChanged","textWrapEvent","warnText","onchangePersonal","onchangeGenerateContractMetadata","pluginInput","pluginTextArea","themesCheckBoxes","createThemeCheckies","crowNoFlex","isChecked","isChanged","StaticAnalysisRunner","CodeAnalysis","utils","staticAnalysisView","analysisModule","runner","modulesView","renderModules","lastCompilationSource","sourceHighlighter","correctRunBtnDisabled","runBtn","checkAll","selectedModules","selected","toRun","attributes","highlightLocation","warningContainer","warningCount","groupedModules","groupBy","preProcessModules","modules","moduleName","categoryDisplayName","alreadyExistedEl","report","locationString","more","click","useSpan","errFile","errLine","errCol","section","hidden","checkModule","checkBoxes","handleCollapse","downs","toElement","iEls","getElementsByTagName","moduleEntries","categoryId","category","entriesDom","entries","arr","Item","itemObj","TestTabLogic","hasBeenStopped","runningTestsNumber","readyTestsNumber","areTestsRunning","defaultPath","updateRunAction","testTabLogic","testList","createSingleTest","allTests","selectedTests","updateForNewCurrent","updateGenerateFileAction","getTests","tests","updateTestFileList","testsOutput","testFile","toggleCheckbox","eChecked","stopBtnInnerText","checkboxesLabels","runningTests","offsetToLineColumnWithContent","testSuite","testSuites","rawFileName","runningTestFileName","cleanFileName","outputHeader","testPass","testLog","assertMethod","testFailure","errMsg","preposition","expected","returned","_err","_errors","testCallback","setHeader","resultStatistics","createResultLabel","totalTime","parseFloat","toFixed","totalPassing","totalFailing","isFailingLabel","testsExecutionStopped","testsExecutionStoppedError","stopBtn","stopBtnLabel","fileContent","testFromSource","runningTest","getCurrentCompilerConfig","currentCompilerUrl","usingWorker","runTestSources","testFilePath","updateFinalResult","resultsCallback","setCurrentPath","runTest","generateTestFile","generateFileActionElement","runTests","labelOnBtn","isSolidityActive","listTests","runActionElement","stopTests","testsMessage","testFilesListElement","uiPathList","o","isRemixDActive","dirList","inputPath","updateDirList","updateCurrentPath","availablePaths","testTabView","infoBox","infoButton","updateStopAction","selectAll","remixPath","hasCurrent","splittedFileName","fileNameToImport","generateTestContractSample","fileToImport","relative","dirname","comment","basename","queryTheme","forced","nextTheme","documentElement","insertBefore","themeName","sendAsync","EventsDecoder","transactionDetailsLinks","Main","Rinkeby","Ropsten","Kovan","Goerli","txDetailsLink","makeUdapp","logHtmlCallback","txhash","txLink","_transactionReceipts","transactionReceiptResolver","txlistener","getTxListener","getAllContractDatas","resolveReceipt","startListening","eventsDecoder","Card","UniversalDAppUI","pluginUDapp","mainView","getTerminal","runTabView","settingsUI","contractDropdownUI","recorderCard","instanceContainer","instanceContainerTitle","noInstancesText","udappUI","changeCurrentFile","parentNode","renderInstanceFromABI","renderInstance","recorderCount","recorderInterface","collapsedView","expandedView","recorderDescription","transactionActions","arrow","resetAndInit","getAddress","number","selectedUnit","unit","getGasLimit","renderInstanceContainer","renderSettings","renderDropdown","renderRecorder","renderRecorderCard","addPluginProvider","app","removePluginProvider","renderContainer","LibraryPlugin","loadMore","renderProperties","renderObject","formatData","ul_tv","li_tv","caret","caret_tv","expanded","list","oncontextmenu","cursor_pointer","caretAt","jsonTree","replaceChild","label_item","label_key","label_value","Commands","isOpen","_options","_startingElement","_elementsToShow","_selectedElement","extraCommands","autoComplete","popup","autoCompleteItem","listHandlerHide","handleSelect","srcElement","getKeyOf","getValueOf","pageNumberAlignment","ceil","setUpPopUp","handleOpenPopup","handleListSize","listHandlerShow","inputString","moveUp","moveDown","autoCompleteInput","allPrograms","program","allCommands","keyValue","_events","cardBody","expandCollapseButton","statusBar","cardHeader","cardContainer","newGasPriceCb","initialParamsCb","onGasPriceChange","txFeeText","priceStatus","txInfoBox","wrapword","gasPriceValue","liitem","left","pageX","menuItemsContainer","boundary","getBoundingClientRect","getContent","themeQuality","adjustMediaPanel","hideMediaPanel","twitterFrame","media","badgeTwitter","mediaBadge","showMediaPanel","badgeMedium","twitterPanel","remixHomeMedia","mediumPanel","maxHeight","max","mediaPanelsTitle","mediaPanels","load","service","startSolidity","startPipeline","startDebugger","startMythX","startSourceVerify","startPluginManager","importFromGist","gist","createLargeButton","imgPath","envID","envText","envButton","envLogo","cursorStyle","solEnv","pipelineEnv","debuggerEnv","mythXEnv","sourcifyEnv","moreEnv","invertNum","switchToPreviousVersion","appVersion","reload","logoImg","playRemi","play","homeContainer","mainContent","hpSections","labelIt","bigLabelSize","rightPanel","panels","inputValue","ok","cancel","prompt_text","validateInput","incomingModal","focusSelector","agreed","footerIsActive","closeDiv","hideClose","okDiv","cancelDiv","modalTitle","setFocusOn","okListener","cancelListener","modalKeyEvent","focusTarget","setSelectionRange","activeElement","modalContent","modalBody","modalFooterOk","modalFooterCancel","clickCallBack","evmBC","isDeploy","basicInputField","multiFields","contractActionsContainerSingle","contractActionsContainerMulti","makeMultiVal","multiValString","getMultiValsString","valStr","valArrayTest","elVal","valStringTest","inputJSON","multiInputs","multiArg","onClick","funcButton","instanceButton","methCaret","switchMethodViewOn","createMultiFields","multiOnClick","valsString","expandedButton","contractActionsContainerMultiInner","switchMethodViewOff","multiHeader","multiTitle","group","multiString","multiJSON","encodeObj","contractProperty","stateMutability","payable","hasArgs","notAllowWarning","PermissionHandler","_getFromLocal","removeItem","persistPermissions","openPermission","toName","remember","switchMode","rememberSwitch","imgFrom","imgTo","pluginsImages","pluginMessage","_error","addAnnotation","_errorClick","noAnnotations","$pre","$error","prepend","modalCustom","typeConversion","getCallBacksWithContext","toInt","fee","toBN","mul","getGasPrice","warnMessage","basicLogo","tooltipText","t","animation","animateTop","actionElement","defaultOptions","canShorten","Element","resolveFn","over","out","animateBottom","anim","offsetWidth","seen","filterTx","logKnownTX","isCall","renderCall","renderKnownTransaction","logUnknownTX","renderUnknownTransaction","logEmptyBlock","renderEmptyBlock","envMode","resolvedTransaction","compiledContracts","parseLogs","logs","resolvedData","txType","txDetails","checkTxStatus","buttons","shortenHexData","txLog","txItem","txItemTitle","txStatus","succeeded","failed","notavailable","decoded","transactionIndex","blockHash","arrowUp","arrowDown","blockElement","table","createTable","decodedReturnValue","transactionCost","txTable","tr","td","transactionHash","tableTitle","toHash","callWarning","inputDecoded","outputDecoded","stringified","raw","txCallBacks","decodeResponseToTreeView","response","fnabi","isBN","decodeResponse","noInstances","sortAbiFunction","instance","hidesub","shortAddress","titleExpander","toggleClass","nameNbuts","titleText","spanTitleText","udappClose","closeIcon","contractActionsWrapper","cActionsWrapper","getCallButton","calldataInput","llIError","lowLevelInteracions","sendData","setLLIError","fallback","receive","isNumeric","is0XPrefixed","isHexadecimal","runTransaction","outputOverride","isConstant","constant","multiParamManager","getInputs","contractActionsContainer","valArr","functionName","logMsg","callbacksInContext","outputCb","returnValue","runOrCallContractMethod","contractAbi","define","isDark","cssText","dom","importCssString","txExecution","Txlistener","TxRunner","txRunner","executionContext","resultToRemixTx","VMProvider","InjectedProvider","NodeProvider","personalMode","resetEnvironment","networkcallid","setupEvents","setupProviders","injected","getCurrentProvider","buildData","createContract","runTxCallback","encodeConstructorCallAndLinkLibraries","doTypeConversion","determineGasFeesCb","calculateFee","infoCb","executionContextChange","isVM","isInjected","callType","_address","transactionContextAPI","stopListenOnLastBlock","listenOnLastBlock","RemixSimulatorProvider","Accounts","createVMAccount","_password","passwordPromptCb","pendingTxs","rawRun","waterfall","queryValue","gasLimit","getAccount","fromAddress","createdAddress","eventName","vmError","checkVMError","execResult","PluginUdapp","sendTransaction","pendingTransactionsCount","stripHexPrefix","hashPersonalMessage","getBalance","_passphrase","messageHash","Buffer","sign","Personal","getListAccounts","privateToAddress","RemixSimulator","Provider","resetAccounts","privateKey","_addAccount","privKey","_passwordPromptCb","isHexString","convertToPrefixedHex","isBuffer","gasUsed","errorMessage","exceptionError","CONFIG_FILE","unpersistedItems","exception","ensureStorageUpdated","getUnpersistedProperty","verticalIcon","getAppPanel","hidePanel","showPanel","minimizeterminal","minimizeTerminal","minimizesidepanel","CmdInterpreterAPI","fileImport","commandHelp","callbackSource","_execute","ethers","swarmgw","request","_window","handleLoad","loadingFromGist","gistId","getGistId","str","idr","gistProvider","setBatchFiles","errorLoadingFile","origGistFiles","etherBalance","counter","whilst","currentExist","findDeep","isMatch","lineBreakPositionsByContent","asts","getLinebreakPositions","convertOffsetToLineColumn","minWidth","setPosition","offsetLeft","panelWidth","calculatePanelWidth","IpfsClient","ipfsNodes","port","ipfsVerifiedPublishCallBack","uploaded","ipfsVerifiedPublish","metadataContent","expectedHash","severalGatewaysPush","swarmVerifiedPublishCallBack","swarmVerifiedPublish","qs","parts","currentParams","queryString","updatedKeys","y","filesToLoad","loadFilesCallback","fileStorage","flag","fileStorageBrowserFS","publishOnSwarm","publishOnIpfs","publish","server","requiredModules","isNative","nativePlugins","canActivate","pluginsDirectory","PluginLoader","permissionHandler","askPermission","profiles","savedPlugins","PluginManager","loaders","donotAutoReload","currentLoader","queueTimeout","Engine"],"mappings":"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A;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE,KAA0B,oBAAoB,SAAE;AAClD;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrtBA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA,2E;;;;;;;;;;;ACRA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","file":"main.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar solidity_analyzer_1 = require(\"./solidity-analyzer\");\r\nexports.CodeAnalysis = solidity_analyzer_1.default;\r\n//# sourceMappingURL=index.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst remix_astwalker_1 = require(\"@remix-project/remix-astwalker\");\r\nconst list_1 = tslib_1.__importDefault(require(\"./modules/list\"));\r\nclass staticAnalysisRunner {\r\n    /**\r\n     * Run analysis (Used by IDE)\r\n     * @param compilationResult contract compilation result\r\n     * @param toRun module indexes (compiled from remix IDE)\r\n     * @param callback callback\r\n     */\r\n    run(compilationResult, toRun, callback) {\r\n        const modules = toRun.map((i) => {\r\n            const module = this.modules()[i];\r\n            const m = new module();\r\n            return { 'name': m.name, 'mod': m };\r\n        });\r\n        this.runWithModuleList(compilationResult, modules, callback);\r\n    }\r\n    /**\r\n     * Run analysis passing list of modules to run\r\n     * @param compilationResult contract compilation result\r\n     * @param modules analysis module\r\n     * @param callback callback\r\n     */\r\n    runWithModuleList(compilationResult, modules, callback) {\r\n        let reports = [];\r\n        // Also provide convenience analysis via the AST walker.\r\n        const walker = new remix_astwalker_1.AstWalker();\r\n        for (const k in compilationResult.sources) {\r\n            walker.walkFull(compilationResult.sources[k].ast, (node) => {\r\n                modules.map((item) => {\r\n                    if (item.mod.visit !== undefined) {\r\n                        try {\r\n                            item.mod.visit(node);\r\n                        }\r\n                        catch (e) {\r\n                            reports.push({\r\n                                name: item.name, report: [{ warning: 'INTERNAL ERROR in module ' + item.name + ' ' + e.message, error: e.stack }]\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n                return true;\r\n            });\r\n        }\r\n        // Here, modules can just collect the results from the AST walk,\r\n        // but also perform new analysis.\r\n        reports = reports.concat(modules.map((item) => {\r\n            let report = null;\r\n            try {\r\n                report = item.mod.report(compilationResult);\r\n            }\r\n            catch (e) {\r\n                report = [{ warning: 'INTERNAL ERROR in module ' + item.name + ' ' + e.message, error: e.stack }];\r\n            }\r\n            return { name: item.name, report: report };\r\n        }));\r\n        callback(reports);\r\n    }\r\n    /**\r\n     * Get list of all analysis modules\r\n     */\r\n    modules() {\r\n        return list_1.default;\r\n    }\r\n}\r\nexports.default = staticAnalysisRunner;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst remix_astwalker_1 = require(\"@remix-project/remix-astwalker\");\r\nclass abstractAstView {\r\n    constructor() {\r\n        this.contracts = [];\r\n        this.currentContractIndex = -1;\r\n        this.currentFunctionIndex = -1;\r\n        this.currentModifierIndex = -1;\r\n        this.isFunctionNotModifier = false;\r\n        /*\r\n          file1: contract c{}\r\n          file2: import \"file1\" as x; contract c{}\r\n          therefore we have two contracts with the same name c. At the moment this is not handled because alias name \"x\" is not\r\n          available in the current AST implementation thus can not be resolved.\r\n          Additionally the fullQuallified function names e.g. [contractName].[functionName](param1Type, param2Type, ... ) must be prefixed to\r\n          fully support this and when inheritance is resolved it must include alias resolving e.g x.c = file1.c\r\n        */\r\n        this.multipleContractsWithSameName = false;\r\n    }\r\n    /**\r\n     * Builds a higher level AST view. I creates a list with each contract as an object in it.\r\n     * Example contractsOut:\r\n     *\r\n     * {\r\n     *  \"node\": {},                     // actual AST Node of the contract\r\n     *  \"functions\": [\r\n     *    {\r\n     *      \"node\": {},                // actual AST Node of the function\r\n     *      \"relevantNodes\": [],       // AST nodes in the function that are relevant for the anlysis of this function\r\n     *      \"modifierInvocations\": [], // Modifier invocation AST nodes that are applied on this function\r\n     *      \"localVariables\": [],      // Local variable declaration nodes\r\n     *      \"parameters\": []           // Parameter types of the function in order of definition\r\n     *      \"returns\": []              // list of return vars as { type: ... , name: ... }\r\n     *    }\r\n     *  ],\r\n     *  \"modifiers\": [],              // Modifiers definded by the contract, format similar to functions\r\n     *  \"inheritsFrom\": [],           // Names of contract this one inherits from in order of definition\r\n     *  \"stateVariables\": []          // AST nodes of all State variables\r\n     * }\r\n     *\r\n     * @relevantNodeFilter {ASTNode -> bool} function that selects relevant ast nodes for analysis on function level.\r\n     * @contractsOut {list} return list for high level AST view\r\n     * @return {ASTNode -> void} returns a function that can be used as visit function for static analysis modules, to build up a higher level AST view for further analysis.\r\n     */\r\n    build_visit(relevantNodeFilter) {\r\n        return (node) => {\r\n            if (node.nodeType === \"ContractDefinition\") {\r\n                this.setCurrentContract({\r\n                    node: node,\r\n                    functions: [],\r\n                    relevantNodes: [],\r\n                    modifiers: [],\r\n                    inheritsFrom: [],\r\n                    stateVariables: staticAnalysisCommon_1.getStateVariableDeclarationsFromContractNode(node)\r\n                });\r\n            }\r\n            else if (node.nodeType === \"InheritanceSpecifier\") {\r\n                const currentContract = this.getCurrentContract();\r\n                const inheritsFromName = staticAnalysisCommon_1.getInheritsFromName(node);\r\n                currentContract.inheritsFrom.push(inheritsFromName);\r\n            }\r\n            else if (node.nodeType === \"FunctionDefinition\") {\r\n                this.setCurrentFunction({\r\n                    node: node,\r\n                    relevantNodes: [],\r\n                    modifierInvocations: [],\r\n                    localVariables: this.getLocalVariables(node),\r\n                    parameters: this.getLocalParameters(node),\r\n                    returns: this.getReturnParameters(node)\r\n                });\r\n                // push back relevant nodes to their the current fn if any\r\n                this.getCurrentContract().relevantNodes.map((item) => {\r\n                    if (item.referencedDeclaration === node.id) {\r\n                        this.getCurrentFunction().relevantNodes.push(item.node);\r\n                    }\r\n                });\r\n            }\r\n            else if (node.nodeType === \"ModifierDefinition\") {\r\n                this.setCurrentModifier({\r\n                    node: node,\r\n                    relevantNodes: [],\r\n                    localVariables: this.getLocalVariables(node),\r\n                    parameters: this.getLocalParameters(node)\r\n                });\r\n            }\r\n            else if (node.nodeType === \"ModifierInvocation\") {\r\n                if (!this.isFunctionNotModifier)\r\n                    throw new Error('abstractAstView.js: Found modifier invocation outside of function scope.');\r\n                this.getCurrentFunction().modifierInvocations.push(node);\r\n            }\r\n            else if (relevantNodeFilter(node)) {\r\n                let scope = (this.isFunctionNotModifier) ? this.getCurrentFunction() : this.getCurrentModifier();\r\n                if (scope) {\r\n                    scope.relevantNodes.push(node);\r\n                }\r\n                else {\r\n                    scope = this.getCurrentContract(); // if we are not in a function scope, add the node to the contract scope\r\n                    if (scope && node.referencedDeclaration) {\r\n                        scope.relevantNodes.push({ referencedDeclaration: node.referencedDeclaration, node: node });\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n    build_report(wrap) {\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        return (compilationResult) => {\r\n            const solVersion = staticAnalysisCommon_1.getCompilerVersion(compilationResult.contracts);\r\n            this.resolveStateVariablesInHierarchy(this.contracts);\r\n            return wrap(this.contracts, this.multipleContractsWithSameName, solVersion);\r\n        };\r\n    }\r\n    resolveStateVariablesInHierarchy(contracts) {\r\n        contracts.map((c) => {\r\n            this.resolveStateVariablesInHierarchyForContract(c, contracts);\r\n        });\r\n    }\r\n    resolveStateVariablesInHierarchyForContract(currentContract, contracts) {\r\n        currentContract.inheritsFrom.map((inheritsFromName) => {\r\n            // add variables from inherited contracts\r\n            const inheritsFrom = contracts.find((contract) => staticAnalysisCommon_1.getContractName(contract.node) === inheritsFromName);\r\n            if (inheritsFrom) {\r\n                currentContract.stateVariables = currentContract.stateVariables.concat(inheritsFrom.stateVariables);\r\n            }\r\n            else {\r\n                console.log('abstractAstView.js: could not find contract defintion inherited from ' + inheritsFromName);\r\n            }\r\n        });\r\n    }\r\n    setCurrentContract(contract) {\r\n        const name = staticAnalysisCommon_1.getContractName(contract.node);\r\n        if (this.contracts.map((c) => staticAnalysisCommon_1.getContractName(c.node)).filter((n) => n === name).length > 0) {\r\n            console.log('abstractAstView.js: two or more contracts with the same name dectected, import aliases not supported at the moment');\r\n            this.multipleContractsWithSameName = true;\r\n        }\r\n        this.currentContractIndex = (this.contracts.push(contract) - 1);\r\n    }\r\n    setCurrentFunction(func) {\r\n        this.isFunctionNotModifier = true;\r\n        this.currentFunctionIndex = (this.getCurrentContract().functions.push(func) - 1);\r\n    }\r\n    setCurrentModifier(modi) {\r\n        this.isFunctionNotModifier = false;\r\n        this.currentModifierIndex = (this.getCurrentContract().modifiers.push(modi) - 1);\r\n    }\r\n    getCurrentContract() {\r\n        return this.contracts[this.currentContractIndex];\r\n    }\r\n    getCurrentFunction() {\r\n        return this.getCurrentContract().functions[this.currentFunctionIndex];\r\n    }\r\n    getCurrentModifier() {\r\n        return this.getCurrentContract().modifiers[this.currentModifierIndex];\r\n    }\r\n    getLocalParameters(funcNode) {\r\n        return staticAnalysisCommon_1.getFunctionOrModifierDefinitionParameterPart(funcNode).parameters.map(staticAnalysisCommon_1.getType);\r\n    }\r\n    getReturnParameters(funcNode) {\r\n        return this.getLocalVariables(staticAnalysisCommon_1.getFunctionDefinitionReturnParameterPart(funcNode)).map((n) => {\r\n            return {\r\n                type: staticAnalysisCommon_1.getType(n),\r\n                name: staticAnalysisCommon_1.getDeclaredVariableName(n)\r\n            };\r\n        });\r\n    }\r\n    getLocalVariables(funcNode) {\r\n        const locals = [];\r\n        new remix_astwalker_1.AstWalker().walkFull(funcNode, (node) => {\r\n            if (node.nodeType === \"VariableDeclaration\")\r\n                locals.push(node);\r\n            return true;\r\n        });\r\n        return locals;\r\n    }\r\n}\r\nexports.default = abstractAstView;\r\n//# sourceMappingURL=abstractAstView.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n  * Should be used to categorize different modules, main reason is to give users feedback if the modules\r\n  * Produce exact results or have false positives and negatives in them\r\n  * A further category could be approximate if some form of approximation is used\r\n*/\r\nexports.default = {\r\n    EXACT: { hasFalsePositives: false, hasFalseNegatives: false, id: 'EXACT' },\r\n    HEURISTIC: { hasFalsePositives: true, hasFalseNegatives: true, id: 'HEURI' }\r\n};\r\n//# sourceMappingURL=algorithmCategories.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nclass assignAndCompare {\r\n    constructor() {\r\n        this.warningNodes = [];\r\n        this.name = `Result not used: `;\r\n        this.description = `The result of an operation not used`;\r\n        this.category = categories_1.default.MISC;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if ((node === null || node === void 0 ? void 0 : node.nodeType) && staticAnalysisCommon_1.isSubScopeWithTopLevelUnAssignedBinOp(node))\r\n            staticAnalysisCommon_1.getUnAssignedTopLevelBinOps(node).forEach((n) => this.warningNodes.push(n));\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        return this.warningNodes.map((item) => {\r\n            return {\r\n                warning: 'A binary operation yields a value that is not used further. This is often caused by confusing assignment (=) and comparison (==).',\r\n                location: item.src\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = assignAndCompare;\r\n//# sourceMappingURL=assignAndCompare.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nclass blockBlockhash {\r\n    constructor() {\r\n        this.warningNodes = [];\r\n        this.name = `Block hash: `;\r\n        this.description = `Can be influenced by miners`;\r\n        this.category = categories_1.default.SECURITY;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (node.nodeType === 'FunctionCall' && staticAnalysisCommon_1.isBlockBlockHashAccess(node))\r\n            this.warningNodes.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        return this.warningNodes.map((item) => {\r\n            return {\r\n                warning: `Use of \"blockhash\": \"blockhash(uint blockNumber)\" is used to access the last 256 block hashes. \r\n                  A miner computes the block hash by \"summing up\" the information in the current block mined. \r\n                  By \"summing up\" the information cleverly, a miner can try to influence the outcome of a transaction in the current block. \r\n                  This is especially easy if there are only a small number of equally likely outcomes.`,\r\n                location: item.src\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = blockBlockhash;\r\n//# sourceMappingURL=blockBlockhash.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nclass blockTimestamp {\r\n    constructor() {\r\n        this.warningNowNodes = [];\r\n        this.warningblockTimestampNodes = [];\r\n        this.name = `Block timestamp: `;\r\n        this.description = `Can be influenced by miners`;\r\n        this.category = categories_1.default.SECURITY;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (node.nodeType === \"Identifier\" && staticAnalysisCommon_1.isNowAccess(node))\r\n            this.warningNowNodes.push(node);\r\n        else if (node.nodeType === \"MemberAccess\" && staticAnalysisCommon_1.isBlockTimestampAccess(node))\r\n            this.warningblockTimestampNodes.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.warningNowNodes.map((item, i) => {\r\n            return {\r\n                warning: `Use of \"now\": \"now\" does not mean current time. \"now\" is an alias for \"block.timestamp\". \r\n                  \"block.timestamp\" can be influenced by miners to a certain degree, be careful.`,\r\n                location: item.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/units-and-global-variables.html?highlight=block.timestamp#block-and-transaction-properties`\r\n            };\r\n        }).concat(this.warningblockTimestampNodes.map((item) => {\r\n            return {\r\n                warning: `Use of \"block.timestamp\": \"block.timestamp\" can be influenced by miners to a certain degree. \r\n                  That means that a miner can \"choose\" the block.timestamp, to a certain degree, to change the outcome of a transaction in the mined block.`,\r\n                location: item.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/units-and-global-variables.html?highlight=block.timestamp#block-and-transaction-properties`\r\n            };\r\n        }));\r\n    }\r\n}\r\nexports.default = blockTimestamp;\r\n//# sourceMappingURL=blockTimestamp.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = {\r\n    SECURITY: { displayName: 'Security', id: 'SEC' },\r\n    GAS: { displayName: 'Gas & Economy', id: 'GAS' },\r\n    MISC: { displayName: 'Miscellaneous', id: 'MISC' },\r\n    ERC: { displayName: 'ERC', id: 'ERC' }\r\n};\r\n//# sourceMappingURL=categories.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst functionCallGraph_1 = require(\"./functionCallGraph\");\r\nconst abstractAstView_1 = tslib_1.__importDefault(require(\"./abstractAstView\"));\r\nclass checksEffectsInteraction {\r\n    constructor() {\r\n        this.name = `Check-effects-interaction: `;\r\n        this.description = `Potential reentrancy bugs`;\r\n        this.category = categories_1.default.SECURITY;\r\n        this.algorithm = algorithmCategories_1.default.HEURISTIC;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n        this.abstractAst = new abstractAstView_1.default();\r\n        this.visit = this.abstractAst.build_visit((node) => (node.nodeType === 'FunctionCall' && (staticAnalysisCommon_1.isInteraction(node) || staticAnalysisCommon_1.isLocalCallGraphRelevantNode(node))) ||\r\n            ((node.nodeType === 'Assignment' || node.nodeType === 'UnaryOperation' || node.nodeType === 'InlineAssembly') && staticAnalysisCommon_1.isEffect(node)));\r\n        this.report = this.abstractAst.build_report(this._report.bind(this));\r\n    }\r\n    _report(contracts, multipleContractsWithSameName, version) {\r\n        const warnings = [];\r\n        const hasModifiers = contracts.some((item) => item.modifiers.length > 0);\r\n        const callGraph = functionCallGraph_1.buildGlobalFuncCallGraph(contracts);\r\n        contracts.forEach((contract) => {\r\n            contract.functions.forEach((func) => {\r\n                func['changesState'] = this.checkIfChangesState(staticAnalysisCommon_1.getFullQuallyfiedFuncDefinitionIdent(contract.node, func.node, func.parameters), this.getContext(callGraph, contract, func));\r\n            });\r\n            contract.functions.forEach((func) => {\r\n                if (this.isPotentialVulnerableFunction(func, this.getContext(callGraph, contract, func))) {\r\n                    const funcName = staticAnalysisCommon_1.getFullQuallyfiedFuncDefinitionIdent(contract.node, func.node, func.parameters);\r\n                    let comments = (hasModifiers) ? 'Note: Modifiers are currently not considered by this static analysis.' : '';\r\n                    comments += (multipleContractsWithSameName) ? 'Note: Import aliases are currently not supported by this static analysis.' : '';\r\n                    warnings.push({\r\n                        warning: `Potential violation of Checks-Effects-Interaction pattern in ${funcName}: Could potentially lead to re-entrancy vulnerability. ${comments}`,\r\n                        location: func.node['src'],\r\n                        more: `https://solidity.readthedocs.io/en/${version}/security-considerations.html#re-entrancy`\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        return warnings;\r\n    }\r\n    getContext(callGraph, currentContract, func) {\r\n        return { callGraph: callGraph, currentContract: currentContract, stateVariables: this.getStateVariables(currentContract, func) };\r\n    }\r\n    getStateVariables(contract, func) {\r\n        return contract.stateVariables.concat(func.localVariables.filter(staticAnalysisCommon_1.isStorageVariableDeclaration));\r\n    }\r\n    isPotentialVulnerableFunction(func, context) {\r\n        let isPotentialVulnerable = false;\r\n        let interaction = false;\r\n        func.relevantNodes.forEach((node) => {\r\n            if (staticAnalysisCommon_1.isInteraction(node)) {\r\n                interaction = true;\r\n            }\r\n            else if (interaction && (staticAnalysisCommon_1.isWriteOnStateVariable(node, context.stateVariables) || this.isLocalCallWithStateChange(node, context))) {\r\n                isPotentialVulnerable = true;\r\n            }\r\n        });\r\n        return isPotentialVulnerable;\r\n    }\r\n    isLocalCallWithStateChange(node, context) {\r\n        if (staticAnalysisCommon_1.isLocalCallGraphRelevantNode(node)) {\r\n            const func = functionCallGraph_1.resolveCallGraphSymbol(context.callGraph, staticAnalysisCommon_1.getFullQualifiedFunctionCallIdent(context.currentContract.node, node));\r\n            return !func || (func && func.node['changesState']);\r\n        }\r\n        return false;\r\n    }\r\n    checkIfChangesState(startFuncName, context) {\r\n        return functionCallGraph_1.analyseCallGraph(context.callGraph, startFuncName, context, (node, context) => staticAnalysisCommon_1.isWriteOnStateVariable(node, context.stateVariables));\r\n    }\r\n}\r\nexports.default = checksEffectsInteraction;\r\n//# sourceMappingURL=checksEffectsInteraction.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst functionCallGraph_1 = require(\"./functionCallGraph\");\r\nconst abstractAstView_1 = tslib_1.__importDefault(require(\"./abstractAstView\"));\r\nclass constantFunctions {\r\n    constructor() {\r\n        this.name = `Constant/View/Pure functions: `;\r\n        this.description = `Potentially constant/view/pure functions`;\r\n        this.category = categories_1.default.MISC;\r\n        this.algorithm = algorithmCategories_1.default.HEURISTIC;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n        this.abstractAst = new abstractAstView_1.default();\r\n        this.visit = this.abstractAst.build_visit((node) => staticAnalysisCommon_1.isLowLevelCall(node) ||\r\n            staticAnalysisCommon_1.isTransfer(node) ||\r\n            staticAnalysisCommon_1.isExternalDirectCall(node) ||\r\n            staticAnalysisCommon_1.isEffect(node) ||\r\n            staticAnalysisCommon_1.isLocalCallGraphRelevantNode(node) ||\r\n            node.nodeType === \"InlineAssembly\" ||\r\n            node.nodeType === \"NewExpression\" ||\r\n            staticAnalysisCommon_1.isSelfdestructCall(node) ||\r\n            staticAnalysisCommon_1.isDeleteUnaryOperation(node));\r\n        this.report = this.abstractAst.build_report(this._report.bind(this));\r\n    }\r\n    _report(contracts, multipleContractsWithSameName, version) {\r\n        const warnings = [];\r\n        const hasModifiers = contracts.some((item) => item.modifiers.length > 0);\r\n        const callGraph = functionCallGraph_1.buildGlobalFuncCallGraph(contracts);\r\n        contracts.forEach((contract) => {\r\n            contract.functions.forEach((func) => {\r\n                if (staticAnalysisCommon_1.isPayableFunction(func.node) || staticAnalysisCommon_1.isConstructor(func.node)) {\r\n                    func['potentiallyshouldBeConst'] = false;\r\n                }\r\n                else {\r\n                    func['potentiallyshouldBeConst'] = this.checkIfShouldBeConstant(staticAnalysisCommon_1.getFullQuallyfiedFuncDefinitionIdent(contract.node, func.node, func.parameters), this.getContext(callGraph, contract, func));\r\n                }\r\n            });\r\n            contract.functions.filter((func) => staticAnalysisCommon_1.hasFunctionBody(func.node)).forEach((func) => {\r\n                if (staticAnalysisCommon_1.isConstantFunction(func.node) !== func['potentiallyshouldBeConst']) {\r\n                    const funcName = staticAnalysisCommon_1.getFullQuallyfiedFuncDefinitionIdent(contract.node, func.node, func.parameters);\r\n                    let comments = (hasModifiers) ? 'Note: Modifiers are currently not considered by this static analysis.' : '';\r\n                    comments += (multipleContractsWithSameName) ? 'Note: Import aliases are currently not supported by this static analysis.' : '';\r\n                    if (func['potentiallyshouldBeConst']) {\r\n                        warnings.push({\r\n                            warning: `${funcName} : Potentially should be constant/view/pure but is not. ${comments}`,\r\n                            location: func.node['src'],\r\n                            more: `https://solidity.readthedocs.io/en/${version}/contracts.html#view-functions`\r\n                        });\r\n                    }\r\n                    else {\r\n                        warnings.push({\r\n                            warning: `${funcName} : Is constant but potentially should not be. ${comments}`,\r\n                            location: func.node['src'],\r\n                            more: `https://solidity.readthedocs.io/en/${version}/contracts.html#view-functions`\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        return warnings;\r\n    }\r\n    getContext(callGraph, currentContract, func) {\r\n        return { callGraph: callGraph, currentContract: currentContract, stateVariables: this.getStateVariables(currentContract, func) };\r\n    }\r\n    getStateVariables(contract, func) {\r\n        return contract.stateVariables.concat(func.localVariables.filter(staticAnalysisCommon_1.isStorageVariableDeclaration));\r\n    }\r\n    checkIfShouldBeConstant(startFuncName, context) {\r\n        return !functionCallGraph_1.analyseCallGraph(context.callGraph, startFuncName, context, this.isConstBreaker.bind(this));\r\n    }\r\n    isConstBreaker(node, context) {\r\n        return staticAnalysisCommon_1.isWriteOnStateVariable(node, context.stateVariables) ||\r\n            staticAnalysisCommon_1.isLowLevelCall(node) ||\r\n            staticAnalysisCommon_1.isTransfer(node) ||\r\n            this.isCallOnNonConstExternalInterfaceFunction(node, context) ||\r\n            staticAnalysisCommon_1.isCallToNonConstLocalFunction(node) ||\r\n            node.nodeType === \"InlineAssembly\" ||\r\n            node.nodeType === \"NewExpression\" ||\r\n            staticAnalysisCommon_1.isSelfdestructCall(node) ||\r\n            staticAnalysisCommon_1.isDeleteUnaryOperation(node);\r\n    }\r\n    isCallOnNonConstExternalInterfaceFunction(node, context) {\r\n        if (staticAnalysisCommon_1.isExternalDirectCall(node)) {\r\n            const func = functionCallGraph_1.resolveCallGraphSymbol(context.callGraph, staticAnalysisCommon_1.getFullQualifiedFunctionCallIdent(context.currentContract.node, node));\r\n            return !func || (func && !staticAnalysisCommon_1.isConstantFunction(func.node.node));\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.default = constantFunctions;\r\n//# sourceMappingURL=constantFunctions.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nclass deleteDynamicArrays {\r\n    constructor() {\r\n        this.rel = [];\r\n        this.name = `Delete dynamic array: `;\r\n        this.description = `Use require/assert to ensure complete deletion`;\r\n        this.category = categories_1.default.GAS;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (staticAnalysisCommon_1.isDeleteOfDynamicArray(node))\r\n            this.rel.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.rel.map((node) => {\r\n            return {\r\n                warning: `The \"delete\" operation when applied to a dynamically sized array in Solidity generates code to delete each of the elements contained. If the array is large, this operation can surpass the block gas limit and raise an OOG exception. Also nested dynamically sized objects can produce the same results.`,\r\n                location: node.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/types.html#delete`\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = deleteDynamicArrays;\r\n//# sourceMappingURL=deleteDynamicArrays.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nclass deleteFromDynamicArray {\r\n    constructor() {\r\n        this.relevantNodes = [];\r\n        this.name = `Delete from dynamic array: `;\r\n        this.description = `'delete' leaves a gap in array`;\r\n        this.category = categories_1.default.MISC;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (staticAnalysisCommon_1.isDeleteFromDynamicArray(node) && !staticAnalysisCommon_1.isMappingIndexAccess(node.subExpression))\r\n            this.relevantNodes.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        return this.relevantNodes.map((node) => {\r\n            return {\r\n                warning: `Using \"delete\" on an array leaves a gap. The length of the array remains the same. If you want to remove the empty position you need to shift items manually and update the \"length\" property.`,\r\n                location: node.src,\r\n                more: 'https://github.com/miguelmota/solidity-idiosyncrasies#examples'\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = deleteFromDynamicArray;\r\n//# sourceMappingURL=deleteFromDynamicArray.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst abstractAstView_1 = tslib_1.__importDefault(require(\"./abstractAstView\"));\r\nclass erc20Decimals {\r\n    constructor() {\r\n        this.name = `ERC20: `;\r\n        this.description = `'decimals' should be 'uint8'`;\r\n        this.category = categories_1.default.ERC;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n        this.abstractAst = new abstractAstView_1.default();\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        this.visit = this.abstractAst.build_visit((node) => false);\r\n        this.report = this.abstractAst.build_report(this._report.bind(this));\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    _report(contracts, multipleContractsWithSameName) {\r\n        const warnings = [];\r\n        contracts.forEach((contract) => {\r\n            const contractAbiSignatures = contract.functions.map((f) => staticAnalysisCommon_1.helpers.buildAbiSignature(staticAnalysisCommon_1.getFunctionDefinitionName(f.node), f.parameters));\r\n            if (this.isERC20(contractAbiSignatures)) {\r\n                const decimalsVar = contract.stateVariables.filter((stateVar) => staticAnalysisCommon_1.getDeclaredVariableName(stateVar) === 'decimals' && (staticAnalysisCommon_1.getDeclaredVariableType(stateVar) !== 'uint8' || stateVar.visibility !== 'public'));\r\n                const decimalsFun = contract.functions.filter((f) => staticAnalysisCommon_1.getFunctionDefinitionName(f.node) === 'decimals' &&\r\n                    ((f.returns.length === 0 || f.returns.length > 1) ||\r\n                        (f.returns.length === 1 && (f.returns[0].type !== 'uint8' || f.node.visibility !== 'public'))));\r\n                if (decimalsVar.length > 0) {\r\n                    for (const node of decimalsVar) {\r\n                        warnings.push({\r\n                            warning: `ERC20 contract's \"decimals\" variable should be \"uint8\" type`,\r\n                            location: node.src,\r\n                            more: 'https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md#decimals'\r\n                        });\r\n                    }\r\n                }\r\n                else if (decimalsFun.length > 0) {\r\n                    for (const fn of decimalsFun) {\r\n                        warnings.push({\r\n                            warning: `ERC20 contract's \"decimals\" function should have \"uint8\" as return type`,\r\n                            location: fn.node.src,\r\n                            more: 'https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md#decimals'\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return warnings;\r\n    }\r\n    isERC20(funSignatures) {\r\n        return funSignatures.includes('totalSupply()') &&\r\n            funSignatures.includes('balanceOf(address)') &&\r\n            funSignatures.includes('transfer(address,uint256)') &&\r\n            funSignatures.includes('transferFrom(address,address,uint256)') &&\r\n            funSignatures.includes('approve(address,uint256)') &&\r\n            funSignatures.includes('allowance(address,address)');\r\n    }\r\n}\r\nexports.default = erc20Decimals;\r\n//# sourceMappingURL=erc20Decimals.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nclass etherTransferInLoop {\r\n    constructor() {\r\n        this.relevantNodes = [];\r\n        this.name = `Ether transfer in loop: `;\r\n        this.description = `Transferring Ether in a for/while/do-while loop`;\r\n        this.category = categories_1.default.GAS;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        let transferNodes = [];\r\n        if (staticAnalysisCommon_1.isLoop(node)) {\r\n            if (node.body && node.body.nodeType === 'Block')\r\n                transferNodes = node.body.statements.filter(child => (child.nodeType === 'ExpressionStatement' &&\r\n                    child.expression.nodeType === 'FunctionCall' && staticAnalysisCommon_1.isTransfer(child.expression.expression)));\r\n            // When loop body is described without braces\r\n            else if (node.body && node.body.nodeType === 'ExpressionStatement' && node.body.expression.nodeType === 'FunctionCall' && staticAnalysisCommon_1.isTransfer(node.body.expression.expression))\r\n                transferNodes.push(node.body);\r\n            if (transferNodes.length > 0) {\r\n                this.relevantNodes.push(...transferNodes);\r\n            }\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.relevantNodes.map((node) => {\r\n            return {\r\n                warning: `Ether payout should not be done in a loop: Due to the block gas limit, transactions can only consume a certain amount of gas. The number of iterations in a loop can grow beyond the block gas limit which can cause the complete contract to be stalled at a certain point. If required then make sure that number of iterations are low and you trust each address involved.`,\r\n                location: node.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/security-considerations.html#gas-limit-and-loops`\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = etherTransferInLoop;\r\n//# sourceMappingURL=etherTransferInLoop.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nclass forLoopIteratesOverDynamicArray {\r\n    constructor() {\r\n        this.relevantNodes = [];\r\n        this.name = `For loop over dynamic array: `;\r\n        this.description = `Iterations depend on dynamic array's size`;\r\n        this.category = categories_1.default.GAS;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        const { condition } = node;\r\n        // Check if condition is `i < array.length - 1`\r\n        if ((condition && condition.nodeType === \"BinaryOperation\" && condition.rightExpression.nodeType === \"BinaryOperation\" && staticAnalysisCommon_1.isDynamicArrayLengthAccess(condition.rightExpression.leftExpression)) ||\r\n            // or condition is `i < array.length`\r\n            (condition && condition.nodeType === \"BinaryOperation\" && staticAnalysisCommon_1.isDynamicArrayLengthAccess(condition.rightExpression))) {\r\n            this.relevantNodes.push(node);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.relevantNodes.map((node) => {\r\n            return {\r\n                warning: `Loops that do not have a fixed number of iterations, for example, loops that depend on storage values, have to be used carefully. Due to the block gas limit, transactions can only consume a certain amount of gas. The number of iterations in a loop can grow beyond the block gas limit which can cause the complete contract to be stalled at a certain point. \\n Additionally, using unbounded loops incurs in a lot of avoidable gas costs. Carefully test how many items at maximum you can pass to such functions to make it successful.`,\r\n                location: node.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/security-considerations.html#gas-limit-and-loops`\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = forLoopIteratesOverDynamicArray;\r\n//# sourceMappingURL=forLoopIteratesOverDynamicArray.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nfunction buildLocalFuncCallGraphInternal(functions, nodeFilter, extractNodeIdent, extractFuncDefIdent) {\r\n    const callGraph = {};\r\n    functions.forEach((func) => {\r\n        const calls = func.relevantNodes\r\n            .filter(nodeFilter)\r\n            .map(extractNodeIdent)\r\n            .filter((name) => name !== extractFuncDefIdent(func)); // filter self recursive call\r\n        callGraph[extractFuncDefIdent(func)] = { node: func, calls: calls };\r\n    });\r\n    return callGraph;\r\n}\r\n/**\r\n * Builds a function call graph for the current contracts.\r\n * Example Contract call graph:\r\n *\r\n * {\r\n *  \"KingOfTheEtherThrone\": {\r\n *    \"contracts\": {...},                                        // Contract node as defined in abstractAstView.js\r\n *    \"functions\": {\r\n *      \"KingOfTheEtherThrone.claimThrone(string memory)\": {    // function in KingOfEtherThrone\r\n *        \"node\": {...},                                        // function node as defined in abstractAstView.js\r\n *        \"calls\": {                                            // list of full qualified function names which are called form this function\r\n *        }\r\n *      }\r\n *    }\r\n *  },\r\n *  \"foo\": {\r\n *    \"contract\": {...},           // Contract node as definded in abstractAstView.js\r\n *    \"functions\": {}             // map from full qualified function name to func node\r\n *  }\r\n * }\r\n *\r\n * @contracts {list contracts} Expects as input the contract structure defined in abstractAstView.js\r\n * @return {map (string -> Contract Call Graph)} returns map from contract name to contract call graph\r\n */\r\nfunction buildGlobalFuncCallGraph(contracts) {\r\n    const callGraph = {};\r\n    contracts.forEach((contract) => {\r\n        const filterNodes = (node) => { return staticAnalysisCommon_1.isLocalCallGraphRelevantNode(node) || staticAnalysisCommon_1.isExternalDirectCall(node); };\r\n        const getNodeIdent = (node) => { return staticAnalysisCommon_1.getFullQualifiedFunctionCallIdent(contract.node, node); };\r\n        const getFunDefIdent = (funcDef) => { return staticAnalysisCommon_1.getFullQuallyfiedFuncDefinitionIdent(contract.node, funcDef.node, funcDef.parameters); };\r\n        callGraph[staticAnalysisCommon_1.getContractName(contract.node)] = { contract: contract, functions: buildLocalFuncCallGraphInternal(contract.functions, filterNodes, getNodeIdent, getFunDefIdent) };\r\n    });\r\n    return callGraph;\r\n}\r\nexports.buildGlobalFuncCallGraph = buildGlobalFuncCallGraph;\r\n/**\r\n * Walks through the call graph from a defined starting function, true if nodeCheck holds for every relevant node in the callgraph\r\n * @callGraph {callGraph} As returned by buildGlobalFuncCallGraph\r\n * @funcName {string} full qualified name of the starting function\r\n * @context {Object} provides additional context information that can be used by the nodeCheck function\r\n * @nodeCheck {(ASTNode, context) -> bool} applied on every relevant node in the call graph\r\n * @return {bool} returns map from contract name to contract call graph\r\n */\r\nfunction analyseCallGraph(callGraph, funcName, context, nodeCheck) {\r\n    return analyseCallGraphInternal(callGraph, funcName, context, (a, b) => a || b, nodeCheck, {});\r\n}\r\nexports.analyseCallGraph = analyseCallGraph;\r\nfunction analyseCallGraphInternal(callGraph, funcName, context, combinator, nodeCheck, visited) {\r\n    const current = resolveCallGraphSymbol(callGraph, funcName);\r\n    if (current === undefined || visited[funcName] === true)\r\n        return true;\r\n    visited[funcName] = true;\r\n    return combinator(current.node.relevantNodes.reduce((acc, val) => combinator(acc, nodeCheck(val, context)), false), current.calls.reduce((acc, val) => combinator(acc, analyseCallGraphInternal(callGraph, val, context, combinator, nodeCheck, visited)), false));\r\n}\r\nfunction resolveCallGraphSymbol(callGraph, funcName) {\r\n    return resolveCallGraphSymbolInternal(callGraph, funcName, false);\r\n}\r\nexports.resolveCallGraphSymbol = resolveCallGraphSymbol;\r\nfunction resolveCallGraphSymbolInternal(callGraph, funcName, silent) {\r\n    let current = null;\r\n    if (funcName.includes('.')) {\r\n        const parts = funcName.split('.');\r\n        const contractPart = parts[0];\r\n        const functionPart = parts[1];\r\n        const currentContract = callGraph[contractPart];\r\n        if (!(currentContract === undefined)) {\r\n            current = currentContract.functions[funcName];\r\n            // resolve inheritance hierarchy\r\n            if (current === undefined) {\r\n                // resolve inheritance lookup in linearized fashion\r\n                const inheritsFromNames = currentContract.contract.inheritsFrom.reverse();\r\n                for (let i = 0; i < inheritsFromNames.length; i++) {\r\n                    const res = resolveCallGraphSymbolInternal(callGraph, inheritsFromNames[i] + '.' + functionPart, true);\r\n                    if (!(res === undefined))\r\n                        return res;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!silent)\r\n                console.log(`static analysis functionCallGraph.js: Contract ${contractPart} not found in function call graph.`);\r\n        }\r\n    }\r\n    else {\r\n        throw new Error('functionCallGraph.js: function does not have full qualified name.');\r\n    }\r\n    if (current === undefined && !silent)\r\n        console.log(`static analysis functionCallGraph.js: ${funcName} not found in function call graph.`);\r\n    if (current !== null)\r\n        return current;\r\n}\r\n//# sourceMappingURL=functionCallGraph.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nclass gasCosts {\r\n    constructor() {\r\n        this.name = `Gas costs: `;\r\n        this.description = `Too high gas requirement of functions`;\r\n        this.category = categories_1.default.GAS;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n        this.warningNodes = [];\r\n    }\r\n    visit(node) {\r\n        if ((node.nodeType === 'FunctionDefinition' && node.kind !== 'constructor' && node.implemented) ||\r\n            (node.nodeType === 'VariableDeclaration' && staticAnalysisCommon_1.isVariableTurnedIntoGetter(node)))\r\n            this.warningNodes.push(node);\r\n    }\r\n    report(compilationResults) {\r\n        const report = [];\r\n        const methodsWithSignature = this.warningNodes.map(node => {\r\n            let signature;\r\n            if (node.nodeType === 'FunctionDefinition') {\r\n                const functionName = staticAnalysisCommon_1.getFunctionDefinitionName(node);\r\n                signature = staticAnalysisCommon_1.helpers.buildAbiSignature(functionName, staticAnalysisCommon_1.getMethodParamsSplittedTypeDesc(node, compilationResults.contracts));\r\n            }\r\n            else\r\n                signature = node.name + '()';\r\n            return {\r\n                name: node.name,\r\n                src: node.src,\r\n                signature: signature\r\n            };\r\n        });\r\n        for (const method of methodsWithSignature) {\r\n            for (const filename in compilationResults.contracts) {\r\n                for (const contractName in compilationResults.contracts[filename]) {\r\n                    const contract = compilationResults.contracts[filename][contractName];\r\n                    const methodGas = this.checkMethodGas(contract, method.signature);\r\n                    if (methodGas && methodGas.isInfinite) {\r\n                        if (methodGas.isFallback) {\r\n                            report.push({\r\n                                warning: `Fallback function of contract ${contractName} requires too much gas (${methodGas.msg}). \r\n                If the fallback function requires more than 2300 gas, the contract cannot receive Ether.`,\r\n                                location: method.src\r\n                            });\r\n                        }\r\n                        else {\r\n                            report.push({\r\n                                warning: `Gas requirement of function ${contractName}.${method.name} ${methodGas.msg}: \r\n                If the gas requirement of a function is higher than the block gas limit, it cannot be executed.\r\n                Please avoid loops in your functions or actions that modify large areas of storage\r\n                (this includes clearing or copying arrays in storage)`,\r\n                                location: method.src\r\n                            });\r\n                        }\r\n                    }\r\n                    else\r\n                        continue;\r\n                }\r\n            }\r\n        }\r\n        return report;\r\n    }\r\n    checkMethodGas(contract, methodSignature) {\r\n        if (contract.evm && contract.evm.gasEstimates && contract.evm.gasEstimates.external) {\r\n            if (methodSignature === '()') {\r\n                const fallback = contract.evm.gasEstimates.external[''];\r\n                if (fallback !== undefined && (fallback === null || parseInt(fallback) >= 2100 || fallback === 'infinite')) {\r\n                    return {\r\n                        isInfinite: true,\r\n                        isFallback: true,\r\n                        msg: fallback\r\n                    };\r\n                }\r\n            }\r\n            else {\r\n                const gas = contract.evm.gasEstimates.external[methodSignature];\r\n                const gasString = gas === null ? 'unknown or not constant' : 'is ' + gas;\r\n                if (gas === null || parseInt(gas) >= 3000000 || gas === 'infinite') {\r\n                    return {\r\n                        isInfinite: true,\r\n                        isFallback: false,\r\n                        msg: gasString\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.default = gasCosts;\r\n//# sourceMappingURL=gasCosts.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nclass guardConditions {\r\n    constructor() {\r\n        this.guards = [];\r\n        this.name = `Guard conditions: `;\r\n        this.description = `Ensure appropriate use of require/assert`;\r\n        this.category = categories_1.default.MISC;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (staticAnalysisCommon_1.isRequireCall(node) || staticAnalysisCommon_1.isAssertCall(node))\r\n            this.guards.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.guards.map((node) => {\r\n            return {\r\n                warning: `Use \"assert(x)\" if you never ever want x to be false, not in any circumstance (apart from a bug in your code). Use \"require(x)\" if x can be false, due to e.g. invalid input or a failing external component.`,\r\n                location: node.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/control-structures.html#error-handling-assert-require-revert-and-exceptions`\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = guardConditions;\r\n//# sourceMappingURL=guardConditions.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nclass inlineAssembly {\r\n    constructor() {\r\n        this.inlineAssNodes = [];\r\n        this.name = `Inline assembly: `;\r\n        this.description = `Inline assembly used`;\r\n        this.category = categories_1.default.SECURITY;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (node.nodeType === 'InlineAssembly')\r\n            this.inlineAssNodes.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.inlineAssNodes.map((node) => {\r\n            return {\r\n                warning: `The Contract uses inline assembly, this is only advised in rare cases. \r\n                  Additionally static analysis modules do not parse inline Assembly, this can lead to wrong analysis results.`,\r\n                location: node.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/assembly.html`\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = inlineAssembly;\r\n//# sourceMappingURL=inlineAssembly.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nclass intDivisionTruncate {\r\n    constructor() {\r\n        this.warningNodes = [];\r\n        this.name = `Data truncated: `;\r\n        this.description = `Division on int/uint values truncates the result`;\r\n        this.category = categories_1.default.MISC;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (staticAnalysisCommon_1.isIntDivision(node))\r\n            this.warningNodes.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        return this.warningNodes.map((item) => {\r\n            return {\r\n                warning: 'Division of integer values yields an integer value again. That means e.g. 10 / 100 = 0 instead of 0.1 since the result is an integer again. This does not hold for division of (only) literal values since those yield rational constants.',\r\n                location: item.src\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = intDivisionTruncate;\r\n//# sourceMappingURL=intDivisionTruncate.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst txOrigin_1 = tslib_1.__importDefault(require(\"./txOrigin\"));\r\nconst gasCosts_1 = tslib_1.__importDefault(require(\"./gasCosts\"));\r\nconst thisLocal_1 = tslib_1.__importDefault(require(\"./thisLocal\"));\r\nconst checksEffectsInteraction_1 = tslib_1.__importDefault(require(\"./checksEffectsInteraction\"));\r\nconst constantFunctions_1 = tslib_1.__importDefault(require(\"./constantFunctions\"));\r\nconst similarVariableNames_1 = tslib_1.__importDefault(require(\"./similarVariableNames\"));\r\nconst inlineAssembly_1 = tslib_1.__importDefault(require(\"./inlineAssembly\"));\r\nconst blockTimestamp_1 = tslib_1.__importDefault(require(\"./blockTimestamp\"));\r\nconst lowLevelCalls_1 = tslib_1.__importDefault(require(\"./lowLevelCalls\"));\r\nconst blockBlockhash_1 = tslib_1.__importDefault(require(\"./blockBlockhash\"));\r\nconst noReturn_1 = tslib_1.__importDefault(require(\"./noReturn\"));\r\nconst selfdestruct_1 = tslib_1.__importDefault(require(\"./selfdestruct\"));\r\nconst guardConditions_1 = tslib_1.__importDefault(require(\"./guardConditions\"));\r\nconst deleteDynamicArrays_1 = tslib_1.__importDefault(require(\"./deleteDynamicArrays\"));\r\nconst assignAndCompare_1 = tslib_1.__importDefault(require(\"./assignAndCompare\"));\r\nconst erc20Decimals_1 = tslib_1.__importDefault(require(\"./erc20Decimals\"));\r\nconst stringBytesLength_1 = tslib_1.__importDefault(require(\"./stringBytesLength\"));\r\nconst deleteFromDynamicArray_1 = tslib_1.__importDefault(require(\"./deleteFromDynamicArray\"));\r\nconst forLoopIteratesOverDynamicArray_1 = tslib_1.__importDefault(require(\"./forLoopIteratesOverDynamicArray\"));\r\nconst etherTransferInLoop_1 = tslib_1.__importDefault(require(\"./etherTransferInLoop\"));\r\nconst intDivisionTruncate_1 = tslib_1.__importDefault(require(\"./intDivisionTruncate\"));\r\nexports.default = [\r\n    txOrigin_1.default,\r\n    gasCosts_1.default,\r\n    thisLocal_1.default,\r\n    checksEffectsInteraction_1.default,\r\n    erc20Decimals_1.default,\r\n    constantFunctions_1.default,\r\n    similarVariableNames_1.default,\r\n    inlineAssembly_1.default,\r\n    blockTimestamp_1.default,\r\n    lowLevelCalls_1.default,\r\n    blockBlockhash_1.default,\r\n    noReturn_1.default,\r\n    selfdestruct_1.default,\r\n    guardConditions_1.default,\r\n    deleteDynamicArrays_1.default,\r\n    assignAndCompare_1.default,\r\n    stringBytesLength_1.default,\r\n    deleteFromDynamicArray_1.default,\r\n    forLoopIteratesOverDynamicArray_1.default,\r\n    etherTransferInLoop_1.default,\r\n    intDivisionTruncate_1.default\r\n];\r\n//# sourceMappingURL=list.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nclass lowLevelCalls {\r\n    constructor() {\r\n        this.llcNodes = [];\r\n        this.name = `Low level calls: `;\r\n        this.description = `Should only be used by experienced devs`;\r\n        this.category = categories_1.default.SECURITY;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (staticAnalysisCommon_1.isLLCall(node)) {\r\n            this.llcNodes.push({ node: node, type: staticAnalysisCommon_1.lowLevelCallTypes.CALL });\r\n        }\r\n        else if (staticAnalysisCommon_1.isLLDelegatecall(node)) {\r\n            this.llcNodes.push({ node: node, type: staticAnalysisCommon_1.lowLevelCallTypes.DELEGATECALL });\r\n        }\r\n        else if (staticAnalysisCommon_1.isLLSend(node)) {\r\n            this.llcNodes.push({ node: node, type: staticAnalysisCommon_1.lowLevelCallTypes.SEND });\r\n        }\r\n        else if (staticAnalysisCommon_1.isLLDelegatecall04(node)) {\r\n            this.llcNodes.push({ node: node, type: staticAnalysisCommon_1.lowLevelCallTypes.DELEGATECALL });\r\n        }\r\n        else if (staticAnalysisCommon_1.isLLSend04(node)) {\r\n            this.llcNodes.push({ node: node, type: staticAnalysisCommon_1.lowLevelCallTypes.SEND });\r\n        }\r\n        else if (staticAnalysisCommon_1.isLLCall04(node)) {\r\n            this.llcNodes.push({ node: node, type: staticAnalysisCommon_1.lowLevelCallTypes.CALL });\r\n        }\r\n        else if (staticAnalysisCommon_1.isLLCallcode(node)) {\r\n            this.llcNodes.push({ node: node, type: staticAnalysisCommon_1.lowLevelCallTypes.CALLCODE });\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.llcNodes.map((item, i) => {\r\n            let text = '';\r\n            let morehref = '';\r\n            switch (item.type) {\r\n                case staticAnalysisCommon_1.lowLevelCallTypes.CALL:\r\n                    text = `Use of \"call\": should be avoided whenever possible. \r\n                  It can lead to unexpected behavior if return value is not handled properly. \r\n                  Please use Direct Calls via specifying the called contract's interface.`;\r\n                    morehref = `https://solidity.readthedocs.io/en/${version}/control-structures.html?#external-function-calls`;\r\n                    break;\r\n                case staticAnalysisCommon_1.lowLevelCallTypes.CALLCODE:\r\n                    text = `Use of \"callcode\": should be avoided whenever possible. \r\n                  External code, that is called can change the state of the calling contract and send ether from the caller's balance. \r\n                  If this is wanted behaviour, use the Solidity library feature if possible.`;\r\n                    morehref = `https://solidity.readthedocs.io/en/${version}/contracts.html#libraries`;\r\n                    break;\r\n                case staticAnalysisCommon_1.lowLevelCallTypes.DELEGATECALL:\r\n                    text = `Use of \"delegatecall\": should be avoided whenever possible. \r\n                  External code, that is called can change the state of the calling contract and send ether from the caller's balance. \r\n                  If this is wanted behaviour, use the Solidity library feature if possible.`;\r\n                    morehref = `https://solidity.readthedocs.io/en/${version}/contracts.html#libraries`;\r\n                    break;\r\n                case staticAnalysisCommon_1.lowLevelCallTypes.SEND:\r\n                    text = `Use of \"send\": \"send\" does not throw an exception when not successful, make sure you deal with the failure case accordingly. \r\n                  Use \"transfer\" whenever failure of the ether transfer should rollback the whole transaction. \r\n                  Note: if you \"send/transfer\" ether to a contract the fallback function is called, the callees fallback function is very limited due to the limited amount of gas provided by \"send/transfer\". \r\n                  No state changes are possible but the callee can log the event or revert the transfer. \"send/transfer\" is syntactic sugar for a \"call\" to the fallback function with 2300 gas and a specified ether value.`;\r\n                    morehref = `https://solidity.readthedocs.io/en/${version}/security-considerations.html#sending-and-receiving-ether`;\r\n                    break;\r\n            }\r\n            return { warning: text, more: morehref, location: item.node.src };\r\n        });\r\n    }\r\n}\r\nexports.default = lowLevelCalls;\r\n//# sourceMappingURL=lowLevelCalls.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst abstractAstView_1 = tslib_1.__importDefault(require(\"./abstractAstView\"));\r\nclass noReturn {\r\n    constructor() {\r\n        this.name = `No return: `;\r\n        this.description = `Function with 'returns' not returning`;\r\n        this.category = categories_1.default.MISC;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n        this.abstractAst = new abstractAstView_1.default();\r\n        this.visit = this.abstractAst.build_visit((node) => node.nodeType === \"Return\" || node.nodeType === \"Assignment\");\r\n        this.report = this.abstractAst.build_report(this._report.bind(this));\r\n    }\r\n    _report(contracts, multipleContractsWithSameName, version) {\r\n        const warnings = [];\r\n        contracts.forEach((contract) => {\r\n            contract.functions.filter((func) => staticAnalysisCommon_1.hasFunctionBody(func.node)).forEach((func) => {\r\n                const funcName = staticAnalysisCommon_1.getFullQuallyfiedFuncDefinitionIdent(contract.node, func.node, func.parameters);\r\n                if (this.hasNamedAndUnnamedReturns(func)) {\r\n                    warnings.push({\r\n                        warning: `${funcName}: Mixing of named and unnamed return parameters is not advised.`,\r\n                        location: func.node['src']\r\n                    });\r\n                }\r\n                else if (this.shouldReturn(func) && !(this.hasReturnStatement(func) || (this.hasNamedReturns(func) && this.hasAssignToAllNamedReturns(func)))) {\r\n                    warnings.push({\r\n                        warning: `${funcName}: Defines a return type but never explicitly returns a value.`,\r\n                        location: func.node['src']\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        return warnings;\r\n    }\r\n    shouldReturn(func) {\r\n        return func.returns.length > 0;\r\n    }\r\n    hasReturnStatement(func) {\r\n        return func.relevantNodes.filter(n => n.nodeType === \"Return\").length > 0;\r\n    }\r\n    hasAssignToAllNamedReturns(func) {\r\n        const namedReturns = func.returns.filter(n => n.name.length > 0).map((n) => n.name);\r\n        const assignedVars = func.relevantNodes.filter(n => n.nodeType === \"Assignment\").map(staticAnalysisCommon_1.getEffectedVariableName);\r\n        const diff = namedReturns.filter(e => !assignedVars.includes(e));\r\n        return diff.length === 0;\r\n    }\r\n    hasNamedReturns(func) {\r\n        return func.returns.filter((n) => n.name.length > 0).length > 0;\r\n    }\r\n    hasNamedAndUnnamedReturns(func) {\r\n        return func.returns.filter((n) => n.name.length === 0).length > 0 && this.hasNamedReturns(func);\r\n    }\r\n}\r\nexports.default = noReturn;\r\n//# sourceMappingURL=noReturn.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst abstractAstView_1 = tslib_1.__importDefault(require(\"./abstractAstView\"));\r\nclass selfdestruct {\r\n    constructor() {\r\n        this.name = `Selfdestruct: `;\r\n        this.description = `Contracts using destructed contract can be broken`;\r\n        this.category = categories_1.default.SECURITY;\r\n        this.algorithm = algorithmCategories_1.default.HEURISTIC;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n        this.abstractAst = new abstractAstView_1.default();\r\n        this.visit = this.abstractAst.build_visit((node) => staticAnalysisCommon_1.isStatement(node) || (node.nodeType === 'FunctionCall' && staticAnalysisCommon_1.isSelfdestructCall(node)));\r\n        this.report = this.abstractAst.build_report(this._report.bind(this));\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    _report(contracts, multipleContractsWithSameName, version) {\r\n        const warnings = [];\r\n        contracts.forEach((contract) => {\r\n            contract.functions.forEach((func) => {\r\n                let hasSelf = false;\r\n                func.relevantNodes.forEach((node) => {\r\n                    if (staticAnalysisCommon_1.isSelfdestructCall(node)) {\r\n                        warnings.push({\r\n                            warning: `Use of selfdestruct: Can block calling contracts unexpectedly. Be especially careful if this contract is planned to be used by other contracts (i.e. library contracts, interactions). Selfdestruction of the callee contract can leave callers in an inoperable state.`,\r\n                            location: node.src,\r\n                            more: 'https://paritytech.io/blog/security-alert.html'\r\n                        });\r\n                        hasSelf = true;\r\n                    }\r\n                    if (staticAnalysisCommon_1.isStatement(node) && hasSelf) {\r\n                        warnings.push({\r\n                            warning: `Use of selfdestruct: No code after selfdestruct is executed. Selfdestruct is a terminal.`,\r\n                            location: node.src,\r\n                            more: `https://solidity.readthedocs.io/en/${version}/introduction-to-smart-contracts.html#deactivate-and-self-destruct`\r\n                        });\r\n                        hasSelf = false;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        return warnings;\r\n    }\r\n}\r\nexports.default = selfdestruct;\r\n//# sourceMappingURL=selfdestruct.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst abstractAstView_1 = tslib_1.__importDefault(require(\"./abstractAstView\"));\r\nconst fast_levenshtein_1 = require(\"fast-levenshtein\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nclass similarVariableNames {\r\n    constructor() {\r\n        this.name = `Similar variable names: `;\r\n        this.description = `Variable names are too similar`;\r\n        this.category = categories_1.default.MISC;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n        this.abstractAst = new abstractAstView_1.default();\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        this.visit = this.abstractAst.build_visit((node) => false);\r\n        this.report = this.abstractAst.build_report(this._report.bind(this));\r\n    }\r\n    _report(contracts, multipleContractsWithSameName, version) {\r\n        const warnings = [];\r\n        const hasModifiers = contracts.some((item) => item.modifiers.length > 0);\r\n        contracts.forEach((contract) => {\r\n            contract.functions.forEach((func) => {\r\n                const funcName = staticAnalysisCommon_1.getFullQuallyfiedFuncDefinitionIdent(contract.node, func.node, func.parameters);\r\n                let hasModifiersComments = '';\r\n                if (hasModifiers) {\r\n                    hasModifiersComments = 'Note: Modifiers are currently not considered by this static analysis.';\r\n                }\r\n                let multipleContractsWithSameNameComments = '';\r\n                if (multipleContractsWithSameName) {\r\n                    multipleContractsWithSameNameComments = 'Note: Import aliases are currently not supported by this static analysis.';\r\n                }\r\n                const vars = this.getFunctionVariables(contract, func).map(staticAnalysisCommon_1.getDeclaredVariableName);\r\n                this.findSimilarVarNames(vars).map((sim) => {\r\n                    warnings.push({\r\n                        warning: `${funcName} : Variables have very similar names \"${sim.var1}\" and \"${sim.var2}\". ${hasModifiersComments} ${multipleContractsWithSameNameComments}`,\r\n                        location: func.node['src']\r\n                    });\r\n                });\r\n            });\r\n        });\r\n        return warnings;\r\n    }\r\n    findSimilarVarNames(vars) {\r\n        const similar = [];\r\n        const comb = {};\r\n        vars.map((varName1) => vars.map((varName2) => {\r\n            if (varName1.length > 1 && varName2.length > 1 &&\r\n                varName2 !== varName1 && !this.isCommonPrefixedVersion(varName1, varName2) &&\r\n                !this.isCommonNrSuffixVersion(varName1, varName2) &&\r\n                !(comb[varName1 + ';' + varName2] || comb[varName2 + ';' + varName1])) {\r\n                comb[varName1 + ';' + varName2] = true;\r\n                const distance = fast_levenshtein_1.get(varName1, varName2);\r\n                if (distance <= 2)\r\n                    similar.push({ var1: varName1, var2: varName2, distance: distance });\r\n            }\r\n        }));\r\n        return similar;\r\n    }\r\n    isCommonPrefixedVersion(varName1, varName2) {\r\n        return (varName1.startsWith('_') && varName1.slice(1) === varName2) || (varName2.startsWith('_') && varName2.slice(1) === varName1);\r\n    }\r\n    isCommonNrSuffixVersion(varName1, varName2) {\r\n        const ref = '^' + remix_lib_1.util.escapeRegExp(varName1.slice(0, -1)) + '[0-9]*$';\r\n        return varName2.match(ref) != null;\r\n    }\r\n    getFunctionVariables(contract, func) {\r\n        return contract.stateVariables.concat(func.localVariables);\r\n    }\r\n}\r\nexports.default = similarVariableNames;\r\n//# sourceMappingURL=similarVariableNames.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst nodeTypes = {\r\n    SOURCEUNIT: 'SourceUnit',\r\n    PRAGMADIRECTIVE: 'PragmaDirective',\r\n    IMPORTDIRECTIVE: 'ImportDirective',\r\n    CONTRACTDEFINITION: 'ContractDefinition',\r\n    INHERITANCESPECIFIER: 'InheritanceSpecifier',\r\n    USINGFORDIRECTIVE: 'UsingForDirective',\r\n    STRUCTDEFINITION: 'StructDefinition',\r\n    ENUMDEFINITION: 'EnumDefinition',\r\n    ENUMVALUE: 'EnumValue',\r\n    PARAMETERLIST: 'ParameterList',\r\n    OVERRIDESPECIFIER: 'OverrideSpecifier',\r\n    FUNCTIONDEFINITION: 'FunctionDefinition',\r\n    VARIABLEDECLARATION: 'VariableDeclaration',\r\n    MODIFIERDEFINITION: 'ModifierDefinition',\r\n    MODIFIERINVOCATION: 'ModifierInvocation',\r\n    EVENTDEFINITION: 'EventDefinition',\r\n    ELEMENTARYTYPENAME: 'ElementaryTypeName',\r\n    USERDEFINEDTYPENAME: 'UserDefinedTypeName',\r\n    FUNCTIONTYPENAME: 'FunctionTypeName',\r\n    MAPPING: 'Mapping',\r\n    ARRAYTYPENAME: 'ArrayTypeName',\r\n    INLINEASSEMBLY: 'InlineAssembly',\r\n    BLOCK: 'Block',\r\n    PLACEHOLDERSTATEMENT: 'PlaceholderStatement',\r\n    IFSTATEMENT: 'IfStatement',\r\n    TRYCATCHCLAUSE: 'TryCatchClause',\r\n    TRYSTATEMENT: 'TryStatement',\r\n    WHILESTATEMENT: 'WhileStatement',\r\n    DOWHILESTATEMENT: 'DoWhileStatement',\r\n    FORSTATEMENT: 'ForStatement',\r\n    CONTINUE: 'Continue',\r\n    BREAK: 'Break',\r\n    RETURN: 'Return',\r\n    THROW: 'Throw',\r\n    EMITSTATEMENT: 'EmitStatement',\r\n    VARIABLEDECLARATIONSTATEMENT: 'VariableDeclarationStatement',\r\n    EXPRESSIONSTATEMENT: 'ExpressionStatement',\r\n    CONDITIONAL: 'Conditional',\r\n    ASSIGNMENT: 'Assignment',\r\n    TUPLEEXPRESSION: 'TupleExpression',\r\n    UNARYOPERATION: 'UnaryOperation',\r\n    BINARYOPERATION: 'BinaryOperation',\r\n    FUNCTIONCALL: 'FunctionCall',\r\n    FUNCTIONCALLOPTIONS: 'FunctionCallOptions',\r\n    NEWEXPRESSION: 'NewExpression',\r\n    MEMBERACCESS: 'MemberAccess',\r\n    INDEXACCESS: 'IndexAccess',\r\n    INDEXRANGEACCESS: 'IndexRangeAccess',\r\n    ELEMENTARYTYPENAMEEXPRESSION: 'ElementaryTypeNameExpression',\r\n    LITERAL: 'Literal',\r\n    IDENTIFIER: 'Identifier',\r\n    STRUCTUREDDOCUMENTATION: 'StructuredDocumentation'\r\n};\r\nexports.nodeTypes = nodeTypes;\r\nconst basicTypes = {\r\n    UINT: 'uint256',\r\n    BOOL: 'bool',\r\n    ADDRESS: 'address',\r\n    PAYABLE_ADDRESS: 'address payable',\r\n    BYTES32: 'bytes32',\r\n    STRING_MEM: 'string memory',\r\n    BYTES_MEM: 'bytes memory',\r\n    BYTES4: 'bytes4'\r\n};\r\nexports.basicTypes = basicTypes;\r\nconst basicRegex = {\r\n    CONTRACTTYPE: '^contract ',\r\n    FUNCTIONTYPE: '^function \\\\(',\r\n    EXTERNALFUNCTIONTYPE: '^function \\\\(.*\\\\).* external',\r\n    CONSTANTFUNCTIONTYPE: '^function \\\\(.*\\\\).* (view|pure)',\r\n    REFTYPE: '(storage)|(mapping\\\\()|(\\\\[\\\\])',\r\n    FUNCTIONSIGNATURE: '^function \\\\(([^\\\\(]*)\\\\)',\r\n    LIBRARYTYPE: '^type\\\\(library (.*)\\\\)'\r\n};\r\nconst basicFunctionTypes = {\r\n    SEND: buildFunctionSignature([basicTypes.UINT], [basicTypes.BOOL], false),\r\n    'CALL-0.4': buildFunctionSignature([], [basicTypes.BOOL], true),\r\n    CALL: buildFunctionSignature([basicTypes.BYTES_MEM], [basicTypes.BOOL, basicTypes.BYTES_MEM], true),\r\n    'DELEGATECALL-0.4': buildFunctionSignature([], [basicTypes.BOOL], false),\r\n    DELEGATECALL: buildFunctionSignature([basicTypes.BYTES_MEM], [basicTypes.BOOL, basicTypes.BYTES_MEM], false),\r\n    TRANSFER: buildFunctionSignature([basicTypes.UINT], [], false)\r\n};\r\nexports.basicFunctionTypes = basicFunctionTypes;\r\nconst builtinFunctions = {\r\n    'keccak256()': true,\r\n    'sha3()': true,\r\n    'sha256()': true,\r\n    'ripemd160()': true,\r\n    'ecrecover(bytes32,uint8,bytes32,bytes32)': true,\r\n    'addmod(uint256,uint256,uint256)': true,\r\n    'mulmod(uint256,uint256,uint256)': true,\r\n    'selfdestruct(address)': true,\r\n    'selfdestruct(address payable)': true,\r\n    'revert()': true,\r\n    'revert(string memory)': true,\r\n    'assert(bool)': true,\r\n    'require(bool)': true,\r\n    'require(bool,string memory)': true,\r\n    'gasleft()': true,\r\n    'blockhash(uint256)': true,\r\n    'address(address)': true\r\n};\r\nconst lowLevelCallTypes = {\r\n    'CALL-0.4': { ident: 'call', type: basicFunctionTypes['CALL-0.4'] },\r\n    CALL: { ident: 'call', type: basicFunctionTypes.CALL },\r\n    CALLCODE: { ident: 'callcode', type: basicFunctionTypes['CALL-0.4'] },\r\n    'DELEGATECALL-0.4': { ident: 'delegatecall', type: basicFunctionTypes['DELEGATECALL-0.4'] },\r\n    DELEGATECALL: { ident: 'delegatecall', type: basicFunctionTypes.DELEGATECALL },\r\n    SEND: { ident: 'send', type: basicFunctionTypes.SEND },\r\n    TRANSFER: { ident: 'transfer', type: basicFunctionTypes.TRANSFER }\r\n};\r\nexports.lowLevelCallTypes = lowLevelCallTypes;\r\nconst specialVariables = {\r\n    BLOCKTIMESTAMP: { obj: 'block', member: 'timestamp', type: basicTypes.UINT },\r\n    BLOCKHASH: {\r\n        obj: 'block',\r\n        member: 'blockhash',\r\n        type: buildFunctionSignature([basicTypes.UINT], [basicTypes.BYTES32], false, 'view')\r\n    }\r\n};\r\nexports.specialVariables = specialVariables;\r\nconst abiNamespace = {\r\n    ENCODE: {\r\n        obj: 'abi',\r\n        member: 'encode',\r\n        type: buildFunctionSignature([], [basicTypes.BYTES_MEM], false, 'pure')\r\n    },\r\n    ENCODEPACKED: {\r\n        obj: 'abi',\r\n        member: 'encodePacked',\r\n        type: buildFunctionSignature([], [basicTypes.BYTES_MEM], false, 'pure')\r\n    },\r\n    ENCODE_SELECT: {\r\n        obj: 'abi',\r\n        member: 'encodeWithSelector',\r\n        type: buildFunctionSignature([basicTypes.BYTES4], [basicTypes.BYTES_MEM], false, 'pure')\r\n    },\r\n    ENCODE_SIG: {\r\n        obj: 'abi',\r\n        member: 'encodeWithSignature',\r\n        type: buildFunctionSignature([basicTypes.STRING_MEM], [basicTypes.BYTES_MEM], false, 'pure')\r\n    }\r\n};\r\n// #################### Trivial Getters\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction getType(node) {\r\n    return node.typeDescriptions.typeString;\r\n}\r\nexports.getType = getType;\r\n// #################### Complex Getters\r\n/**\r\n * Returns the type parameter of function call AST nodes. Throws if not a function call node\r\n * @func {ASTNode} Function call node\r\n * @return {string} type of function call\r\n */\r\nfunction getFunctionCallType(func) {\r\n    return getType(func.expression);\r\n}\r\nexports.getFunctionCallType = getFunctionCallType;\r\n/**\r\n * Get the variable name written to by a effect node, except for inline assembly because there is no information to find out where we write to. Trows if not a effect node or is inlineassmbly.\r\n * Example: x = 10; => x\r\n * @effectNode {ASTNode} Assignmnet node\r\n * @return {string} variable name written to\r\n */\r\nfunction getEffectedVariableName(effectNode) {\r\n    if (!isEffect(effectNode))\r\n        throw new Error('staticAnalysisCommon.js: not an effect Node');\r\n    if (effectNode.nodeType === 'Assignment' || effectNode.nodeType === 'UnaryOperation') {\r\n        const IdentNode = findFirstSubNodeLTR(effectNode, exactMatch(nodeTypes.IDENTIFIER));\r\n        return IdentNode.name;\r\n    }\r\n    else\r\n        throw new Error('staticAnalysisCommon.js: wrong node type');\r\n}\r\nexports.getEffectedVariableName = getEffectedVariableName;\r\n/**\r\n * Returns the identifier of a local call, Throws on wrong node.\r\n * Example: f(103) => f\r\n * @localCallNode {ASTNode} Function call node\r\n * @return {string} name of the function called\r\n */\r\nfunction getLocalCallName(localCallNode) {\r\n    if (!isLocalCall(localCallNode) && !isAbiNamespaceCall(localCallNode))\r\n        throw new Error('staticAnalysisCommon.js: not a local call Node');\r\n    return localCallNode.expression.name;\r\n}\r\nexports.getLocalCallName = getLocalCallName;\r\n/**\r\n * Returns the identifier of a this local call, Throws on wrong node.\r\n * Example: this.f(103) => f\r\n * @localCallNode {ASTNode} Function call node\r\n * @return {string} name of the function called\r\n */\r\nfunction getThisLocalCallName(thisLocalCallNode) {\r\n    if (!isThisLocalCall(thisLocalCallNode.expression))\r\n        throw new Error('staticAnalysisCommon.js: not a this local call Node');\r\n    return thisLocalCallNode.expression.memberName;\r\n}\r\nexports.getThisLocalCallName = getThisLocalCallName;\r\n/**\r\n * Returns the identifier of a super local call, Throws on wrong node.\r\n * Example: super.f(103) => f\r\n * @localCallNode {ASTNode} Function call node\r\n * @return {string} name of the function called\r\n */\r\nfunction getSuperLocalCallName(superLocalCallNode) {\r\n    if (!isSuperLocalCall(superLocalCallNode.expression))\r\n        throw new Error('staticAnalysisCommon.js: not a super local call Node');\r\n    return superLocalCallNode.expression.memberName;\r\n}\r\nexports.getSuperLocalCallName = getSuperLocalCallName;\r\n/**\r\n * Returns the contract type of a external direct call, Throws on wrong node.\r\n * Example:\r\n *  foo x = foo(0xdeadbeef...);\r\n *  x.f(103) => foo\r\n * @extDirectCall {ASTNode} Function call node\r\n * @return {string} name of the contract the function is defined in\r\n */\r\nfunction getExternalDirectCallContractName(extDirectCall) {\r\n    if (!isExternalDirectCall(extDirectCall))\r\n        throw new Error('staticAnalysisCommon.js: not an external direct call Node');\r\n    return extDirectCall.expression.expression.typeDescriptions.typeString.replace(new RegExp(basicRegex.CONTRACTTYPE), '');\r\n}\r\nexports.getExternalDirectCallContractName = getExternalDirectCallContractName;\r\n/**\r\n * Returns the name of the contract of a this local call (current contract), Throws on wrong node.\r\n * Example:\r\n * Contract foo {\r\n *    ...\r\n *    this.f(103) => foo\r\n *    ...\r\n * @thisLocalCall {ASTNode} Function call node\r\n * @return {string} name of the contract the function is defined in\r\n */\r\nfunction getThisLocalCallContractName(thisLocalCall) {\r\n    if (!isThisLocalCall(thisLocalCall.expression))\r\n        throw new Error('staticAnalysisCommon.js: not a this local call Node');\r\n    return thisLocalCall.expression.expression.typeDescriptions.typeString.replace(new RegExp(basicRegex.CONTRACTTYPE), '');\r\n}\r\nexports.getThisLocalCallContractName = getThisLocalCallContractName;\r\n/**\r\n * Returns the function identifier of a external direct call, Throws on wrong node.\r\n * Example:\r\n *  foo x = foo(0xdeadbeef...);\r\n *  x.f(103) => f\r\n * @extDirectCall {ASTNode} Function call node\r\n * @return {string} name of the function called\r\n */\r\nfunction getExternalDirectCallMemberName(extDirectCall) {\r\n    if (!isExternalDirectCall(extDirectCall))\r\n        throw new Error('staticAnalysisCommon.js: not an external direct call Node');\r\n    return extDirectCall.expression.memberName;\r\n}\r\nexports.getExternalDirectCallMemberName = getExternalDirectCallMemberName;\r\n/**\r\n * Returns the name of a contract, Throws on wrong node.\r\n * Example:\r\n *   Contract foo { => foo\r\n * @contract {ASTNode} Contract Definition node\r\n * @return {string} name of a contract defined\r\n */\r\nfunction getContractName(contract) {\r\n    if (!nodeType(contract, exactMatch(nodeTypes.CONTRACTDEFINITION)))\r\n        throw new Error('staticAnalysisCommon.js: not a ContractDefinition Node');\r\n    return contract.name;\r\n}\r\nexports.getContractName = getContractName;\r\n/**\r\n * Returns the name of a function definition, Throws on wrong node.\r\n * Example:\r\n *   func foo(uint bla) { => foo\r\n * @funcDef {ASTNode} Function Definition node\r\n * @return {string} name of a function defined\r\n */\r\nfunction getFunctionDefinitionName(funcDef) {\r\n    if (!nodeType(funcDef, exactMatch(nodeTypes.FUNCTIONDEFINITION)))\r\n        throw new Error('staticAnalysisCommon.js: not a FunctionDefinition Node');\r\n    return funcDef.name;\r\n}\r\nexports.getFunctionDefinitionName = getFunctionDefinitionName;\r\n/**\r\n * Returns the identifier of an inheritance specifier, Throws on wrong node.\r\n * Example:\r\n *   contract KingOfTheEtherThrone is b { => b\r\n * @func {ASTNode} Inheritance specifier\r\n * @return {string} name of contract inherited from\r\n */\r\nfunction getInheritsFromName(inheritsNode) {\r\n    if (!nodeType(inheritsNode, exactMatch(nodeTypes.INHERITANCESPECIFIER)))\r\n        throw new Error('staticAnalysisCommon.js: not an InheritanceSpecifier Node');\r\n    return inheritsNode.baseName.name;\r\n}\r\nexports.getInheritsFromName = getInheritsFromName;\r\n/**\r\n * Returns the identifier of a variable definition, Throws on wrong node.\r\n * Example:\r\n *   var x = 10; => x\r\n * @varDeclNode {ASTNode} Variable declaration node\r\n * @return {string} variable name\r\n */\r\nfunction getDeclaredVariableName(varDeclNode) {\r\n    if (!nodeType(varDeclNode, exactMatch(nodeTypes.VARIABLEDECLARATION)))\r\n        throw new Error('staticAnalysisCommon.js: not a VariableDeclaration Node');\r\n    return varDeclNode.name;\r\n}\r\nexports.getDeclaredVariableName = getDeclaredVariableName;\r\n/**\r\n * Returns the type of a variable definition, Throws on wrong node.\r\n * Example:\r\n *   var x = 10; => x\r\n * @varDeclNode {ASTNode} Variable declaration node\r\n * @return {string} variable type\r\n */\r\nfunction getDeclaredVariableType(varDeclNode) {\r\n    return varDeclNode.typeName.name;\r\n}\r\nexports.getDeclaredVariableType = getDeclaredVariableType;\r\n/**\r\n * Returns state variable declaration nodes for a contract, Throws on wrong node.\r\n * Example:\r\n * contract foo {\r\n *     ...\r\n *   var y = true;\r\n *   var x = 10; => [y,x]\r\n * @contractNode {ASTNode} Contract Definition node\r\n * @return {list variable declaration} state variable node list\r\n */\r\nfunction getStateVariableDeclarationsFromContractNode(contractNode) {\r\n    return contractNode.nodes.filter(el => el.nodeType === \"VariableDeclaration\");\r\n}\r\nexports.getStateVariableDeclarationsFromContractNode = getStateVariableDeclarationsFromContractNode;\r\n/**\r\n * Returns parameter node for a function or modifier definition, Throws on wrong node.\r\n * Example:\r\n * function bar(uint a, uint b) => uint a, uint b\r\n * @funcNode {ASTNode} Contract Definition node\r\n * @return {parameterlist node} parameterlist node\r\n */\r\nfunction getFunctionOrModifierDefinitionParameterPart(funcNode) {\r\n    if (!nodeTypeIn(funcNode, [exactMatch(nodeTypes.FUNCTIONDEFINITION), exactMatch(nodeTypes.MODIFIERDEFINITION)]))\r\n        throw new Error('staticAnalysisCommon.js: not a FunctionDefinition or ModifierDefinition Node');\r\n    return funcNode.parameters;\r\n}\r\nexports.getFunctionOrModifierDefinitionParameterPart = getFunctionOrModifierDefinitionParameterPart;\r\n/**\r\n * Returns return parameter node for a function or modifier definition, Throws on wrong node.\r\n * Example:\r\n * function bar(uint a, uint b) returns (bool a, bool b) => bool a, bool b\r\n * @funcNode {ASTNode} Contract Definition node\r\n * @return {parameterlist node} parameterlist node\r\n */\r\nfunction getFunctionDefinitionReturnParameterPart(funcNode) {\r\n    return funcNode.returnParameters;\r\n}\r\nexports.getFunctionDefinitionReturnParameterPart = getFunctionDefinitionReturnParameterPart;\r\n/**\r\n * Extracts the parameter types for a function type signature\r\n * Example:\r\n * function(uint a, uint b) returns (bool) => uint a, uint b\r\n * @func {ASTNode} function call node\r\n * @return {string} parameter signature\r\n */\r\nfunction getFunctionCallTypeParameterType(func) {\r\n    const type = getFunctionCallType(func);\r\n    if (type.startsWith('function (')) {\r\n        let paramTypes = '';\r\n        let openPar = 1;\r\n        for (let x = 10; x < type.length; x++) {\r\n            const c = type.charAt(x);\r\n            if (c === '(')\r\n                openPar++;\r\n            else if (c === ')')\r\n                openPar--;\r\n            if (openPar === 0)\r\n                return paramTypes;\r\n            paramTypes += c;\r\n        }\r\n    }\r\n    else {\r\n        throw new Error('staticAnalysisCommon.js: cannot extract parameter types from function call');\r\n    }\r\n}\r\nexports.getFunctionCallTypeParameterType = getFunctionCallTypeParameterType;\r\n/**\r\n * Returns the name of the library called, Throws on wrong node.\r\n * Example:\r\n *  library set{...}\r\n *  contract foo {\r\n *    ...\r\n *    function () { set.union() => set}\r\n * @funcCall {ASTNode} function call node\r\n * @return {string} name of the lib defined\r\n */\r\nfunction getLibraryCallContractName(node) {\r\n    if (!isLibraryCall(node.expression))\r\n        throw new Error('staticAnalysisCommon.js: not a library call Node');\r\n    const types = new RegExp(basicRegex.LIBRARYTYPE).exec(node.expression.expression.typeDescriptions.typeString);\r\n    if (types)\r\n        return types[1];\r\n}\r\nexports.getLibraryCallContractName = getLibraryCallContractName;\r\n/**\r\n * Returns the name of the function of a library call, Throws on wrong node.\r\n * Example:\r\n *  library set{...}\r\n *  contract foo {\r\n *    ...\r\n *    function () { set.union() => uinion}\r\n * @func {ASTNode} function call node\r\n * @return {string} name of function called on the library\r\n */\r\nfunction getLibraryCallMemberName(funcCall) {\r\n    if (!isLibraryCall(funcCall.expression))\r\n        throw new Error('staticAnalysisCommon.js: not a library call Node');\r\n    return funcCall.expression.memberName;\r\n}\r\nexports.getLibraryCallMemberName = getLibraryCallMemberName;\r\n/**\r\n * Returns full qualified name for a function call, Throws on wrong node.\r\n * Example:\r\n *  contract foo {\r\n *    ...\r\n *    function bar(uint b) { }\r\n *    function baz() {\r\n *      bar(10) => foo.bar(uint)\r\n * @func {ASTNode} function call node\r\n * @func {ASTNode} contract defintion\r\n * @return {string} full qualified identifier for the function call\r\n */\r\nfunction getFullQualifiedFunctionCallIdent(contract, func) {\r\n    if (isLocalCall(func))\r\n        return getContractName(contract) + '.' + getLocalCallName(func) + '(' + getFunctionCallTypeParameterType(func) + ')';\r\n    else if (isThisLocalCall(func.expression))\r\n        return getThisLocalCallContractName(func) + '.' + getThisLocalCallName(func) + '(' + getFunctionCallTypeParameterType(func) + ')';\r\n    else if (isSuperLocalCall(func.expression))\r\n        return getContractName(contract) + '.' + getSuperLocalCallName(func) + '(' + getFunctionCallTypeParameterType(func) + ')';\r\n    else if (isExternalDirectCall(func))\r\n        return getExternalDirectCallContractName(func) + '.' + getExternalDirectCallMemberName(func) + '(' + getFunctionCallTypeParameterType(func) + ')';\r\n    else if (isLibraryCall(func.expression))\r\n        return getLibraryCallContractName(func) + '.' + getLibraryCallMemberName(func) + '(' + getFunctionCallTypeParameterType(func) + ')';\r\n    else\r\n        throw new Error('staticAnalysisCommon.js: Can not get function name from non function call node');\r\n}\r\nexports.getFullQualifiedFunctionCallIdent = getFullQualifiedFunctionCallIdent;\r\nfunction getFullQuallyfiedFuncDefinitionIdent(contract, func, paramTypes) {\r\n    return getContractName(contract) + '.' + getFunctionDefinitionName(func) + '(' + remix_lib_1.util.concatWithSeperator(paramTypes, ',') + ')';\r\n}\r\nexports.getFullQuallyfiedFuncDefinitionIdent = getFullQuallyfiedFuncDefinitionIdent;\r\nfunction getUnAssignedTopLevelBinOps(subScope) {\r\n    let result = [];\r\n    if (subScope && subScope.nodeType === 'Block')\r\n        result = subScope.statements.filter(isBinaryOpInExpression);\r\n    // for 'without braces' loops\r\n    else if (subScope && subScope.nodeType && subScope.nodeType !== 'Block' && isSubScopeStatement(subScope)) {\r\n        if (subScope.nodeType === 'IfStatement') {\r\n            if ((subScope.trueBody && subScope.trueBody.nodeType === \"ExpressionStatement\" && isBinaryOpInExpression(subScope.trueBody)))\r\n                result.push(subScope.trueBody);\r\n            if (subScope.falseBody && subScope.falseBody.nodeType === \"ExpressionStatement\" && isBinaryOpInExpression(subScope.falseBody))\r\n                result.push(subScope.falseBody);\r\n        }\r\n        else {\r\n            if (subScope.body && subScope.body.nodeType === \"ExpressionStatement\" && isBinaryOpInExpression(subScope.body))\r\n                result.push(subScope.body);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.getUnAssignedTopLevelBinOps = getUnAssignedTopLevelBinOps;\r\n// #################### Trivial Node Identification\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction isStatement(node) {\r\n    return nodeType(node, 'Statement$') || node.nodeType === \"Block\" || node.nodeType === \"Return\";\r\n}\r\nexports.isStatement = isStatement;\r\n// #################### Complex Node Identification\r\n/**\r\n * True if function defintion has function body\r\n * @funcNode {ASTNode} function defintion node\r\n * @return {bool}\r\n */\r\nfunction hasFunctionBody(funcNode) {\r\n    return funcNode.body !== null;\r\n}\r\nexports.hasFunctionBody = hasFunctionBody;\r\n/**\r\n * True if node is a delete instruction of a dynamic array\r\n * @node {ASTNode} node to check for\r\n * @return {bool}\r\n */\r\nfunction isDeleteOfDynamicArray(node) {\r\n    return isDeleteUnaryOperation(node) && isDynamicArrayAccess(node.subExpression);\r\n}\r\nexports.isDeleteOfDynamicArray = isDeleteOfDynamicArray;\r\n/**\r\n * True if node is node is a ref to a dynamic array\r\n * @node {ASTNode} node to check for\r\n * @return {bool}\r\n */\r\nfunction isDynamicArrayAccess(node) {\r\n    return getType(node).endsWith('[] storage ref') || typeDescription(node, 'bytes storage ref') || typeDescription(node, 'string storage ref');\r\n}\r\nexports.isDynamicArrayAccess = isDynamicArrayAccess;\r\n/**\r\n * True if node accesses 'length' member of dynamic array\r\n * @node {ASTNode} node to check for\r\n * @return {bool}\r\n */\r\nfunction isDynamicArrayLengthAccess(node) {\r\n    return (node.memberName === 'length') && // accessing 'length' member\r\n        node.expression['typeDescriptions']['typeString'].indexOf('[]') !== -1; // member is accessed from dynamic array, notice [] without any number\r\n}\r\nexports.isDynamicArrayLengthAccess = isDynamicArrayLengthAccess;\r\n/**\r\n * True if node is a delete instruction for an element from a dynamic array\r\n * @node {ASTNode} node to check for\r\n * @return {bool}\r\n */\r\nfunction isDeleteFromDynamicArray(node) {\r\n    return isDeleteUnaryOperation(node) && node.subExpression.nodeType === 'IndexAccess';\r\n}\r\nexports.isDeleteFromDynamicArray = isDeleteFromDynamicArray;\r\n/**\r\n * True if node is the access of a mapping index\r\n * @node {ASTNode} node to check for\r\n * @return {bool}\r\n */\r\nfunction isMappingIndexAccess(node) {\r\n    return node.typeDescriptions.typeString.startsWith('mapping');\r\n}\r\nexports.isMappingIndexAccess = isMappingIndexAccess;\r\n/**\r\n * True if call to code within the current contracts context including (delegate) library call\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLocalCallGraphRelevantNode(node) {\r\n    return ((isLocalCall(node) || isSuperLocalCall(node.expression) || isLibraryCall(node.expression)) && !isBuiltinFunctionCall(node));\r\n}\r\nexports.isLocalCallGraphRelevantNode = isLocalCallGraphRelevantNode;\r\n/**\r\n * True if is builtin function like assert, sha3, erecover, ...\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isBuiltinFunctionCall(node) {\r\n    return (node.nodeType === 'FunctionCall' && isLocalCall(node) && builtinFunctions[getLocalCallName(node) + '(' + getFunctionCallTypeParameterType(node) + ')'] === true) || isAbiNamespaceCall(node);\r\n}\r\nexports.isBuiltinFunctionCall = isBuiltinFunctionCall;\r\n/**\r\n * True if is builtin function like assert, sha3, erecover, ...\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isAbiNamespaceCall(node) {\r\n    return Object.keys(abiNamespace).some((key) => Object.prototype.hasOwnProperty.call(abiNamespace, key) && node.expression && isSpecialVariableAccess(node.expression, abiNamespace[key]));\r\n}\r\nexports.isAbiNamespaceCall = isAbiNamespaceCall;\r\n/**\r\n * True if node is a call to selfdestruct\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isSelfdestructCall(node) {\r\n    return isBuiltinFunctionCall(node) && getLocalCallName(node) === 'selfdestruct';\r\n}\r\nexports.isSelfdestructCall = isSelfdestructCall;\r\n/**\r\n * True if node is a call to builtin assert(bool)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isAssertCall(node) {\r\n    return isBuiltinFunctionCall(node) && getLocalCallName(node) === 'assert';\r\n}\r\nexports.isAssertCall = isAssertCall;\r\n/**\r\n * True if node is a call to builtin require(bool)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isRequireCall(node) {\r\n    return isBuiltinFunctionCall(node) && getLocalCallName(node) === 'require';\r\n}\r\nexports.isRequireCall = isRequireCall;\r\n/**\r\n * True if is storage variable declaration\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isStorageVariableDeclaration(node) {\r\n    return node.storageLocation === 'storage' && new RegExp(basicRegex.REFTYPE).test(node.typeDescriptions.typeIdentifier);\r\n}\r\nexports.isStorageVariableDeclaration = isStorageVariableDeclaration;\r\n/**\r\n * True if is interaction with external contract (change in context, no delegate calls) (send, call of other contracts)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isInteraction(node) {\r\n    return isLLCall(node.expression) || isLLSend(node.expression) || isExternalDirectCall(node) || isTransfer(node.expression) ||\r\n        isLLCall04(node.expression) || isLLSend04(node.expression) ||\r\n        // to cover case of address.call.value.gas , See: inheritance.sol  \r\n        (node.expression && node.expression.expression && isLLCall(node.expression.expression)) ||\r\n        (node.expression && node.expression.expression && isLLCall04(node.expression.expression));\r\n}\r\nexports.isInteraction = isInteraction;\r\n/**\r\n * True if node changes state of a variable or is inline assembly (does not include check if it is a global state change, on a state variable)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isEffect(node) {\r\n    return node.nodeType === \"Assignment\" ||\r\n        (node.nodeType === \"UnaryOperation\" && (isPlusPlusUnaryOperation(node) || isMinusMinusUnaryOperation(node))) ||\r\n        node.nodeType === \"InlineAssembly\";\r\n}\r\nexports.isEffect = isEffect;\r\n/**\r\n * True if node changes state of a variable or is inline assembly (Checks if variable is a state variable via provided list)\r\n * @node {ASTNode} some AstNode\r\n * @node {list Variable declaration} state variable declaration currently in scope\r\n * @return {bool}\r\n */\r\nfunction isWriteOnStateVariable(effectNode, stateVariables) {\r\n    return effectNode.nodeType === \"InlineAssembly\" || (isEffect(effectNode) && isStateVariable(getEffectedVariableName(effectNode), stateVariables));\r\n}\r\nexports.isWriteOnStateVariable = isWriteOnStateVariable;\r\n/**\r\n * True if there is a variable with name, name in stateVariables\r\n * @node {ASTNode} some AstNode\r\n * @node {list Variable declaration} state variable declaration currently in scope\r\n * @return {bool}\r\n */\r\nfunction isStateVariable(name, stateVariables) {\r\n    return stateVariables.some((item) => item.stateVariable && name === getDeclaredVariableName(item));\r\n}\r\nexports.isStateVariable = isStateVariable;\r\n/**\r\n * True if is function defintion that is flaged as constant\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isConstantFunction(node) {\r\n    return node.stateMutability === 'view' || node.stateMutability === 'pure';\r\n}\r\nexports.isConstantFunction = isConstantFunction;\r\n/**\r\n* True if variable decalaration is converted into a getter method\r\n * @node {ASTNode} variable declaration AstNode\r\n * @return {bool}\r\n */\r\nfunction isVariableTurnedIntoGetter(varDeclNode) {\r\n    return varDeclNode.stateVariable && varDeclNode.visibility === 'public';\r\n}\r\nexports.isVariableTurnedIntoGetter = isVariableTurnedIntoGetter;\r\n/**\r\n * True if is function defintion has payable modifier\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isPayableFunction(node) {\r\n    return node.stateMutability === 'payable';\r\n}\r\nexports.isPayableFunction = isPayableFunction;\r\n/**\r\n * True if is constructor\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isConstructor(node) {\r\n    return node.kind === \"constructor\";\r\n}\r\nexports.isConstructor = isConstructor;\r\n/**\r\n * True if node is integer division that truncates (not only int literals since those yield a rational value)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isIntDivision(node) {\r\n    return operator(node, exactMatch(remix_lib_1.util.escapeRegExp('/'))) && typeDescription(node.rightExpression, remix_lib_1.util.escapeRegExp('int'));\r\n}\r\nexports.isIntDivision = isIntDivision;\r\n/**\r\n * True if is block / SubScope has top level binops (e.g. that are not assigned to anything, most of the time confused compare instead of assign)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isSubScopeWithTopLevelUnAssignedBinOp(node) {\r\n    if (node.nodeType === 'Block')\r\n        return node.statements.some(isBinaryOpInExpression);\r\n    // for 'without braces' loops\r\n    else if (node && node.nodeType && isSubScopeStatement(node)) {\r\n        if (node.nodeType === 'IfStatement')\r\n            return (node.trueBody && node.trueBody.nodeType === \"ExpressionStatement\" && isBinaryOpInExpression(node.trueBody)) ||\r\n                (node.falseBody && node.falseBody.nodeType === \"ExpressionStatement\" && isBinaryOpInExpression(node.falseBody));\r\n        else\r\n            return node.body && node.body.nodeType === \"ExpressionStatement\" && isBinaryOpInExpression(node.body);\r\n    }\r\n}\r\nexports.isSubScopeWithTopLevelUnAssignedBinOp = isSubScopeWithTopLevelUnAssignedBinOp;\r\nfunction isSubScopeStatement(node) {\r\n    if (node.nodeType === 'IfStatement')\r\n        return (node.trueBody && node.trueBody.nodeType && !nodeType(node.trueBody, exactMatch(nodeTypes.BLOCK))) ||\r\n            (node.falseBody && node.falseBody.nodeType && !nodeType(node.falseBody, exactMatch(nodeTypes.BLOCK)));\r\n    else\r\n        return node.body && node.body.nodeType && !nodeType(node.body, exactMatch(nodeTypes.BLOCK));\r\n}\r\n/**\r\n * True if binary operation inside of expression statement\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isBinaryOpInExpression(node) {\r\n    return node.nodeType === \"ExpressionStatement\" && node.expression.nodeType === \"BinaryOperation\";\r\n}\r\n/**\r\n * True if unary increment operation\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isPlusPlusUnaryOperation(node) {\r\n    return node.operator === '++';\r\n}\r\nexports.isPlusPlusUnaryOperation = isPlusPlusUnaryOperation;\r\n/**\r\n * True if unary delete operation\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isDeleteUnaryOperation(node) {\r\n    return node.operator === 'delete';\r\n}\r\nexports.isDeleteUnaryOperation = isDeleteUnaryOperation;\r\n/**\r\n * True if unary decrement operation\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isMinusMinusUnaryOperation(node) {\r\n    return node.operator === '--';\r\n}\r\nexports.isMinusMinusUnaryOperation = isMinusMinusUnaryOperation;\r\n/**\r\n * True if all functions on a contract are implemented\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isFullyImplementedContract(node) {\r\n    return node.fullyImplemented === true;\r\n}\r\nexports.isFullyImplementedContract = isFullyImplementedContract;\r\n/**\r\n * True if it is a library contract defintion\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLibrary(node) {\r\n    return node.contractKind === 'library';\r\n}\r\nexports.isLibrary = isLibrary;\r\n/**\r\n * True if it is a local call to non const function\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isCallToNonConstLocalFunction(node) {\r\n    return isLocalCall(node) && !expressionTypeDescription(node, basicRegex.CONSTANTFUNCTIONTYPE);\r\n}\r\nexports.isCallToNonConstLocalFunction = isCallToNonConstLocalFunction;\r\n/**\r\n * True if it is a call to a library\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLibraryCall(node) {\r\n    return isMemberAccess(node, basicRegex.FUNCTIONTYPE, undefined, basicRegex.LIBRARYTYPE, undefined);\r\n}\r\nexports.isLibraryCall = isLibraryCall;\r\n/**\r\n * True if it is an external call via defined interface (not low level call)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isExternalDirectCall(node) {\r\n    return isMemberAccess(node.expression, basicRegex.EXTERNALFUNCTIONTYPE, undefined, basicRegex.CONTRACTTYPE, undefined) && !isThisLocalCall(node.expression) && !isSuperLocalCall(node.expression);\r\n}\r\nexports.isExternalDirectCall = isExternalDirectCall;\r\n/**\r\n * True if access to block.timestamp via now alias\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isNowAccess(node) {\r\n    return node.name === \"now\" && typeDescription(node, exactMatch(basicTypes.UINT));\r\n}\r\nexports.isNowAccess = isNowAccess;\r\n/**\r\n * True if access to block.timestamp via now alias\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isTxOriginAccess(node) {\r\n    return isMemberAccess(node, 'address', 'tx', 'tx', 'origin');\r\n}\r\nexports.isTxOriginAccess = isTxOriginAccess;\r\n/**\r\n * True if access to block.timestamp\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isBlockTimestampAccess(node) {\r\n    return isSpecialVariableAccess(node, specialVariables.BLOCKTIMESTAMP);\r\n}\r\nexports.isBlockTimestampAccess = isBlockTimestampAccess;\r\n/**\r\n * True if access to block.blockhash\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isBlockBlockHashAccess(node) {\r\n    return (isBuiltinFunctionCall(node) && getLocalCallName(node) === 'blockhash') ||\r\n        isSpecialVariableAccess(node.expression, specialVariables.BLOCKHASH);\r\n}\r\nexports.isBlockBlockHashAccess = isBlockBlockHashAccess;\r\n/**\r\n * True if call to local function via this keyword\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isThisLocalCall(node) {\r\n    return isMemberAccess(node, basicRegex.FUNCTIONTYPE, exactMatch('this'), basicRegex.CONTRACTTYPE, undefined);\r\n}\r\nexports.isThisLocalCall = isThisLocalCall;\r\n/**\r\n * True if access to local function via super keyword\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isSuperLocalCall(node) {\r\n    return isMemberAccess(node, basicRegex.FUNCTIONTYPE, exactMatch('super'), basicRegex.CONTRACTTYPE, undefined);\r\n}\r\nexports.isSuperLocalCall = isSuperLocalCall;\r\n/**\r\n * True if call to local function\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLocalCall(node) {\r\n    return node.nodeType === 'FunctionCall' && node.kind === 'functionCall' &&\r\n        node.expression.nodeType === 'Identifier' && expressionTypeDescription(node, basicRegex.FUNCTIONTYPE) &&\r\n        !expressionTypeDescription(node, basicRegex.EXTERNALFUNCTIONTYPE);\r\n}\r\nexports.isLocalCall = isLocalCall;\r\n/**\r\n * True if low level call (send, call, delegatecall, callcode)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLowLevelCall(node) {\r\n    return isLLCall(node) ||\r\n        isLLDelegatecall(node) ||\r\n        isLLSend(node) ||\r\n        isLLSend04(node) ||\r\n        isLLCallcode(node) ||\r\n        isLLCall04(node) ||\r\n        isLLDelegatecall04(node);\r\n}\r\nexports.isLowLevelCall = isLowLevelCall;\r\n/**\r\n * True if low level send (solidity < 0.5)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLLSend04(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes.SEND.type)), undefined, exactMatch(basicTypes.ADDRESS), exactMatch(lowLevelCallTypes.SEND.ident));\r\n}\r\nexports.isLLSend04 = isLLSend04;\r\n/**\r\n * True if low level send (solidity >= 0.5)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLLSend(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes.SEND.type)), undefined, exactMatch(basicTypes.PAYABLE_ADDRESS), exactMatch(lowLevelCallTypes.SEND.ident));\r\n}\r\nexports.isLLSend = isLLSend;\r\n/**\r\n * True if low level call\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLLCall(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes.CALL.type)), undefined, exactMatch(basicTypes.ADDRESS), exactMatch(lowLevelCallTypes.CALL.ident)) ||\r\n        isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes.CALL.type)), undefined, exactMatch(basicTypes.PAYABLE_ADDRESS), exactMatch(lowLevelCallTypes.CALL.ident));\r\n}\r\nexports.isLLCall = isLLCall;\r\n/**\r\n * True if low level payable call (solidity < 0.5)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLLCall04(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes['CALL-0.4'].type)), undefined, exactMatch(basicTypes.ADDRESS), exactMatch(lowLevelCallTypes['CALL-0.4'].ident));\r\n}\r\nexports.isLLCall04 = isLLCall04;\r\n/**\r\n * True if low level callcode\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLLCallcode(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes.CALLCODE.type)), undefined, exactMatch(basicTypes.ADDRESS), exactMatch(lowLevelCallTypes.CALLCODE.ident));\r\n}\r\nexports.isLLCallcode = isLLCallcode;\r\n/**\r\n * True if low level delegatecall\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLLDelegatecall(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes.DELEGATECALL.type)), undefined, matches(basicTypes.PAYABLE_ADDRESS, basicTypes.ADDRESS), exactMatch(lowLevelCallTypes.DELEGATECALL.ident));\r\n}\r\nexports.isLLDelegatecall = isLLDelegatecall;\r\n/**\r\n * True if low level delegatecall (solidity < 0.5)\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isLLDelegatecall04(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes['DELEGATECALL-0.4'].type)), undefined, matches(basicTypes.PAYABLE_ADDRESS, basicTypes.ADDRESS), exactMatch(lowLevelCallTypes['DELEGATECALL-0.4'].ident));\r\n}\r\nexports.isLLDelegatecall04 = isLLDelegatecall04;\r\n/**\r\n * True if transfer call\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\nfunction isTransfer(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(lowLevelCallTypes.TRANSFER.type)), undefined, matches(basicTypes.ADDRESS, basicTypes.PAYABLE_ADDRESS), exactMatch(lowLevelCallTypes.TRANSFER.ident));\r\n}\r\nexports.isTransfer = isTransfer;\r\nfunction isStringToBytesConversion(node) {\r\n    return isExplicitCast(node, remix_lib_1.util.escapeRegExp('string *'), remix_lib_1.util.escapeRegExp('bytes'));\r\n}\r\nexports.isStringToBytesConversion = isStringToBytesConversion;\r\nfunction isExplicitCast(node, castFromType, castToType) {\r\n    return node.kind === \"typeConversion\" &&\r\n        nodeType(node.expression, exactMatch(nodeTypes.ELEMENTARYTYPENAMEEXPRESSION)) && node.expression.typeName === castToType &&\r\n        nodeType(node.arguments[0], exactMatch(nodeTypes.IDENTIFIER)) && typeDescription(node.arguments[0], castFromType);\r\n}\r\nfunction isBytesLengthCheck(node) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(basicTypes.UINT)), undefined, remix_lib_1.util.escapeRegExp('bytes *'), 'length');\r\n}\r\nexports.isBytesLengthCheck = isBytesLengthCheck;\r\n/**\r\n * True if it is a loop\r\n * @node {ASTNode} some AstNode\r\n * @return {bool}\r\n */\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction isLoop(node) {\r\n    return nodeType(node, exactMatch(nodeTypes.FORSTATEMENT)) ||\r\n        nodeType(node, exactMatch(nodeTypes.WHILESTATEMENT)) ||\r\n        nodeType(node, exactMatch(nodeTypes.DOWHILESTATEMENT));\r\n}\r\nexports.isLoop = isLoop;\r\n// #################### Complex Node Identification - Private\r\nfunction isMemberAccess(node, retType, accessor, accessorType, memberName) {\r\n    if (node && nodeType(node, exactMatch('MemberAccess'))) {\r\n        const nodeTypeDef = typeDescription(node, retType);\r\n        const nodeMemName = memName(node, memberName);\r\n        const nodeExpMemName = memName(node.expression, accessor);\r\n        const nodeExpTypeDef = expressionTypeDescription(node, accessorType);\r\n        return nodeTypeDef && nodeMemName && nodeExpTypeDef && nodeExpMemName;\r\n    }\r\n    else\r\n        return false;\r\n}\r\nfunction isSpecialVariableAccess(node, varType) {\r\n    return isMemberAccess(node, exactMatch(remix_lib_1.util.escapeRegExp(varType.type)), varType.obj, varType.obj, varType.member);\r\n}\r\nexports.isSpecialVariableAccess = isSpecialVariableAccess;\r\n// #################### Node Identification Primitives\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction expressionTypeDescription(node, typeRegex) {\r\n    return new RegExp(typeRegex).test(node.expression.typeDescriptions.typeString);\r\n}\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction typeDescription(node, typeRegex) {\r\n    return new RegExp(typeRegex).test(node.typeDescriptions.typeString);\r\n}\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction nodeType(node, typeRegex) {\r\n    return new RegExp(typeRegex).test(node.nodeType);\r\n}\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction nodeTypeIn(node, typeRegex) {\r\n    return typeRegex.some((typeRegex) => nodeType(node, typeRegex));\r\n}\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction memName(node, memNameRegex) {\r\n    return (node && !memNameRegex) || new RegExp(memNameRegex).test(node.name) || new RegExp(memNameRegex).test(node.memberName);\r\n}\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction operator(node, opRegex) {\r\n    return new RegExp(opRegex).test(node.operator);\r\n}\r\n// #################### Helpers\r\nfunction exactMatch(regexStr) {\r\n    return '^' + regexStr + '$';\r\n}\r\nfunction matches(...fnArgs) {\r\n    const args = [];\r\n    for (let k = 0; k < fnArgs.length; k++) {\r\n        args.push(fnArgs[k]);\r\n    }\r\n    return '(' + args.join('|') + ')';\r\n}\r\n/**\r\n * Finds first node of a certain type under a specific node.\r\n * @node {AstNode} node to start form\r\n * @type {String} Type the ast node should have\r\n * @return {AstNode} null or node found\r\n * Note: developed keeping identifier node search in mind to get first identifier node from left in subscope\r\n */\r\nfunction findFirstSubNodeLTR(node, type) {\r\n    if (node.nodeType && nodeType(node, type))\r\n        return node;\r\n    else if (node.nodeType && nodeType(node, exactMatch('Assignment')))\r\n        return findFirstSubNodeLTR(node.leftHandSide, type);\r\n    else if (node.nodeType && nodeType(node, exactMatch('MemberAccess')))\r\n        return findFirstSubNodeLTR(node.expression, type);\r\n    else if (node.nodeType && nodeType(node, exactMatch('IndexAccess')))\r\n        return findFirstSubNodeLTR(node.baseExpression, type);\r\n    else if (node.nodeType && nodeType(node, exactMatch('UnaryOperation')))\r\n        return findFirstSubNodeLTR(node.subExpression, type);\r\n}\r\n/**\r\n * Builds a function signature as used in the AST of the solc-json AST\r\n * @param {Array} paramTypes\r\n *  list of parameter type names\r\n * @param {Array} returnTypes\r\n *  list of return type names\r\n * @return {Boolean} isPayable\r\n */\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction buildFunctionSignature(paramTypes, returnTypes, isPayable, additionalMods) {\r\n    return 'function (' + remix_lib_1.util.concatWithSeperator(paramTypes, ',') + ')' + ((isPayable) ? ' payable' : '') + ((additionalMods) ? ' ' + additionalMods : '') + ((returnTypes.length) ? ' returns (' + remix_lib_1.util.concatWithSeperator(returnTypes, ',') + ')' : '');\r\n}\r\nfunction buildAbiSignature(funName, paramTypes) {\r\n    return funName + '(' + remix_lib_1.util.concatWithSeperator(paramTypes, ',') + ')';\r\n}\r\n// To create the method signature similar to contract.evm.gasEstimates.external object\r\n// For address payable, return address \r\nfunction getMethodParamsSplittedTypeDesc(node, contracts) {\r\n    return node.parameters.parameters.map((varNode, varIndex) => {\r\n        let finalTypeString;\r\n        const typeString = varNode.typeDescriptions.typeString;\r\n        if (typeString.includes('struct')) {\r\n            const fnName = node.name;\r\n            for (const filename in contracts) {\r\n                for (const contractName in contracts[filename]) {\r\n                    const methodABI = contracts[filename][contractName].abi\r\n                        .find(e => {\r\n                        var _a;\r\n                        return e.name === fnName && ((_a = e.inputs) === null || _a === void 0 ? void 0 : _a.length) &&\r\n                            e.inputs[varIndex]['type'].includes('tuple') &&\r\n                            e.inputs[varIndex]['internalType'] === typeString;\r\n                    });\r\n                    if (methodABI && methodABI.inputs) {\r\n                        const inputs = methodABI.inputs[varIndex];\r\n                        const typeStr = getTypeStringFromComponents(inputs['components']);\r\n                        finalTypeString = typeStr + inputs['type'].replace('tuple', '');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else\r\n            finalTypeString = typeString.split(' ')[0];\r\n        return finalTypeString;\r\n    });\r\n}\r\nexports.getMethodParamsSplittedTypeDesc = getMethodParamsSplittedTypeDesc;\r\nfunction getTypeStringFromComponents(components) {\r\n    let typeString = '(';\r\n    for (let i = 0; i < components.length; i++) {\r\n        const param = components[i];\r\n        if (param.type.includes('tuple') && param.components && param.components.length > 0) {\r\n            typeString = typeString + getTypeStringFromComponents(param.components);\r\n            typeString = typeString + param.type.replace('tuple', '');\r\n        }\r\n        else\r\n            typeString = typeString + param.type;\r\n        if (i !== components.length - 1)\r\n            typeString = typeString + ',';\r\n    }\r\n    typeString = typeString + ')';\r\n    return typeString;\r\n}\r\n/**\r\n * Get compiler version from compiler contract object\r\n * This is used to redirect the user to specific version of Solidity documentation\r\n * @param contractFiles compiled contract object\r\n */\r\nfunction getCompilerVersion(contractFiles) {\r\n    let version = 'latest';\r\n    const fileNames = Object.keys(contractFiles);\r\n    const contracts = contractFiles[fileNames[0]];\r\n    const contractNames = Object.keys(contracts);\r\n    const contract = contracts[contractNames[0]];\r\n    // For some compiler/contract,  metadata is \"\"\r\n    if (contract && contract.metadata) {\r\n        const metadata = JSON.parse(contract.metadata);\r\n        const compilerVersion = metadata.compiler.version;\r\n        if (!compilerVersion.includes('nightly'))\r\n            version = 'v' + compilerVersion.split('+commit')[0];\r\n    }\r\n    return version;\r\n}\r\nexports.getCompilerVersion = getCompilerVersion;\r\nconst helpers = {\r\n    expressionTypeDescription,\r\n    nodeType,\r\n    memName,\r\n    operator,\r\n    buildFunctionSignature,\r\n    buildAbiSignature\r\n};\r\nexports.helpers = helpers;\r\n//# sourceMappingURL=staticAnalysisCommon.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nclass stringBytesLength {\r\n    constructor() {\r\n        this.name = `String length: `;\r\n        this.description = `Bytes length != String length`;\r\n        this.category = categories_1.default.MISC;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n        this.stringToBytesConversions = [];\r\n        this.bytesLengthChecks = [];\r\n    }\r\n    visit(node) {\r\n        if (node.nodeType === \"FunctionCall\" && staticAnalysisCommon_1.isStringToBytesConversion(node))\r\n            this.stringToBytesConversions.push(node);\r\n        else if (node.nodeType === \"MemberAccess\" && staticAnalysisCommon_1.isBytesLengthCheck(node))\r\n            this.bytesLengthChecks.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        if (this.stringToBytesConversions.length > 0 && this.bytesLengthChecks.length > 0) {\r\n            return [{\r\n                    warning: `\"bytes\" and \"string\" lengths are not the same since strings are assumed to be UTF-8 encoded (according to the ABI defintion) therefore one character is not nessesarily encoded in one byte of data.`,\r\n                    location: this.bytesLengthChecks[0].src,\r\n                    more: `https://solidity.readthedocs.io/en/${version}/abi-spec.html#argument-encoding`\r\n                }];\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n}\r\nexports.default = stringBytesLength;\r\n//# sourceMappingURL=stringBytesLength.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nclass thisLocal {\r\n    constructor() {\r\n        this.warningNodes = [];\r\n        this.name = `This on local calls: `;\r\n        this.description = `Invocation of local functions via 'this'`;\r\n        this.category = categories_1.default.GAS;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (node.nodeType === 'MemberAccess' && staticAnalysisCommon_1.isThisLocalCall(node))\r\n            this.warningNodes.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.warningNodes.map(function (item, i) {\r\n            return {\r\n                warning: `Use of \"this\" for local functions: Never use \"this\" to call functions in the same contract, it only consumes more gas than normal local calls.`,\r\n                location: item.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/control-structures.html#external-function-calls`\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = thisLocal;\r\n//# sourceMappingURL=thisLocal.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst categories_1 = tslib_1.__importDefault(require(\"./categories\"));\r\nconst algorithmCategories_1 = tslib_1.__importDefault(require(\"./algorithmCategories\"));\r\nconst staticAnalysisCommon_1 = require(\"./staticAnalysisCommon\");\r\nclass txOrigin {\r\n    constructor() {\r\n        this.txOriginNodes = [];\r\n        this.name = `Transaction origin: `;\r\n        this.description = `'tx.origin' used`;\r\n        this.category = categories_1.default.SECURITY;\r\n        this.algorithm = algorithmCategories_1.default.EXACT;\r\n        this.version = {\r\n            start: '0.4.12'\r\n        };\r\n    }\r\n    visit(node) {\r\n        if (staticAnalysisCommon_1.isTxOriginAccess(node))\r\n            this.txOriginNodes.push(node);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    report(compilationResults) {\r\n        const version = staticAnalysisCommon_1.getCompilerVersion(compilationResults.contracts);\r\n        return this.txOriginNodes.map((item, i) => {\r\n            return {\r\n                warning: `Use of tx.origin: \"tx.origin\" is useful only in very exceptional cases. \r\n                  If you use it for authentication, you usually want to replace it by \"msg.sender\", because otherwise any contract you call can act on your behalf.`,\r\n                location: item.src,\r\n                more: `https://solidity.readthedocs.io/en/${version}/security-considerations.html#tx-origin`\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.default = txOrigin;\r\n//# sourceMappingURL=txOrigin.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"events\");\r\nconst isObject = function (obj) {\r\n    return obj != null && obj.constructor.name === \"Object\";\r\n};\r\nfunction isAstNode(node) {\r\n    return (isObject(node) &&\r\n        'id' in node &&\r\n        'nodeType' in node &&\r\n        'src' in node);\r\n}\r\nexports.isAstNode = isAstNode;\r\nfunction isYulAstNode(node) {\r\n    return (isObject(node) &&\r\n        'nodeType' in node &&\r\n        'src' in node);\r\n}\r\nexports.isYulAstNode = isYulAstNode;\r\n/**\r\n * Crawl the given AST through the function walk(ast, callback)\r\n */\r\n/**\r\n * visit all the AST nodes\r\n *\r\n * @param {Object} ast  - AST node\r\n * @return EventEmitter\r\n * event('node', <Node Type | false>) will be fired for every node of type <Node Type>.\r\n * event('node', \"*\") will be fired for all other nodes.\r\n * in each case, if the event emits false it does not descend into children.\r\n * If no event for the current type, children are visited.\r\n */\r\nclass AstWalker extends events_1.EventEmitter {\r\n    manageCallback(node, callback // eslint-disable-line @typescript-eslint/ban-types\r\n    ) {\r\n        // FIXME: we shouldn't be doing this callback determination type on each AST node,\r\n        // since the callback function is set once per walk.\r\n        // Better would be to store the right one as a variable and\r\n        // return that.\r\n        if (node) {\r\n            if ((node).name in callback) {\r\n                return callback[(node).name](node);\r\n            }\r\n            else {\r\n                return callback[\"*\"](node);\r\n            }\r\n        }\r\n        if (node) {\r\n            if (node.nodeType in callback) {\r\n                /* istanbul ignore next */\r\n                return callback[node.nodeType](node);\r\n            }\r\n            else {\r\n                /* istanbul ignore next */\r\n                return callback[\"*\"](node);\r\n            }\r\n        }\r\n    }\r\n    normalizeNodes(nodes) {\r\n        // Remove null, undefined and empty elements if any\r\n        nodes = nodes.filter(e => e);\r\n        // If any element in nodes is array, extract its members\r\n        const objNodes = [];\r\n        nodes.forEach(x => {\r\n            if (Array.isArray(x))\r\n                objNodes.push(...x);\r\n            else\r\n                objNodes.push(x);\r\n        });\r\n        // Filter duplicate nodes using id field\r\n        const normalizedNodes = [];\r\n        objNodes.forEach((element) => {\r\n            const firstIndex = normalizedNodes.findIndex(e => e.id === element.id);\r\n            if (firstIndex == -1)\r\n                normalizedNodes.push(element);\r\n        });\r\n        return normalizedNodes;\r\n    }\r\n    getASTNodeChildren(ast) {\r\n        var _a;\r\n        let nodes = ast.nodes // for ContractDefinition\r\n            || ast.body // for FunctionDefinition, ModifierDefinition, WhileStatement, DoWhileStatement, ForStatement\r\n            || ast.statements // for Block, YulBlock\r\n            || ast.members // for StructDefinition, EnumDefinition\r\n            || ast.overrides // for OverrideSpecifier\r\n            || ast.parameters // for ParameterList, EventDefinition\r\n            || ast.declarations // for VariableDeclarationStatement\r\n            || ast.expression // for Return, ExpressionStatement, FunctionCall, FunctionCallOptions, MemberAccess\r\n            || ast.components // for TupleExpression\r\n            || ast.subExpression // for UnaryOperation\r\n            || ast.eventCall // for EmitStatement\r\n            || [];\r\n        // If 'nodes' is not an array, convert it into one, for example: ast.body \r\n        if (nodes && !Array.isArray(nodes)) {\r\n            const tempArr = [];\r\n            tempArr.push(nodes);\r\n            nodes = tempArr;\r\n        }\r\n        // To break object referencing\r\n        nodes = [...nodes];\r\n        if (ast.nodes && ((_a = ast.baseContracts) === null || _a === void 0 ? void 0 : _a.length)) { // for ContractDefinition\r\n            nodes.push(...ast.baseContracts);\r\n        }\r\n        else if (ast.body && ast.overrides && ast.parameters && ast.returnParameters && ast.modifiers) { // for FunctionDefinition\r\n            nodes.push(ast.overrides);\r\n            nodes.push(ast.parameters);\r\n            nodes.push(ast.returnParameters);\r\n            nodes.push(ast.modifiers);\r\n        }\r\n        else if (ast.typeName) { // for VariableDeclaration, NewExpression, ElementaryTypeNameExpression\r\n            nodes.push(ast.typeName);\r\n        }\r\n        else if (ast.body && ast.overrides && ast.parameters) { // for ModifierDefinition\r\n            nodes.push(ast.overrides);\r\n            nodes.push(ast.parameters);\r\n        }\r\n        else if (ast.modifierName && ast.arguments) { // for ModifierInvocation\r\n            nodes.push(ast.modifierName);\r\n            nodes.push(ast.arguments);\r\n        }\r\n        else if (ast.parameterTypes && ast.returnParameterTypes) { // for ModifierInvocation\r\n            nodes.push(ast.parameterTypes);\r\n            nodes.push(ast.returnParameterTypes);\r\n        }\r\n        else if (ast.keyType && ast.valueType) { // for Mapping\r\n            nodes.push(ast.keyType);\r\n            nodes.push(ast.valueType);\r\n        }\r\n        else if (ast.baseType && ast.length) { // for ArrayTypeName\r\n            nodes.push(ast.baseType);\r\n            nodes.push(ast.length);\r\n        }\r\n        else if (ast.AST) { // for InlineAssembly\r\n            nodes.push(ast.AST);\r\n        }\r\n        else if (ast.condition && (ast.trueBody || ast.falseBody || ast.body)) { // for IfStatement, WhileStatement, DoWhileStatement\r\n            nodes.push(ast.condition);\r\n            nodes.push(ast.trueBody);\r\n            nodes.push(ast.falseBody);\r\n        }\r\n        else if (ast.parameters && ast.block) { // for TryCatchClause\r\n            nodes.push(ast.block);\r\n        }\r\n        else if (ast.externalCall && ast.clauses) { // for TryStatement\r\n            nodes.push(ast.externalCall);\r\n            nodes.push(ast.clauses);\r\n        }\r\n        else if (ast.body && ast.condition && ast.initializationExpression && ast.loopExpression) { // for ForStatement\r\n            nodes.push(ast.condition);\r\n            nodes.push(ast.initializationExpression);\r\n            nodes.push(ast.loopExpression);\r\n        }\r\n        else if (ast.declarations && ast.initialValue) { // for VariableDeclarationStatement\r\n            nodes.push(ast.initialValue);\r\n        }\r\n        else if (ast.condition && (ast.trueExpression || ast.falseExpression)) { // for Conditional\r\n            nodes.push(ast.condition);\r\n            nodes.push(ast.trueExpression);\r\n            nodes.push(ast.falseExpression);\r\n        }\r\n        else if (ast.leftHandSide && ast.rightHandSide) { // for Assignment\r\n            nodes.push(ast.leftHandSide);\r\n            nodes.push(ast.rightHandSide);\r\n        }\r\n        else if (ast.leftExpression && ast.rightExpression) { // for BinaryOperation\r\n            nodes.push(ast.leftExpression);\r\n            nodes.push(ast.rightExpression);\r\n        }\r\n        else if (ast.expression && (ast.arguments || ast.options)) { // for FunctionCall, FunctionCallOptions\r\n            nodes.push(ast.arguments ? ast.arguments : ast.options);\r\n        }\r\n        else if (ast.baseExpression && (ast.indexExpression || (ast.startExpression && ast.endExpression))) { // for IndexAccess, IndexRangeAccess\r\n            nodes.push(ast.baseExpression);\r\n            if (ast.indexExpression)\r\n                nodes.push(ast.indexExpression);\r\n            else {\r\n                nodes.push(ast.startExpression);\r\n                nodes.push(ast.endExpression);\r\n            }\r\n        }\r\n        return this.normalizeNodes(nodes);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/ban-types, @typescript-eslint/explicit-module-boundary-types\r\n    walk(ast, callback) {\r\n        if (ast) {\r\n            const children = this.getASTNodeChildren(ast);\r\n            if (callback) {\r\n                if (callback instanceof Function) {\r\n                    callback = Object({ \"*\": callback });\r\n                }\r\n                if (!(\"*\" in callback)) {\r\n                    callback[\"*\"] = function () {\r\n                        return true;\r\n                    };\r\n                }\r\n                if (this.manageCallback(ast, callback) && (children === null || children === void 0 ? void 0 : children.length)) {\r\n                    for (const k in children) {\r\n                        const child = children[k];\r\n                        this.walk(child, callback);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (children === null || children === void 0 ? void 0 : children.length) {\r\n                    for (const k in children) {\r\n                        const child = children[k];\r\n                        this.emit(\"node\", child);\r\n                        this.walk(child);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/ban-types, @typescript-eslint/explicit-module-boundary-types\r\n    walkFullInternal(ast, callback) {\r\n        if (isAstNode(ast) || isYulAstNode(ast)) {\r\n            // console.log(`XXX id ${ast.id}, nodeType: ${ast.nodeType}, src: ${ast.src}`);\r\n            callback(ast);\r\n            for (const k of Object.keys(ast)) {\r\n                // Possible optimization:\r\n                // if (k in ['id', 'src', 'nodeType']) continue;\r\n                const astItem = ast[k];\r\n                if (Array.isArray(astItem)) {\r\n                    for (const child of astItem) {\r\n                        if (child) {\r\n                            this.walkFullInternal(child, callback);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this.walkFullInternal(astItem, callback);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Normalizes parameter callback and calls walkFullInternal\r\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\n    walkFull(ast, callback) {\r\n        if (isAstNode(ast) || isYulAstNode(ast))\r\n            return this.walkFullInternal(ast, callback);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/ban-types, @typescript-eslint/explicit-module-boundary-types\r\n    walkAstList(sourcesList, cb) {\r\n        if (cb) {\r\n            if (sourcesList.ast) {\r\n                this.walk(sourcesList.ast, cb);\r\n            }\r\n        }\r\n        else {\r\n            if (sourcesList.ast) {\r\n                this.walk(sourcesList.ast);\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.AstWalker = AstWalker;\r\n//# sourceMappingURL=astWalker.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\ntslib_1.__exportStar(require(\"./astWalker\"), exports);\r\ntslib_1.__exportStar(require(\"./sourceMappings\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst astWalker_1 = require(\"./astWalker\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\n/**\r\n * Turn an character offset into a \"LineColPosition\".\r\n *\r\n * @param offset  The character offset to convert.\r\n */\r\nfunction lineColPositionFromOffset(offset, lineBreaks) {\r\n    let line = remix_lib_1.util.findLowerBound(offset, lineBreaks);\r\n    if (lineBreaks[line] !== offset) {\r\n        line += 1;\r\n    }\r\n    const beginColumn = line === 0 ? 0 : (lineBreaks[line - 1] + 1);\r\n    return {\r\n        line: line + 1,\r\n        character: (offset - beginColumn) + 1\r\n    };\r\n}\r\nexports.lineColPositionFromOffset = lineColPositionFromOffset;\r\n/**\r\n * Turn a solc AST's \"src\" attribute string (s:l:f)\r\n * into a Location\r\n *\r\n * @param astNode  The object to convert.\r\n */\r\nfunction sourceLocationFromAstNode(astNode) {\r\n    if (astWalker_1.isAstNode(astNode) && astWalker_1.isYulAstNode(astNode) && astNode.src) {\r\n        return sourceLocationFromSrc(astNode.src);\r\n    }\r\n    return null;\r\n}\r\nexports.sourceLocationFromAstNode = sourceLocationFromAstNode;\r\n/**\r\n * Break out fields of solc AST's \"src\" attribute string (s:l:f)\r\n * into its \"start\", \"length\", and \"file index\" components\r\n * and return that as a Location\r\n *\r\n * @param src  A solc \"src\" field.\r\n * @returns {Location}\r\n */\r\nfunction sourceLocationFromSrc(src) {\r\n    const split = src.split(':');\r\n    return {\r\n        start: parseInt(split[0], 10),\r\n        length: parseInt(split[1], 10),\r\n        file: parseInt(split[2], 10)\r\n    };\r\n}\r\nexports.sourceLocationFromSrc = sourceLocationFromSrc;\r\n/**\r\n * Routines for retrieving solc AST object(s) using some criteria, usually\r\n * includng \"src' information.\r\n */\r\nclass SourceMappings {\r\n    constructor(source) {\r\n        this.source = source;\r\n        // Create a list of line offsets which will be used to map between\r\n        // character offset and line/column positions.\r\n        const lineBreaks = [];\r\n        for (let pos = source.indexOf('\\n'); pos >= 0; pos = source.indexOf('\\n', pos + 1)) {\r\n            lineBreaks.push(pos);\r\n        }\r\n        this.lineBreaks = lineBreaks;\r\n    }\r\n    ;\r\n    /**\r\n     * Get a list of nodes that are at the given \"position\".\r\n     *\r\n     * @param astNodeType  Type of node to return or null.\r\n     * @param position     Character offset where AST node should be located.\r\n     */\r\n    nodesAtPosition(astNodeType, position, ast) {\r\n        const astWalker = new astWalker_1.AstWalker();\r\n        const found = [];\r\n        const callback = function (node) {\r\n            const nodeLocation = sourceLocationFromAstNode(node);\r\n            if (nodeLocation &&\r\n                nodeLocation.start == position.start &&\r\n                nodeLocation.length == position.length) {\r\n                if (!astNodeType || astNodeType === node.nodeType) {\r\n                    found.push(node);\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        astWalker.walkFull(ast, callback);\r\n        return found;\r\n    }\r\n    /**\r\n     * Retrieve the first \"astNodeType\" that includes the source map at arg instIndex, or \"null\" if none found.\r\n     *\r\n     * @param astNodeType   nodeType that a found ASTNode must be. Use \"null\" if any ASTNode can match.\r\n     * @param sourceLocation \"src\" location that the AST node must match.\r\n     */\r\n    findNodeAtSourceLocation(astNodeType, sourceLocation, ast) {\r\n        const astWalker = new astWalker_1.AstWalker();\r\n        let found = null;\r\n        /* FIXME: Looking at AST walker code,\r\n           I don't understand a need to return a boolean. */\r\n        const callback = function (node) {\r\n            const nodeLocation = sourceLocationFromAstNode(node);\r\n            if (nodeLocation &&\r\n                nodeLocation.start == sourceLocation.start &&\r\n                nodeLocation.length == sourceLocation.length) {\r\n                if (astNodeType == undefined || astNodeType === node.nodeType) {\r\n                    found = node;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        astWalker.walkFull(ast, callback);\r\n        return found;\r\n    }\r\n    /**\r\n     * Retrieve the line/column range position for the given source-mapping string.\r\n     *\r\n     * @param src  Solc \"src\" object containing attributes {source} and {length}.\r\n     */\r\n    srcToLineColumnRange(src) {\r\n        const sourceLocation = sourceLocationFromSrc(src);\r\n        if (sourceLocation.start >= 0 && sourceLocation.length >= 0) {\r\n            return {\r\n                start: lineColPositionFromOffset(sourceLocation.start, this.lineBreaks),\r\n                end: lineColPositionFromOffset(sourceLocation.start + sourceLocation.length, this.lineBreaks)\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                start: null,\r\n                end: null\r\n            };\r\n        }\r\n    }\r\n}\r\nexports.SourceMappings = SourceMappings;\r\n//# sourceMappingURL=sourceMappings.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst storageViewer_1 = require(\"./storage/storageViewer\");\r\nconst storageResolver_1 = require(\"./storage/storageResolver\");\r\nconst traceManager_1 = require(\"./trace/traceManager\");\r\nconst codeManager_1 = require(\"./code/codeManager\");\r\nconst traceHelper_1 = require(\"./trace/traceHelper\");\r\nconst eventManager_1 = require(\"./eventManager\");\r\nconst solidity_decoder_1 = require(\"./solidity-decoder\");\r\n/**\r\n  * Ethdebugger is a wrapper around a few classes that helps debugging a transaction\r\n  *\r\n  * - Web3Providers - define which environment (web3) the transaction will be retrieved from\r\n  * - TraceManager - Load / Analyze the trace and retrieve details of specific test\r\n  * - CodeManager - Retrieve loaded byte code and help to resolve AST item from vmtrace index\r\n  * - SolidityProxy - Basically used to extract state variable from AST\r\n  * - Breakpoint Manager - Used to add / remove / jumpto breakpoint\r\n  * - InternalCallTree - Used to retrieved local variables\r\n  * - StorageResolver - Help resolving the storage accross different steps\r\n  *\r\n  * @param {Map} opts  -  { function compilationResult } //\r\n  */\r\nclass Ethdebugger {\r\n    constructor(opts) {\r\n        this.compilationResult = opts.compilationResult || function (contractAddress) { return null; };\r\n        this.web3 = opts.web3;\r\n        this.opts = opts;\r\n        this.event = new eventManager_1.EventManager();\r\n        this.traceManager = new traceManager_1.TraceManager({ web3: this.web3 });\r\n        this.codeManager = new codeManager_1.CodeManager(this.traceManager);\r\n        this.solidityProxy = new solidity_decoder_1.SolidityProxy({ getCurrentCalledAddressAt: this.traceManager.getCurrentCalledAddressAt.bind(this.traceManager), getCode: this.codeManager.getCode.bind(this.codeManager) });\r\n        this.storageResolver = null;\r\n        const includeLocalVariables = true;\r\n        this.callTree = new solidity_decoder_1.InternalCallTree(this.event, this.traceManager, this.solidityProxy, this.codeManager, Object.assign(Object.assign({}, opts), { includeLocalVariables }));\r\n    }\r\n    setManagers() {\r\n        this.traceManager = new traceManager_1.TraceManager({ web3: this.web3 });\r\n        this.codeManager = new codeManager_1.CodeManager(this.traceManager);\r\n        this.solidityProxy = new solidity_decoder_1.SolidityProxy({ getCurrentCalledAddressAt: this.traceManager.getCurrentCalledAddressAt.bind(this.traceManager), getCode: this.codeManager.getCode.bind(this.codeManager) });\r\n        this.storageResolver = null;\r\n        const includeLocalVariables = true;\r\n        this.callTree = new solidity_decoder_1.InternalCallTree(this.event, this.traceManager, this.solidityProxy, this.codeManager, Object.assign(Object.assign({}, this.opts), { includeLocalVariables }));\r\n        this.event.trigger('managersChanged');\r\n    }\r\n    resolveStep(index) {\r\n        this.codeManager.resolveStep(index, this.tx);\r\n    }\r\n    setCompilationResult(compilationResult) {\r\n        this.solidityProxy.reset((compilationResult && compilationResult.data) || {});\r\n    }\r\n    sourceLocationFromVMTraceIndex(address, stepIndex) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            return this.callTree.sourceLocationTracker.getSourceLocationFromVMTraceIndex(address, stepIndex, this.solidityProxy.contracts);\r\n        });\r\n    }\r\n    getValidSourceLocationFromVMTraceIndex(address, stepIndex) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            return this.callTree.sourceLocationTracker.getValidSourceLocationFromVMTraceIndex(address, stepIndex, this.solidityProxy.contracts);\r\n        });\r\n    }\r\n    sourceLocationFromInstructionIndex(address, instIndex, callback) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            return this.callTree.sourceLocationTracker.getSourceLocationFromInstructionIndex(address, instIndex, this.solidityProxy.contracts);\r\n        });\r\n    }\r\n    /* breakpoint */\r\n    setBreakpointManager(breakpointManager) {\r\n        this.breakpointManager = breakpointManager;\r\n    }\r\n    /* decode locals */\r\n    extractLocalsAt(step) {\r\n        return this.callTree.findScope(step);\r\n    }\r\n    decodeLocalsAt(step, sourceLocation, callback) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const stack = this.traceManager.getStackAt(step);\r\n                const memory = this.traceManager.getMemoryAt(step);\r\n                const address = this.traceManager.getCurrentCalledAddressAt(step);\r\n                try {\r\n                    const storageViewer = new storageViewer_1.StorageViewer({ stepIndex: step, tx: this.tx, address: address }, this.storageResolver, this.traceManager);\r\n                    const locals = yield solidity_decoder_1.localDecoder.solidityLocals(step, this.callTree, stack, memory, storageViewer, sourceLocation, null);\r\n                    if (locals['error']) {\r\n                        return callback(locals['error']);\r\n                    }\r\n                    return callback(null, locals);\r\n                }\r\n                catch (e) {\r\n                    callback(e.message);\r\n                }\r\n            }\r\n            catch (error) {\r\n                callback(error);\r\n            }\r\n        });\r\n    }\r\n    /* decode state */\r\n    extractStateAt(step) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            return this.solidityProxy.extractStateVariablesAt(step);\r\n        });\r\n    }\r\n    decodeStateAt(step, stateVars, callback) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const address = this.traceManager.getCurrentCalledAddressAt(step);\r\n                const storageViewer = new storageViewer_1.StorageViewer({ stepIndex: step, tx: this.tx, address: address }, this.storageResolver, this.traceManager);\r\n                const result = yield solidity_decoder_1.stateDecoder.decodeState(stateVars, storageViewer);\r\n                return result;\r\n            }\r\n            catch (error) {\r\n                callback(error);\r\n            }\r\n        });\r\n    }\r\n    storageViewAt(step, address) {\r\n        return new storageViewer_1.StorageViewer({ stepIndex: step, tx: this.tx, address: address }, this.storageResolver, this.traceManager);\r\n    }\r\n    updateWeb3(web3) {\r\n        this.web3 = web3;\r\n        this.setManagers();\r\n    }\r\n    unLoad() {\r\n        this.traceManager.init();\r\n        this.codeManager.clear();\r\n        this.event.trigger('traceUnloaded');\r\n    }\r\n    debug(tx) {\r\n        if (this.traceManager.isLoading) {\r\n            return;\r\n        }\r\n        tx.to = tx.to || traceHelper_1.contractCreationToken('0');\r\n        this.tx = tx;\r\n        this.traceManager.resolveTrace(tx).then((result) => tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            this.setCompilationResult(yield this.compilationResult(tx.to));\r\n            this.event.trigger('newTraceLoaded', [this.traceManager.trace]);\r\n            if (this.breakpointManager && this.breakpointManager.hasBreakpoint()) {\r\n                this.breakpointManager.jumpNextBreakpoint(false);\r\n            }\r\n            this.storageResolver = new storageResolver_1.StorageResolver({ web3: this.traceManager.web3 });\r\n        })).catch((error) => {\r\n            this.statusMessage = error ? error.message : 'Trace not loaded';\r\n        });\r\n    }\r\n}\r\nexports.Ethdebugger = Ethdebugger;\r\n//# sourceMappingURL=Ethdebugger.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nconst debugger_js_1 = require(\"../debugger/debugger.js\");\r\nconst events_1 = require(\"events\");\r\nclass CmdLine {\r\n    constructor() {\r\n        this.events = new events_1.EventEmitter();\r\n        this.lineColumnPos = null;\r\n        this.rawLocation = null;\r\n    }\r\n    connect(providerType, url) {\r\n        if (providerType !== 'http')\r\n            throw new Error('unsupported provider type');\r\n        this.web3 = new web3_1.default(new web3_1.default.providers.HttpProvider(url));\r\n    }\r\n    loadCompilationData(inputJson, outputJson) {\r\n        const data = {};\r\n        data['data'] = outputJson;\r\n        data['source'] = { sources: inputJson.sources };\r\n        this.loadCompilationResult(data);\r\n    }\r\n    loadCompilationResult(compilationResult) {\r\n        this.compilation = {};\r\n        this.compilation.compilationResult = compilationResult;\r\n    }\r\n    initDebugger(cb) {\r\n        this.debugger = new debugger_js_1.Debugger({\r\n            web3: this.web3,\r\n            compilationResult: () => { return this.compilation.compilationResult; }\r\n        });\r\n    }\r\n    getSource() {\r\n        const lineColumnPos = this.lineColumnPos;\r\n        if (!lineColumnPos || !lineColumnPos.start)\r\n            return [];\r\n        const content = this.compilation.compilationResult.source.sources[this.filename].content.split('\\n');\r\n        const source = [];\r\n        let line;\r\n        line = content[lineColumnPos.start.line - 2];\r\n        if (line !== undefined) {\r\n            source.push('    ' + (lineColumnPos.start.line - 1) + ':  ' + line);\r\n        }\r\n        line = content[lineColumnPos.start.line - 1];\r\n        if (line !== undefined) {\r\n            source.push('    ' + lineColumnPos.start.line + ':  ' + line);\r\n        }\r\n        const currentLineNumber = lineColumnPos.start.line;\r\n        const currentLine = content[currentLineNumber];\r\n        source.push('=>  ' + (currentLineNumber + 1) + ':  ' + currentLine);\r\n        const startLine = lineColumnPos.start.line;\r\n        for (var i = 1; i < 4; i++) {\r\n            const line = content[startLine + i];\r\n            source.push('    ' + (startLine + i + 1) + ':  ' + line);\r\n        }\r\n        return source;\r\n    }\r\n    getCurrentLine() {\r\n        const lineColumnPos = this.lineColumnPos;\r\n        if (!lineColumnPos)\r\n            return '';\r\n        const currentLineNumber = lineColumnPos.start.line;\r\n        const content = this.compilation.compilationResult.source.sources[this.filename].content.split('\\n');\r\n        return content[currentLineNumber];\r\n    }\r\n    startDebug(txNumber, filename, cb) {\r\n        this.filename = filename;\r\n        this.txHash = txNumber;\r\n        this.debugger.debug(null, txNumber, null, () => {\r\n            this.debugger.event.register('newSourceLocation', (lineColumnPos, rawLocation) => {\r\n                if (!lineColumnPos)\r\n                    return;\r\n                this.lineColumnPos = lineColumnPos;\r\n                this.rawLocation = rawLocation;\r\n                this.events.emit('source', [lineColumnPos, rawLocation]);\r\n            });\r\n            this.debugger.vmDebuggerLogic.event.register('solidityState', (data) => {\r\n                this.solidityState = data;\r\n                this.events.emit('globals', data);\r\n            });\r\n            // TODO: this doesnt work too well, it should request the data instead...\r\n            this.debugger.vmDebuggerLogic.event.register('solidityLocals', (data) => {\r\n                if (JSON.stringify(data) === '{}')\r\n                    return;\r\n                this.solidityLocals = data;\r\n                this.events.emit('locals', data);\r\n            });\r\n            if (cb) {\r\n                // TODO: this should be an onReady event\r\n                setTimeout(cb, 1000);\r\n            }\r\n        });\r\n    }\r\n    getVars() {\r\n        return {\r\n            locals: this.solidityLocals,\r\n            contract: this.solidityState\r\n        };\r\n    }\r\n    triggerSourceUpdate() {\r\n        this.events.emit('source', [this.lineColumnPos, this.rawLocation]);\r\n    }\r\n    stepJumpNextBreakpoint() {\r\n        this.debugger.step_manager.jumpNextBreakpoint();\r\n    }\r\n    stepJumpPreviousBreakpoint() {\r\n        this.debugger.step_manager.jumpPreviousBreakpoint();\r\n    }\r\n    stepOverForward(solidityMode) {\r\n        this.debugger.step_manager.stepOverForward(solidityMode);\r\n    }\r\n    stepOverBack(solidityMode) {\r\n        this.debugger.step_manager.stepOverBack(solidityMode);\r\n    }\r\n    stepIntoForward(solidityMode) {\r\n        this.debugger.step_manager.stepIntoForward(solidityMode);\r\n    }\r\n    stepIntoBack(solidityMode) {\r\n        this.debugger.step_manager.stepIntoBack(solidityMode);\r\n    }\r\n    jumpTo(step) {\r\n        this.debugger.step_manager.jumpTo(step);\r\n    }\r\n    getTraceLength() {\r\n        if (!this.debugger.step_manager)\r\n            return 0;\r\n        return this.debugger.step_manager.traceLength;\r\n    }\r\n    getCodeFirstStep() {\r\n        if (!this.debugger.step_manager)\r\n            return 0;\r\n        return this.debugger.step_manager.calculateFirstStep();\r\n    }\r\n    getCodeTraceLength() {\r\n        if (!this.debugger.step_manager)\r\n            return 0;\r\n        return this.debugger.step_manager.calculateCodeLength();\r\n    }\r\n    nextStep() {\r\n        if (!this.debugger.step_manager)\r\n            return 0;\r\n        return this.debugger.step_manager.nextStep();\r\n    }\r\n    previousStep() {\r\n        if (!this.debugger.step_manager)\r\n            return 0;\r\n        return this.debugger.step_manager.previousStep();\r\n    }\r\n    currentStep() {\r\n        if (!this.debugger.step_manager)\r\n            return 0;\r\n        return this.debugger.step_manager.currentStepIndex;\r\n    }\r\n    canGoNext() {\r\n        return this.currentStep() < this.getCodeTraceLength();\r\n    }\r\n    canGoPrevious() {\r\n        return this.currentStep() > this.getCodeFirstStep();\r\n    }\r\n    unload() {\r\n        return this.debugger.unload();\r\n    }\r\n    displayLocals() {\r\n        console.dir('= displayLocals');\r\n        console.dir(this.solidityLocals);\r\n    }\r\n    displayGlobals() {\r\n        console.dir('= displayGlobals');\r\n        console.dir(this.solidityState);\r\n    }\r\n}\r\nexports.CmdLine = CmdLine;\r\n//# sourceMappingURL=index.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst traceHelper_1 = require(\"../trace/traceHelper\");\r\n/**\r\n  * allow to manage breakpoint\r\n  *\r\n  * Trigger events: breakpointHit, breakpointAdded, breakpointRemoved\r\n  */\r\nclass BreakpointManager {\r\n    /**\r\n      * constructor\r\n      *\r\n      * @param {Object} _debugger - type of EthDebugger\r\n      * @return {Function} _locationToRowConverter - function implemented by editor which return a column/line position for a char source location\r\n      */\r\n    constructor({ traceManager, callTree, solidityProxy, locationToRowConverter }) {\r\n        this.event = new eventManager_1.EventManager();\r\n        this.traceManager = traceManager;\r\n        this.callTree = callTree;\r\n        this.solidityProxy = solidityProxy;\r\n        this.breakpoints = {};\r\n        this.locationToRowConverter = locationToRowConverter;\r\n    }\r\n    setManagers({ traceManager, callTree, solidityProxy }) {\r\n        this.traceManager = traceManager;\r\n        this.callTree = callTree;\r\n        this.solidityProxy = solidityProxy;\r\n    }\r\n    /**\r\n      * start looking for the next breakpoint\r\n      * @param {Bool} defaultToLimit - if true jump to the end of the trace if no more breakpoint found\r\n      *\r\n      */\r\n    jumpNextBreakpoint(fromStep, defaultToLimit) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            if (!this.locationToRowConverter) {\r\n                return console.log('row converter not provided');\r\n            }\r\n            this.jump(fromStep || 0, 1, defaultToLimit, this.traceManager.trace);\r\n        });\r\n    }\r\n    /**\r\n      * start looking for the previous breakpoint\r\n      * @param {Bool} defaultToLimit - if true jump to the start of the trace if no more breakpoint found\r\n      *\r\n      */\r\n    jumpPreviousBreakpoint(fromStep, defaultToLimit) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            if (!this.locationToRowConverter) {\r\n                return console.log('row converter not provided');\r\n            }\r\n            this.jump(fromStep || 0, -1, defaultToLimit, this.traceManager.trace);\r\n        });\r\n    }\r\n    depthChange(step, trace) {\r\n        return trace[step].depth !== trace[step - 1].depth;\r\n    }\r\n    hitLine(currentStep, sourceLocation, previousSourceLocation, trace) {\r\n        // isJumpDestInstruction -> returning from a internal function call\r\n        // depthChange -> returning from an external call\r\n        // sourceLocation.start <= previousSourceLocation.start && ... -> previous src is contained in the current one\r\n        if ((traceHelper_1.isJumpDestInstruction(trace[currentStep]) && previousSourceLocation.jump === 'o') ||\r\n            this.depthChange(currentStep, trace) ||\r\n            (sourceLocation.start <= previousSourceLocation.start &&\r\n                sourceLocation.start + sourceLocation.length >= previousSourceLocation.start + previousSourceLocation.length)) {\r\n            return false;\r\n        }\r\n        this.event.trigger('breakpointStep', [currentStep]);\r\n        this.event.trigger('breakpointHit', [sourceLocation, currentStep]);\r\n        return true;\r\n    }\r\n    /**\r\n      * start looking for the previous or next breakpoint\r\n      * @param {Int} direction - 1 or -1 direction of the search\r\n      * @param {Bool} defaultToLimit - if true jump to the limit (end if direction is 1, beginning if direction is -1) of the trace if no more breakpoint found\r\n      *\r\n      */\r\n    jump(fromStep, direction, defaultToLimit, trace) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            let sourceLocation;\r\n            let previousSourceLocation;\r\n            let currentStep = fromStep + direction;\r\n            let lineHadBreakpoint = false;\r\n            let initialLine;\r\n            while (currentStep > 0 && currentStep < trace.length) {\r\n                try {\r\n                    previousSourceLocation = sourceLocation;\r\n                    sourceLocation = yield this.callTree.extractValidSourceLocation(currentStep);\r\n                }\r\n                catch (e) {\r\n                    console.log('cannot jump to breakpoint ' + e);\r\n                    currentStep += direction;\r\n                    continue;\r\n                }\r\n                const lineColumn = yield this.locationToRowConverter(sourceLocation);\r\n                if (!initialLine)\r\n                    initialLine = lineColumn;\r\n                if (initialLine.start.line !== lineColumn.start.line) {\r\n                    if (direction === -1 && lineHadBreakpoint) { // TODO : improve this when we will build the correct structure before hand\r\n                        lineHadBreakpoint = false;\r\n                        if (this.hitLine(currentStep + 1, previousSourceLocation, sourceLocation, trace)) {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (this.hasBreakpointAtLine(sourceLocation.file, lineColumn.start.line)) {\r\n                        lineHadBreakpoint = true;\r\n                        if (direction === 1 && this.hitLine(currentStep, sourceLocation, previousSourceLocation, trace)) {\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                currentStep += direction;\r\n            }\r\n            this.event.trigger('NoBreakpointHit', []);\r\n            if (!defaultToLimit) {\r\n                return;\r\n            }\r\n            if (direction === -1) {\r\n                this.event.trigger('breakpointStep', [0]);\r\n            }\r\n            else if (direction === 1) {\r\n                this.event.trigger('breakpointStep', [trace.length - 1]);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n      * check the given pair fileIndex/line against registered breakpoints\r\n      *\r\n      * @param {Int} fileIndex - index of the file content (from the compilation result)\r\n      * @param {Int} line - line number where looking for breakpoint\r\n      * @return {Bool} return true if the given @arg fileIndex @arg line refers to a breakpoint\r\n      */\r\n    hasBreakpointAtLine(fileIndex, line) {\r\n        const filename = this.solidityProxy.fileNameFromIndex(fileIndex);\r\n        if (!(filename && this.breakpoints[filename])) {\r\n            return false;\r\n        }\r\n        const sources = this.breakpoints[filename];\r\n        for (const k in sources) {\r\n            const source = sources[k];\r\n            if (line === source.row) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n      * return true if current manager has breakpoint\r\n      *\r\n      * @return {Bool} true if breapoint registered\r\n      */\r\n    hasBreakpoint() {\r\n        for (const k in this.breakpoints) {\r\n            if (this.breakpoints[k].length) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n      * add a new breakpoint to the manager\r\n      *\r\n      * @param {Object} sourceLocation - position of the breakpoint { file: '<file index>', row: '<line number' }\r\n      */\r\n    add(sourceLocation) {\r\n        if (!this.breakpoints[sourceLocation.fileName]) {\r\n            this.breakpoints[sourceLocation.fileName] = [];\r\n        }\r\n        this.breakpoints[sourceLocation.fileName].push(sourceLocation);\r\n        this.event.trigger('breakpointAdded', [sourceLocation]);\r\n    }\r\n    /**\r\n      * remove a breakpoint from the manager\r\n      *\r\n      * @param {Object} sourceLocation - position of the breakpoint { file: '<file index>', row: '<line number' }\r\n      */\r\n    remove(sourceLocation) {\r\n        var sources = this.breakpoints[sourceLocation.fileName];\r\n        if (!sources) {\r\n            return;\r\n        }\r\n        for (const k in sources) {\r\n            const source = sources[k];\r\n            if (sourceLocation.row === source.row) {\r\n                sources.splice(k, 1);\r\n                this.event.trigger('breakpointRemoved', [sourceLocation]);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.BreakpointManager = BreakpointManager;\r\n//# sourceMappingURL=breakpointManager.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst traceHelper_1 = require(\"../trace/traceHelper\");\r\nconst sourceMappingDecoder_1 = require(\"../source/sourceMappingDecoder\");\r\nconst codeResolver_1 = require(\"./codeResolver\");\r\n/*\r\n  resolve contract code referenced by vmtrace in order to be used by asm listview.\r\n  events:\r\n   - changed: triggered when an item is selected\r\n   - resolvingStep: when CodeManager resolves code/selected instruction of a new step\r\n*/\r\nclass CodeManager {\r\n    constructor(_traceManager) {\r\n        this.event = new eventManager_1.EventManager();\r\n        this.isLoading = false;\r\n        this.traceManager = _traceManager;\r\n        this.codeResolver = new codeResolver_1.CodeResolver({\r\n            getCode: (address) => tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n                return new Promise((resolve, reject) => {\r\n                    this.traceManager.web3.eth.getCode(address, (error, code) => {\r\n                        if (error) {\r\n                            return reject(error);\r\n                        }\r\n                        return resolve(code);\r\n                    });\r\n                });\r\n            })\r\n        });\r\n    }\r\n    /**\r\n     * clear the cache\r\n     *\r\n     */\r\n    clear() {\r\n        this.codeResolver.clear();\r\n    }\r\n    /**\r\n     * resolve the code of the given @arg stepIndex and trigger appropriate event\r\n     *\r\n     * @param {String} stepIndex - vm trace step\r\n     * @param {Object} tx - transaction (given by web3)\r\n     */\r\n    resolveStep(stepIndex, tx) {\r\n        if (stepIndex < 0)\r\n            return;\r\n        this.event.trigger('resolvingStep');\r\n        if (stepIndex === 0) {\r\n            return this.retrieveCodeAndTrigger(this, tx.to, stepIndex, tx);\r\n        }\r\n        try {\r\n            const address = this.traceManager.getCurrentCalledAddressAt(stepIndex);\r\n            this.retrieveCodeAndTrigger(this, address, stepIndex, tx);\r\n        }\r\n        catch (error) {\r\n            return console.log(error);\r\n        }\r\n    }\r\n    /**\r\n     * Retrieve the code located at the given @arg address\r\n     *\r\n     * @param {String} address - address of the contract to get the code from\r\n     * @param {Function} cb - callback function, return the bytecode\r\n     */\r\n    getCode(address) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            if (!traceHelper_1.isContractCreation(address)) {\r\n                const code = yield this.codeResolver.resolveCode(address);\r\n                return code;\r\n            }\r\n            var codes = this.codeResolver.getExecutingCodeFromCache(address);\r\n            if (codes) {\r\n                return codes;\r\n            }\r\n            const hexCode = this.traceManager.getContractCreationCode(address);\r\n            codes = this.codeResolver.cacheExecutingCode(address, hexCode);\r\n            return codes;\r\n        });\r\n    }\r\n    /**\r\n     * Retrieve the called function for the current vm step for the given @arg address\r\n     *\r\n     * @param {String} stepIndex - vm trace step\r\n     * @param {String} sourceMap - source map given byt the compilation result\r\n     * @param {Object} ast - ast given by the compilation result\r\n     * @return {Object} return the ast node of the function\r\n     */\r\n    getFunctionFromStep(stepIndex, sourceMap, ast) {\r\n        try {\r\n            const address = this.traceManager.getCurrentCalledAddressAt(stepIndex);\r\n            const pc = this.traceManager.getCurrentPC(stepIndex);\r\n            return this.getFunctionFromPC(address, pc, sourceMap, ast);\r\n        }\r\n        catch (error) {\r\n            console.log(error);\r\n            return { error: 'Cannot retrieve current address or PC for ' + stepIndex };\r\n        }\r\n    }\r\n    /**\r\n     * Retrieve the instruction index of the given @arg step\r\n     *\r\n     * @param {String} address - address of the current context\r\n     * @param {String} step - vm trace step\r\n     * @param {Function} callback - instruction index\r\n     */\r\n    getInstructionIndex(address, step) {\r\n        try {\r\n            const pc = this.traceManager.getCurrentPC(step);\r\n            const itemIndex = this.codeResolver.getInstructionIndex(address, pc);\r\n            return itemIndex;\r\n        }\r\n        catch (error) {\r\n            console.log(error);\r\n            throw new Error('Cannot retrieve current PC for ' + step);\r\n        }\r\n    }\r\n    /**\r\n     * Retrieve the called function for the given @arg pc and @arg address\r\n     *\r\n     * @param {String} address - address of the current context (used to resolve instruction index)\r\n     * @param {String} pc - pc that point to the instruction index\r\n     * @param {String} sourceMap - source map given byt the compilation result\r\n     * @param {Object} ast - ast given by the compilation result\r\n     * @return {Object} return the ast node of the function\r\n     */\r\n    getFunctionFromPC(address, pc, sourceMap, ast) {\r\n        const instIndex = this.codeResolver.getInstructionIndex(address, pc);\r\n        return sourceMappingDecoder_1.findNodeAtInstructionIndex('FunctionDefinition', instIndex, sourceMap, ast);\r\n    }\r\n    retrieveCodeAndTrigger(codeMananger, address, stepIndex, tx) {\r\n        codeMananger.getCode(address).then((result) => {\r\n            this.retrieveIndexAndTrigger(codeMananger, address, stepIndex, result.instructions);\r\n        }).catch((error) => {\r\n            return console.log(error);\r\n        });\r\n    }\r\n    retrieveIndexAndTrigger(codeMananger, address, step, code) {\r\n        let result;\r\n        try {\r\n            result = codeMananger.getInstructionIndex(address, step);\r\n        }\r\n        catch (error) {\r\n            return console.log(error);\r\n        }\r\n        try {\r\n            codeMananger.event.trigger('changed', [code, address, result]);\r\n        }\r\n        catch (e) {\r\n            console.log('dispatching event failed', e);\r\n        }\r\n    }\r\n}\r\nexports.CodeManager = CodeManager;\r\n//# sourceMappingURL=codeManager.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst codeUtils_1 = require(\"./codeUtils\");\r\nclass CodeResolver {\r\n    constructor({ getCode }) {\r\n        this.getCode = getCode;\r\n        this.bytecodeByAddress = {}; // bytes code by contract addesses\r\n        this.instructionsByAddress = {}; // assembly items instructions list by contract addesses\r\n        this.instructionsIndexByBytesOffset = {}; // mapping between bytes offset and instructions index.\r\n    }\r\n    clear() {\r\n        this.bytecodeByAddress = {};\r\n        this.instructionsByAddress = {};\r\n        this.instructionsIndexByBytesOffset = {};\r\n    }\r\n    resolveCode(address) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const cache = this.getExecutingCodeFromCache(address);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n            const code = yield this.getCode(address);\r\n            return this.cacheExecutingCode(address, code);\r\n        });\r\n    }\r\n    cacheExecutingCode(address, hexCode) {\r\n        const codes = this.formatCode(hexCode);\r\n        this.bytecodeByAddress[address] = hexCode;\r\n        this.instructionsByAddress[address] = codes.code;\r\n        this.instructionsIndexByBytesOffset[address] = codes.instructionsIndexByBytesOffset;\r\n        return this.getExecutingCodeFromCache(address);\r\n    }\r\n    formatCode(hexCode) {\r\n        const [code, instructionsIndexByBytesOffset] = codeUtils_1.nameOpCodes(Buffer.from(hexCode.substring(2), 'hex'));\r\n        return { code, instructionsIndexByBytesOffset };\r\n    }\r\n    getExecutingCodeFromCache(address) {\r\n        if (!this.instructionsByAddress[address]) {\r\n            return null;\r\n        }\r\n        return {\r\n            instructions: this.instructionsByAddress[address],\r\n            instructionsIndexByBytesOffset: this.instructionsIndexByBytesOffset[address],\r\n            bytecode: this.bytecodeByAddress[address]\r\n        };\r\n    }\r\n    getInstructionIndex(address, pc) {\r\n        return this.getExecutingCodeFromCache(address).instructionsIndexByBytesOffset[pc];\r\n    }\r\n}\r\nexports.CodeResolver = CodeResolver;\r\n//# sourceMappingURL=codeResolver.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst opcodes_1 = tslib_1.__importDefault(require(\"./opcodes\"));\r\nfunction nameOpCodes(raw) {\r\n    let pushData = '';\r\n    const codeMap = {};\r\n    const code = [];\r\n    for (let i = 0; i < raw.length; i++) {\r\n        const pc = i;\r\n        const curOpCode = opcodes_1.default(raw[pc], false).name;\r\n        codeMap[i] = code.length;\r\n        // no destinations into the middle of PUSH\r\n        if (curOpCode.slice(0, 4) === 'PUSH') {\r\n            const jumpNum = raw[pc] - 0x5f;\r\n            pushData = raw.slice(pc + 1, pc + jumpNum + 1);\r\n            i += jumpNum;\r\n        }\r\n        const data = pushData.toString() !== '' ? ' ' + pushData.toString() : '';\r\n        code.push(this.pad(pc, this.roundLog(raw.length, 10)) + ' ' + curOpCode + data);\r\n        pushData = '';\r\n    }\r\n    return [code, codeMap];\r\n}\r\nexports.nameOpCodes = nameOpCodes;\r\n/**\r\n * Parses code as a list of integers into a list of objects containing\r\n * information about the opcode.\r\n */\r\nfunction parseCode(raw) {\r\n    const code = [];\r\n    for (let i = 0; i < raw.length; i++) {\r\n        const opcode = opcodes_1.default(raw[i], true);\r\n        if (opcode.name.slice(0, 4) === 'PUSH') {\r\n            const length = raw[i] - 0x5f;\r\n            opcode['pushData'] = raw.slice(i + 1, i + length + 1);\r\n            // in case pushdata extends beyond code\r\n            if (i + 1 + length > raw.length) {\r\n                for (let j = opcode['pushData'].length; j < length; j++) {\r\n                    opcode['pushData'].push(0);\r\n                }\r\n            }\r\n            i += length;\r\n        }\r\n        code.push(opcode);\r\n    }\r\n    return code;\r\n}\r\nexports.parseCode = parseCode;\r\nfunction pad(num, size) {\r\n    let s = num + '';\r\n    while (s.length < size)\r\n        s = '0' + s;\r\n    return s;\r\n}\r\nexports.pad = pad;\r\nfunction log(num, base) {\r\n    return Math.log(num) / Math.log(base);\r\n}\r\nexports.log = log;\r\nfunction roundLog(num, base) {\r\n    return Math.ceil(this.log(num, base));\r\n}\r\nexports.roundLog = roundLog;\r\n//# sourceMappingURL=codeUtils.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction default_1(op, full) {\r\n    const codes = {\r\n        // 0x0 range - arithmetic ops\r\n        // name, baseCost, off stack, on stack, dynamic, async\r\n        // @todo can be improved on basis of this: https://github.com/ethereumjs/ethereumjs-vm/blob/master/lib/evm/opcodes.ts\r\n        0x00: ['STOP', 0, 0, 0, false],\r\n        0x01: ['ADD', 3, 2, 1, false],\r\n        0x02: ['MUL', 5, 2, 1, false],\r\n        0x03: ['SUB', 3, 2, 1, false],\r\n        0x04: ['DIV', 5, 2, 1, false],\r\n        0x05: ['SDIV', 5, 2, 1, false],\r\n        0x06: ['MOD', 5, 2, 1, false],\r\n        0x07: ['SMOD', 5, 2, 1, false],\r\n        0x08: ['ADDMOD', 8, 3, 1, false],\r\n        0x09: ['MULMOD', 8, 3, 1, false],\r\n        0x0a: ['EXP', 10, 2, 1, false],\r\n        0x0b: ['SIGNEXTEND', 5, 2, 1, false],\r\n        // 0x10 range - bit ops\r\n        0x10: ['LT', 3, 2, 1, false],\r\n        0x11: ['GT', 3, 2, 1, false],\r\n        0x12: ['SLT', 3, 2, 1, false],\r\n        0x13: ['SGT', 3, 2, 1, false],\r\n        0x14: ['EQ', 3, 2, 1, false],\r\n        0x15: ['ISZERO', 3, 1, 1, false],\r\n        0x16: ['AND', 3, 2, 1, false],\r\n        0x17: ['OR', 3, 2, 1, false],\r\n        0x18: ['XOR', 3, 2, 1, false],\r\n        0x19: ['NOT', 3, 1, 1, false],\r\n        0x1a: ['BYTE', 3, 2, 1, false],\r\n        0x1b: ['SHL', 3, 2, 1, false],\r\n        0x1c: ['SHR', 3, 2, 1, false],\r\n        0x1d: ['SAR', 3, 2, 1, false],\r\n        // 0x20 range - crypto\r\n        0x20: ['SHA3', 30, 2, 1, false],\r\n        // 0x30 range - closure state\r\n        0x30: ['ADDRESS', 2, 0, 1, true],\r\n        0x31: ['BALANCE', 700, 1, 1, true, true],\r\n        0x32: ['ORIGIN', 2, 0, 1, true],\r\n        0x33: ['CALLER', 2, 0, 1, true],\r\n        0x34: ['CALLVALUE', 2, 0, 1, true],\r\n        0x35: ['CALLDATALOAD', 3, 1, 1, true],\r\n        0x36: ['CALLDATASIZE', 2, 0, 1, true],\r\n        0x37: ['CALLDATACOPY', 3, 3, 0, true],\r\n        0x38: ['CODESIZE', 2, 0, 1, false],\r\n        0x39: ['CODECOPY', 3, 3, 0, false],\r\n        0x3a: ['GASPRICE', 2, 0, 1, false],\r\n        0x3b: ['EXTCODESIZE', 700, 1, 1, true, true],\r\n        0x3c: ['EXTCODECOPY', 700, 4, 0, true, true],\r\n        0x3d: ['RETURNDATASIZE', 2, 0, 1, true],\r\n        0x3e: ['RETURNDATACOPY', 3, 3, 0, true],\r\n        0x3f: ['EXTCODEHASH', 400, 3, 0, true],\r\n        // '0x40' range - block operations\r\n        0x40: ['BLOCKHASH', 20, 1, 1, true, true],\r\n        0x41: ['COINBASE', 2, 0, 1, true],\r\n        0x42: ['TIMESTAMP', 2, 0, 1, true],\r\n        0x43: ['NUMBER', 2, 0, 1, true],\r\n        0x44: ['DIFFICULTY', 2, 0, 1, true],\r\n        0x45: ['GASLIMIT', 2, 0, 1, true],\r\n        0x46: ['CHAINID', 2, 0, 1, false],\r\n        0x47: ['SELFBALANCE', 5, 0, 1, false],\r\n        // 0x50 range - 'storage' and execution\r\n        0x50: ['POP', 2, 1, 0, false],\r\n        0x51: ['MLOAD', 3, 1, 1, false],\r\n        0x52: ['MSTORE', 3, 2, 0, false],\r\n        0x53: ['MSTORE8', 3, 2, 0, false],\r\n        0x54: ['SLOAD', 800, 1, 1, true, true],\r\n        0x55: ['SSTORE', 0, 2, 0, true, true],\r\n        0x56: ['JUMP', 8, 1, 0, false],\r\n        0x57: ['JUMPI', 10, 2, 0, false],\r\n        0x58: ['PC', 2, 0, 1, false],\r\n        0x59: ['MSIZE', 2, 0, 1, false],\r\n        0x5a: ['GAS', 2, 0, 1, false],\r\n        0x5b: ['JUMPDEST', 1, 0, 0, false],\r\n        // 0x60, range\r\n        0x60: ['PUSH1', 3, 0, 1, false],\r\n        0x61: ['PUSH2', 3, 0, 1, false],\r\n        0x62: ['PUSH3', 3, 0, 1, false],\r\n        0x63: ['PUSH4', 3, 0, 1, false],\r\n        0x64: ['PUSH5', 3, 0, 1, false],\r\n        0x65: ['PUSH6', 3, 0, 1, false],\r\n        0x66: ['PUSH7', 3, 0, 1, false],\r\n        0x67: ['PUSH8', 3, 0, 1, false],\r\n        0x68: ['PUSH9', 3, 0, 1, false],\r\n        0x69: ['PUSH10', 3, 0, 1, false],\r\n        0x6a: ['PUSH11', 3, 0, 1, false],\r\n        0x6b: ['PUSH12', 3, 0, 1, false],\r\n        0x6c: ['PUSH13', 3, 0, 1, false],\r\n        0x6d: ['PUSH14', 3, 0, 1, false],\r\n        0x6e: ['PUSH15', 3, 0, 1, false],\r\n        0x6f: ['PUSH16', 3, 0, 1, false],\r\n        0x70: ['PUSH17', 3, 0, 1, false],\r\n        0x71: ['PUSH18', 3, 0, 1, false],\r\n        0x72: ['PUSH19', 3, 0, 1, false],\r\n        0x73: ['PUSH20', 3, 0, 1, false],\r\n        0x74: ['PUSH21', 3, 0, 1, false],\r\n        0x75: ['PUSH22', 3, 0, 1, false],\r\n        0x76: ['PUSH23', 3, 0, 1, false],\r\n        0x77: ['PUSH24', 3, 0, 1, false],\r\n        0x78: ['PUSH25', 3, 0, 1, false],\r\n        0x79: ['PUSH26', 3, 0, 1, false],\r\n        0x7a: ['PUSH27', 3, 0, 1, false],\r\n        0x7b: ['PUSH28', 3, 0, 1, false],\r\n        0x7c: ['PUSH29', 3, 0, 1, false],\r\n        0x7d: ['PUSH30', 3, 0, 1, false],\r\n        0x7e: ['PUSH31', 3, 0, 1, false],\r\n        0x7f: ['PUSH32', 3, 0, 1, false],\r\n        0x80: ['DUP1', 3, 0, 1, false],\r\n        0x81: ['DUP2', 3, 0, 1, false],\r\n        0x82: ['DUP3', 3, 0, 1, false],\r\n        0x83: ['DUP4', 3, 0, 1, false],\r\n        0x84: ['DUP5', 3, 0, 1, false],\r\n        0x85: ['DUP6', 3, 0, 1, false],\r\n        0x86: ['DUP7', 3, 0, 1, false],\r\n        0x87: ['DUP8', 3, 0, 1, false],\r\n        0x88: ['DUP9', 3, 0, 1, false],\r\n        0x89: ['DUP10', 3, 0, 1, false],\r\n        0x8a: ['DUP11', 3, 0, 1, false],\r\n        0x8b: ['DUP12', 3, 0, 1, false],\r\n        0x8c: ['DUP13', 3, 0, 1, false],\r\n        0x8d: ['DUP14', 3, 0, 1, false],\r\n        0x8e: ['DUP15', 3, 0, 1, false],\r\n        0x8f: ['DUP16', 3, 0, 1, false],\r\n        0x90: ['SWAP1', 3, 0, 0, false],\r\n        0x91: ['SWAP2', 3, 0, 0, false],\r\n        0x92: ['SWAP3', 3, 0, 0, false],\r\n        0x93: ['SWAP4', 3, 0, 0, false],\r\n        0x94: ['SWAP5', 3, 0, 0, false],\r\n        0x95: ['SWAP6', 3, 0, 0, false],\r\n        0x96: ['SWAP7', 3, 0, 0, false],\r\n        0x97: ['SWAP8', 3, 0, 0, false],\r\n        0x98: ['SWAP9', 3, 0, 0, false],\r\n        0x99: ['SWAP10', 3, 0, 0, false],\r\n        0x9a: ['SWAP11', 3, 0, 0, false],\r\n        0x9b: ['SWAP12', 3, 0, 0, false],\r\n        0x9c: ['SWAP13', 3, 0, 0, false],\r\n        0x9d: ['SWAP14', 3, 0, 0, false],\r\n        0x9e: ['SWAP15', 3, 0, 0, false],\r\n        0x9f: ['SWAP16', 3, 0, 0, false],\r\n        0xa0: ['LOG0', 375, 2, 0, false],\r\n        0xa1: ['LOG1', 375, 3, 0, false],\r\n        0xa2: ['LOG2', 375, 4, 0, false],\r\n        0xa3: ['LOG3', 375, 5, 0, false],\r\n        0xa4: ['LOG4', 375, 6, 0, false],\r\n        // '0xf0' range - closures\r\n        0xf0: ['CREATE', 32000, 3, 1, true, true],\r\n        0xf1: ['CALL', 700, 7, 1, true, true],\r\n        0xf2: ['CALLCODE', 700, 7, 1, true, true],\r\n        0xf3: ['RETURN', 0, 2, 0, false],\r\n        0xf4: ['DELEGATECALL', 700, 6, 1, true, true],\r\n        0xf5: ['CREATE2', 32000, 4, 1, true, true],\r\n        0xfa: ['STATICCALL', 700, 6, 1, true, true],\r\n        0xfd: ['REVERT', 0, 2, 0, false],\r\n        // '0x70', range - other\r\n        0xfe: ['INVALID', 0, 0, 0, false],\r\n        0xff: ['SELFDESTRUCT', 5000, 1, 0, false, true]\r\n    };\r\n    const code = codes[op] ? codes[op] : ['INVALID', 0, 0, 0, false, false];\r\n    let opcode = code[0];\r\n    if (full) {\r\n        if (opcode === 'LOG') {\r\n            opcode += op - 0xa0;\r\n        }\r\n        if (opcode === 'PUSH') {\r\n            opcode += op - 0x5f;\r\n        }\r\n        if (opcode === 'DUP') {\r\n            opcode += op - 0x7f;\r\n        }\r\n        if (opcode === 'SWAP') {\r\n            opcode += op - 0x8f;\r\n        }\r\n    }\r\n    return { name: opcode, fee: code[1], in: code[2], out: code[3], dynamic: code[4], async: code[5] };\r\n}\r\nexports.default = default_1;\r\n//# sourceMappingURL=opcodes.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst storageResolver_1 = require(\"../storage/storageResolver\");\r\nconst storageViewer_1 = require(\"../storage/storageViewer\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst solidityState_1 = require(\"./solidityState\");\r\nconst solidityLocals_1 = require(\"./solidityLocals\");\r\nconst { ui } = remix_lib_1.helpers;\r\nclass VmDebuggerLogic {\r\n    constructor(_debugger, tx, _stepManager, _traceManager, _codeManager, _solidityProxy, _callTree) {\r\n        this.event = new eventManager_1.EventManager();\r\n        this.debugger = _debugger;\r\n        this.stepManager = _stepManager;\r\n        this._traceManager = _traceManager;\r\n        this._codeManager = _codeManager;\r\n        this._solidityProxy = _solidityProxy;\r\n        this._callTree = _callTree;\r\n        this.storageResolver = null;\r\n        this.tx = tx;\r\n        this.debuggerSolidityState = new solidityState_1.DebuggerSolidityState(tx, _stepManager, _traceManager, _codeManager, _solidityProxy);\r\n        this.debuggerSolidityLocals = new solidityLocals_1.DebuggerSolidityLocals(tx, _stepManager, _traceManager, _callTree);\r\n    }\r\n    start() {\r\n        this.listenToEvents();\r\n        this.listenToCodeManagerEvents();\r\n        this.listenToTraceManagerEvents();\r\n        this.listenToFullStorageChanges();\r\n        this.listenToNewChanges();\r\n        this.listenToSolidityStateEvents();\r\n        this.listenToSolidityLocalsEvents();\r\n    }\r\n    listenToEvents() {\r\n        this.debugger.event.register('traceUnloaded', () => {\r\n            this.event.trigger('traceUnloaded');\r\n        });\r\n        this.debugger.event.register('newTraceLoaded', () => {\r\n            this.event.trigger('newTraceLoaded');\r\n        });\r\n    }\r\n    listenToCodeManagerEvents() {\r\n        this._codeManager.event.register('changed', (code, address, index) => {\r\n            this.event.trigger('codeManagerChanged', [code, address, index]);\r\n        });\r\n    }\r\n    listenToTraceManagerEvents() {\r\n        this.event.register('indexChanged', this, (index) => {\r\n            if (index < 0)\r\n                return;\r\n            if (this.stepManager.currentStepIndex !== index)\r\n                return;\r\n            this.event.trigger('indexUpdate', [index]);\r\n            this.event.trigger('functionsStackUpdate', [this._callTree.retrieveFunctionsStack(index)]);\r\n            try {\r\n                const calldata = this._traceManager.getCallDataAt(index);\r\n                if (this.stepManager.currentStepIndex === index) {\r\n                    this.event.trigger('traceManagerCallDataUpdate', [calldata]);\r\n                }\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceManagerCallDataUpdate', [{}]);\r\n            }\r\n            try {\r\n                const memory = this._traceManager.getMemoryAt(index);\r\n                if (this.stepManager.currentStepIndex === index) {\r\n                    this.event.trigger('traceManagerMemoryUpdate', [ui.formatMemory(memory, 16)]);\r\n                }\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceManagerMemoryUpdate', [{}]);\r\n            }\r\n            try {\r\n                const callstack = this._traceManager.getCallStackAt(index);\r\n                if (this.stepManager.currentStepIndex === index) {\r\n                    this.event.trigger('traceManagerCallStackUpdate', [callstack]);\r\n                }\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceManagerCallStackUpdate', [{}]);\r\n            }\r\n            try {\r\n                const callstack = this._traceManager.getStackAt(index);\r\n                if (this.stepManager.currentStepIndex === index) {\r\n                    this.event.trigger('traceManagerStackUpdate', [callstack]);\r\n                }\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceManagerStackUpdate', [{}]);\r\n            }\r\n            try {\r\n                const address = this._traceManager.getCurrentCalledAddressAt(index);\r\n                if (!this.storageResolver)\r\n                    return;\r\n                var storageViewer = new storageViewer_1.StorageViewer({ stepIndex: this.stepManager.currentStepIndex, tx: this.tx, address: address }, this.storageResolver, this._traceManager);\r\n                storageViewer.storageRange().then((storage) => {\r\n                    if (this.stepManager.currentStepIndex === index) {\r\n                        var header = storageViewer.isComplete(address) ? '[Completely Loaded]' : '[Partially Loaded]';\r\n                        this.event.trigger('traceManagerStorageUpdate', [storage, header]);\r\n                    }\r\n                }).catch((_error) => {\r\n                    this.event.trigger('traceManagerStorageUpdate', [{}]);\r\n                });\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceManagerStorageUpdate', [{}]);\r\n            }\r\n            try {\r\n                const step = this._traceManager.getCurrentStep(index);\r\n                this.event.trigger('traceCurrentStepUpdate', [null, step]);\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceCurrentStepUpdate', [error]);\r\n            }\r\n            try {\r\n                const addmem = this._traceManager.getMemExpand(index);\r\n                this.event.trigger('traceMemExpandUpdate', [null, addmem]);\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceMemExpandUpdate', [error]);\r\n            }\r\n            try {\r\n                const gas = this._traceManager.getStepCost(index);\r\n                this.event.trigger('traceStepCostUpdate', [null, gas]);\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceStepCostUpdate', [error]);\r\n            }\r\n            try {\r\n                const address = this._traceManager.getCurrentCalledAddressAt(index);\r\n                this.event.trigger('traceCurrentCalledAddressAtUpdate', [null, address]);\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceCurrentCalledAddressAtUpdate', [error]);\r\n            }\r\n            try {\r\n                const remaining = this._traceManager.getRemainingGas(index);\r\n                this.event.trigger('traceRemainingGasUpdate', [null, remaining]);\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceRemainingGasUpdate', [error]);\r\n            }\r\n            try {\r\n                const returnValue = this._traceManager.getReturnValue(index);\r\n                if (this.stepManager.currentStepIndex === index) {\r\n                    this.event.trigger('traceReturnValueUpdate', [[returnValue]]);\r\n                }\r\n            }\r\n            catch (error) {\r\n                this.event.trigger('traceReturnValueUpdate', [[error]]);\r\n            }\r\n        });\r\n    }\r\n    listenToFullStorageChanges() {\r\n        this.address = [];\r\n        this.traceLength = 0;\r\n        this.debugger.event.register('newTraceLoaded', (length) => {\r\n            const addresses = this._traceManager.getAddresses();\r\n            this.event.trigger('traceAddressesUpdate', [addresses]);\r\n            this.addresses = addresses;\r\n            this._traceManager.getLength((error, length) => {\r\n                if (error)\r\n                    return;\r\n                this.event.trigger('traceLengthUpdate', [length]);\r\n                this.traceLength = length;\r\n            });\r\n        });\r\n        this.debugger.event.register('indexChanged', this, (index) => {\r\n            if (index < 0)\r\n                return;\r\n            if (this.stepManager.currentStepIndex !== index)\r\n                return;\r\n            if (!this.storageResolver)\r\n                return;\r\n            // Clean up storage update\r\n            if (index === this.traceLength - 1) {\r\n                return this.event.trigger('traceStorageUpdate', [{}]);\r\n            }\r\n            var storageJSON = {};\r\n            for (var k in this.addresses) {\r\n                var address = this.addresses[k];\r\n                var storageViewer = new storageViewer_1.StorageViewer({ stepIndex: this.stepManager.currentStepIndex, tx: this.tx, address: address }, this.storageResolver, this._traceManager);\r\n                storageViewer.storageRange().then((result) => {\r\n                    storageJSON[address] = result;\r\n                    this.event.trigger('traceStorageUpdate', [storageJSON]);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    listenToNewChanges() {\r\n        this.debugger.event.register('newTraceLoaded', this, () => {\r\n            this.storageResolver = new storageResolver_1.StorageResolver({ web3: this.debugger.web3 });\r\n            this.debuggerSolidityState.storageResolver = this.storageResolver;\r\n            this.debuggerSolidityLocals.storageResolver = this.storageResolver;\r\n            this.event.trigger('newTrace', []);\r\n        });\r\n        this.debugger.callTree.event.register('callTreeReady', () => {\r\n            if (this.debugger.callTree.reducedTrace.length) {\r\n                return this.event.trigger('newCallTree', []);\r\n            }\r\n        });\r\n    }\r\n    listenToSolidityStateEvents() {\r\n        this.event.register('indexChanged', this.debuggerSolidityState.init.bind(this.debuggerSolidityState));\r\n        this.debuggerSolidityState.event.register('solidityState', (state) => {\r\n            this.event.trigger('solidityState', [state]);\r\n        });\r\n        this.debuggerSolidityState.event.register('solidityStateMessage', (message) => {\r\n            this.event.trigger('solidityStateMessage', [message]);\r\n        });\r\n        this.debuggerSolidityState.event.register('solidityStateUpdating', () => {\r\n            this.event.trigger('solidityStateUpdating', []);\r\n        });\r\n        this.event.register('traceUnloaded', this.debuggerSolidityState.reset.bind(this.debuggerSolidityState));\r\n        this.event.register('newTraceLoaded', this.debuggerSolidityState.reset.bind(this.debuggerSolidityState));\r\n    }\r\n    listenToSolidityLocalsEvents() {\r\n        this.event.register('sourceLocationChanged', this.debuggerSolidityLocals.init.bind(this.debuggerSolidityLocals));\r\n        this.event.register('solidityLocalsLoadMore', this.debuggerSolidityLocals.decodeMore.bind(this.debuggerSolidityLocals));\r\n        this.debuggerSolidityLocals.event.register('solidityLocalsLoadMoreCompleted', (locals) => {\r\n            this.event.trigger('solidityLocalsLoadMoreCompleted', [locals]);\r\n        });\r\n        this.debuggerSolidityLocals.event.register('solidityLocals', (state) => {\r\n            this.event.trigger('solidityLocals', [state]);\r\n        });\r\n        this.debuggerSolidityLocals.event.register('solidityLocalsMessage', (message) => {\r\n            this.event.trigger('solidityLocalsMessage', [message]);\r\n        });\r\n        this.debuggerSolidityLocals.event.register('solidityLocalsUpdating', () => {\r\n            this.event.trigger('solidityLocalsUpdating', []);\r\n        });\r\n        this.debuggerSolidityLocals.event.register('traceReturnValueUpdate', (data, header) => {\r\n            this.event.trigger('traceReturnValueUpdate', [data, header]);\r\n        });\r\n    }\r\n}\r\nexports.VmDebuggerLogic = VmDebuggerLogic;\r\n//# sourceMappingURL=VmDebugger.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst Ethdebugger_1 = require(\"../Ethdebugger\");\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst traceHelper_1 = require(\"../trace/traceHelper\");\r\nconst breakpointManager_1 = require(\"../code/breakpointManager\");\r\nconst stepManager_1 = require(\"./stepManager\");\r\nconst VmDebugger_1 = require(\"./VmDebugger\");\r\nclass Debugger {\r\n    constructor(options) {\r\n        this.event = new eventManager_1.EventManager();\r\n        this.offsetToLineColumnConverter = options.offsetToLineColumnConverter;\r\n        /*\r\n          Returns a compilation result for a given address or the last one available if none are found\r\n        */\r\n        this.compilationResult = options.compilationResult || function (contractAddress) { return null; };\r\n        this.debugger = new Ethdebugger_1.Ethdebugger({\r\n            web3: options.web3,\r\n            debugWithGeneratedSources: options.debugWithGeneratedSources,\r\n            compilationResult: this.compilationResult\r\n        });\r\n        const { traceManager, callTree, solidityProxy } = this.debugger;\r\n        this.breakPointManager = new breakpointManager_1.BreakpointManager({\r\n            traceManager,\r\n            callTree,\r\n            solidityProxy,\r\n            locationToRowConverter: (sourceLocation) => tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n                const compilationResult = yield this.compilationResult();\r\n                if (!compilationResult)\r\n                    return { start: null, end: null };\r\n                return this.offsetToLineColumnConverter.offsetToLineColumn(sourceLocation, sourceLocation.file, compilationResult.source.sources, compilationResult.data.sources);\r\n            })\r\n        });\r\n        this.breakPointManager.event.register('managersChanged', () => {\r\n            const { traceManager, callTree, solidityProxy } = this.debugger;\r\n            this.breakPointManager.setManagers({ traceManager, callTree, solidityProxy });\r\n        });\r\n        this.breakPointManager.event.register('breakpointStep', (step) => {\r\n            this.step_manager.jumpTo(step);\r\n        });\r\n        this.debugger.setBreakpointManager(this.breakPointManager);\r\n        this.debugger.event.register('newTraceLoaded', this, () => {\r\n            this.event.trigger('debuggerStatus', [true]);\r\n        });\r\n        this.debugger.event.register('traceUnloaded', this, () => {\r\n            this.event.trigger('debuggerStatus', [false]);\r\n        });\r\n    }\r\n    registerAndHighlightCodeItem(index) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            // register selected code item, highlight the corresponding source location\r\n            // this.debugger.traceManager.getCurrentCalledAddressAt(index, async (error, address) => {\r\n            try {\r\n                const address = this.debugger.traceManager.getCurrentCalledAddressAt(index);\r\n                const compilationResultForAddress = yield this.compilationResult(address);\r\n                if (!compilationResultForAddress)\r\n                    return;\r\n                this.debugger.callTree.sourceLocationTracker.getValidSourceLocationFromVMTraceIndex(address, index, compilationResultForAddress.data.contracts).then((rawLocation) => {\r\n                    if (compilationResultForAddress && compilationResultForAddress.data) {\r\n                        const generatedSources = this.debugger.callTree.sourceLocationTracker.getGeneratedSourcesFromAddress(address);\r\n                        const astSources = Object.assign({}, compilationResultForAddress.data.sources);\r\n                        const sources = Object.assign({}, compilationResultForAddress.source.sources);\r\n                        if (generatedSources) {\r\n                            for (const genSource of generatedSources) {\r\n                                astSources[genSource.name] = { id: genSource.id, ast: genSource.ast };\r\n                                sources[genSource.name] = { content: genSource.contents };\r\n                            }\r\n                        }\r\n                        var lineColumnPos = this.offsetToLineColumnConverter.offsetToLineColumn(rawLocation, rawLocation.file, sources, astSources);\r\n                        this.event.trigger('newSourceLocation', [lineColumnPos, rawLocation, generatedSources, address]);\r\n                    }\r\n                    else {\r\n                        this.event.trigger('newSourceLocation', [null]);\r\n                    }\r\n                }).catch((_error) => {\r\n                    this.event.trigger('newSourceLocation', [null]);\r\n                });\r\n                // })\r\n            }\r\n            catch (error) {\r\n                return console.log(error);\r\n            }\r\n        });\r\n    }\r\n    updateWeb3(web3) {\r\n        this.debugger.web3 = web3;\r\n    }\r\n    debug(blockNumber, txNumber, tx, loadingCb) {\r\n        const web3 = this.debugger.web3;\r\n        return new Promise((resolve, reject) => {\r\n            if (this.debugger.traceManager.isLoading) {\r\n                return resolve();\r\n            }\r\n            if (tx) {\r\n                if (!tx.to) {\r\n                    tx.to = traceHelper_1.contractCreationToken('0');\r\n                }\r\n                this.debugTx(tx, loadingCb);\r\n                return resolve();\r\n            }\r\n            try {\r\n                if (txNumber.indexOf('0x') !== -1) {\r\n                    return web3.eth.getTransaction(txNumber, (_error, tx) => {\r\n                        if (_error)\r\n                            return reject(_error);\r\n                        if (!tx)\r\n                            return reject(new Error('cannot find transaction ' + txNumber));\r\n                        this.debugTx(tx, loadingCb);\r\n                        return resolve();\r\n                    });\r\n                }\r\n                web3.eth.getTransactionFromBlock(blockNumber, txNumber, (_error, tx) => {\r\n                    if (_error)\r\n                        return reject(_error);\r\n                    if (!tx)\r\n                        return reject(new Error('cannot find transaction ' + blockNumber + ' ' + txNumber));\r\n                    this.debugTx(tx, loadingCb);\r\n                    return resolve();\r\n                });\r\n            }\r\n            catch (e) {\r\n                return reject(e.message);\r\n            }\r\n        });\r\n    }\r\n    debugTx(tx, loadingCb) {\r\n        this.step_manager = new stepManager_1.DebuggerStepManager(this.debugger, this.debugger.traceManager);\r\n        this.debugger.codeManager.event.register('changed', this, (code, address, instIndex) => {\r\n            this.debugger.callTree.sourceLocationTracker.getValidSourceLocationFromVMTraceIndex(address, this.step_manager.currentStepIndex, this.debugger.solidityProxy.contracts).then((sourceLocation) => {\r\n                this.vmDebuggerLogic.event.trigger('sourceLocationChanged', [sourceLocation]);\r\n            });\r\n        });\r\n        this.vmDebuggerLogic = new VmDebugger_1.VmDebuggerLogic(this.debugger, tx, this.step_manager, this.debugger.traceManager, this.debugger.codeManager, this.debugger.solidityProxy, this.debugger.callTree);\r\n        this.vmDebuggerLogic.start();\r\n        this.step_manager.event.register('stepChanged', this, (stepIndex) => {\r\n            if (typeof stepIndex !== 'number' || stepIndex >= this.step_manager.traceLength) {\r\n                return this.event.trigger('endDebug');\r\n            }\r\n            this.debugger.codeManager.resolveStep(stepIndex, tx);\r\n            this.step_manager.event.trigger('indexChanged', [stepIndex]);\r\n            this.vmDebuggerLogic.event.trigger('indexChanged', [stepIndex]);\r\n            this.vmDebuggerLogic.debugger.event.trigger('indexChanged', [stepIndex]);\r\n            this.registerAndHighlightCodeItem(stepIndex);\r\n        });\r\n        loadingCb();\r\n        this.debugger.debug(tx);\r\n    }\r\n    unload() {\r\n        this.debugger.unLoad();\r\n        this.event.trigger('debuggerUnloaded');\r\n    }\r\n}\r\nexports.Debugger = Debugger;\r\n//# sourceMappingURL=debugger.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst localDecoder_1 = require(\"../solidity-decoder/localDecoder\");\r\nconst storageViewer_1 = require(\"../storage/storageViewer\");\r\nclass DebuggerSolidityLocals {\r\n    constructor(tx, _stepManager, _traceManager, _internalTreeCall) {\r\n        this.event = new eventManager_1.EventManager();\r\n        this.stepManager = _stepManager;\r\n        this.internalTreeCall = _internalTreeCall;\r\n        this.storageResolver = null;\r\n        this.traceManager = _traceManager;\r\n        this.tx = tx;\r\n    }\r\n    init(sourceLocation) {\r\n        this._sourceLocation = sourceLocation;\r\n        var decodeTimeout = null;\r\n        if (!this.storageResolver) {\r\n            return this.event.trigger('solidityLocalsMessage', ['storage not ready']);\r\n        }\r\n        if (decodeTimeout) {\r\n            window.clearTimeout(decodeTimeout);\r\n        }\r\n        this.event.trigger('solidityLocalsUpdating');\r\n        decodeTimeout = setTimeout(() => {\r\n            this.decode(sourceLocation);\r\n        }, 500);\r\n    }\r\n    decode(sourceLocation, cursor) {\r\n        const self = this;\r\n        this.event.trigger('solidityLocalsMessage', ['']);\r\n        this.traceManager.waterfall([\r\n            function getStackAt(stepIndex, callback) {\r\n                try {\r\n                    const result = self.traceManager.getStackAt(stepIndex);\r\n                    callback(null, result);\r\n                }\r\n                catch (error) {\r\n                    callback(error);\r\n                }\r\n            },\r\n            function getMemoryAt(stepIndex, callback) {\r\n                try {\r\n                    const result = self.traceManager.getMemoryAt(stepIndex);\r\n                    callback(null, result);\r\n                }\r\n                catch (error) {\r\n                    callback(error);\r\n                }\r\n            },\r\n            function getCurrentCalledAddressAt(stepIndex, next) {\r\n                try {\r\n                    const address = self.traceManager.getCurrentCalledAddressAt(stepIndex);\r\n                    next(null, address);\r\n                }\r\n                catch (error) {\r\n                    next(error);\r\n                }\r\n            }\r\n        ], this.stepManager.currentStepIndex, (error, result) => {\r\n            if (error) {\r\n                return error;\r\n            }\r\n            var stack = result[0].value;\r\n            var memory = result[1].value;\r\n            try {\r\n                var storageViewer = new storageViewer_1.StorageViewer({ stepIndex: this.stepManager.currentStepIndex, tx: this.tx, address: result[2].value }, this.storageResolver, this.traceManager);\r\n                localDecoder_1.solidityLocals(this.stepManager.currentStepIndex, this.internalTreeCall, stack, memory, storageViewer, sourceLocation, cursor).then((locals) => {\r\n                    if (!cursor) {\r\n                        if (!locals['error']) {\r\n                            this.event.trigger('solidityLocals', [locals]);\r\n                        }\r\n                        if (!Object.keys(locals).length) {\r\n                            this.event.trigger('solidityLocalsMessage', ['no locals']);\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (!locals['error']) {\r\n                            this.event.trigger('solidityLocalsLoadMoreCompleted', [locals]);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            catch (e) {\r\n                this.event.trigger('solidityLocalsMessage', [e.message]);\r\n            }\r\n        });\r\n    }\r\n    decodeMore(cursor) {\r\n        let decodeTimeout = null;\r\n        if (!this.storageResolver)\r\n            return this.event.trigger('solidityLocalsMessage', ['storage not ready']);\r\n        if (decodeTimeout)\r\n            window.clearTimeout(decodeTimeout);\r\n        decodeTimeout = setTimeout(() => {\r\n            this.decode(this._sourceLocation, cursor);\r\n        }, 500);\r\n    }\r\n}\r\nexports.DebuggerSolidityLocals = DebuggerSolidityLocals;\r\n//# sourceMappingURL=solidityLocals.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst stateDecoder_1 = require(\"../solidity-decoder/stateDecoder\");\r\nconst storageViewer_1 = require(\"../storage/storageViewer\");\r\nclass DebuggerSolidityState {\r\n    constructor(tx, _stepManager, _traceManager, _codeManager, _solidityProxy) {\r\n        this.event = new eventManager_1.EventManager();\r\n        this.storageResolver = null;\r\n        this.stepManager = _stepManager;\r\n        this.traceManager = _traceManager;\r\n        this.codeManager = _codeManager;\r\n        this.solidityProxy = _solidityProxy;\r\n        this.stateVariablesByAddresses = {};\r\n        this.tx = tx;\r\n    }\r\n    init(index) {\r\n        let decodeTimeout = null;\r\n        if (index < 0) {\r\n            return this.event.trigger('solidityStateMessage', ['invalid step index']);\r\n        }\r\n        if (this.stepManager.currentStepIndex !== index)\r\n            return;\r\n        if (!this.solidityProxy.loaded()) {\r\n            return this.event.trigger('solidityStateMessage', ['invalid step index']);\r\n        }\r\n        if (!this.storageResolver) {\r\n            return;\r\n        }\r\n        if (decodeTimeout) {\r\n            window.clearTimeout(decodeTimeout);\r\n        }\r\n        this.event.trigger('solidityStateUpdating');\r\n        decodeTimeout = setTimeout(() => {\r\n            // necessary due to some states that can crash the debugger\r\n            try {\r\n                this.decode(index);\r\n            }\r\n            catch (err) {\r\n                console.dir('====> error');\r\n                console.dir(err);\r\n            }\r\n        }, 500);\r\n    }\r\n    reset() {\r\n        this.stateVariablesByAddresses = {};\r\n    }\r\n    decode(index) {\r\n        try {\r\n            const address = this.traceManager.getCurrentCalledAddressAt(this.stepManager.currentStepIndex);\r\n            if (this.stateVariablesByAddresses[address]) {\r\n                return this.extractStateVariables(this.stateVariablesByAddresses[address], address);\r\n            }\r\n            this.solidityProxy.extractStateVariablesAt(index).then((stateVars) => {\r\n                this.stateVariablesByAddresses[address] = stateVars;\r\n                this.extractStateVariables(stateVars, address);\r\n            }).catch((_error) => {\r\n                this.event.trigger('solidityState', [{}]);\r\n            });\r\n        }\r\n        catch (error) {\r\n            return this.event.trigger('solidityState', [{}]);\r\n        }\r\n    }\r\n    extractStateVariables(stateVars, address) {\r\n        const storageViewer = new storageViewer_1.StorageViewer({ stepIndex: this.stepManager.currentStepIndex, tx: this.tx, address: address }, this.storageResolver, this.traceManager);\r\n        stateDecoder_1.decodeState(stateVars, storageViewer).then((result) => {\r\n            this.event.trigger('solidityStateMessage', ['']);\r\n            if (result['error']) {\r\n                return this.event.trigger('solidityStateMessage', [result['error']]);\r\n            }\r\n            this.event.trigger('solidityState', [result]);\r\n        });\r\n    }\r\n}\r\nexports.DebuggerSolidityState = DebuggerSolidityState;\r\n//# sourceMappingURL=solidityState.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst eventManager_1 = require(\"../eventManager\");\r\nclass DebuggerStepManager {\r\n    constructor(_debugger, traceManager) {\r\n        this.event = new eventManager_1.EventManager();\r\n        this.debugger = _debugger;\r\n        this.traceManager = traceManager;\r\n        this.currentStepIndex = 0;\r\n        this.traceLength = 0;\r\n        this.codeTraceLength = 0;\r\n        this.revertionPoint = null;\r\n        this.listenToEvents();\r\n    }\r\n    listenToEvents() {\r\n        this.debugger.event.register('newTraceLoaded', this, () => {\r\n            this.traceManager.getLength((error, newLength) => {\r\n                if (error) {\r\n                    return console.log(error);\r\n                }\r\n                if (this.traceLength !== newLength) {\r\n                    this.event.trigger('traceLengthChanged', [newLength]);\r\n                    this.traceLength = newLength;\r\n                    this.codeTraceLength = this.calculateCodeLength();\r\n                }\r\n                this.jumpTo(0);\r\n            });\r\n        });\r\n        this.debugger.callTree.event.register('callTreeReady', () => {\r\n            if (this.debugger.callTree.functionCallStack.length) {\r\n                this.jumpTo(this.debugger.callTree.functionCallStack[0]);\r\n            }\r\n        });\r\n        this.event.register('indexChanged', this, (index) => {\r\n            if (index < 0)\r\n                return;\r\n            if (this.currentStepIndex !== index)\r\n                return;\r\n            this.traceManager.buildCallPath(index).then((callsPath) => {\r\n                this.currentCall = callsPath[callsPath.length - 1];\r\n                if (this.currentCall.reverted) {\r\n                    const revertedReason = this.currentCall.outofgas ? 'outofgas' : '';\r\n                    this.revertionPoint = this.currentCall.return;\r\n                    return this.event.trigger('revertWarning', [revertedReason]);\r\n                }\r\n                for (var k = callsPath.length - 2; k >= 0; k--) {\r\n                    var parent = callsPath[k];\r\n                    if (!parent.reverted)\r\n                        continue;\r\n                    this.revertionPoint = parent.return;\r\n                    this.event.trigger('revertWarning', ['parenthasthrown']);\r\n                }\r\n                this.event.trigger('revertWarning', ['']);\r\n            }).catch((error) => {\r\n                console.log(error);\r\n                this.event.trigger('revertWarning', ['']);\r\n            });\r\n        });\r\n    }\r\n    triggerStepChanged(step) {\r\n        this.traceManager.getLength((error, length) => {\r\n            let stepState = 'valid';\r\n            if (error) {\r\n                stepState = 'invalid';\r\n            }\r\n            else if (step <= 0) {\r\n                stepState = 'initial';\r\n            }\r\n            else if (step >= length - 1) {\r\n                stepState = 'end';\r\n            }\r\n            const jumpOutDisabled = (step === this.traceManager.findStepOut(step));\r\n            this.event.trigger('stepChanged', [step, stepState, jumpOutDisabled]);\r\n        });\r\n    }\r\n    stepIntoBack(solidityMode) {\r\n        if (!this.traceManager.isLoaded())\r\n            return;\r\n        let step = this.currentStepIndex - 1;\r\n        this.currentStepIndex = step;\r\n        if (solidityMode) {\r\n            step = this.resolveToReducedTrace(step, -1);\r\n        }\r\n        if (!this.traceManager.inRange(step)) {\r\n            return;\r\n        }\r\n        this.event.trigger('stepChanged', [step]);\r\n    }\r\n    stepIntoForward(solidityMode) {\r\n        if (!this.traceManager.isLoaded())\r\n            return;\r\n        let step = this.currentStepIndex + 1;\r\n        this.currentStepIndex = step;\r\n        if (solidityMode) {\r\n            step = this.resolveToReducedTrace(step, 1);\r\n        }\r\n        if (!this.traceManager.inRange(step)) {\r\n            return;\r\n        }\r\n        this.event.trigger('stepChanged', [step]);\r\n    }\r\n    stepOverBack(solidityMode) {\r\n        if (!this.traceManager.isLoaded())\r\n            return;\r\n        let step = this.traceManager.findStepOverBack(this.currentStepIndex);\r\n        if (solidityMode) {\r\n            step = this.resolveToReducedTrace(step, -1);\r\n        }\r\n        this.currentStepIndex = step;\r\n        this.event.trigger('stepChanged', [step]);\r\n    }\r\n    stepOverForward(solidityMode) {\r\n        if (!this.traceManager.isLoaded())\r\n            return;\r\n        if (this.currentStepIndex >= this.traceLength - 1)\r\n            return;\r\n        let step = this.currentStepIndex + 1;\r\n        const scope = this.debugger.callTree.findScope(step);\r\n        if (scope && scope.firstStep === step) {\r\n            step = scope.lastStep + 1;\r\n        }\r\n        if (solidityMode) {\r\n            step = this.resolveToReducedTrace(step, 1);\r\n        }\r\n        this.currentStepIndex = step;\r\n        this.event.trigger('stepChanged', [step]);\r\n    }\r\n    jumpOut(solidityMode) {\r\n        if (!this.traceManager.isLoaded())\r\n            return;\r\n        var step = this.traceManager.findStepOut(this.currentStepIndex);\r\n        if (solidityMode) {\r\n            step = this.resolveToReducedTrace(step, 0);\r\n        }\r\n        this.currentStepIndex = step;\r\n        this.event.trigger('stepChanged', [step]);\r\n    }\r\n    jumpTo(step) {\r\n        if (!this.traceManager.inRange(step))\r\n            return;\r\n        this.currentStepIndex = step;\r\n        this.event.trigger('stepChanged', [step]);\r\n    }\r\n    jumpToException() {\r\n        this.jumpTo(this.revertionPoint);\r\n    }\r\n    jumpNextBreakpoint() {\r\n        this.debugger.breakpointManager.jumpNextBreakpoint(this.currentStepIndex, true);\r\n    }\r\n    jumpPreviousBreakpoint() {\r\n        this.debugger.breakpointManager.jumpPreviousBreakpoint(this.currentStepIndex, true);\r\n    }\r\n    calculateFirstStep() {\r\n        const step = this.resolveToReducedTrace(0, 1);\r\n        return this.resolveToReducedTrace(step, 1);\r\n    }\r\n    calculateCodeStepList() {\r\n        let step = 0;\r\n        let steps = [];\r\n        while (step < this.traceLength) {\r\n            const _step = this.resolveToReducedTrace(step, 1);\r\n            if (!_step)\r\n                break;\r\n            steps.push(_step);\r\n            step += 1;\r\n        }\r\n        steps = steps.filter((item, pos, self) => { return steps.indexOf(item) === pos; });\r\n        return steps;\r\n    }\r\n    calculateCodeLength() {\r\n        this.calculateCodeStepList().reverse();\r\n        return this.calculateCodeStepList().reverse()[1] || this.traceLength;\r\n    }\r\n    nextStep() {\r\n        return this.resolveToReducedTrace(this.currentStepIndex, 1);\r\n    }\r\n    previousStep() {\r\n        return this.resolveToReducedTrace(this.currentStepIndex, -1);\r\n    }\r\n    resolveToReducedTrace(value, incr) {\r\n        if (!this.debugger.callTree.reducedTrace.length) {\r\n            return value;\r\n        }\r\n        var nextSource = remix_lib_1.util.findClosestIndex(value, this.debugger.callTree.reducedTrace);\r\n        nextSource = nextSource + incr;\r\n        if (nextSource <= 0) {\r\n            nextSource = 0;\r\n        }\r\n        else if (nextSource > this.debugger.callTree.reducedTrace.length) {\r\n            nextSource = this.debugger.callTree.reducedTrace.length - 1;\r\n        }\r\n        return this.debugger.callTree.reducedTrace[nextSource];\r\n    }\r\n}\r\nexports.DebuggerStepManager = DebuggerStepManager;\r\n//# sourceMappingURL=stepManager.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass EventManager {\r\n    constructor() {\r\n        this.registered = {};\r\n        this.anonymous = {};\r\n    }\r\n    /*\r\n      * Unregister a listener.\r\n      * Note that if obj is a function. the unregistration will be applied to the dummy obj {}.\r\n      *\r\n      * @param {String} eventName  - the event name\r\n      * @param {Object or Func} obj - object that will listen on this event\r\n      * @param {Func} func         - function of the listeners that will be executed\r\n    */\r\n    unregister(eventName, obj, func) {\r\n        if (!this.registered[eventName]) {\r\n            return;\r\n        }\r\n        if (obj instanceof Function) {\r\n            func = obj;\r\n            obj = this.anonymous;\r\n        }\r\n        for (const reg in this.registered[eventName]) {\r\n            if (this.registered[eventName][reg].obj === obj && this.registered[eventName][reg].func === func) {\r\n                this.registered[eventName].splice(reg, 1);\r\n            }\r\n        }\r\n    }\r\n    /*\r\n      * Register a new listener.\r\n      * Note that if obj is a function, the function registration will be associated with the dummy object {}\r\n      *\r\n      * @param {String} eventName  - the event name\r\n      * @param {Object or Func} obj - object that will listen on this event\r\n      * @param {Func} func         - function of the listeners that will be executed\r\n    */\r\n    register(eventName, obj, func) {\r\n        if (!this.registered[eventName]) {\r\n            this.registered[eventName] = [];\r\n        }\r\n        if (obj instanceof Function) {\r\n            func = obj;\r\n            obj = this.anonymous;\r\n        }\r\n        this.registered[eventName].push({\r\n            obj: obj,\r\n            func: func\r\n        });\r\n    }\r\n    /*\r\n      * trigger event.\r\n      * Every listener have their associated function executed\r\n      *\r\n      * @param {String} eventName  - the event name\r\n      * @param {Array}j - argument that will be passed to the executed function.\r\n    */\r\n    trigger(eventName, args) {\r\n        if (!this.registered[eventName]) {\r\n            return;\r\n        }\r\n        for (const listener in this.registered[eventName]) {\r\n            const l = this.registered[eventName][listener];\r\n            l.func.apply(l.obj === this.anonymous ? {} : l.obj, args);\r\n        }\r\n    }\r\n}\r\nexports.EventManager = EventManager;\r\n//# sourceMappingURL=eventManager.js.map","'use strict';\r\nconst tslib_1 = require(\"tslib\");\r\nconst init = tslib_1.__importStar(require(\"./init\"));\r\nconst Ethdebugger_1 = require(\"./Ethdebugger\");\r\nconst debugger_1 = require(\"./debugger/debugger\");\r\nconst cmdline_1 = require(\"./cmdline\");\r\nconst storageViewer_1 = require(\"./storage/storageViewer\");\r\nconst storageResolver_1 = require(\"./storage/storageResolver\");\r\nconst SolidityDecoder = tslib_1.__importStar(require(\"./solidity-decoder\"));\r\nconst breakpointManager_1 = require(\"./code/breakpointManager\");\r\nconst sourceMappingDecoder = tslib_1.__importStar(require(\"./source/sourceMappingDecoder\"));\r\nconst traceHelper = tslib_1.__importStar(require(\"./trace/traceHelper\"));\r\nmodule.exports = {\r\n    init,\r\n    traceHelper,\r\n    sourceMappingDecoder,\r\n    EthDebugger: Ethdebugger_1.Ethdebugger,\r\n    TransactionDebugger: debugger_1.Debugger,\r\n    /**\r\n     * constructor\r\n     *\r\n     * @param {Object} _debugger - type of EthDebugger\r\n     * @return {Function} _locationToRowConverter - function implemented by editor which return a column/line position for a char source location\r\n     */\r\n    BreakpointManager: breakpointManager_1.BreakpointManager,\r\n    SolidityDecoder,\r\n    storage: {\r\n        StorageViewer: storageViewer_1.StorageViewer,\r\n        StorageResolver: storageResolver_1.StorageResolver\r\n    },\r\n    CmdLine: cmdline_1.CmdLine\r\n};\r\n//# sourceMappingURL=index.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nfunction loadWeb3(url) {\r\n    if (!url)\r\n        url = 'http://localhost:8545';\r\n    const web3 = new web3_1.default();\r\n    web3.setProvider(new web3_1.default.providers.HttpProvider(url));\r\n    extend(web3);\r\n    return web3;\r\n}\r\nexports.loadWeb3 = loadWeb3;\r\nfunction extendWeb3(web3) {\r\n    extend(web3);\r\n}\r\nexports.extendWeb3 = extendWeb3;\r\nfunction setProvider(web3, url) {\r\n    web3.setProvider(new web3.providers.HttpProvider(url));\r\n}\r\nexports.setProvider = setProvider;\r\nfunction web3DebugNode(network) {\r\n    const web3DebugNodes = {\r\n        Main: 'https://rpc.archivenode.io/e50zmkroshle2e2e50zm0044i7ao04ym',\r\n        Rinkeby: 'https://remix-rinkeby.ethdevops.io',\r\n        Ropsten: 'https://remix-ropsten.ethdevops.io',\r\n        Goerli: 'https://remix-goerli.ethdevops.io',\r\n        Kovan: 'https://remix-kovan.ethdevops.io'\r\n    };\r\n    if (web3DebugNodes[network]) {\r\n        return loadWeb3(web3DebugNodes[network]);\r\n    }\r\n    return null;\r\n}\r\nexports.web3DebugNode = web3DebugNode;\r\nfunction extend(web3) {\r\n    if (!web3.extend) {\r\n        return;\r\n    }\r\n    // DEBUG\r\n    const methods = [];\r\n    if (!(web3.debug && web3.debug.preimage)) {\r\n        methods.push(new web3.extend.Method({\r\n            name: 'preimage',\r\n            call: 'debug_preimage',\r\n            inputFormatter: [null],\r\n            params: 1\r\n        }));\r\n    }\r\n    if (!(web3.debug && web3.debug.traceTransaction)) {\r\n        methods.push(new web3.extend.Method({\r\n            name: 'traceTransaction',\r\n            call: 'debug_traceTransaction',\r\n            inputFormatter: [null, null],\r\n            params: 2\r\n        }));\r\n    }\r\n    if (!(web3.debug && web3.debug.storageRangeAt)) {\r\n        methods.push(new web3.extend.Method({\r\n            name: 'storageRangeAt',\r\n            call: 'debug_storageRangeAt',\r\n            inputFormatter: [null, null, null, null, null],\r\n            params: 5\r\n        }));\r\n    }\r\n    if (methods.length > 0) {\r\n        web3.extend({\r\n            property: 'debug',\r\n            methods: methods,\r\n            properties: []\r\n        });\r\n    }\r\n}\r\nexports.extend = extend;\r\n//# sourceMappingURL=init.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst remix_astwalker_1 = require(\"@remix-project/remix-astwalker\");\r\n/**\r\n  * return all contract definitions of the given @astList\r\n  *\r\n  * @param {Object} sourcesList - sources list (containing root AST node)\r\n  * @return {Object} - returns a mapping from AST node ids to AST nodes for the contracts\r\n  */\r\nfunction extractContractDefinitions(sourcesList) {\r\n    const ret = {\r\n        contractsById: {},\r\n        contractsByName: {},\r\n        sourcesByContract: {}\r\n    };\r\n    const walker = new remix_astwalker_1.AstWalker();\r\n    for (const k in sourcesList) {\r\n        walker.walkFull(sourcesList[k].ast, (node) => {\r\n            if (node.nodeType === 'ContractDefinition') {\r\n                ret.contractsById[node.id] = node;\r\n                ret.sourcesByContract[node.id] = k;\r\n                ret.contractsByName[k + ':' + node.name] = node;\r\n            }\r\n        });\r\n    }\r\n    return ret;\r\n}\r\nexports.extractContractDefinitions = extractContractDefinitions;\r\n/**\r\n  * returns the linearized base contracts of the contract @arg id\r\n  *\r\n  * @param {Int} id - contract id to resolve\r\n  * @param {Map} contracts  - all contracts defined in the current context\r\n  * @return {Array} - array of base contracts in derived to base order as AST nodes.\r\n  */\r\nfunction getLinearizedBaseContracts(id, contractsById) {\r\n    return contractsById[id].linearizedBaseContracts.map(function (id) { return contractsById[id]; });\r\n}\r\nexports.getLinearizedBaseContracts = getLinearizedBaseContracts;\r\n/**\r\n  * return state var and type definition of the given contract\r\n  *\r\n  * @param {String} contractName - contract for which state var should be resolved\r\n  * @param {Object} sourcesList - sources list (containing root AST node)\r\n  * @param {Object} [contracts] - map of contract definitions (contains contractsById, contractsByName)\r\n  * @return {Object} - return an object containing: stateItems - list of all the children node of the @arg contractName\r\n  *                                                 stateVariables - list of all the variable declaration of the @arg contractName\r\n  */\r\nfunction extractStateDefinitions(contractName, sourcesList, contracts) {\r\n    if (!contracts) {\r\n        contracts = extractContractDefinitions(sourcesList);\r\n    }\r\n    const node = contracts.contractsByName[contractName];\r\n    if (!node) {\r\n        return null;\r\n    }\r\n    const stateItems = [];\r\n    const stateVar = [];\r\n    const baseContracts = getLinearizedBaseContracts(node.id, contracts.contractsById);\r\n    baseContracts.reverse();\r\n    for (const k in baseContracts) {\r\n        const ctr = baseContracts[k];\r\n        for (const i in ctr.nodes) {\r\n            const item = ctr.nodes[i];\r\n            stateItems.push(item);\r\n            if (item.nodeType === 'VariableDeclaration') {\r\n                stateVar.push(item);\r\n            }\r\n        }\r\n    }\r\n    return { stateDefinitions: stateItems, stateVariables: stateVar };\r\n}\r\nexports.extractStateDefinitions = extractStateDefinitions;\r\n/**\r\n  * return state var and type definition of all the contracts from the given @args sourcesList\r\n  *\r\n  * @param {Object} sourcesList - sources list (containing root AST node)\r\n  * @param {Object} [contracts] - map of contract definitions (contains contractsById, contractsByName)\r\n  * @return {Object} - returns a mapping between contract name and contract state\r\n  */\r\nfunction extractStatesDefinitions(sourcesList, contracts) {\r\n    if (!contracts) {\r\n        contracts = extractContractDefinitions(sourcesList);\r\n    }\r\n    const ret = {};\r\n    for (const contract in contracts.contractsById) {\r\n        const name = contracts.contractsById[contract].name;\r\n        const source = contracts.sourcesByContract[contract];\r\n        const fullName = source + ':' + name;\r\n        const state = extractStateDefinitions(fullName, sourcesList, contracts);\r\n        ret[fullName] = state;\r\n        ret[name] = state; // solc < 0.4.9\r\n    }\r\n    return ret;\r\n}\r\nexports.extractStatesDefinitions = extractStatesDefinitions;\r\n//# sourceMappingURL=astHelper.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Address_1 = require(\"./types/Address\");\r\nconst ArrayType_1 = require(\"./types/ArrayType\");\r\nconst Bool_1 = require(\"./types/Bool\");\r\nconst DynamicByteArray_1 = require(\"./types/DynamicByteArray\");\r\nconst FixedByteArray_1 = require(\"./types/FixedByteArray\");\r\nconst Enum_1 = require(\"./types/Enum\");\r\nconst StringType_1 = require(\"./types/StringType\");\r\nconst Struct_1 = require(\"./types/Struct\");\r\nconst Int_1 = require(\"./types/Int\");\r\nconst Uint_1 = require(\"./types/Uint\");\r\nconst Mapping_1 = require(\"./types/Mapping\");\r\nconst util_1 = require(\"./types/util\");\r\n/**\r\n  * mapping decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName}\r\n  */\r\nfunction mapping(type, stateDefinitions, contractName) {\r\n    const match = type.match(/mapping\\((.*?)=>(.*)\\)$/);\r\n    const keyTypeName = match[1].trim();\r\n    const valueTypeName = match[2].trim();\r\n    const keyType = parseType(keyTypeName, stateDefinitions, contractName, 'storage');\r\n    const valueType = parseType(valueTypeName, stateDefinitions, contractName, 'storage');\r\n    var underlyingTypes = {\r\n        keyType: keyType,\r\n        valueType: valueType\r\n    };\r\n    return new Mapping_1.Mapping(underlyingTypes, 'location', util_1.removeLocation(type));\r\n}\r\n/**\r\n  * Uint decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g uint256, uint32)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName}\r\n  */\r\nfunction uint(type) {\r\n    type = type === 'uint' ? 'uint256' : type;\r\n    const storageBytes = parseInt(type.replace('uint', '')) / 8;\r\n    return new Uint_1.Uint(storageBytes);\r\n}\r\nexports.Uint = uint;\r\n/**\r\n  * Int decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g int256, int32)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName}\r\n  */\r\nfunction int(type) {\r\n    type = type === 'int' ? 'int256' : type;\r\n    const storageBytes = parseInt(type.replace('int', '')) / 8;\r\n    return new Int_1.Int(storageBytes);\r\n}\r\nexports.Int = int;\r\n/**\r\n  * Address decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g address)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName}\r\n  */\r\nfunction address(type) {\r\n    return new Address_1.Address();\r\n}\r\nexports.Address = address;\r\n/**\r\n  * Bool decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g bool)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName}\r\n  */\r\nfunction bool(type) {\r\n    return new Bool_1.Bool();\r\n}\r\nexports.Bool = bool;\r\n/**\r\n  * DynamicByteArray decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g bytes storage ref)\r\n  * @param {null} stateDefinitions - all state definitions given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {null} contractName - contract the @args typeName belongs to\r\n  * @param {String} location - location of the data (storage ref| storage pointer| memory| calldata)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName}\r\n  */\r\nfunction dynamicByteArray(type, stateDefinitions, contractName, location) {\r\n    if (!location) {\r\n        location = util_1.extractLocation(type);\r\n    }\r\n    if (location) {\r\n        return new DynamicByteArray_1.DynamicByteArray(location);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nexports.DynamicByteArray = dynamicByteArray;\r\n/**\r\n  * FixedByteArray decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g bytes16)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName}\r\n  */\r\nfunction fixedByteArray(type) {\r\n    const storageBytes = parseInt(type.replace('bytes', ''));\r\n    return new FixedByteArray_1.FixedByteArray(storageBytes);\r\n}\r\nexports.FixedByteArray = fixedByteArray;\r\n/**\r\n  * StringType decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g string storage ref)\r\n  * @param {null} stateDefinitions - all state definitions given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {null} contractName - contract the @args typeName belongs to\r\n  * @param {String} location - location of the data (storage ref| storage pointer| memory| calldata)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName}\r\n  */\r\nfunction stringType(type, stateDefinitions, contractName, location) {\r\n    if (!location) {\r\n        location = util_1.extractLocation(type);\r\n    }\r\n    if (location) {\r\n        return new StringType_1.StringType(location);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nexports.String = stringType;\r\n/**\r\n  * ArrayType decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g int256[] storage ref, int256[] storage ref[] storage ref)\r\n  * @param {Object} stateDefinitions - all state definitions given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {String} contractName - contract the @args typeName belongs to\r\n  * @param {String} location - location of the data (storage ref| storage pointer| memory| calldata)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName, arraySize, subArray}\r\n  */\r\nfunction array(type, stateDefinitions, contractName, location) {\r\n    const match = type.match(/(.*)\\[(.*?)\\]( storage ref| storage pointer| memory| calldata)?$/);\r\n    if (!match) {\r\n        console.log('unable to parse type ' + type);\r\n        return null;\r\n    }\r\n    if (!location) {\r\n        location = match[3].trim();\r\n    }\r\n    const arraySize = match[2] === '' ? 'dynamic' : parseInt(match[2]);\r\n    const underlyingType = parseType(match[1], stateDefinitions, contractName, location);\r\n    if (underlyingType === null) {\r\n        console.log('unable to parse type ' + type);\r\n        return null;\r\n    }\r\n    return new ArrayType_1.ArrayType(underlyingType, arraySize, location);\r\n}\r\nexports.Array = array;\r\n/**\r\n  * Enum decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g enum enumDef)\r\n  * @param {Object} stateDefinitions - all state definitions given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {String} contractName - contract the @args typeName belongs to\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName, enum}\r\n  */\r\nfunction enumType(type, stateDefinitions, contractName) {\r\n    const match = type.match(/enum (.*)/);\r\n    const enumDef = getEnum(match[1], stateDefinitions, contractName);\r\n    if (enumDef === null) {\r\n        console.log('unable to retrieve decode info of ' + type);\r\n        return null;\r\n    }\r\n    return new Enum_1.Enum(enumDef);\r\n}\r\nexports.Enum = enumType;\r\n/**\r\n  * Struct decode the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g struct structDef storage ref)\r\n  * @param {Object} stateDefinitions - all state definitions given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {String} contractName - contract the @args typeName belongs to\r\n  * @param {String} location - location of the data (storage ref| storage pointer| memory| calldata)\r\n  * @return {Object} returns decoded info about the current type: { storageBytes, typeName, members}\r\n  */\r\nfunction struct(type, stateDefinitions, contractName, location) {\r\n    const match = type.match(/struct (\\S*?)( storage ref| storage pointer| memory| calldata)?$/);\r\n    if (match) {\r\n        if (!location) {\r\n            location = match[2].trim();\r\n        }\r\n        const memberDetails = getStructMembers(match[1], stateDefinitions, contractName, location); // type is used to extract the ast struct definition\r\n        if (!memberDetails)\r\n            return null;\r\n        return new Struct_1.Struct(memberDetails, location, match[1]);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nexports.Struct = struct;\r\n/**\r\n  * retrieve enum declaration of the given @arg type\r\n  *\r\n  * @param {String} type - type given by the AST (e.g enum enumDef)\r\n  * @param {Object} stateDefinitions  - all state declarations given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {String} contractName - contract the @args typeName belongs to\r\n  * @return {Array} - containing all value declaration of the current enum type\r\n  */\r\nfunction getEnum(type, stateDefinitions, contractName) {\r\n    const split = type.split('.');\r\n    if (!split.length) {\r\n        type = contractName + '.' + type;\r\n    }\r\n    else {\r\n        contractName = split[0];\r\n    }\r\n    const state = stateDefinitions[contractName];\r\n    if (state) {\r\n        for (const dec of state.stateDefinitions) {\r\n            if (dec && dec.name && type === contractName + '.' + dec.name) {\r\n                return dec;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n  * retrieve memebers declared in the given @arg tye\r\n  *\r\n  * @param {String} typeName - name of the struct type (e.g struct <name>)\r\n  * @param {Object} stateDefinitions  - all state definition given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {String} contractName - contract the @args typeName belongs to\r\n  * @param {String} location - location of the data (storage ref| storage pointer| memory| calldata)\r\n  * @return {Array} containing all members of the current struct type\r\n  */\r\nfunction getStructMembers(type, stateDefinitions, contractName, location) {\r\n    const split = type.split('.');\r\n    if (!split.length) {\r\n        type = contractName + '.' + type;\r\n    }\r\n    else {\r\n        contractName = split[0];\r\n    }\r\n    const state = stateDefinitions[contractName];\r\n    if (state) {\r\n        for (const dec of state.stateDefinitions) {\r\n            if (dec.nodeType === 'StructDefinition' && type === contractName + '.' + dec.name) {\r\n                const offsets = computeOffsets(dec.members, stateDefinitions, contractName, location);\r\n                if (!offsets) {\r\n                    return null;\r\n                }\r\n                return {\r\n                    members: offsets.typesOffsets,\r\n                    storageSlots: offsets.endLocation.slot\r\n                };\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n  * parse the full type\r\n  *\r\n  * @param {String} fullType - type given by the AST (ex: uint[2] storage ref[2])\r\n  * @return {String} returns the token type (used to instanciate the right decoder) (uint[2] storage ref[2] will return 'array', uint256 will return uintX)\r\n  */\r\nfunction typeClass(fullType) {\r\n    fullType = util_1.removeLocation(fullType);\r\n    if (fullType.lastIndexOf(']') === fullType.length - 1) {\r\n        return 'array';\r\n    }\r\n    if (fullType.indexOf('mapping') === 0) {\r\n        return 'mapping';\r\n    }\r\n    if (fullType.indexOf(' ') !== -1) {\r\n        fullType = fullType.split(' ')[0];\r\n    }\r\n    const char = fullType.indexOf('bytes') === 0 ? 'X' : '';\r\n    return fullType.replace(/[0-9]+/g, char);\r\n}\r\n/**\r\n  * parse the type and return an object representing the type\r\n  *\r\n  * @param {Object} type - type name given by the ast node\r\n  * @param {Object} stateDefinitions - all state stateDefinitions given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {String} contractName - contract the @args typeName belongs to\r\n  * @param {String} location - location of the data (storage ref| storage pointer| memory| calldata)\r\n  * @return {Object} - return the corresponding decoder or null on error\r\n  */\r\nfunction parseType(type, stateDefinitions, contractName, location) {\r\n    const decodeInfos = {\r\n        contract: address,\r\n        address: address,\r\n        array: array,\r\n        bool: bool,\r\n        bytes: dynamicByteArray,\r\n        bytesX: fixedByteArray,\r\n        enum: enumType,\r\n        string: stringType,\r\n        struct: struct,\r\n        int: int,\r\n        uint: uint,\r\n        mapping: mapping\r\n    };\r\n    const currentType = typeClass(type);\r\n    if (currentType === null) {\r\n        console.log('unable to retrieve decode info of ' + type);\r\n        return null;\r\n    }\r\n    if (decodeInfos[currentType]) {\r\n        return decodeInfos[currentType](type, stateDefinitions, contractName, location);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nexports.parseType = parseType;\r\n/**\r\n  * compute offset (slot offset and byte offset of the @arg list of types)\r\n  *\r\n  * @param {Array} types - list of types\r\n  * @param {Object} stateDefinitions - all state definitions given by the AST (including struct and enum type declaration) for all contracts\r\n  * @param {String} contractName - contract the @args typeName belongs to\r\n  * @param {String} location - location of the data (storage ref| storage pointer| memory| calldata)\r\n  * @return {Array} - return an array of types item: {name, type, location}. location defines the byte offset and slot offset\r\n  */\r\nfunction computeOffsets(types, stateDefinitions, contractName, location) {\r\n    const ret = [];\r\n    const storagelocation = {\r\n        offset: 0,\r\n        slot: 0\r\n    };\r\n    for (var i in types) {\r\n        var variable = types[i];\r\n        var type = parseType(variable.typeDescriptions.typeString, stateDefinitions, contractName, location);\r\n        if (!type) {\r\n            console.log('unable to retrieve decode info of ' + variable.typeDescriptions.typeString);\r\n            return null;\r\n        }\r\n        if (!variable.constant && storagelocation.offset + type.storageBytes > 32) {\r\n            storagelocation.slot++;\r\n            storagelocation.offset = 0;\r\n        }\r\n        ret.push({\r\n            name: variable.name,\r\n            type: type,\r\n            constant: variable.constant,\r\n            storagelocation: {\r\n                offset: variable.constant ? 0 : storagelocation.offset,\r\n                slot: variable.constant ? 0 : storagelocation.slot\r\n            }\r\n        });\r\n        if (!variable.constant) {\r\n            if (type.storageSlots === 1 && storagelocation.offset + type.storageBytes <= 32) {\r\n                storagelocation.offset += type.storageBytes;\r\n            }\r\n            else {\r\n                storagelocation.slot += type.storageSlots;\r\n                storagelocation.offset = 0;\r\n            }\r\n        }\r\n    }\r\n    if (storagelocation.offset > 0) {\r\n        storagelocation.slot++;\r\n    }\r\n    return {\r\n        typesOffsets: ret,\r\n        endLocation: storagelocation\r\n    };\r\n}\r\nexports.computeOffsets = computeOffsets;\r\n//# sourceMappingURL=decodeInfo.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst solidityProxy_1 = require(\"./solidityProxy\");\r\nexports.SolidityProxy = solidityProxy_1.SolidityProxy;\r\nconst stateDecoder = tslib_1.__importStar(require(\"./stateDecoder\"));\r\nexports.stateDecoder = stateDecoder;\r\nconst localDecoder = tslib_1.__importStar(require(\"./localDecoder\"));\r\nexports.localDecoder = localDecoder;\r\nconst internalCallTree_1 = require(\"./internalCallTree\");\r\nexports.InternalCallTree = internalCallTree_1.InternalCallTree;\r\n//# sourceMappingURL=index.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst remix_astwalker_1 = require(\"@remix-project/remix-astwalker\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst sourceLocationTracker_1 = require(\"../source/sourceLocationTracker\");\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst decodeInfo_1 = require(\"./decodeInfo\");\r\nconst traceHelper_1 = require(\"../trace/traceHelper\");\r\nconst util_1 = require(\"./types/util\");\r\n/**\r\n * Tree representing internal jump into function.\r\n * Triggers `callTreeReady` event when tree is ready\r\n * Triggers `callTreeBuildFailed` event when tree fails to build\r\n */\r\nclass InternalCallTree {\r\n    /**\r\n      * constructor\r\n      *\r\n      * @param {Object} debuggerEvent  - event declared by the debugger (EthDebugger)\r\n      * @param {Object} traceManager  - trace manager\r\n      * @param {Object} solidityProxy  - solidity proxy\r\n      * @param {Object} codeManager  - code manager\r\n      * @param {Object} opts  - { includeLocalVariables, debugWithGeneratedSources }\r\n      */\r\n    constructor(debuggerEvent, traceManager, solidityProxy, codeManager, opts) {\r\n        this.includeLocalVariables = opts.includeLocalVariables;\r\n        this.debugWithGeneratedSources = opts.debugWithGeneratedSources;\r\n        this.event = new eventManager_1.EventManager();\r\n        this.solidityProxy = solidityProxy;\r\n        this.traceManager = traceManager;\r\n        this.sourceLocationTracker = new sourceLocationTracker_1.SourceLocationTracker(codeManager, { debugWithGeneratedSources: opts.debugWithGeneratedSources });\r\n        debuggerEvent.register('newTraceLoaded', (trace) => {\r\n            this.reset();\r\n            if (!this.solidityProxy.loaded()) {\r\n                this.event.trigger('callTreeBuildFailed', ['compilation result not loaded. Cannot build internal call tree']);\r\n            }\r\n            else {\r\n                // each recursive call to buildTree represent a new context (either call, delegatecall, internal function)\r\n                const calledAddress = traceManager.getCurrentCalledAddressAt(0);\r\n                const isCreation = traceHelper_1.isContractCreation(calledAddress);\r\n                buildTree(this, 0, '', true, isCreation).then((result) => {\r\n                    if (result.error) {\r\n                        this.event.trigger('callTreeBuildFailed', [result.error]);\r\n                    }\r\n                    else {\r\n                        createReducedTrace(this, traceManager.trace.length - 1);\r\n                        this.event.trigger('callTreeReady', [this.scopes, this.scopeStarts]);\r\n                    }\r\n                }, (reason) => {\r\n                    console.log('analyzing trace falls ' + reason);\r\n                    this.event.trigger('callTreeNotReady', [reason]);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n      * reset tree\r\n      *\r\n      */\r\n    reset() {\r\n        /*\r\n          scopes: map of scopes defined by range in the vmtrace {firstStep, lastStep, locals}.\r\n          Keys represent the level of deepness (scopeId)\r\n          scopeId : <currentscope_id>.<sub_scope_id>.<sub_sub_scope_id>\r\n        */\r\n        this.scopes = {};\r\n        /*\r\n          scopeStart: represent start of a new scope. Keys are index in the vmtrace, values are scopeId\r\n        */\r\n        this.sourceLocationTracker.clearCache();\r\n        this.functionCallStack = [];\r\n        this.functionDefinitionsByScope = {};\r\n        this.scopeStarts = {};\r\n        this.variableDeclarationByFile = {};\r\n        this.functionDefinitionByFile = {};\r\n        this.astWalker = new remix_astwalker_1.AstWalker();\r\n        this.reducedTrace = [];\r\n    }\r\n    /**\r\n      * find the scope given @arg vmTraceIndex\r\n      *\r\n      * @param {Int} vmtraceIndex  - index on the vm trace\r\n      */\r\n    findScope(vmtraceIndex) {\r\n        let scopeId = this.findScopeId(vmtraceIndex);\r\n        if (scopeId !== '' && !scopeId)\r\n            return null;\r\n        let scope = this.scopes[scopeId];\r\n        while (scope.lastStep && scope.lastStep < vmtraceIndex && scope.firstStep > 0) {\r\n            scopeId = this.parentScope(scopeId);\r\n            scope = this.scopes[scopeId];\r\n        }\r\n        return scope;\r\n    }\r\n    parentScope(scopeId) {\r\n        const matched = scopeId.match(/(.\\d|\\d)$/);\r\n        return scopeId.replace(matched[1], '');\r\n    }\r\n    findScopeId(vmtraceIndex) {\r\n        const scopes = Object.keys(this.scopeStarts);\r\n        if (!scopes.length)\r\n            return null;\r\n        const scopeStart = remix_lib_1.util.findLowerBoundValue(vmtraceIndex, scopes);\r\n        return this.scopeStarts[scopeStart];\r\n    }\r\n    retrieveFunctionsStack(vmtraceIndex) {\r\n        const scope = this.findScope(vmtraceIndex);\r\n        if (!scope)\r\n            return [];\r\n        let scopeId = this.scopeStarts[scope.firstStep];\r\n        const functions = [];\r\n        if (!scopeId)\r\n            return functions;\r\n        let i = 0;\r\n        // eslint-disable-next-line no-constant-condition\r\n        while (true) {\r\n            i += 1;\r\n            if (i > 1000)\r\n                throw new Error('retrieFunctionStack: recursion too deep');\r\n            const functionDefinition = this.functionDefinitionsByScope[scopeId];\r\n            if (functionDefinition !== undefined) {\r\n                functions.push(functionDefinition);\r\n            }\r\n            const parent = this.parentScope(scopeId);\r\n            if (!parent)\r\n                break;\r\n            else\r\n                scopeId = parent;\r\n        }\r\n        return functions;\r\n    }\r\n    extractSourceLocation(step) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const address = this.traceManager.getCurrentCalledAddressAt(step);\r\n                const location = yield this.sourceLocationTracker.getSourceLocationFromVMTraceIndex(address, step, this.solidityProxy.contracts);\r\n                return location;\r\n            }\r\n            catch (error) {\r\n                throw new Error('InternalCallTree - Cannot retrieve sourcelocation for step ' + step + ' ' + error);\r\n            }\r\n        });\r\n    }\r\n    extractValidSourceLocation(step) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const address = this.traceManager.getCurrentCalledAddressAt(step);\r\n                const location = yield this.sourceLocationTracker.getValidSourceLocationFromVMTraceIndex(address, step, this.solidityProxy.contracts);\r\n                return location;\r\n            }\r\n            catch (error) {\r\n                throw new Error('InternalCallTree - Cannot retrieve valid sourcelocation for step ' + step + ' ' + error);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.InternalCallTree = InternalCallTree;\r\nfunction buildTree(tree, step, scopeId, isExternalCall, isCreation) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        let subScope = 1;\r\n        tree.scopeStarts[step] = scopeId;\r\n        tree.scopes[scopeId] = { firstStep: step, locals: {}, isCreation };\r\n        function callDepthChange(step, trace) {\r\n            if (step + 1 < trace.length) {\r\n                return trace[step].depth !== trace[step + 1].depth;\r\n            }\r\n            return false;\r\n        }\r\n        function includedSource(source, included) {\r\n            return (included.start !== -1 &&\r\n                included.length !== -1 &&\r\n                included.file !== -1 &&\r\n                included.start >= source.start &&\r\n                included.start + included.length <= source.start + source.length &&\r\n                included.file === source.file);\r\n        }\r\n        let currentSourceLocation = { start: -1, length: -1, file: -1 };\r\n        let previousSourceLocation = currentSourceLocation;\r\n        while (step < tree.traceManager.trace.length) {\r\n            let sourceLocation;\r\n            let newLocation = false;\r\n            try {\r\n                sourceLocation = yield tree.extractSourceLocation(step);\r\n                if (!includedSource(sourceLocation, currentSourceLocation)) {\r\n                    tree.reducedTrace.push(step);\r\n                    currentSourceLocation = sourceLocation;\r\n                    newLocation = true;\r\n                }\r\n            }\r\n            catch (e) {\r\n                return { outStep: step, error: 'InternalCallTree - Error resolving source location. ' + step + ' ' + e };\r\n            }\r\n            if (!sourceLocation) {\r\n                return { outStep: step, error: 'InternalCallTree - No source Location. ' + step };\r\n            }\r\n            const isCallInstrn = traceHelper_1.isCallInstruction(tree.traceManager.trace[step]);\r\n            const isCreateInstrn = traceHelper_1.isCreateInstruction(tree.traceManager.trace[step]);\r\n            // we are checking if we are jumping in a new CALL or in an internal function\r\n            if (isCallInstrn || sourceLocation.jump === 'i') {\r\n                try {\r\n                    const externalCallResult = yield buildTree(tree, step + 1, scopeId === '' ? subScope.toString() : scopeId + '.' + subScope, isCallInstrn, isCreateInstrn);\r\n                    if (externalCallResult.error) {\r\n                        return { outStep: step, error: 'InternalCallTree - ' + externalCallResult.error };\r\n                    }\r\n                    else {\r\n                        step = externalCallResult.outStep;\r\n                        subScope++;\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    return { outStep: step, error: 'InternalCallTree - ' + e.message };\r\n                }\r\n            }\r\n            else if ((isExternalCall && callDepthChange(step, tree.traceManager.trace)) || (!isExternalCall && sourceLocation.jump === 'o')) {\r\n                // if not, we might be returning from a CALL or internal function. This is what is checked here.\r\n                tree.scopes[scopeId].lastStep = step;\r\n                return { outStep: step + 1 };\r\n            }\r\n            else {\r\n                // if not, we are in the current scope.\r\n                // We check in `includeVariableDeclaration` if there is a new local variable in scope for this specific `step`\r\n                if (tree.includeLocalVariables) {\r\n                    yield includeVariableDeclaration(tree, step, sourceLocation, scopeId, newLocation, previousSourceLocation);\r\n                }\r\n                previousSourceLocation = sourceLocation;\r\n                step++;\r\n            }\r\n        }\r\n        return { outStep: step };\r\n    });\r\n}\r\n// the reduced trace contain an entry only if that correspond to a new source location\r\nfunction createReducedTrace(tree, index) {\r\n    tree.reducedTrace.push(index);\r\n}\r\nfunction getGeneratedSources(tree, scopeId, contractObj) {\r\n    if (tree.debugWithGeneratedSources && contractObj && tree.scopes[scopeId]) {\r\n        return tree.scopes[scopeId].isCreation ? contractObj.contract.evm.bytecode.generatedSources : contractObj.contract.evm.deployedBytecode.generatedSources;\r\n    }\r\n    return null;\r\n}\r\nfunction includeVariableDeclaration(tree, step, sourceLocation, scopeId, newLocation, previousSourceLocation) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        const contractObj = yield tree.solidityProxy.contractObjectAt(step);\r\n        let states = null;\r\n        const generatedSources = getGeneratedSources(tree, scopeId, contractObj);\r\n        const variableDeclarations = resolveVariableDeclaration(tree, sourceLocation, generatedSources);\r\n        // using the vm trace step, the current source location and the ast,\r\n        // we check if the current vm trace step target a new ast node of type VariableDeclaration\r\n        // that way we know that there is a new local variable from here.\r\n        if (variableDeclarations && variableDeclarations.length) {\r\n            for (const variableDeclaration of variableDeclarations) {\r\n                if (variableDeclaration && !tree.scopes[scopeId].locals[variableDeclaration.name]) {\r\n                    try {\r\n                        const stack = tree.traceManager.getStackAt(step);\r\n                        // the stack length at this point is where the value of the new local variable will be stored.\r\n                        // so, either this is the direct value, or the offset in memory. That depends on the type.\r\n                        if (variableDeclaration.name !== '') {\r\n                            states = tree.solidityProxy.extractStatesDefinitions();\r\n                            var location = util_1.extractLocationFromAstVariable(variableDeclaration);\r\n                            location = location === 'default' ? 'storage' : location;\r\n                            // we push the new local variable in our tree\r\n                            tree.scopes[scopeId].locals[variableDeclaration.name] = {\r\n                                name: variableDeclaration.name,\r\n                                type: decodeInfo_1.parseType(variableDeclaration.typeDescriptions.typeString, states, contractObj.name, location),\r\n                                stackDepth: stack.length,\r\n                                sourceLocation: sourceLocation\r\n                            };\r\n                        }\r\n                    }\r\n                    catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // we check here if we are at the beginning inside a new function.\r\n        // if that is the case, we have to add to locals tree the inputs and output params\r\n        const functionDefinition = resolveFunctionDefinition(tree, previousSourceLocation, generatedSources);\r\n        if (!functionDefinition)\r\n            return;\r\n        const previousIsJumpDest2 = traceHelper_1.isJumpDestInstruction(tree.traceManager.trace[step - 2]);\r\n        const previousIsJumpDest1 = traceHelper_1.isJumpDestInstruction(tree.traceManager.trace[step - 1]);\r\n        const isConstructor = functionDefinition.kind === 'constructor';\r\n        if (newLocation && (previousIsJumpDest1 || previousIsJumpDest2 || isConstructor)) {\r\n            tree.functionCallStack.push(step);\r\n            const functionDefinitionAndInputs = { functionDefinition, inputs: [] };\r\n            // means: the previous location was a function definition && JUMPDEST\r\n            // => we are at the beginning of the function and input/output are setup\r\n            try {\r\n                const stack = tree.traceManager.getStackAt(step);\r\n                states = tree.solidityProxy.extractStatesDefinitions();\r\n                if (functionDefinition.parameters) {\r\n                    const inputs = functionDefinition.parameters;\r\n                    const outputs = functionDefinition.returnParameters;\r\n                    // for (const element of functionDefinition.parameters) {\r\n                    //   if (element.nodeType === 'ParameterList') {\r\n                    //     if (!inputs) inputs = element\r\n                    //     else {\r\n                    //       outputs = element\r\n                    //       break\r\n                    //     }\r\n                    //   }\r\n                    // }\r\n                    // input params\r\n                    if (inputs && inputs.parameters) {\r\n                        functionDefinitionAndInputs.inputs = addParams(inputs, tree, scopeId, states, contractObj.name, previousSourceLocation, stack.length, inputs.parameters.length, -1);\r\n                    }\r\n                    // output params\r\n                    if (outputs)\r\n                        addParams(outputs, tree, scopeId, states, contractObj.name, previousSourceLocation, stack.length, 0, 1);\r\n                }\r\n            }\r\n            catch (error) {\r\n                console.log(error);\r\n            }\r\n            tree.functionDefinitionsByScope[scopeId] = functionDefinitionAndInputs;\r\n        }\r\n    });\r\n}\r\n// this extract all the variable declaration for a given ast and file\r\n// and keep this in a cache\r\nfunction resolveVariableDeclaration(tree, sourceLocation, generatedSources) {\r\n    if (!tree.variableDeclarationByFile[sourceLocation.file]) {\r\n        const ast = tree.solidityProxy.ast(sourceLocation, generatedSources);\r\n        if (ast) {\r\n            tree.variableDeclarationByFile[sourceLocation.file] = extractVariableDeclarations(ast, tree.astWalker);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    return tree.variableDeclarationByFile[sourceLocation.file][sourceLocation.start + ':' + sourceLocation.length + ':' + sourceLocation.file];\r\n}\r\n// this extract all the function definition for a given ast and file\r\n// and keep this in a cache\r\nfunction resolveFunctionDefinition(tree, sourceLocation, generatedSources) {\r\n    if (!tree.functionDefinitionByFile[sourceLocation.file]) {\r\n        const ast = tree.solidityProxy.ast(sourceLocation, generatedSources);\r\n        if (ast) {\r\n            tree.functionDefinitionByFile[sourceLocation.file] = extractFunctionDefinitions(ast, tree.astWalker);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    return tree.functionDefinitionByFile[sourceLocation.file][sourceLocation.start + ':' + sourceLocation.length + ':' + sourceLocation.file];\r\n}\r\nfunction extractVariableDeclarations(ast, astWalker) {\r\n    const ret = {};\r\n    astWalker.walkFull(ast, (node) => {\r\n        if (node.nodeType === 'VariableDeclaration' || node.nodeType === 'YulVariableDeclaration') {\r\n            ret[node.src] = [node];\r\n        }\r\n        const hasChild = node.initialValue && (node.nodeType === 'VariableDeclarationStatement' || node.nodeType === 'YulVariableDeclarationStatement');\r\n        if (hasChild)\r\n            ret[node.initialValue.src] = node.declarations;\r\n    });\r\n    return ret;\r\n}\r\nfunction extractFunctionDefinitions(ast, astWalker) {\r\n    const ret = {};\r\n    astWalker.walkFull(ast, (node) => {\r\n        if (node.nodeType === 'FunctionDefinition' || node.nodeType === 'YulFunctionDefinition') {\r\n            ret[node.src] = node;\r\n        }\r\n    });\r\n    return ret;\r\n}\r\nfunction addParams(parameterList, tree, scopeId, states, contractName, sourceLocation, stackLength, stackPosition, dir) {\r\n    const params = [];\r\n    for (const inputParam in parameterList.parameters) {\r\n        const param = parameterList.parameters[inputParam];\r\n        const stackDepth = stackLength + (dir * stackPosition);\r\n        if (stackDepth >= 0) {\r\n            let location = util_1.extractLocationFromAstVariable(param);\r\n            location = location === 'default' ? 'memory' : location;\r\n            const attributesName = param.name === '' ? `$${inputParam}` : param.name;\r\n            tree.scopes[scopeId].locals[attributesName] = {\r\n                name: attributesName,\r\n                type: decodeInfo_1.parseType(param.typeDescriptions.typeString, states, contractName, location),\r\n                stackDepth: stackDepth,\r\n                sourceLocation: sourceLocation\r\n            };\r\n            params.push(attributesName);\r\n        }\r\n        stackPosition += dir;\r\n    }\r\n    return params;\r\n}\r\n//# sourceMappingURL=internalCallTree.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nfunction solidityLocals(vmtraceIndex, internalTreeCall, stack, memory, storageResolver, currentSourceLocation, cursor) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        const scope = internalTreeCall.findScope(vmtraceIndex);\r\n        if (!scope) {\r\n            const error = { message: 'Can\\'t display locals. reason: compilation result might not have been provided' };\r\n            throw error;\r\n        }\r\n        const locals = {};\r\n        memory = formatMemory(memory);\r\n        let anonymousIncr = 1;\r\n        for (const local in scope.locals) {\r\n            var variable = scope.locals[local];\r\n            if (variable.stackDepth < stack.length && variable.sourceLocation.start <= currentSourceLocation.start) {\r\n                let name = variable.name;\r\n                if (name.indexOf('$') !== -1) {\r\n                    name = '<' + anonymousIncr + '>';\r\n                    anonymousIncr++;\r\n                }\r\n                try {\r\n                    locals[name] = yield variable.type.decodeFromStack(variable.stackDepth, stack, memory, storageResolver, cursor);\r\n                }\r\n                catch (e) {\r\n                    console.log(e);\r\n                    locals[name] = '<decoding failed - ' + e.message + '>';\r\n                }\r\n            }\r\n        }\r\n        return locals;\r\n    });\r\n}\r\nexports.solidityLocals = solidityLocals;\r\nfunction formatMemory(memory) {\r\n    if (memory instanceof Array) {\r\n        memory = memory.join('').replace(/0x/g, '');\r\n    }\r\n    return memory;\r\n}\r\n//# sourceMappingURL=localDecoder.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst traceHelper_1 = require(\"../trace/traceHelper\");\r\nconst stateDecoder_1 = require(\"./stateDecoder\");\r\nconst astHelper_1 = require(\"./astHelper\");\r\nclass SolidityProxy {\r\n    constructor({ getCurrentCalledAddressAt, getCode }) {\r\n        this.cache = new Cache();\r\n        this.reset({});\r\n        this.getCurrentCalledAddressAt = getCurrentCalledAddressAt;\r\n        this.getCode = getCode;\r\n    }\r\n    /**\r\n      * reset the cache and apply a new @arg compilationResult\r\n      *\r\n      * @param {Object} compilationResult  - result os a compilatiion (diectly returned by the compiler)\r\n      */\r\n    reset(compilationResult) {\r\n        this.sources = compilationResult.sources;\r\n        this.contracts = compilationResult.contracts;\r\n        this.cache.reset();\r\n    }\r\n    /**\r\n      * check if the object has been properly loaded\r\n      *\r\n      * @return {Bool} - returns true if a compilation result has been applied\r\n      */\r\n    loaded() {\r\n        return this.contracts !== undefined;\r\n    }\r\n    /**\r\n      * retrieve the compiled contract name at the @arg vmTraceIndex (cached)\r\n      *\r\n      * @param {Int} vmTraceIndex  - index in the vm trave where to resolve the executed contract name\r\n      * @param {Function} cb  - callback returns (error, contractName)\r\n      */\r\n    contractObjectAt(vmTraceIndex) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const address = this.getCurrentCalledAddressAt(vmTraceIndex);\r\n            if (this.cache.contractObjectByAddress[address]) {\r\n                return this.cache.contractObjectByAddress[address];\r\n            }\r\n            const code = yield this.getCode(address);\r\n            const contract = contractObjectFromCode(this.contracts, code.bytecode, address);\r\n            this.cache.contractObjectByAddress[address] = contract;\r\n            return contract;\r\n        });\r\n    }\r\n    /**\r\n      * extract the state variables of the given compiled @arg contractName (cached)\r\n      *\r\n      * @param {String} contractName  - name of the contract to retrieve state variables from\r\n      * @return {Object} - returns state variables of @args contractName\r\n      */\r\n    extractStatesDefinitions() {\r\n        if (!this.cache.contractDeclarations) {\r\n            this.cache.contractDeclarations = astHelper_1.extractContractDefinitions(this.sources);\r\n        }\r\n        if (!this.cache.statesDefinitions) {\r\n            this.cache.statesDefinitions = astHelper_1.extractStatesDefinitions(this.sources, this.cache.contractDeclarations);\r\n        }\r\n        return this.cache.statesDefinitions;\r\n    }\r\n    /**\r\n      * extract the state variables of the given compiled @arg contractName (cached)\r\n      *\r\n      * @param {String} contractName  - name of the contract to retrieve state variables from\r\n      * @return {Object} - returns state variables of @args contractName\r\n      */\r\n    extractStateVariables(contractName) {\r\n        if (!this.cache.stateVariablesByContractName[contractName]) {\r\n            this.cache.stateVariablesByContractName[contractName] = stateDecoder_1.extractStateVariables(contractName, this.sources);\r\n        }\r\n        return this.cache.stateVariablesByContractName[contractName];\r\n    }\r\n    /**\r\n      * extract the state variables of the given compiled @arg vmtraceIndex (cached)\r\n      *\r\n      * @param {Int} vmTraceIndex  - index in the vm trave where to resolve the state variables\r\n      * @return {Object} - returns state variables of @args vmTraceIndex\r\n      */\r\n    extractStateVariablesAt(vmtraceIndex) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const contract = yield this.contractObjectAt(vmtraceIndex);\r\n            return this.extractStateVariables(contract.name);\r\n        });\r\n    }\r\n    /**\r\n      * get the AST of the file declare in the @arg sourceLocation\r\n      *\r\n      * @param {Object} sourceLocation  - source location containing the 'file' to retrieve the AST from\r\n      * @return {Object} - AST of the current file\r\n      */\r\n    ast(sourceLocation, generatedSources) {\r\n        const file = this.fileNameFromIndex(sourceLocation.file);\r\n        if (!file && generatedSources && generatedSources.length) {\r\n            for (const source of generatedSources) {\r\n                if (source.id === sourceLocation.file)\r\n                    return source.ast;\r\n            }\r\n        }\r\n        else if (this.sources[file]) {\r\n            return this.sources[file].ast;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * get the filename refering to the index from the compilation result\r\n     *\r\n     * @param {Int} index  - index of the filename\r\n     * @return {String} - filename\r\n     */\r\n    fileNameFromIndex(index) {\r\n        return Object.keys(this.contracts)[index];\r\n    }\r\n}\r\nexports.SolidityProxy = SolidityProxy;\r\nfunction contractObjectFromCode(contracts, code, address) {\r\n    const isCreation = traceHelper_1.isContractCreation(address);\r\n    for (const file in contracts) {\r\n        for (const contract in contracts[file]) {\r\n            const bytecode = isCreation ? contracts[file][contract].evm.bytecode.object : contracts[file][contract].evm.deployedBytecode.object;\r\n            if (remix_lib_1.util.compareByteCode(code, '0x' + bytecode)) {\r\n                return { name: contract, contract: contracts[file][contract] };\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nclass Cache {\r\n    constructor() {\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        this.contractObjectByAddress = {};\r\n        this.stateVariablesByContractName = {};\r\n        this.contractDeclarations = null;\r\n        this.statesDefinitions = null;\r\n    }\r\n}\r\n//# sourceMappingURL=solidityProxy.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst astHelper_1 = require(\"./astHelper\");\r\nconst decodeInfo_1 = require(\"./decodeInfo\");\r\n/**\r\n  * decode the contract state storage\r\n  *\r\n  * @param {Array} storage location  - location of all state variables\r\n  * @param {Object} storageResolver  - resolve storage queries\r\n  * @return {Map} - decoded state variable\r\n  */\r\nfunction decodeState(stateVars, storageResolver) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        const ret = {};\r\n        for (var k in stateVars) {\r\n            var stateVar = stateVars[k];\r\n            try {\r\n                const decoded = yield stateVar.type.decodeFromStorage(stateVar.storagelocation, storageResolver);\r\n                decoded.constant = stateVar.constant;\r\n                if (decoded.constant) {\r\n                    decoded.value = '<constant>';\r\n                }\r\n                ret[stateVar.name] = decoded;\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n                ret[stateVar.name] = '<decoding failed - ' + e.message + '>';\r\n            }\r\n        }\r\n        return ret;\r\n    });\r\n}\r\nexports.decodeState = decodeState;\r\n/**\r\n  * return all storage location variables of the given @arg contractName\r\n  *\r\n  * @param {String} contractName  - name of the contract\r\n  * @param {Object} sourcesList  - sources list\r\n  * @return {Object} - return the location of all contract variables in the storage\r\n  */\r\nfunction extractStateVariables(contractName, sourcesList) {\r\n    const states = astHelper_1.extractStatesDefinitions(sourcesList, null);\r\n    if (!states[contractName]) {\r\n        return [];\r\n    }\r\n    const types = states[contractName].stateVariables;\r\n    const offsets = decodeInfo_1.computeOffsets(types, states, contractName, 'storage');\r\n    if (!offsets) {\r\n        return []; // TODO should maybe return an error\r\n    }\r\n    return offsets.typesOffsets;\r\n}\r\nexports.extractStateVariables = extractStateVariables;\r\n/**\r\n  * return the state of the given @a contractName as a json object\r\n  *\r\n  * @param {Object} storageResolver  - resolve storage queries\r\n  * @param {astList} astList  - AST nodes of all the sources\r\n  * @param {String} contractName  - contract for which state var should be resolved\r\n  * @return {Map} - return the state of the contract\r\n  */\r\nfunction solidityState(storageResolver, astList, contractName) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        const stateVars = extractStateVariables(contractName, astList);\r\n        try {\r\n            return yield decodeState(stateVars, storageResolver);\r\n        }\r\n        catch (e) {\r\n            return '<decoding failed - ' + e.message + '>';\r\n        }\r\n    });\r\n}\r\nexports.solidityState = solidityState;\r\n//# sourceMappingURL=stateDecoder.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst util_1 = require(\"./util\");\r\nconst ValueType_1 = require(\"./ValueType\");\r\nclass Address extends ValueType_1.ValueType {\r\n    constructor() {\r\n        super(1, 20, 'address');\r\n    }\r\n    decodeValue(value) {\r\n        if (!value) {\r\n            return '0x0000000000000000000000000000000000000000';\r\n        }\r\n        return '0x' + util_1.extractHexByteSlice(value, this.storageBytes, 0).toUpperCase();\r\n    }\r\n}\r\nexports.Address = Address;\r\n//# sourceMappingURL=Address.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst util_1 = require(\"./util\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst RefType_1 = require(\"./RefType\");\r\nconst sha3256 = remix_lib_1.util.sha3_256;\r\nclass ArrayType extends RefType_1.RefType {\r\n    constructor(underlyingType, arraySize, location) {\r\n        let storageSlots = null;\r\n        if (arraySize === 'dynamic') {\r\n            storageSlots = 1;\r\n        }\r\n        else {\r\n            if (underlyingType.storageBytes < 32) {\r\n                const itemPerSlot = Math.floor(32 / underlyingType.storageBytes);\r\n                storageSlots = Math.ceil(arraySize / itemPerSlot);\r\n            }\r\n            else {\r\n                storageSlots = arraySize * underlyingType.storageSlots;\r\n            }\r\n        }\r\n        const size = arraySize !== 'dynamic' ? arraySize : '';\r\n        super(storageSlots, 32, underlyingType.typeName + '[' + size + ']', location);\r\n        this.underlyingType = underlyingType;\r\n        this.arraySize = arraySize;\r\n    }\r\n    decodeFromStorage(location, storageResolver) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const ret = [];\r\n            let size = null;\r\n            let slotValue;\r\n            try {\r\n                slotValue = yield util_1.extractHexValue(location, storageResolver, this.storageBytes);\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n                return {\r\n                    value: '<decoding failed - ' + e.message + '>',\r\n                    type: this.typeName\r\n                };\r\n            }\r\n            const currentLocation = {\r\n                offset: 0,\r\n                slot: location.slot\r\n            };\r\n            if (this.arraySize === 'dynamic') {\r\n                size = util_1.toBN('0x' + slotValue);\r\n                currentLocation.slot = sha3256(location.slot);\r\n            }\r\n            else {\r\n                size = new ethereumjs_util_1.BN(this.arraySize);\r\n            }\r\n            var k = util_1.toBN(0);\r\n            for (; k.lt(size) && k.ltn(300); k.iaddn(1)) {\r\n                try {\r\n                    ret.push(yield this.underlyingType.decodeFromStorage(currentLocation, storageResolver));\r\n                }\r\n                catch (e) {\r\n                    return {\r\n                        value: '<decoding failed - ' + e.message + '>',\r\n                        type: this.typeName\r\n                    };\r\n                }\r\n                if (this.underlyingType.storageSlots === 1 && location.offset + this.underlyingType.storageBytes <= 32) {\r\n                    currentLocation.offset += this.underlyingType.storageBytes;\r\n                    if (currentLocation.offset + this.underlyingType.storageBytes > 32) {\r\n                        currentLocation.offset = 0;\r\n                        currentLocation.slot = '0x' + util_1.add(currentLocation.slot, 1).toString(16);\r\n                    }\r\n                }\r\n                else {\r\n                    currentLocation.slot = '0x' + util_1.add(currentLocation.slot, this.underlyingType.storageSlots).toString(16);\r\n                    currentLocation.offset = 0;\r\n                }\r\n            }\r\n            return { value: ret, length: '0x' + size.toString(16), type: this.typeName };\r\n        });\r\n    }\r\n    decodeFromMemoryInternal(offset, memory, skip) {\r\n        const ret = [];\r\n        let length = this.arraySize;\r\n        if (this.arraySize === 'dynamic') {\r\n            length = memory.substr(2 * offset, 64);\r\n            length = parseInt(length, 16);\r\n            offset = offset + 32;\r\n        }\r\n        if (isNaN(length)) {\r\n            return {\r\n                value: '<decoding failed - length is NaN>',\r\n                type: 'Error'\r\n            };\r\n        }\r\n        if (!skip)\r\n            skip = 0;\r\n        if (skip)\r\n            offset = offset + (32 * skip);\r\n        let limit = length - skip;\r\n        if (limit > 10)\r\n            limit = 10;\r\n        for (var k = 0; k < limit; k++) {\r\n            var contentOffset = offset;\r\n            ret.push(this.underlyingType.decodeFromMemory(contentOffset, memory));\r\n            offset += 32;\r\n        }\r\n        return {\r\n            value: ret,\r\n            length: '0x' + length.toString(16),\r\n            type: this.typeName,\r\n            cursor: skip + limit,\r\n            hasNext: length > (skip + limit)\r\n        };\r\n    }\r\n}\r\nexports.ArrayType = ArrayType;\r\n//# sourceMappingURL=ArrayType.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ValueType_1 = require(\"./ValueType\");\r\nconst util_1 = require(\"./util\");\r\nclass Bool extends ValueType_1.ValueType {\r\n    constructor() {\r\n        super(1, 1, 'bool');\r\n    }\r\n    decodeValue(value) {\r\n        if (!value) {\r\n            return false;\r\n        }\r\n        value = util_1.extractHexByteSlice(value, this.storageBytes, 0);\r\n        return value !== '00';\r\n    }\r\n}\r\nexports.Bool = Bool;\r\n//# sourceMappingURL=Bool.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst util_1 = require(\"./util\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst RefType_1 = require(\"./RefType\");\r\nconst sha3256 = remix_lib_1.util.sha3_256;\r\nclass DynamicByteArray extends RefType_1.RefType {\r\n    constructor(location) {\r\n        super(1, 32, 'bytes', location);\r\n    }\r\n    decodeFromStorage(location, storageResolver) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            let value = '0x0';\r\n            try {\r\n                value = yield util_1.extractHexValue(location, storageResolver, this.storageBytes);\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n                return { value: '<decoding failed - ' + e.message + '>', type: this.typeName };\r\n            }\r\n            const length = new ethereumjs_util_1.BN(value, 16);\r\n            if (length.testn(0)) {\r\n                let dataPos = new ethereumjs_util_1.BN(sha3256(location.slot).replace('0x', ''), 16);\r\n                let ret = '';\r\n                let currentSlot = '0x';\r\n                try {\r\n                    currentSlot = yield util_1.readFromStorage(dataPos, storageResolver);\r\n                }\r\n                catch (e) {\r\n                    console.log(e);\r\n                    return { value: '<decoding failed - ' + e.message + '>', type: this.typeName };\r\n                }\r\n                while (length.gt(new ethereumjs_util_1.BN(ret.length)) && ret.length < 32000) {\r\n                    currentSlot = currentSlot.replace('0x', '');\r\n                    ret += currentSlot;\r\n                    dataPos = dataPos.add(new ethereumjs_util_1.BN(1));\r\n                    try {\r\n                        currentSlot = yield util_1.readFromStorage(dataPos, storageResolver);\r\n                    }\r\n                    catch (e) {\r\n                        console.log(e);\r\n                        return { value: '<decoding failed - ' + e.message + '>', type: this.typeName };\r\n                    }\r\n                }\r\n                return { value: '0x' + ret.replace(/(00)+$/, ''), length: '0x' + length.toString(16), type: this.typeName };\r\n            }\r\n            else {\r\n                var size = parseInt(value.substr(value.length - 2, 2), 16) / 2;\r\n                return { value: '0x' + value.substr(0, size * 2), length: '0x' + size.toString(16), type: this.typeName };\r\n            }\r\n        });\r\n    }\r\n    decodeFromMemoryInternal(offset, memory) {\r\n        offset = 2 * offset;\r\n        let length = memory.substr(offset, 64);\r\n        length = 2 * parseInt(length, 16);\r\n        return { length: '0x' + length.toString(16), value: '0x' + memory.substr(offset + 64, length), type: this.typeName };\r\n    }\r\n}\r\nexports.DynamicByteArray = DynamicByteArray;\r\n//# sourceMappingURL=DynamicByteArray.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ValueType_1 = require(\"./ValueType\");\r\nclass Enum extends ValueType_1.ValueType {\r\n    constructor(enumDef) {\r\n        let storageBytes = 0;\r\n        let length = enumDef.members.length;\r\n        while (length > 1) {\r\n            length = length / 256;\r\n            storageBytes++;\r\n        }\r\n        super(1, storageBytes, 'enum');\r\n        this.enumDef = enumDef;\r\n    }\r\n    decodeValue(value) {\r\n        if (!value) {\r\n            return this.enumDef.members[0].name;\r\n        }\r\n        value = parseInt(value, 16);\r\n        if (this.enumDef.members.length > value) {\r\n            return this.enumDef.members[value].name;\r\n        }\r\n        return 'INVALID_ENUM<' + value + '>';\r\n    }\r\n}\r\nexports.Enum = Enum;\r\n//# sourceMappingURL=Enum.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ValueType_1 = require(\"./ValueType\");\r\nclass FixedByteArray extends ValueType_1.ValueType {\r\n    constructor(storageBytes) {\r\n        super(1, storageBytes, 'bytes' + storageBytes);\r\n    }\r\n    decodeValue(value) {\r\n        return '0x' + value.substr(0, 2 * this.storageBytes).toUpperCase();\r\n    }\r\n}\r\nexports.FixedByteArray = FixedByteArray;\r\n//# sourceMappingURL=FixedByteArray.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst util_1 = require(\"./util\");\r\nconst ValueType_1 = require(\"./ValueType\");\r\nclass Int extends ValueType_1.ValueType {\r\n    constructor(storageBytes) {\r\n        super(1, storageBytes, 'int' + storageBytes * 8);\r\n    }\r\n    decodeValue(value) {\r\n        value = util_1.extractHexByteSlice(value, this.storageBytes, 0);\r\n        return util_1.decodeIntFromHex(value, this.storageBytes, true);\r\n    }\r\n}\r\nexports.Int = Int;\r\n//# sourceMappingURL=Int.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst RefType_1 = require(\"./RefType\");\r\nconst util_1 = require(\"./util\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst ethjs_util_1 = require(\"ethjs-util\");\r\nclass Mapping extends RefType_1.RefType {\r\n    constructor(underlyingTypes, location, fullType) {\r\n        super(1, 32, fullType, 'storage');\r\n        this.keyType = underlyingTypes.keyType;\r\n        this.valueType = underlyingTypes.valueType;\r\n        this.initialDecodedState = null;\r\n    }\r\n    decodeFromStorage(location, storageResolver) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const corrections = this.valueType.members ? this.valueType.members.map((value) => { return value.storagelocation; }) : [];\r\n            if (!this.initialDecodedState) { // cache the decoded initial storage\r\n                let mappingsInitialPreimages;\r\n                try {\r\n                    mappingsInitialPreimages = yield storageResolver.initialMappingsLocation(corrections);\r\n                    this.initialDecodedState = yield this.decodeMappingsLocation(mappingsInitialPreimages, location, storageResolver);\r\n                }\r\n                catch (e) {\r\n                    return {\r\n                        value: e.message,\r\n                        type: this.typeName\r\n                    };\r\n                }\r\n            }\r\n            const mappingPreimages = yield storageResolver.mappingsLocation(corrections);\r\n            let ret = yield this.decodeMappingsLocation(mappingPreimages, location, storageResolver); // fetch mapping storage changes\r\n            ret = Object.assign({}, this.initialDecodedState, ret); // merge changes\r\n            return { value: ret, type: this.typeName };\r\n        });\r\n    }\r\n    decodeFromMemoryInternal(offset, memory) {\r\n        // mappings can only exist in storage and not in memory\r\n        // so this should never be called\r\n        return { value: '<not implemented>', length: '0x', type: this.typeName };\r\n    }\r\n    decodeMappingsLocation(preimages, location, storageResolver) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const mapSlot = util_1.normalizeHex(ethereumjs_util_1.bufferToHex(location.slot));\r\n            if (!preimages[mapSlot]) {\r\n                return {};\r\n            }\r\n            const ret = {};\r\n            for (const i in preimages[mapSlot]) {\r\n                const mapLocation = getMappingLocation(i, location.slot);\r\n                const globalLocation = {\r\n                    offset: location.offset,\r\n                    slot: mapLocation\r\n                };\r\n                ret[i] = yield this.valueType.decodeFromStorage(globalLocation, storageResolver);\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n}\r\nexports.Mapping = Mapping;\r\nfunction getMappingLocation(key, position) {\r\n    // mapping storage location decribed at http://solidity.readthedocs.io/en/develop/miscellaneous.html#layout-of-state-variables-in-storage\r\n    // > the value corresponding to a mapping key k is located at keccak256(k . p) where . is concatenation.\r\n    // key should be a hex string, and position an int\r\n    const mappingK = ethereumjs_util_1.toBuffer('0x' + key);\r\n    let mappingP = ethjs_util_1.intToBuffer(position);\r\n    mappingP = ethereumjs_util_1.setLengthLeft(mappingP, 32);\r\n    const mappingKeyBuf = concatTypedArrays(mappingK, mappingP);\r\n    const mappingKeyPreimage = '0x' + mappingKeyBuf.toString('hex');\r\n    const mappingStorageLocation = ethereumjs_util_1.keccak(mappingKeyPreimage);\r\n    const mappingStorageLocationinBn = new ethereumjs_util_1.BN(mappingStorageLocation, 16);\r\n    return mappingStorageLocationinBn;\r\n}\r\nfunction concatTypedArrays(a, b) {\r\n    const c = new (a.constructor)(a.length + b.length);\r\n    c.set(a, 0);\r\n    c.set(b, a.length);\r\n    return c;\r\n}\r\n//# sourceMappingURL=Mapping.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst util_1 = require(\"./util\");\r\nclass RefType {\r\n    constructor(storageSlots, storageBytes, typeName, location) {\r\n        this.location = location;\r\n        this.storageSlots = storageSlots;\r\n        this.storageBytes = storageBytes;\r\n        this.typeName = typeName;\r\n        this.basicType = 'RefType';\r\n    }\r\n    decodeFromStorage(input1, input2) {\r\n        throw new Error('This method is abstract');\r\n    }\r\n    decodeFromMemoryInternal(input1, input2, input3) {\r\n        throw new Error('This method is abstract');\r\n    }\r\n    /**\r\n      * decode the type from the stack\r\n      *\r\n      * @param {Int} stackDepth - position of the type in the stack\r\n      * @param {Array} stack - stack\r\n      * @param {String} - memory\r\n      * @param {Object} - storageResolver\r\n      * @return {Object} decoded value\r\n      */\r\n    decodeFromStack(stackDepth, stack, memory, storageResolver, cursor) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            if (stack.length - 1 < stackDepth) {\r\n                return { error: '<decoding failed - stack underflow ' + stackDepth + '>', type: this.typeName };\r\n            }\r\n            let offset = stack[stack.length - 1 - stackDepth];\r\n            if (this.isInStorage()) {\r\n                offset = util_1.toBN(offset);\r\n                try {\r\n                    return yield this.decodeFromStorage({ offset: 0, slot: offset }, storageResolver);\r\n                }\r\n                catch (e) {\r\n                    console.log(e);\r\n                    return { error: '<decoding failed - ' + e.message + '>', type: this.typeName };\r\n                }\r\n            }\r\n            else if (this.isInMemory()) {\r\n                offset = parseInt(offset, 16);\r\n                return this.decodeFromMemoryInternal(offset, memory, cursor);\r\n            }\r\n            else {\r\n                return { error: '<decoding failed - no decoder for ' + this.location + '>', type: this.typeName };\r\n            }\r\n        });\r\n    }\r\n    /**\r\n      * decode the type from the memory\r\n      *\r\n      * @param {Int} offset - position of the ref of the type in memory\r\n      * @param {String} memory - memory\r\n      * @return {Object} decoded value\r\n      */\r\n    decodeFromMemory(offset, memory) {\r\n        offset = memory.substr(2 * offset, 64);\r\n        offset = parseInt(offset, 16);\r\n        return this.decodeFromMemoryInternal(offset, memory);\r\n    }\r\n    /**\r\n      * current type defined in storage\r\n      *\r\n      * @return {Bool} - return true if the type is defined in the storage\r\n      */\r\n    isInStorage() {\r\n        return this.location.indexOf('storage') === 0;\r\n    }\r\n    /**\r\n      * current type defined in memory\r\n      *\r\n      * @return {Bool} - return true if the type is defined in the memory\r\n      */\r\n    isInMemory() {\r\n        return this.location.indexOf('memory') === 0;\r\n    }\r\n}\r\nexports.RefType = RefType;\r\n//# sourceMappingURL=RefType.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst DynamicByteArray_1 = require(\"./DynamicByteArray\");\r\nclass StringType extends DynamicByteArray_1.DynamicByteArray {\r\n    constructor(location) {\r\n        super(location);\r\n        this.typeName = 'string';\r\n    }\r\n    decodeFromStorage(location, storageResolver) {\r\n        const _super = Object.create(null, {\r\n            decodeFromStorage: { get: () => super.decodeFromStorage }\r\n        });\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            let decoded = '0x';\r\n            try {\r\n                decoded = yield _super.decodeFromStorage.call(this, location, storageResolver);\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n                return '<decoding failed - ' + e.message + '>';\r\n            }\r\n            return format(decoded);\r\n        });\r\n    }\r\n    decodeFromStack(stackDepth, stack, memory) {\r\n        const _super = Object.create(null, {\r\n            decodeFromStack: { get: () => super.decodeFromStack }\r\n        });\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                return yield _super.decodeFromStack.call(this, stackDepth, stack, memory, null, null);\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n                return '<decoding failed - ' + e.message + '>';\r\n            }\r\n        });\r\n    }\r\n    decodeFromMemoryInternal(offset, memory) {\r\n        const decoded = super.decodeFromMemoryInternal(offset, memory);\r\n        return format(decoded);\r\n    }\r\n}\r\nexports.StringType = StringType;\r\nfunction format(decoded) {\r\n    if (decoded.error) {\r\n        return decoded;\r\n    }\r\n    let value = decoded.value;\r\n    value = value.replace('0x', '').replace(/(..)/g, '%$1');\r\n    const ret = { length: decoded.length, raw: decoded.value, type: 'string' };\r\n    try {\r\n        ret['value'] = decodeURIComponent(value);\r\n    }\r\n    catch (e) {\r\n        ret['error'] = 'Invalid UTF8 encoding';\r\n        ret.raw = decoded.value;\r\n    }\r\n    return ret;\r\n}\r\n//# sourceMappingURL=StringType.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst util_1 = require(\"./util\");\r\nconst RefType_1 = require(\"./RefType\");\r\nclass Struct extends RefType_1.RefType {\r\n    constructor(memberDetails, location, fullType) {\r\n        super(memberDetails.storageSlots, 32, 'struct ' + fullType, location);\r\n        this.members = memberDetails.members;\r\n    }\r\n    decodeFromStorage(location, storageResolver) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const ret = {};\r\n            for (var item of this.members) {\r\n                const globalLocation = {\r\n                    offset: location.offset + item.storagelocation.offset,\r\n                    slot: util_1.add(location.slot, item.storagelocation.slot)\r\n                };\r\n                try {\r\n                    ret[item.name] = yield item.type.decodeFromStorage(globalLocation, storageResolver);\r\n                }\r\n                catch (e) {\r\n                    console.log(e);\r\n                    ret[item.name] = '<decoding failed - ' + e.message + '>';\r\n                }\r\n            }\r\n            return { value: ret, type: this.typeName };\r\n        });\r\n    }\r\n    decodeFromMemoryInternal(offset, memory) {\r\n        const ret = {};\r\n        this.members.map((item, i) => {\r\n            var contentOffset = offset;\r\n            var member = item.type.decodeFromMemory(contentOffset, memory);\r\n            ret[item.name] = member;\r\n            offset += 32;\r\n        });\r\n        return { value: ret, type: this.typeName };\r\n    }\r\n}\r\nexports.Struct = Struct;\r\n//# sourceMappingURL=Struct.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst util_1 = require(\"./util\");\r\nconst ValueType_1 = require(\"./ValueType\");\r\nclass Uint extends ValueType_1.ValueType {\r\n    constructor(storageBytes) {\r\n        super(1, storageBytes, 'uint' + storageBytes * 8);\r\n    }\r\n    decodeValue(value) {\r\n        value = util_1.extractHexByteSlice(value, this.storageBytes, 0);\r\n        return util_1.decodeIntFromHex(value, this.storageBytes, false);\r\n    }\r\n}\r\nexports.Uint = Uint;\r\n//# sourceMappingURL=Uint.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst util_1 = require(\"./util\");\r\nclass ValueType {\r\n    constructor(storageSlots, storageBytes, typeName) {\r\n        this.storageSlots = storageSlots;\r\n        this.storageBytes = storageBytes;\r\n        this.typeName = typeName;\r\n        this.basicType = 'ValueType';\r\n    }\r\n    decodeValue(input) {\r\n        throw new Error('This method is abstract');\r\n    }\r\n    /**\r\n      * decode the type with the @arg location from the storage\r\n      *\r\n      * @param {Object} location - containing offset and slot\r\n      * @param {Object} storageResolver  - resolve storage queries\r\n      * @return {Object} - decoded value\r\n      */\r\n    decodeFromStorage(location, storageResolver) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                var value = yield util_1.extractHexValue(location, storageResolver, this.storageBytes);\r\n                return { value: this.decodeValue(value), type: this.typeName };\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n                return { value: '<decoding failed - ' + e.message + '>', type: this.typeName };\r\n            }\r\n        });\r\n    }\r\n    /**\r\n      * decode the type from the stack\r\n      *\r\n      * @param {Int} stackDepth - position of the type in the stack\r\n      * @param {Array} stack - stack\r\n      * @param {String} - memory\r\n      * @return {Object} - decoded value\r\n      */\r\n    decodeFromStack(stackDepth, stack, memory) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            let value;\r\n            if (stackDepth >= stack.length) {\r\n                value = this.decodeValue('');\r\n            }\r\n            else {\r\n                value = this.decodeValue(stack[stack.length - 1 - stackDepth].replace('0x', ''));\r\n            }\r\n            return { value, type: this.typeName };\r\n        });\r\n    }\r\n    /**\r\n      * decode the type with the @arg offset location from the memory\r\n      *\r\n      * @param {Int} stackDepth - position of the type in the stack\r\n      * @return {String} - memory\r\n      * @return {Object} - decoded value\r\n      */\r\n    decodeFromMemory(offset, memory) {\r\n        const value = memory.substr(2 * offset, 64);\r\n        return { value: this.decodeValue(value), type: this.typeName };\r\n    }\r\n}\r\nexports.ValueType = ValueType;\r\n//# sourceMappingURL=ValueType.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nfunction decodeIntFromHex(value, byteLength, signed) {\r\n    let bigNumber = new ethereumjs_util_1.BN(value, 16);\r\n    if (signed) {\r\n        bigNumber = bigNumber.fromTwos(8 * byteLength);\r\n    }\r\n    return bigNumber.toString(10);\r\n}\r\nexports.decodeIntFromHex = decodeIntFromHex;\r\nfunction readFromStorage(slot, storageResolver) {\r\n    const hexSlot = '0x' + normalizeHex(ethereumjs_util_1.bufferToHex(slot));\r\n    return new Promise((resolve, reject) => {\r\n        storageResolver.storageSlot(hexSlot, (error, slot) => {\r\n            if (error) {\r\n                return reject(error);\r\n            }\r\n            if (!slot) {\r\n                slot = { key: slot, value: '' };\r\n            }\r\n            return resolve(normalizeHex(slot.value));\r\n        });\r\n    });\r\n}\r\nexports.readFromStorage = readFromStorage;\r\n/**\r\n * @returns a hex encoded byte slice of length @arg byteLength from inside @arg slotValue.\r\n *\r\n * @param {String} slotValue  - hex encoded value to extract the byte slice from\r\n * @param {Int} byteLength  - Length of the byte slice to extract\r\n * @param {Int} offsetFromLSB  - byte distance from the right end slot value to the right end of the byte slice\r\n */\r\nfunction extractHexByteSlice(slotValue, byteLength, offsetFromLSB) {\r\n    const offset = slotValue.length - 2 * offsetFromLSB - 2 * byteLength;\r\n    return slotValue.substr(offset, 2 * byteLength);\r\n}\r\nexports.extractHexByteSlice = extractHexByteSlice;\r\n/**\r\n * @returns a hex encoded storage content at the given @arg location. it does not have Ox prefix but always has the full length.\r\n *\r\n * @param {Object} location  - object containing the slot and offset of the data to extract.\r\n * @param {Object} storageResolver  - storage resolver\r\n * @param {Int} byteLength  - Length of the byte slice to extract\r\n */\r\nfunction extractHexValue(location, storageResolver, byteLength) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        let slotvalue;\r\n        try {\r\n            slotvalue = yield readFromStorage(location.slot, storageResolver);\r\n        }\r\n        catch (e) {\r\n            return '0x';\r\n        }\r\n        return extractHexByteSlice(slotvalue, byteLength, location.offset);\r\n    });\r\n}\r\nexports.extractHexValue = extractHexValue;\r\nfunction toBN(value) {\r\n    if (value instanceof ethereumjs_util_1.BN) {\r\n        return value;\r\n    }\r\n    else if (value.match && value.match(/^(0x)?([a-f0-9]*)$/)) {\r\n        value = ethereumjs_util_1.unpad(value.replace(/^(0x)/, ''));\r\n        value = new ethereumjs_util_1.BN(value === '' ? '0' : value, 16);\r\n    }\r\n    else if (!isNaN(value)) {\r\n        value = new ethereumjs_util_1.BN(value);\r\n    }\r\n    return value;\r\n}\r\nexports.toBN = toBN;\r\nfunction add(value1, value2) {\r\n    return toBN(value1).add(toBN(value2));\r\n}\r\nexports.add = add;\r\nfunction sub(value1, value2) {\r\n    return toBN(value1).sub(toBN(value2));\r\n}\r\nexports.sub = sub;\r\nfunction removeLocation(type) {\r\n    return type.replace(/( storage ref| storage pointer| memory| calldata)/g, '');\r\n}\r\nexports.removeLocation = removeLocation;\r\nfunction extractLocation(type) {\r\n    const match = type.match(/( storage ref| storage pointer| memory| calldata)?$/);\r\n    if (match[1] !== '') {\r\n        return match[1].trim();\r\n    }\r\n    return null;\r\n}\r\nexports.extractLocation = extractLocation;\r\nfunction extractLocationFromAstVariable(node) {\r\n    if (node.storageLocation !== 'default') {\r\n        return node.storageLocation;\r\n    }\r\n    else if (node.stateVariable) {\r\n        return 'storage';\r\n    }\r\n    return 'default'; // local variables => storage, function parameters & return values => memory, state => storage\r\n}\r\nexports.extractLocationFromAstVariable = extractLocationFromAstVariable;\r\nfunction normalizeHex(hex) {\r\n    hex = hex.replace('0x', '');\r\n    if (hex.length < 64) {\r\n        return (new Array(64 - hex.length + 1).join('0')) + hex;\r\n    }\r\n    return hex;\r\n}\r\nexports.normalizeHex = normalizeHex;\r\n//# sourceMappingURL=util.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst traceHelper_1 = require(\"../trace/traceHelper\");\r\nconst sourceMappingDecoder_1 = require(\"./sourceMappingDecoder\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\n/**\r\n * Process the source code location for the current executing bytecode\r\n */\r\nclass SourceLocationTracker {\r\n    constructor(_codeManager, { debugWithGeneratedSources }) {\r\n        this.opts = {\r\n            debugWithGeneratedSources: debugWithGeneratedSources || false\r\n        };\r\n        this.codeManager = _codeManager;\r\n        this.event = new eventManager_1.EventManager();\r\n        this.sourceMapByAddress = {};\r\n    }\r\n    /**\r\n     * Return the source location associated with the given @arg index (instruction index)\r\n     *\r\n     * @param {String} address - contract address from which the source location is retrieved\r\n     * @param {Int} index - index in the instruction list from where the source location is retrieved\r\n     * @param {Object} contractDetails - AST of compiled contracts\r\n     */\r\n    getSourceLocationFromInstructionIndex(address, index, contracts) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const sourceMap = yield this.extractSourceMap(this, this.codeManager, address, contracts);\r\n            return sourceMappingDecoder_1.atIndex(index, sourceMap['map']);\r\n        });\r\n    }\r\n    /**\r\n     * Return the source location associated with the given @arg vmTraceIndex\r\n     *\r\n     * @param {String} address - contract address from which the source location is retrieved\r\n     * @param {Int} vmtraceStepIndex - index of the current code in the vmtrace\r\n     * @param {Object} contractDetails - AST of compiled contracts\r\n     */\r\n    getSourceLocationFromVMTraceIndex(address, vmtraceStepIndex, contracts) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const sourceMap = yield this.extractSourceMap(this, this.codeManager, address, contracts);\r\n            const index = this.codeManager.getInstructionIndex(address, vmtraceStepIndex);\r\n            return sourceMappingDecoder_1.atIndex(index, sourceMap['map']);\r\n        });\r\n    }\r\n    /**\r\n     * Returns the generated sources from a specific @arg address\r\n     *\r\n     * @param {String} address - contract address from which has generated sources\r\n     * @param {Object} generatedSources - Object containing the sourceid, ast and the source code.\r\n     */\r\n    getGeneratedSourcesFromAddress(address) {\r\n        if (!this.opts.debugWithGeneratedSources)\r\n            return null;\r\n        if (this.sourceMapByAddress[address])\r\n            return this.sourceMapByAddress[address].generatedSources;\r\n        return null;\r\n    }\r\n    /**\r\n     * Return a valid source location associated with the given @arg vmTraceIndex\r\n     *\r\n     * @param {String} address - contract address from which the source location is retrieved\r\n     * @param {Int} vmtraceStepIndex - index of the current code in the vmtrace\r\n     * @param {Object} contractDetails - AST of compiled contracts\r\n     */\r\n    getValidSourceLocationFromVMTraceIndex(address, vmtraceStepIndex, contracts) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            let map = { file: -1 };\r\n            while (vmtraceStepIndex >= 0 && map.file === -1) {\r\n                map = yield this.getSourceLocationFromVMTraceIndex(address, vmtraceStepIndex, contracts);\r\n                vmtraceStepIndex = vmtraceStepIndex - 1;\r\n            }\r\n            return map;\r\n        });\r\n    }\r\n    clearCache() {\r\n        this.sourceMapByAddress = {};\r\n    }\r\n    getSourceMap(address, code, contracts) {\r\n        const isCreation = traceHelper_1.isContractCreation(address);\r\n        let bytes;\r\n        for (const file in contracts) {\r\n            for (const contract in contracts[file]) {\r\n                const bytecode = contracts[file][contract].evm.bytecode;\r\n                const deployedBytecode = contracts[file][contract].evm.deployedBytecode;\r\n                if (!deployedBytecode)\r\n                    continue;\r\n                bytes = isCreation ? bytecode.object : deployedBytecode.object;\r\n                if (remix_lib_1.util.compareByteCode(code, '0x' + bytes)) {\r\n                    const generatedSources = isCreation ? bytecode.generatedSources : deployedBytecode.generatedSources;\r\n                    const map = isCreation ? bytecode.sourceMap : deployedBytecode.sourceMap;\r\n                    return { generatedSources, map };\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    extractSourceMap(self, codeManager, address, contracts) {\r\n        return new Promise((resolve, reject) => {\r\n            if (self.sourceMapByAddress[address])\r\n                return resolve(self.sourceMapByAddress[address]);\r\n            codeManager.getCode(address).then((result) => {\r\n                const sourceMap = this.getSourceMap(address, result.bytecode, contracts);\r\n                if (sourceMap) {\r\n                    if (!traceHelper_1.isContractCreation(address))\r\n                        self.sourceMapByAddress[address] = sourceMap;\r\n                    return resolve(sourceMap);\r\n                }\r\n                reject(new Error('no sourcemap associated with the code ' + address));\r\n            }).catch(reject);\r\n        });\r\n    }\r\n}\r\nexports.SourceLocationTracker = SourceLocationTracker;\r\n//# sourceMappingURL=sourceLocationTracker.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst remix_astwalker_1 = require(\"@remix-project/remix-astwalker\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\n/**\r\n * Decompress the source mapping given by solc-bin.js\r\n * s:l:f:j\r\n */\r\n/**\r\n * Decode the given @arg value\r\n *\r\n * @param {string} value      - source location to decode ( should be start:length:file )\r\n * @return {Object} returns the decompressed source mapping {start, length, file}\r\n */\r\nfunction decode(value) {\r\n    if (value) {\r\n        value = value.split(':');\r\n        return {\r\n            start: parseInt(value[0]),\r\n            length: parseInt(value[1]),\r\n            file: parseInt(value[2])\r\n        };\r\n    }\r\n}\r\nexports.decode = decode;\r\n/**\r\n * Decode the source mapping for the given compressed mapping\r\n *\r\n * @param {String} mapping     - compressed source mapping given by solc-bin\r\n * @return {Array} returns the decompressed source mapping. Array of {start, length, file, jump}\r\n */\r\nfunction decompressAll(mapping) {\r\n    const map = mapping.split(';');\r\n    const ret = [];\r\n    for (const k in map) {\r\n        const compressed = map[k].split(':');\r\n        const sourceMap = {\r\n            start: compressed[0] ? parseInt(compressed[0]) : ret[ret.length - 1].start,\r\n            length: compressed[1] ? parseInt(compressed[1]) : ret[ret.length - 1].length,\r\n            file: compressed[2] ? parseInt(compressed[2]) : ret[ret.length - 1].file,\r\n            jump: compressed[3] ? compressed[3] : ret[ret.length - 1].jump\r\n        };\r\n        ret.push(sourceMap);\r\n    }\r\n    return ret;\r\n}\r\nexports.decompressAll = decompressAll;\r\n/**\r\n  * Retrieve line/column position of each source char\r\n  *\r\n  * @param {String} source - contract source code\r\n  * @return {Array} returns an array containing offset of line breaks\r\n  */\r\nfunction getLinebreakPositions(source) {\r\n    const ret = [];\r\n    for (let pos = source.indexOf('\\n'); pos >= 0; pos = source.indexOf('\\n', pos + 1)) {\r\n        ret.push(pos);\r\n    }\r\n    return ret;\r\n}\r\nexports.getLinebreakPositions = getLinebreakPositions;\r\n/**\r\n * Retrieve the line/column position for the given source mapping\r\n *\r\n * @param {Object} sourceLocation - object containing attributes {source} and {length}\r\n * @param {Array} lineBreakPositions - array returned by the function 'getLinebreakPositions'\r\n * @return {Object} returns an object {start: {line, column}, end: {line, column}} (line/column count start at 0)\r\n */\r\nfunction convertOffsetToLineColumn(sourceLocation, lineBreakPositions) {\r\n    if (sourceLocation.start >= 0 && sourceLocation.length >= 0) {\r\n        return {\r\n            start: convertFromCharPosition(sourceLocation.start, lineBreakPositions),\r\n            end: convertFromCharPosition(sourceLocation.start + sourceLocation.length, lineBreakPositions)\r\n        };\r\n    }\r\n    return { start: null, end: null };\r\n}\r\nexports.convertOffsetToLineColumn = convertOffsetToLineColumn;\r\nfunction convertFromCharPosition(pos, lineBreakPositions) {\r\n    let line = remix_lib_1.util.findLowerBound(pos, lineBreakPositions);\r\n    if (lineBreakPositions[line] !== pos) {\r\n        line = line + 1;\r\n    }\r\n    const beginColumn = line === 0 ? 0 : (lineBreakPositions[line - 1] + 1);\r\n    const column = pos - beginColumn;\r\n    return { line, column };\r\n}\r\nfunction sourceLocationFromAstNode(astNode) {\r\n    if (astNode.src) {\r\n        const split = astNode.src.split(':');\r\n        return {\r\n            start: parseInt(split[0]),\r\n            length: parseInt(split[1]),\r\n            file: parseInt(split[2])\r\n        };\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Retrieve the first @arg astNodeType that include the source map at arg instIndex\r\n *\r\n * @param {String} astNodeType - node type that include the source map instIndex\r\n * @param {String} instIndex - instruction index used to retrieve the source map\r\n * @param {String} sourceMap - source map given by the compilation result\r\n * @param {Object} ast - ast given by the compilation result\r\n */\r\nfunction findNodeAtInstructionIndex(astNodeType, instIndex, sourceMap, ast) {\r\n    const sourceLocation = this.atIndex(instIndex, sourceMap);\r\n    return findNodeAtSourceLocation(astNodeType, sourceLocation, ast);\r\n}\r\nexports.findNodeAtInstructionIndex = findNodeAtInstructionIndex;\r\nfunction findNodeAtSourceLocation(astNodeType, sourceLocation, ast) {\r\n    const astWalker = new remix_astwalker_1.AstWalker();\r\n    let found = null;\r\n    const callback = function (node) {\r\n        const nodeLocation = sourceLocationFromAstNode(node);\r\n        if (!nodeLocation) {\r\n            return;\r\n        }\r\n        if (nodeLocation.start <= sourceLocation.start && nodeLocation.start + nodeLocation.length >= sourceLocation.start + sourceLocation.length) {\r\n            if (astNodeType === node.nodeType) {\r\n                found = node;\r\n            }\r\n        }\r\n    };\r\n    astWalker.walkFull(ast.ast, callback);\r\n    return found;\r\n}\r\n/**\r\n * get a list of nodes that are at the given @arg position\r\n *\r\n * @param {String} astNodeType      - type of node to return\r\n * @param {Int} position     - cursor position\r\n * @return {Object} ast object given by the compiler\r\n */\r\nfunction nodesAtPosition(astNodeType, position, ast) {\r\n    const astWalker = new remix_astwalker_1.AstWalker();\r\n    const found = [];\r\n    const callback = function (node) {\r\n        var nodeLocation = sourceLocationFromAstNode(node);\r\n        if (!nodeLocation) {\r\n            return;\r\n        }\r\n        if (nodeLocation.start <= position && nodeLocation.start + nodeLocation.length >= position) {\r\n            if (!astNodeType || astNodeType === node.nodeType) {\r\n                found.push(node);\r\n            }\r\n        }\r\n    };\r\n    astWalker.walkFull(ast.ast, callback);\r\n    return found;\r\n}\r\nexports.nodesAtPosition = nodesAtPosition;\r\n/**\r\n * starts with the given @arg index and move backward until it can find all the values for start, length, file, jump\r\n * if `file === -1` then the value of the sourcemap should be taken from the previous step,\r\n * because some steps are internal subroutine for the compiler and doesn't link to any high level code.\r\n *\r\n * Solidity source maps format is\r\n *  - start:length:file:jump\r\n *  - jump can be 'i', 'o' or '-' (jump 'in' or 'out' of a function)\r\n *  - if no value is specified ( e.g \"5:2\" - no mention of 'file' and 'jump' ), actual values are the one of the step before\r\n *  - if the file (3rd value) has -1, the source maps should be discarded\r\n *\r\n *  @param Int index - index in the bytecode to decode source mapping from\r\n *  @param Array mapping - source maps returned by the compiler. e.g 121:3741:0:-:0;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;121:3741:0;;;;;;;\r\n *  @return Object { start, length, file, jump }\r\n */\r\nfunction atIndex(index, mapping) {\r\n    const ret = {};\r\n    const map = mapping.split(';');\r\n    if (index >= map.length) {\r\n        index = map.length - 1;\r\n    }\r\n    for (let k = index; k >= 0; k--) {\r\n        let current = map[k];\r\n        if (!current.length) {\r\n            continue;\r\n        }\r\n        current = current.split(':');\r\n        if (ret['start'] === undefined && current[0] && current[0] !== '-1' && current[0].length) {\r\n            ret['start'] = parseInt(current[0]);\r\n        }\r\n        if (ret['length'] === undefined && current[1] && current[1] !== '-1' && current[1].length) {\r\n            ret['length'] = parseInt(current[1]);\r\n        }\r\n        if (ret['file'] === undefined && current[2] && current[2].length) {\r\n            ret['file'] = parseInt(current[2]);\r\n        }\r\n        if (ret['jump'] === undefined && current[3] && current[3].length) {\r\n            ret['jump'] = current[3];\r\n        }\r\n        if (ret['start'] !== undefined && ret['length'] !== undefined && ret['file'] !== undefined && ret['jump'] !== undefined) {\r\n            break;\r\n        }\r\n    }\r\n    return ret;\r\n}\r\nexports.atIndex = atIndex;\r\n//# sourceMappingURL=sourceMappingDecoder.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst util_1 = require(\"../solidity-decoder/types/util\");\r\n/**\r\n  * extract the mappings location from the storage\r\n  * like { \"<mapping_slot>\" : { \"<mapping-key1>\": preimageOf1 }, { \"<mapping-key2>\": preimageOf2 }, ... }\r\n  *\r\n  * @param {Object} storage  - storage given by storage Viewer (basically a mapping hashedkey : {key, value})\r\n  * @param {Array} corrections - used in case the calculated sha3 has been modifyed before SSTORE (notably used for struct in mapping).\r\n  * @param {Function} callback  - calback\r\n  * @return {Map} - solidity mapping location (e.g { \"<mapping_slot>\" : { \"<mapping-key1>\": preimageOf1 }, { \"<mapping-key2>\": preimageOf2 }, ... })\r\n  */\r\nfunction decodeMappingsKeys(web3, storage, corrections) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        const ret = {};\r\n        if (!corrections.length)\r\n            corrections.push({ offset: 0, slot: 0 });\r\n        for (const hashedLoc in storage) {\r\n            var preimage;\r\n            try {\r\n                const key = storage[hashedLoc].key;\r\n                for (const k in corrections) {\r\n                    const corrected = util_1.sub(key, corrections[k].slot).toString(16);\r\n                    preimage = yield getPreimage(web3, '0x' + corrected);\r\n                    if (preimage)\r\n                        break;\r\n                }\r\n            }\r\n            catch (e) { } // eslint-disable-line no-empty\r\n            if (preimage) {\r\n                // got preimage!\r\n                // get mapping position (i.e. storage slot), its the last 32 bytes\r\n                const slotByteOffset = preimage.length - 64;\r\n                const mappingSlot = preimage.substr(slotByteOffset);\r\n                const mappingKey = preimage.substr(0, slotByteOffset);\r\n                if (!ret[mappingSlot]) {\r\n                    ret[mappingSlot] = {};\r\n                }\r\n                ret[mappingSlot][mappingKey] = preimage;\r\n            }\r\n        }\r\n        return ret;\r\n    });\r\n}\r\nexports.decodeMappingsKeys = decodeMappingsKeys;\r\n/**\r\n  * Uses web3 to return preimage of a key\r\n  *\r\n  * @param {String} key  - key to retrieve the preimage of\r\n  * @return {String} - preimage of the given key\r\n  */\r\nfunction getPreimage(web3, key) {\r\n    return new Promise((resolve, reject) => {\r\n        web3.debug.preimage(key.indexOf('0x') === 0 ? key : '0x' + key, (error, preimage) => {\r\n            if (error) {\r\n                return resolve(null);\r\n            }\r\n            resolve(preimage);\r\n        });\r\n    });\r\n}\r\n//# sourceMappingURL=mappingPreimages.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst traceHelper_1 = require(\"../trace/traceHelper\");\r\nconst mappingPreimages_1 = require(\"./mappingPreimages\");\r\n/**\r\n  * Basically one instance is created for one debugging session.\r\n  * (TODO: one instance need to be shared over all the components)\r\n  */\r\nclass StorageResolver {\r\n    constructor(options) {\r\n        this.storageByAddress = {};\r\n        this.preimagesMappingByAddress = {};\r\n        this.maxSize = 100;\r\n        this.web3 = options.web3;\r\n        this.zeroSlot = '0x0000000000000000000000000000000000000000000000000000000000000000';\r\n    }\r\n    /**\r\n     * returns the storage for the given context (address and vm trace index)\r\n     * returns the range 0x0 => this.maxSize\r\n     *\r\n     * @param {Object} - tx - transaction\r\n     * @param {Int} - stepIndex - Index of the stop in the vm trace\r\n     * @param {String} - address - lookup address\r\n     * @param {Function} - callback - contains a map: [hashedKey] = {key, hashedKey, value}\r\n     */\r\n    storageRange(tx, stepIndex, address) {\r\n        return this.storageRangeInternal(this, this.zeroSlot, tx, stepIndex, address);\r\n    }\r\n    /**\r\n     * compute the mappgings type locations for the current address (cached for a debugging session)\r\n     * note: that only retrieve the first 100 items.\r\n     *\r\n     * @param {Object} tx\r\n     * @param {Int} stepIndex\r\n     * @param {Object} address  - storage\r\n     * @param {Array} corrections - used in case the calculated sha3 has been modifyed before SSTORE (notably used for struct in mapping).\r\n     * @return {Function} - callback\r\n     */\r\n    initialPreimagesMappings(tx, stepIndex, address, corrections) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            if (this.preimagesMappingByAddress[address]) {\r\n                return this.preimagesMappingByAddress[address];\r\n            }\r\n            const storage = yield this.storageRange(tx, stepIndex, address);\r\n            const mappings = mappingPreimages_1.decodeMappingsKeys(this.web3, storage, corrections);\r\n            this.preimagesMappingByAddress[address] = mappings;\r\n            return mappings;\r\n        });\r\n    }\r\n    /**\r\n     * return a slot value for the given context (address and vm trace index)\r\n     *\r\n     * @param {String} - slot - slot key\r\n     * @param {Object} - tx - transaction\r\n     * @param {Int} - stepIndex - Index of the stop in the vm trace\r\n     * @param {String} - address - lookup address\r\n     * @param {Function} - callback - {key, hashedKey, value} -\r\n     */\r\n    storageSlot(slot, tx, stepIndex, address) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            const storage = yield this.storageRangeInternal(this, slot, tx, stepIndex, address);\r\n            return (storage[slot] !== undefined ? storage[slot] : null);\r\n        });\r\n    }\r\n    /**\r\n     * return True if the storage at @arg address is complete\r\n     *\r\n     * @param {String} address  - contract address\r\n     * @return {Bool} - return True if the storage at @arg address is complete\r\n     */\r\n    isComplete(address) {\r\n        return this.storageByAddress[address] && this.storageByAddress[address].complete;\r\n    }\r\n    /**\r\n     * retrieve the storage and ensure at least @arg slot is cached.\r\n     * - If @arg slot is already cached, the storage will be returned from the cache\r\n     *   even if the next 1000 items are not in the cache.\r\n     * - If @arg slot is not cached, the corresponding value will be resolved and the next 1000 slots.\r\n     */\r\n    storageRangeInternal(self, slotKey, tx, stepIndex, address) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            var cached = this.fromCache(self, address);\r\n            if (cached && cached.storage[slotKey]) { // we have the current slot in the cache and maybe the next 1000...\r\n                return cached.storage;\r\n            }\r\n            const result = yield this.storageRangeWeb3Call(tx, address, slotKey, self.maxSize);\r\n            const [storage, nextKey] = result;\r\n            if (!storage[slotKey] && slotKey !== self.zeroSlot) { // we don't cache the zero slot (could lead to inconsistency)\r\n                storage[slotKey] = { key: slotKey, value: self.zeroSlot };\r\n            }\r\n            self.toCache(self, address, storage);\r\n            if (slotKey === self.zeroSlot && !nextKey) { // only working if keys are sorted !!\r\n                self.storageByAddress[address].complete = true;\r\n            }\r\n            return storage;\r\n        });\r\n    }\r\n    /**\r\n     * retrieve the storage from the cache. if @arg slot is defined, return only the desired slot, if not return the entire known storage\r\n     *\r\n     * @param {String} address  - contract address\r\n     * @return {String} - either the entire known storage or a single value\r\n     */\r\n    fromCache(self, address) {\r\n        if (!self.storageByAddress[address]) {\r\n            return null;\r\n        }\r\n        return self.storageByAddress[address];\r\n    }\r\n    /**\r\n     * store the result of `storageRangeAtInternal`\r\n     *\r\n     * @param {String} address  - contract address\r\n     * @param {Object} storage  - result of `storageRangeAtInternal`, contains {key, hashedKey, value}\r\n     */\r\n    toCache(self, address, storage) {\r\n        if (!self.storageByAddress[address]) {\r\n            self.storageByAddress[address] = {};\r\n        }\r\n        self.storageByAddress[address].storage = Object.assign(self.storageByAddress[address].storage || {}, storage);\r\n    }\r\n    storageRangeWeb3Call(tx, address, start, maxSize) {\r\n        return new Promise((resolve, reject) => {\r\n            if (traceHelper_1.isContractCreation(address)) {\r\n                resolve([{}, null]);\r\n            }\r\n            else {\r\n                this.web3.debug.storageRangeAt(tx.blockHash, tx.transactionIndex === undefined ? tx.hash : tx.transactionIndex, address, start, maxSize, (error, result) => {\r\n                    if (error) {\r\n                        reject(error);\r\n                    }\r\n                    else if (result.storage) {\r\n                        resolve([result.storage, result.nextKey]);\r\n                    }\r\n                    else {\r\n                        reject(new Error('the storage has not been provided'));\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.StorageResolver = StorageResolver;\r\n//# sourceMappingURL=storageResolver.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst mappingPreimages_1 = require(\"./mappingPreimages\");\r\n/**\r\n   * easier access to the storage resolver\r\n   * Basically one instance is created foreach execution step and foreach component that need it.\r\n   * (TODO: one instance need to be shared over all the components)\r\n   */\r\nclass StorageViewer {\r\n    constructor(_context, _storageResolver, _traceManager) {\r\n        this.context = _context;\r\n        this.storageResolver = _storageResolver;\r\n        this.web3 = this.storageResolver.web3;\r\n        this.initialMappingsLocationPromise = null;\r\n        this.currentMappingsLocationPromise = null;\r\n        this.storageChanges = _traceManager.accumulateStorageChanges(this.context.stepIndex, this.context.address, {});\r\n    }\r\n    /**\r\n      * return the storage for the current context (address and vm trace index)\r\n      * by default now returns the range 0 => 1000\r\n      *\r\n      * @param {Function} - callback - contains a map: [hashedKey] = {key, hashedKey, value}\r\n      */\r\n    storageRange() {\r\n        return new Promise((resolve, reject) => {\r\n            this.storageResolver.storageRange(this.context.tx, this.context.stepIndex, this.context.address).then((storage) => {\r\n                resolve(Object.assign({}, storage, this.storageChanges));\r\n            }).catch(reject);\r\n        });\r\n    }\r\n    /**\r\n      * return a slot value for the current context (address and vm trace index)\r\n      * @param {String} - slot - slot key (not hashed key!)\r\n      * @param {Function} - callback - {key, hashedKey, value} -\r\n      */\r\n    storageSlot(slot, callback) {\r\n        const hashed = remix_lib_1.util.sha3_256(slot);\r\n        if (this.storageChanges[hashed]) {\r\n            return callback(null, this.storageChanges[hashed]);\r\n        }\r\n        this.storageResolver.storageSlot(hashed, this.context.tx, this.context.stepIndex, this.context.address).then((storage) => {\r\n            callback(null, storage);\r\n        }).catch(callback);\r\n    }\r\n    /**\r\n      * return True if the storage at @arg address is complete\r\n      *\r\n      * @param {String} address  - contract address\r\n      * @return {Bool} - return True if the storage at @arg address is complete\r\n      */\r\n    isComplete(address) {\r\n        return this.storageResolver.isComplete(address);\r\n    }\r\n    /**\r\n      * return all the possible mappings locations for the current context (cached) do not return state changes during the current transaction\r\n      *\r\n      * @param {Array} corrections - used in case the calculated sha3 has been modifyed before SSTORE (notably used for struct in mapping).\r\n      */\r\n    initialMappingsLocation(corrections) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            if (!this.initialMappingsLocationPromise) {\r\n                this.initialMappingsLocationPromise = this.storageResolver.initialPreimagesMappings(this.context.tx, this.context.stepIndex, this.context.address, corrections);\r\n            }\r\n            return this.initialMappingsLocationPromise;\r\n        });\r\n    }\r\n    /**\r\n      * return all the possible mappings locations for the current context (cached) and current mapping slot. returns state changes during the current transaction\r\n      *\r\n      * @param {Array} corrections - used in case the calculated sha3 has been modifyed before SSTORE (notably used for struct in mapping).\r\n      */\r\n    mappingsLocation(corrections) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            if (!this.currentMappingsLocationPromise) {\r\n                this.currentMappingsLocationPromise = new Promise((resolve, reject) => {\r\n                    const mappingsLocationChanges = this.extractMappingsLocationChanges(this.storageChanges, corrections);\r\n                    return resolve(mappingsLocationChanges);\r\n                });\r\n            }\r\n            return this.currentMappingsLocationPromise;\r\n        });\r\n    }\r\n    /**\r\n      * retrieve mapping location changes from the storage changes.\r\n      * @param {Map} storageChanges\r\n      * @param {Array} corrections - used in case the calculated sha3 has been modifyed before SSTORE (notably used for struct in mapping).\r\n      */\r\n    extractMappingsLocationChanges(storageChanges, corrections) {\r\n        if (this.mappingsLocationChanges) {\r\n            return this.mappingsLocationChanges;\r\n        }\r\n        const mappings = mappingPreimages_1.decodeMappingsKeys(this.web3, storageChanges, corrections);\r\n        this.mappingsLocationChanges = mappings;\r\n        return this.mappingsLocationChanges;\r\n    }\r\n}\r\nexports.StorageViewer = StorageViewer;\r\n//# sourceMappingURL=storageViewer.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst traceHelper = tslib_1.__importStar(require(\"./traceHelper\"));\r\nclass TraceAnalyser {\r\n    constructor(_cache) {\r\n        this.traceCache = _cache;\r\n        this.trace = null;\r\n    }\r\n    analyse(trace, tx) {\r\n        this.trace = trace;\r\n        this.traceCache.pushStoreChanges(0, tx.to);\r\n        let context = {\r\n            storageContext: [tx.to],\r\n            currentCallIndex: 0,\r\n            lastCallIndex: 0\r\n        };\r\n        const callStack = [tx.to];\r\n        this.traceCache.pushCall(trace[0], 0, callStack[0], callStack.slice(0));\r\n        if (traceHelper.isContractCreation(tx.to)) {\r\n            this.traceCache.pushContractCreation(tx.to, tx.input);\r\n        }\r\n        this.buildCalldata(0, this.trace[0], tx, true);\r\n        for (let k = 0; k < this.trace.length; k++) {\r\n            const step = this.trace[k];\r\n            this.buildMemory(k, step);\r\n            context = this.buildDepth(k, step, tx, callStack, context);\r\n            context = this.buildStorage(k, step, context);\r\n            this.buildReturnValues(k, step);\r\n        }\r\n        return true;\r\n    }\r\n    buildReturnValues(index, step) {\r\n        if (traceHelper.isReturnInstruction(step)) {\r\n            let offset = 2 * parseInt(step.stack[step.stack.length - 1], 16);\r\n            const size = 2 * parseInt(step.stack[step.stack.length - 2], 16);\r\n            const memory = this.trace[this.traceCache.memoryChanges[this.traceCache.memoryChanges.length - 1]].memory;\r\n            const noOfReturnParams = size / 64;\r\n            const memoryInString = memory.join('');\r\n            const returnParamsObj = [];\r\n            for (let i = 0; i < noOfReturnParams; i++) {\r\n                returnParamsObj.push('0x' + memoryInString.substring(offset, offset + 64));\r\n                offset += 64;\r\n            }\r\n            this.traceCache.pushReturnValue(index, returnParamsObj);\r\n        }\r\n    }\r\n    buildCalldata(index, step, tx, newContext) {\r\n        let calldata = '';\r\n        if (index === 0) {\r\n            calldata = tx.input;\r\n            this.traceCache.pushCallDataChanges(index, calldata);\r\n        }\r\n        else if (!newContext) {\r\n            const lastCall = this.traceCache.callsData[this.traceCache.callDataChanges[this.traceCache.callDataChanges.length - 2]];\r\n            this.traceCache.pushCallDataChanges(index + 1, lastCall);\r\n        }\r\n        else {\r\n            const memory = this.trace[this.traceCache.memoryChanges[this.traceCache.memoryChanges.length - 1]].memory;\r\n            const callStep = this.trace[index];\r\n            const stack = callStep.stack;\r\n            let offset = 0;\r\n            let size = 0;\r\n            if (callStep.op === 'DELEGATECALL') {\r\n                offset = 2 * parseInt(stack[stack.length - 3], 16);\r\n                size = 2 * parseInt(stack[stack.length - 4], 16);\r\n            }\r\n            else {\r\n                offset = 2 * parseInt(stack[stack.length - 4], 16);\r\n                size = 2 * parseInt(stack[stack.length - 5], 16);\r\n            }\r\n            calldata = '0x' + memory.join('').substr(offset, size);\r\n            this.traceCache.pushCallDataChanges(index + 1, calldata);\r\n        }\r\n    }\r\n    buildMemory(index, step) {\r\n        if (step.memory) {\r\n            this.traceCache.pushMemoryChanges(index);\r\n        }\r\n    }\r\n    buildStorage(index, step, context) {\r\n        if (traceHelper.newContextStorage(step) && !traceHelper.isCallToPrecompiledContract(index, this.trace)) {\r\n            const calledAddress = traceHelper.resolveCalledAddress(index, this.trace);\r\n            if (calledAddress) {\r\n                context.storageContext.push(calledAddress);\r\n            }\r\n            else {\r\n                console.log('unable to build storage changes. ' + index + ' does not match with a CALL. storage changes will be corrupted');\r\n            }\r\n            this.traceCache.pushStoreChanges(index + 1, context.storageContext[context.storageContext.length - 1]);\r\n        }\r\n        else if (traceHelper.isSSTOREInstruction(step)) {\r\n            this.traceCache.pushStoreChanges(index + 1, context.storageContext[context.storageContext.length - 1], step.stack[step.stack.length - 1], step.stack[step.stack.length - 2]);\r\n        }\r\n        else if (traceHelper.isReturnInstruction(step) || traceHelper.isStopInstruction(step)) {\r\n            context.storageContext.pop();\r\n            this.traceCache.pushStoreChanges(index + 1, context.storageContext[context.storageContext.length - 1]);\r\n        }\r\n        else if (traceHelper.isRevertInstruction(step)) {\r\n            context.storageContext.pop();\r\n            this.traceCache.resetStoreChanges();\r\n        }\r\n        return context;\r\n    }\r\n    buildDepth(index, step, tx, callStack, context) {\r\n        if (traceHelper.isCallInstruction(step) && !traceHelper.isCallToPrecompiledContract(index, this.trace)) {\r\n            let newAddress;\r\n            if (traceHelper.isCreateInstruction(step)) {\r\n                newAddress = traceHelper.contractCreationToken(index);\r\n                callStack.push(newAddress);\r\n                const lastMemoryChange = this.traceCache.memoryChanges[this.traceCache.memoryChanges.length - 1];\r\n                this.traceCache.pushContractCreationFromMemory(index, newAddress, this.trace, lastMemoryChange);\r\n            }\r\n            else {\r\n                newAddress = traceHelper.resolveCalledAddress(index, this.trace);\r\n                if (newAddress) {\r\n                    callStack.push(newAddress);\r\n                }\r\n                else {\r\n                    console.log('unable to build depth changes. ' + index + ' does not match with a CALL. depth changes will be corrupted');\r\n                }\r\n            }\r\n            this.traceCache.pushCall(step, index + 1, newAddress, callStack.slice(0));\r\n            this.buildCalldata(index, step, tx, true);\r\n            this.traceCache.pushSteps(index, context.currentCallIndex);\r\n            context.lastCallIndex = context.currentCallIndex;\r\n            context.currentCallIndex = 0;\r\n        }\r\n        else if (traceHelper.isReturnInstruction(step) || traceHelper.isStopInstruction(step) || step.error || step.invalidDepthChange) {\r\n            if (index < this.trace.length) {\r\n                callStack.pop();\r\n                this.traceCache.pushCall(step, index + 1, null, callStack.slice(0), step.error || step.invalidDepthChange);\r\n                this.buildCalldata(index, step, tx, false);\r\n                this.traceCache.pushSteps(index, context.currentCallIndex);\r\n                context.currentCallIndex = context.lastCallIndex + 1;\r\n            }\r\n        }\r\n        else {\r\n            this.traceCache.pushSteps(index, context.currentCallIndex);\r\n            context.currentCallIndex++;\r\n        }\r\n        return context;\r\n    }\r\n}\r\nexports.TraceAnalyser = TraceAnalyser;\r\n//# sourceMappingURL=traceAnalyser.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst { sha3_256 } = remix_lib_1.util;\r\nclass TraceCache {\r\n    constructor() {\r\n        this.init();\r\n    }\r\n    init() {\r\n        // ...Changes contains index in the vmtrace of the corresponding changes\r\n        this.returnValues = {};\r\n        this.currentCall = null;\r\n        this.callsTree = null;\r\n        this.callsData = {};\r\n        this.contractCreation = {};\r\n        this.steps = {};\r\n        this.addresses = [];\r\n        this.callDataChanges = [];\r\n        this.memoryChanges = [];\r\n        this.storageChanges = [];\r\n        this.sstore = {}; // all sstore occurence in the trace\r\n    }\r\n    pushSteps(index, currentCallIndex) {\r\n        this.steps[index] = currentCallIndex;\r\n    }\r\n    pushCallDataChanges(value, calldata) {\r\n        this.callDataChanges.push(value);\r\n        this.callsData[value] = calldata;\r\n    }\r\n    pushMemoryChanges(value) {\r\n        this.memoryChanges.push(value);\r\n    }\r\n    // outOfGas has been removed because gas left logging is apparently made differently\r\n    // in the vm/geth/eth. TODO add the error property (with about the error in all clients)\r\n    pushCall(step, index, address, callStack, reverted) {\r\n        const validReturnStep = step.op === 'RETURN' || step.op === 'STOP';\r\n        if ((validReturnStep || reverted) && (this.currentCall)) {\r\n            this.currentCall.call.return = index - 1;\r\n            if (!validReturnStep) {\r\n                this.currentCall.call.reverted = reverted;\r\n            }\r\n            var parent = this.currentCall.parent;\r\n            this.currentCall = parent ? { call: parent.call, parent: parent.parent } : null;\r\n            return;\r\n        }\r\n        const call = {\r\n            op: step.op,\r\n            address: address,\r\n            callStack: callStack,\r\n            calls: {},\r\n            start: index\r\n        };\r\n        this.addresses.push(address);\r\n        if (this.currentCall) {\r\n            this.currentCall.call.calls[index] = call;\r\n        }\r\n        else {\r\n            this.callsTree = { call: call };\r\n        }\r\n        this.currentCall = { call: call, parent: this.currentCall };\r\n    }\r\n    pushReturnValue(step, value) {\r\n        this.returnValues[step] = value;\r\n    }\r\n    pushContractCreationFromMemory(index, token, trace, lastMemoryChange) {\r\n        const memory = trace[lastMemoryChange].memory;\r\n        const stack = trace[index].stack;\r\n        const offset = 2 * parseInt(stack[stack.length - 2], 16);\r\n        const size = 2 * parseInt(stack[stack.length - 3], 16);\r\n        this.contractCreation[token] = '0x' + memory.join('').substr(offset, size);\r\n    }\r\n    pushContractCreation(token, code) {\r\n        this.contractCreation[token] = code;\r\n    }\r\n    resetStoreChanges(index, address, key, value) {\r\n        this.sstore = {};\r\n        this.storageChanges = [];\r\n    }\r\n    pushStoreChanges(index, address, key, value) {\r\n        this.sstore[index] = {\r\n            address: address,\r\n            key: key,\r\n            value: value,\r\n            hashedKey: sha3_256(key)\r\n        };\r\n        this.storageChanges.push(index);\r\n    }\r\n    accumulateStorageChanges(index, address, storage) {\r\n        const ret = Object.assign({}, storage);\r\n        for (var k in this.storageChanges) {\r\n            const changesIndex = this.storageChanges[k];\r\n            if (changesIndex > index) {\r\n                return ret;\r\n            }\r\n            var sstore = this.sstore[changesIndex];\r\n            if (sstore.address === address && sstore.key) {\r\n                ret[sstore.hashedKey] = {\r\n                    key: sstore.key,\r\n                    value: sstore.value\r\n                };\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n}\r\nexports.TraceCache = TraceCache;\r\n//# sourceMappingURL=traceCache.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst { ui } = remix_lib_1.helpers;\r\n// vmTraceIndex has to point to a CALL, CODECALL, ...\r\nfunction resolveCalledAddress(vmTraceIndex, trace) {\r\n    const step = trace[vmTraceIndex];\r\n    if (isCreateInstruction(step)) {\r\n        return contractCreationToken(vmTraceIndex);\r\n    }\r\n    else if (isCallInstruction(step)) {\r\n        const stack = step.stack; // callcode, delegatecall, ...\r\n        return ui.normalizeHexAddress(stack[stack.length - 2]);\r\n    }\r\n    return undefined;\r\n}\r\nexports.resolveCalledAddress = resolveCalledAddress;\r\nfunction isCallInstruction(step) {\r\n    return ['CALL', 'STATICCALL', 'CALLCODE', 'CREATE', 'DELEGATECALL'].includes(step.op);\r\n}\r\nexports.isCallInstruction = isCallInstruction;\r\nfunction isCreateInstruction(step) {\r\n    return step.op === 'CREATE';\r\n}\r\nexports.isCreateInstruction = isCreateInstruction;\r\nfunction isReturnInstruction(step) {\r\n    return step.op === 'RETURN';\r\n}\r\nexports.isReturnInstruction = isReturnInstruction;\r\nfunction isJumpDestInstruction(step) {\r\n    return step.op === 'JUMPDEST';\r\n}\r\nexports.isJumpDestInstruction = isJumpDestInstruction;\r\nfunction isStopInstruction(step) {\r\n    return step.op === 'STOP';\r\n}\r\nexports.isStopInstruction = isStopInstruction;\r\nfunction isRevertInstruction(step) {\r\n    return step.op === 'REVERT';\r\n}\r\nexports.isRevertInstruction = isRevertInstruction;\r\nfunction isSSTOREInstruction(step) {\r\n    return step.op === 'SSTORE';\r\n}\r\nexports.isSSTOREInstruction = isSSTOREInstruction;\r\nfunction isSHA3Instruction(step) {\r\n    return step.op === 'SHA3';\r\n}\r\nexports.isSHA3Instruction = isSHA3Instruction;\r\nfunction newContextStorage(step) {\r\n    return step.op === 'CREATE' || step.op === 'CALL';\r\n}\r\nexports.newContextStorage = newContextStorage;\r\nfunction isCallToPrecompiledContract(index, trace) {\r\n    // if stack empty => this is not a precompiled contract\r\n    const step = trace[index];\r\n    if (this.isCallInstruction(step)) {\r\n        return index + 1 < trace.length && trace[index + 1].stack.length !== 0;\r\n    }\r\n    return false;\r\n}\r\nexports.isCallToPrecompiledContract = isCallToPrecompiledContract;\r\nfunction contractCreationToken(index) {\r\n    return '(Contract Creation - Step ' + index + ')';\r\n}\r\nexports.contractCreationToken = contractCreationToken;\r\nfunction isContractCreation(address) {\r\n    return address.indexOf('(Contract Creation - Step') !== -1;\r\n}\r\nexports.isContractCreation = isContractCreation;\r\n//# sourceMappingURL=traceHelper.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst traceAnalyser_1 = require(\"./traceAnalyser\");\r\nconst traceCache_1 = require(\"./traceCache\");\r\nconst traceStepManager_1 = require(\"./traceStepManager\");\r\nconst traceHelper_1 = require(\"./traceHelper\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nclass TraceManager {\r\n    constructor(options) {\r\n        this.web3 = options.web3;\r\n        this.isLoading = false;\r\n        this.trace = null;\r\n        this.traceCache = new traceCache_1.TraceCache();\r\n        this.traceAnalyser = new traceAnalyser_1.TraceAnalyser(this.traceCache);\r\n        this.traceStepManager = new traceStepManager_1.TraceStepManager(this.traceAnalyser);\r\n    }\r\n    // init section\r\n    resolveTrace(tx) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            this.tx = tx;\r\n            this.init();\r\n            if (!this.web3)\r\n                throw new Error('web3 not loaded');\r\n            this.isLoading = true;\r\n            try {\r\n                const result = yield this.getTrace(tx.hash);\r\n                if (result['structLogs'].length > 0) {\r\n                    this.trace = result['structLogs'];\r\n                    this.traceAnalyser.analyse(result['structLogs'], tx);\r\n                    this.isLoading = false;\r\n                    return true;\r\n                }\r\n                var mes = tx.hash + ' is not a contract invocation or contract creation.';\r\n                console.log(mes);\r\n                this.isLoading = false;\r\n                throw new Error(mes);\r\n            }\r\n            catch (error) {\r\n                console.log(error);\r\n                this.isLoading = false;\r\n                throw new Error(error);\r\n            }\r\n        });\r\n    }\r\n    getTrace(txHash) {\r\n        return new Promise((resolve, reject) => {\r\n            const options = {\r\n                disableStorage: true,\r\n                disableMemory: false,\r\n                disableStack: false,\r\n                fullStorage: false\r\n            };\r\n            this.web3.debug.traceTransaction(txHash, options, function (error, result) {\r\n                if (error)\r\n                    return reject(error);\r\n                resolve(result);\r\n            });\r\n        });\r\n    }\r\n    init() {\r\n        this.trace = null;\r\n        this.traceCache.init();\r\n    }\r\n    // API section\r\n    inRange(step) {\r\n        return this.isLoaded() && step >= 0 && step < this.trace.length;\r\n    }\r\n    isLoaded() {\r\n        return !this.isLoading && this.trace !== null;\r\n    }\r\n    getLength(callback) {\r\n        if (!this.trace) {\r\n            callback(new Error('no trace available'), null);\r\n        }\r\n        else {\r\n            callback(null, this.trace.length);\r\n        }\r\n    }\r\n    accumulateStorageChanges(index, address, storageOrigin) {\r\n        return this.traceCache.accumulateStorageChanges(index, address, storageOrigin);\r\n    }\r\n    getAddresses() {\r\n        return this.traceCache.addresses;\r\n    }\r\n    getCallDataAt(stepIndex) {\r\n        try {\r\n            this.checkRequestedStep(stepIndex);\r\n        }\r\n        catch (check) {\r\n            throw new Error(check);\r\n        }\r\n        const callDataChange = remix_lib_1.util.findLowerBoundValue(stepIndex, this.traceCache.callDataChanges);\r\n        if (callDataChange === null) {\r\n            throw new Error('no calldata found');\r\n        }\r\n        return [this.traceCache.callsData[callDataChange]];\r\n    }\r\n    buildCallPath(stepIndex) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                this.checkRequestedStep(stepIndex);\r\n            }\r\n            catch (check) {\r\n                throw new Error(check);\r\n            }\r\n            const callsPath = remix_lib_1.util.buildCallPath(stepIndex, this.traceCache.callsTree.call);\r\n            if (callsPath === null)\r\n                throw new Error('no call path built');\r\n            return callsPath;\r\n        });\r\n    }\r\n    getCallStackAt(stepIndex) {\r\n        try {\r\n            this.checkRequestedStep(stepIndex);\r\n        }\r\n        catch (check) {\r\n            throw new Error(check);\r\n        }\r\n        const call = remix_lib_1.util.findCall(stepIndex, this.traceCache.callsTree.call);\r\n        if (call === null) {\r\n            throw new Error('no callstack found');\r\n        }\r\n        return call.callStack;\r\n    }\r\n    getStackAt(stepIndex) {\r\n        this.checkRequestedStep(stepIndex);\r\n        if (this.trace[stepIndex] && this.trace[stepIndex].stack) { // there's always a stack\r\n            const stack = this.trace[stepIndex].stack.slice(0);\r\n            stack.reverse();\r\n            return stack;\r\n        }\r\n        else {\r\n            throw new Error('no stack found');\r\n        }\r\n    }\r\n    getLastCallChangeSince(stepIndex) {\r\n        try {\r\n            this.checkRequestedStep(stepIndex);\r\n        }\r\n        catch (check) {\r\n            throw new Error(check);\r\n        }\r\n        const callChange = remix_lib_1.util.findCall(stepIndex, this.traceCache.callsTree.call);\r\n        if (callChange === null) {\r\n            return 0;\r\n        }\r\n        return callChange;\r\n    }\r\n    getCurrentCalledAddressAt(stepIndex) {\r\n        try {\r\n            this.checkRequestedStep(stepIndex);\r\n            const resp = this.getLastCallChangeSince(stepIndex);\r\n            if (!resp) {\r\n                throw new Error('unable to get current called address. ' + stepIndex + ' does not match with a CALL');\r\n            }\r\n            return resp.address;\r\n        }\r\n        catch (error) {\r\n            throw new Error(error);\r\n        }\r\n    }\r\n    getContractCreationCode(token) {\r\n        if (!this.traceCache.contractCreation[token]) {\r\n            throw new Error('no contract creation named ' + token);\r\n        }\r\n        return this.traceCache.contractCreation[token];\r\n    }\r\n    getMemoryAt(stepIndex) {\r\n        this.checkRequestedStep(stepIndex);\r\n        const lastChanges = remix_lib_1.util.findLowerBoundValue(stepIndex, this.traceCache.memoryChanges);\r\n        if (lastChanges === null) {\r\n            throw new Error('no memory found');\r\n        }\r\n        return this.trace[lastChanges].memory;\r\n    }\r\n    getCurrentPC(stepIndex) {\r\n        try {\r\n            this.checkRequestedStep(stepIndex);\r\n        }\r\n        catch (check) {\r\n            throw new Error(check);\r\n        }\r\n        return this.trace[stepIndex].pc;\r\n    }\r\n    getReturnValue(stepIndex) {\r\n        try {\r\n            this.checkRequestedStep(stepIndex);\r\n        }\r\n        catch (check) {\r\n            throw new Error(check);\r\n        }\r\n        if (!this.traceCache.returnValues[stepIndex]) {\r\n            throw new Error('current step is not a return step');\r\n        }\r\n        return this.traceCache.returnValues[stepIndex];\r\n    }\r\n    getCurrentStep(stepIndex) {\r\n        try {\r\n            this.checkRequestedStep(stepIndex);\r\n        }\r\n        catch (check) {\r\n            throw new Error(check);\r\n        }\r\n        return this.traceCache.steps[stepIndex];\r\n    }\r\n    getMemExpand(stepIndex) {\r\n        return (this.getStepProperty(stepIndex, 'memexpand') || '');\r\n    }\r\n    getStepCost(stepIndex) {\r\n        return this.getStepProperty(stepIndex, 'gasCost');\r\n    }\r\n    getRemainingGas(stepIndex) {\r\n        return this.getStepProperty(stepIndex, 'gas');\r\n    }\r\n    getStepProperty(stepIndex, property) {\r\n        try {\r\n            this.checkRequestedStep(stepIndex);\r\n        }\r\n        catch (check) {\r\n            throw new Error(check);\r\n        }\r\n        return this.trace[stepIndex][property];\r\n    }\r\n    isCreationStep(stepIndex) {\r\n        return traceHelper_1.isCreateInstruction(this.trace[stepIndex]);\r\n    }\r\n    // step section\r\n    findStepOverBack(currentStep) {\r\n        return this.traceStepManager.findStepOverBack(currentStep);\r\n    }\r\n    findStepOverForward(currentStep) {\r\n        return this.traceStepManager.findStepOverForward(currentStep);\r\n    }\r\n    findNextCall(currentStep) {\r\n        return this.traceStepManager.findNextCall(currentStep);\r\n    }\r\n    findStepOut(currentStep) {\r\n        return this.traceStepManager.findStepOut(currentStep);\r\n    }\r\n    checkRequestedStep(stepIndex) {\r\n        if (!this.trace) {\r\n            throw new Error('trace not loaded');\r\n        }\r\n        else if (stepIndex >= this.trace.length) {\r\n            throw new Error('trace smaller than requested');\r\n        }\r\n    }\r\n    waterfall(calls, stepindex, cb) {\r\n        const ret = [];\r\n        let retError = null;\r\n        for (var call in calls) {\r\n            calls[call].apply(this, [stepindex, function (error, result) {\r\n                    retError = error;\r\n                    ret.push({ error: error, value: result });\r\n                }]);\r\n        }\r\n        cb(retError, ret);\r\n    }\r\n}\r\nexports.TraceManager = TraceManager;\r\n//# sourceMappingURL=traceManager.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst traceHelper_1 = require(\"./traceHelper\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nclass TraceStepManager {\r\n    constructor(_traceAnalyser) {\r\n        this.traceAnalyser = _traceAnalyser;\r\n    }\r\n    isCallInstruction(index) {\r\n        const state = this.traceAnalyser.trace[index];\r\n        return traceHelper_1.isCallInstruction(state) && !traceHelper_1.isCallToPrecompiledContract(index, this.traceAnalyser.trace);\r\n    }\r\n    isReturnInstruction(index) {\r\n        const state = this.traceAnalyser.trace[index];\r\n        return traceHelper_1.isReturnInstruction(state);\r\n    }\r\n    findStepOverBack(currentStep) {\r\n        if (this.isReturnInstruction(currentStep)) {\r\n            const call = remix_lib_1.util.findCall(currentStep, this.traceAnalyser.traceCache.callsTree.call);\r\n            return call.start > 0 ? call.start - 1 : 0;\r\n        }\r\n        return currentStep > 0 ? currentStep - 1 : 0;\r\n    }\r\n    findStepOverForward(currentStep) {\r\n        if (this.isCallInstruction(currentStep)) {\r\n            const call = remix_lib_1.util.findCall(currentStep + 1, this.traceAnalyser.traceCache.callsTree.call);\r\n            return call.return + 1 < this.traceAnalyser.trace.length ? call.return + 1 : this.traceAnalyser.trace.length - 1;\r\n        }\r\n        return this.traceAnalyser.trace.length >= currentStep + 1 ? currentStep + 1 : currentStep;\r\n    }\r\n    findNextCall(currentStep) {\r\n        const call = remix_lib_1.util.findCall(currentStep, this.traceAnalyser.traceCache.callsTree.call);\r\n        const subCalls = Object.keys(call.calls);\r\n        if (subCalls.length) {\r\n            var callStart = remix_lib_1.util.findLowerBound(currentStep, subCalls) + 1;\r\n            if (subCalls.length > callStart) {\r\n                return parseInt(subCalls[callStart]) - 1;\r\n            }\r\n            return currentStep;\r\n        }\r\n        return currentStep;\r\n    }\r\n    findStepOut(currentStep) {\r\n        const call = remix_lib_1.util.findCall(currentStep, this.traceAnalyser.traceCache.callsTree.call);\r\n        return call.return;\r\n    }\r\n}\r\nexports.TraceStepManager = TraceStepManager;\r\n//# sourceMappingURL=traceStepManager.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass EventManager {\r\n    constructor() {\r\n        this.registered = {};\r\n        this.anonymous = {};\r\n    }\r\n    /*\r\n      * Unregister a listener.\r\n      * Note that if obj is a function. the unregistration will be applied to the dummy obj {}.\r\n      *\r\n      * @param {String} eventName  - the event name\r\n      * @param {Object or Func} obj - object that will listen on this event\r\n      * @param {Func} func         - function of the listeners that will be executed\r\n    */\r\n    unregister(eventName, obj, func) {\r\n        if (!this.registered[eventName]) {\r\n            return;\r\n        }\r\n        if (obj instanceof Function) {\r\n            func = obj;\r\n            obj = this.anonymous;\r\n        }\r\n        for (const reg in this.registered[eventName]) {\r\n            if (this.registered[eventName][reg].obj === obj && this.registered[eventName][reg].func === func) {\r\n                this.registered[eventName].splice(reg, 1);\r\n            }\r\n        }\r\n    }\r\n    /*\r\n      * Register a new listener.\r\n      * Note that if obj is a function, the function registration will be associated with the dummy object {}\r\n      *\r\n      * @param {String} eventName  - the event name\r\n      * @param {Object or Func} obj - object that will listen on this event\r\n      * @param {Func} func         - function of the listeners that will be executed\r\n    */\r\n    register(eventName, obj, func) {\r\n        if (!this.registered[eventName]) {\r\n            this.registered[eventName] = [];\r\n        }\r\n        if (obj instanceof Function) {\r\n            func = obj;\r\n            obj = this.anonymous;\r\n        }\r\n        this.registered[eventName].push({ obj, func });\r\n    }\r\n    /*\r\n      * trigger event.\r\n      * Every listener have their associated function executed\r\n      *\r\n      * @param {String} eventName  - the event name\r\n      * @param {Array}j - argument that will be passed to the executed function.\r\n    */\r\n    trigger(eventName, args) {\r\n        if (!this.registered[eventName]) {\r\n            return;\r\n        }\r\n        for (const listener in this.registered[eventName]) {\r\n            const l = this.registered[eventName][listener];\r\n            l.func.apply(l.obj === this.anonymous ? {} : l.obj, args);\r\n        }\r\n    }\r\n}\r\nexports.EventManager = EventManager;\r\n//# sourceMappingURL=eventManager.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ethers_1 = require(\"ethers\");\r\nconst txHelper_1 = require(\"./txHelper\");\r\n/**\r\n  * Register to txListener and extract events\r\n  *\r\n  */\r\nclass EventsDecoder {\r\n    constructor({ resolveReceipt }) {\r\n        this.resolveReceipt = resolveReceipt;\r\n    }\r\n    /**\r\n    * use Transaction Receipt to decode logs. assume that the transaction as already been resolved by txListener.\r\n    * logs are decoded only if the contract if known by remix.\r\n    *\r\n    * @param {Object} tx - transaction object\r\n    * @param {Function} cb - callback\r\n    */\r\n    parseLogs(tx, contractName, compiledContracts, cb) {\r\n        if (tx.isCall)\r\n            return cb(null, { decoded: [], raw: [] });\r\n        this.resolveReceipt(tx, (error, receipt) => {\r\n            if (error)\r\n                return cb(error);\r\n            this._decodeLogs(tx, receipt, contractName, compiledContracts, cb);\r\n        });\r\n    }\r\n    _decodeLogs(tx, receipt, contract, contracts, cb) {\r\n        if (!contract || !receipt) {\r\n            return cb('cannot decode logs - contract or receipt not resolved ');\r\n        }\r\n        if (!receipt.logs) {\r\n            return cb(null, { decoded: [], raw: [] });\r\n        }\r\n        this._decodeEvents(tx, receipt.logs, contract, contracts, cb);\r\n    }\r\n    _eventABI(contract) {\r\n        const eventABI = {};\r\n        const abi = new ethers_1.ethers.utils.Interface(contract.abi);\r\n        for (const e in abi.events) {\r\n            const event = abi.getEvent(e);\r\n            eventABI[abi.getEventTopic(e).replace('0x', '')] = { event: event.name, inputs: event.inputs, object: event, abi: abi };\r\n        }\r\n        return eventABI;\r\n    }\r\n    _eventsABI(compiledContracts) {\r\n        const eventsABI = {};\r\n        txHelper_1.visitContracts(compiledContracts, (contract) => {\r\n            eventsABI[contract.name] = this._eventABI(contract.object);\r\n        });\r\n        return eventsABI;\r\n    }\r\n    _event(hash, eventsABI) {\r\n        for (const k in eventsABI) {\r\n            if (eventsABI[k][hash]) {\r\n                const event = eventsABI[k][hash];\r\n                for (const input of event.inputs) {\r\n                    if (input.type === 'function') {\r\n                        input.type = 'bytes24';\r\n                        input.baseType = 'bytes24';\r\n                    }\r\n                }\r\n                return event;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    _stringifyBigNumber(value) {\r\n        return value._isBigNumber ? value.toString() : value;\r\n    }\r\n    _stringifyEvent(value) {\r\n        if (value === null || value === undefined)\r\n            return ' - ';\r\n        if (value._ethersType)\r\n            value.type = value._ethersType;\r\n        if (Array.isArray(value)) {\r\n            // for struct && array\r\n            return value.map((item) => { return this._stringifyEvent(item); });\r\n        }\r\n        else {\r\n            return this._stringifyBigNumber(value);\r\n        }\r\n    }\r\n    _decodeEvents(tx, logs, contractName, compiledContracts, cb) {\r\n        const eventsABI = this._eventsABI(compiledContracts);\r\n        const events = [];\r\n        for (const i in logs) {\r\n            // [address, topics, mem]\r\n            const log = logs[i];\r\n            const topicId = log.topics[0];\r\n            const eventAbi = this._event(topicId.replace('0x', ''), eventsABI);\r\n            if (eventAbi) {\r\n                const decodedlog = eventAbi.abi.parseLog(log);\r\n                const decoded = {};\r\n                for (const v in decodedlog.args) {\r\n                    decoded[v] = this._stringifyEvent(decodedlog.args[v]);\r\n                }\r\n                events.push({ from: log.address, topic: topicId, event: eventAbi.event, args: decoded });\r\n            }\r\n            else {\r\n                events.push({ from: log.address, data: log.data, topics: log.topics });\r\n            }\r\n        }\r\n        cb(null, { decoded: events, raw: logs });\r\n    }\r\n}\r\nexports.EventsDecoder = EventsDecoder;\r\n//# sourceMappingURL=eventsDecoder.js.map","/* global ethereum */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst web3VmProvider_1 = require(\"../web3Provider/web3VmProvider\");\r\nconst logsManager_1 = require(\"./logsManager\");\r\nconst EthJSVM = require('ethereumjs-vm').default;\r\nconst StateManager = require('ethereumjs-vm/dist/state/stateManager').default;\r\nlet web3;\r\nif (typeof window !== 'undefined' && typeof window['ethereum'] !== 'undefined') {\r\n    var injectedProvider = window['ethereum'];\r\n    web3 = new web3_1.default(injectedProvider);\r\n}\r\nelse {\r\n    web3 = new web3_1.default(new web3_1.default.providers.HttpProvider('http://localhost:8545'));\r\n}\r\n/*\r\n  extend vm state manager and instanciate VM\r\n*/\r\nclass StateManagerCommonStorageDump extends StateManager {\r\n    constructor(arg) {\r\n        super(arg);\r\n        this.keyHashes = {};\r\n    }\r\n    putContractStorage(address, key, value, cb) {\r\n        this.keyHashes[ethereumjs_util_1.keccak(key).toString('hex')] = ethereumjs_util_1.bufferToHex(key);\r\n        super.putContractStorage(address, key, value, cb);\r\n    }\r\n    dumpStorage(address, cb) {\r\n        this._getStorageTrie(address, (err, trie) => {\r\n            if (err) {\r\n                return cb(err);\r\n            }\r\n            const storage = {};\r\n            const stream = trie.createReadStream();\r\n            stream.on('data', (val) => {\r\n                const value = ethereumjs_util_1.rlp.decode(val.value);\r\n                storage['0x' + val.key.toString('hex')] = {\r\n                    key: this.keyHashes[val.key.toString('hex')],\r\n                    value: '0x' + value.toString('hex')\r\n                };\r\n            });\r\n            stream.on('end', function () {\r\n                cb(storage);\r\n            });\r\n        });\r\n    }\r\n    getStateRoot(cb) {\r\n        const checkpoint = this._checkpointCount;\r\n        this._checkpointCount = 0;\r\n        super.getStateRoot((err, stateRoot) => {\r\n            this._checkpointCount = checkpoint;\r\n            cb(err, stateRoot);\r\n        });\r\n    }\r\n    setStateRoot(stateRoot, cb) {\r\n        const checkpoint = this._checkpointCount;\r\n        this._checkpointCount = 0;\r\n        super.setStateRoot(stateRoot, (err) => {\r\n            this._checkpointCount = checkpoint;\r\n            cb(err);\r\n        });\r\n    }\r\n}\r\n/*\r\n  trigger contextChanged, web3EndpointChanged\r\n*/\r\nclass ExecutionContext {\r\n    constructor() {\r\n        this.event = new eventManager_1.EventManager();\r\n        this.logsManager = new logsManager_1.LogsManager();\r\n        this.executionContext = null;\r\n        this.blockGasLimitDefault = 4300000;\r\n        this.blockGasLimit = this.blockGasLimitDefault;\r\n        this.currentFork = 'muirGlacier';\r\n        this.vms = {\r\n            /*\r\n            byzantium: createVm('byzantium'),\r\n            constantinople: createVm('constantinople'),\r\n            petersburg: createVm('petersburg'),\r\n            istanbul: createVm('istanbul'),\r\n            */\r\n            muirGlacier: this.createVm('muirGlacier')\r\n        };\r\n        this.mainNetGenesisHash = '0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3';\r\n        this.customNetWorks = {};\r\n        this.blocks = {};\r\n        this.latestBlockNumber = 0;\r\n        this.txs = {};\r\n    }\r\n    init(config) {\r\n        if (config.get('settings/always-use-vm')) {\r\n            this.executionContext = 'vm';\r\n        }\r\n        else {\r\n            this.executionContext = injectedProvider ? 'injected' : 'vm';\r\n            if (this.executionContext === 'injected')\r\n                this.askPermission();\r\n        }\r\n    }\r\n    createVm(hardfork) {\r\n        const stateManager = new StateManagerCommonStorageDump({});\r\n        stateManager.checkpoint(() => { });\r\n        const vm = new EthJSVM({\r\n            activatePrecompiles: true,\r\n            blockchain: stateManager.blockchain,\r\n            stateManager: stateManager,\r\n            hardfork: hardfork\r\n        });\r\n        vm.blockchain.validate = false;\r\n        const web3vm = new web3VmProvider_1.Web3VmProvider();\r\n        web3vm.setVM(vm);\r\n        return { vm, web3vm, stateManager };\r\n    }\r\n    askPermission() {\r\n        // metamask\r\n        if (ethereum && typeof ethereum.enable === 'function')\r\n            ethereum.enable();\r\n    }\r\n    getProvider() {\r\n        return this.executionContext;\r\n    }\r\n    isVM() {\r\n        return this.executionContext === 'vm';\r\n    }\r\n    web3() {\r\n        return this.isVM() ? this.vms[this.currentFork].web3vm : web3;\r\n    }\r\n    detectNetwork(callback) {\r\n        if (this.isVM()) {\r\n            callback(null, { id: '-', name: 'VM' });\r\n        }\r\n        else {\r\n            web3.eth.net.getId((err, id) => {\r\n                let name = null;\r\n                if (err)\r\n                    name = 'Unknown';\r\n                // https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md\r\n                else if (id === 1)\r\n                    name = 'Main';\r\n                else if (id === 2)\r\n                    name = 'Morden (deprecated)';\r\n                else if (id === 3)\r\n                    name = 'Ropsten';\r\n                else if (id === 4)\r\n                    name = 'Rinkeby';\r\n                else if (id === 5)\r\n                    name = 'Goerli';\r\n                else if (id === 42)\r\n                    name = 'Kovan';\r\n                else\r\n                    name = 'Custom';\r\n                if (id === '1') {\r\n                    web3.eth.getBlock(0, (error, block) => {\r\n                        if (error)\r\n                            console.log('cant query first block');\r\n                        if (block && block.hash !== this.mainNetGenesisHash)\r\n                            name = 'Custom';\r\n                        callback(err, { id, name });\r\n                    });\r\n                }\r\n                else {\r\n                    callback(err, { id, name });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    removeProvider(name) {\r\n        if (name && this.customNetWorks[name]) {\r\n            if (this.executionContext === name)\r\n                this.setContext('vm', null, null, null);\r\n            delete this.customNetWorks[name];\r\n            this.event.trigger('removeProvider', [name]);\r\n        }\r\n    }\r\n    addProvider(network) {\r\n        if (network && network.name && !this.customNetWorks[network.name]) {\r\n            this.customNetWorks[network.name] = network;\r\n            this.event.trigger('addProvider', [network]);\r\n        }\r\n    }\r\n    internalWeb3() {\r\n        return web3;\r\n    }\r\n    blankWeb3() {\r\n        return new web3_1.default();\r\n    }\r\n    vm() {\r\n        return this.vms[this.currentFork].vm;\r\n    }\r\n    setContext(context, endPointUrl, confirmCb, infoCb) {\r\n        this.executionContext = context;\r\n        this.executionContextChange(context, endPointUrl, confirmCb, infoCb, null);\r\n    }\r\n    executionContextChange(context, endPointUrl, confirmCb, infoCb, cb) {\r\n        if (!cb)\r\n            cb = () => { };\r\n        if (!confirmCb)\r\n            confirmCb = () => { };\r\n        if (!infoCb)\r\n            infoCb = () => { };\r\n        if (context === 'vm') {\r\n            this.executionContext = context;\r\n            this.vms[this.currentFork].stateManager.revert(() => {\r\n                this.vms[this.currentFork].stateManager.checkpoint(() => { });\r\n            });\r\n            this.event.trigger('contextChanged', ['vm']);\r\n            return cb();\r\n        }\r\n        if (context === 'injected') {\r\n            if (injectedProvider === undefined) {\r\n                infoCb('No injected Web3 provider found. Make sure your provider (e.g. MetaMask) is active and running (when recently activated you may have to reload the page).');\r\n                return cb();\r\n            }\r\n            else {\r\n                this.askPermission();\r\n                this.executionContext = context;\r\n                web3.setProvider(injectedProvider);\r\n                this._updateBlockGasLimit();\r\n                this.event.trigger('contextChanged', ['injected']);\r\n                return cb();\r\n            }\r\n        }\r\n        if (context === 'web3') {\r\n            confirmCb(cb);\r\n        }\r\n        if (this.customNetWorks[context]) {\r\n            var network = this.customNetWorks[context];\r\n            this.setProviderFromEndpoint(network.provider, network.name, (error) => {\r\n                if (error)\r\n                    infoCb(error);\r\n                cb();\r\n            });\r\n        }\r\n    }\r\n    currentblockGasLimit() {\r\n        return this.blockGasLimit;\r\n    }\r\n    stopListenOnLastBlock() {\r\n        if (this.listenOnLastBlockId)\r\n            clearInterval(this.listenOnLastBlockId);\r\n        this.listenOnLastBlockId = null;\r\n    }\r\n    _updateBlockGasLimit() {\r\n        if (this.getProvider() !== 'vm') {\r\n            web3.eth.getBlock('latest', (err, block) => {\r\n                if (!err) {\r\n                    // we can't use the blockGasLimit cause the next blocks could have a lower limit : https://github.com/ethereum/remix/issues/506\r\n                    this.blockGasLimit = (block && block.gasLimit) ? Math.floor(block.gasLimit - (5 * block.gasLimit) / 1024) : this.blockGasLimitDefault;\r\n                }\r\n                else {\r\n                    this.blockGasLimit = this.blockGasLimitDefault;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    listenOnLastBlock() {\r\n        this.listenOnLastBlockId = setInterval(() => {\r\n            this._updateBlockGasLimit();\r\n        }, 15000);\r\n    }\r\n    // TODO: remove this when this function is moved\r\n    setProviderFromEndpoint(endpoint, context, cb) {\r\n        const oldProvider = web3.currentProvider;\r\n        web3.setProvider(endpoint);\r\n        web3.eth.net.isListening((err, isConnected) => {\r\n            if (!err && isConnected) {\r\n                this.executionContext = context;\r\n                this._updateBlockGasLimit();\r\n                this.event.trigger('contextChanged', [context]);\r\n                this.event.trigger('web3EndpointChanged');\r\n                cb();\r\n            }\r\n            else {\r\n                web3.setProvider(oldProvider);\r\n                cb('Not possible to connect to the Web3 provider. Make sure the provider is running, a connection is open (via IPC or RPC) or that the provider plugin is properly configured.');\r\n            }\r\n        });\r\n    }\r\n    txDetailsLink(network, hash) {\r\n        const transactionDetailsLinks = {\r\n            Main: 'https://www.etherscan.io/tx/',\r\n            Rinkeby: 'https://rinkeby.etherscan.io/tx/',\r\n            Ropsten: 'https://ropsten.etherscan.io/tx/',\r\n            Kovan: 'https://kovan.etherscan.io/tx/',\r\n            Goerli: 'https://goerli.etherscan.io/tx/'\r\n        };\r\n        if (transactionDetailsLinks[network]) {\r\n            return transactionDetailsLinks[network] + hash;\r\n        }\r\n    }\r\n    addBlock(block) {\r\n        let blockNumber = '0x' + block.header.number.toString('hex');\r\n        if (blockNumber === '0x') {\r\n            blockNumber = '0x0';\r\n        }\r\n        blockNumber = web3.utils.toHex(web3.utils.toBN(blockNumber));\r\n        this.blocks['0x' + block.hash().toString('hex')] = block;\r\n        this.blocks[blockNumber] = block;\r\n        this.latestBlockNumber = blockNumber;\r\n        this.logsManager.checkBlock(blockNumber, block, this.web3());\r\n    }\r\n    trackTx(tx, block) {\r\n        this.txs[tx] = block;\r\n    }\r\n}\r\nexports.ExecutionContext = ExecutionContext;\r\n//# sourceMappingURL=execution-context.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst async_1 = require(\"async\");\r\nconst crypto_1 = require(\"crypto\");\r\nclass LogsManager {\r\n    constructor() {\r\n        this.notificationCallbacks = [];\r\n        this.subscriptions = {};\r\n        this.filters = {};\r\n        this.filterTracking = {};\r\n        this.oldLogs = [];\r\n    }\r\n    checkBlock(blockNumber, block, web3) {\r\n        async_1.eachOf(block.transactions, (tx, i, next) => {\r\n            const txHash = '0x' + tx.hash().toString('hex');\r\n            web3.eth.getTransactionReceipt(txHash, (_error, receipt) => {\r\n                for (const log of receipt.logs) {\r\n                    this.oldLogs.push({ type: 'block', blockNumber, block, tx, log, txNumber: i });\r\n                    const subscriptions = this.getSubscriptionsFor({ type: 'block', blockNumber, block, tx, log });\r\n                    for (const subscriptionId of subscriptions) {\r\n                        const result = {\r\n                            logIndex: '0x1',\r\n                            blockNumber: blockNumber,\r\n                            blockHash: ('0x' + block.hash().toString('hex')),\r\n                            transactionHash: ('0x' + tx.hash().toString('hex')),\r\n                            transactionIndex: '0x' + i.toString(16),\r\n                            // TODO: if it's a contract deploy, it should be that address instead\r\n                            address: log.address,\r\n                            data: log.data,\r\n                            topics: log.topics\r\n                        };\r\n                        if (result.address === '0x') {\r\n                            delete result.address;\r\n                        }\r\n                        const response = { jsonrpc: '2.0', method: 'eth_subscription', params: { result: result, subscription: subscriptionId } };\r\n                        this.transmit(response);\r\n                    }\r\n                }\r\n            });\r\n        }, (_err) => {\r\n        });\r\n    }\r\n    eventMatchesFilter(changeEvent, queryType, queryFilter) {\r\n        if (queryFilter.topics.filter((logTopic) => changeEvent.log.topics.indexOf(logTopic) >= 0).length === 0)\r\n            return false;\r\n        if (queryType === 'logs') {\r\n            if ((queryFilter.address === ('0x' + changeEvent.tx.to.toString('hex'))) && (queryFilter.address === ('0x' + changeEvent.tx.from.toString('hex')))) {\r\n                if (!queryFilter.toBlock) {\r\n                    return true;\r\n                }\r\n                else if (parseInt(queryFilter.toBlock) > parseInt(changeEvent.blockNumber)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    getSubscriptionsFor(changeEvent) {\r\n        const matchedSubscriptions = [];\r\n        for (const subscriptionId of Object.keys(this.subscriptions)) {\r\n            const subscriptionParams = this.subscriptions[subscriptionId];\r\n            const [queryType, queryFilter] = subscriptionParams;\r\n            if (this.eventMatchesFilter(changeEvent, queryType, queryFilter || { topics: [] })) {\r\n                matchedSubscriptions.push(subscriptionId);\r\n            }\r\n        }\r\n        return matchedSubscriptions;\r\n    }\r\n    getLogsForSubscription(subscriptionId) {\r\n        const subscriptionParams = this.subscriptions[subscriptionId];\r\n        const [_queryType, queryFilter] = subscriptionParams; // eslint-disable-line\r\n        return this.getLogsFor(queryFilter);\r\n    }\r\n    transmit(result) {\r\n        this.notificationCallbacks.forEach((callback) => {\r\n            if (result.params.result.raw) {\r\n                result.params.result.data = result.params.result.raw.data;\r\n                result.params.result.topics = result.params.result.raw.topics;\r\n            }\r\n            callback(result);\r\n        });\r\n    }\r\n    addListener(_type, cb) {\r\n        this.notificationCallbacks.push(cb);\r\n    }\r\n    subscribe(params) {\r\n        const subscriptionId = '0x' + crypto_1.randomBytes(16).toString('hex');\r\n        this.subscriptions[subscriptionId] = params;\r\n        return subscriptionId;\r\n    }\r\n    unsubscribe(subscriptionId) {\r\n        delete this.subscriptions[subscriptionId];\r\n    }\r\n    newFilter(filterType, params) {\r\n        const filterId = '0x' + crypto_1.randomBytes(16).toString('hex');\r\n        if (filterType === 'block' || filterType === 'pendingTransactions') {\r\n            this.filters[filterId] = { filterType };\r\n        }\r\n        if (filterType === 'filter') {\r\n            this.filters[filterId] = { filterType, params };\r\n        }\r\n        this.filterTracking[filterId] = {};\r\n        return filterId;\r\n    }\r\n    uninstallFilter(filterId) {\r\n        delete this.filters[filterId];\r\n    }\r\n    getLogsForFilter(filterId, logsOnly) {\r\n        const { filterType, params } = this.filters[filterId];\r\n        const tracking = this.filterTracking[filterId];\r\n        if (logsOnly || filterType === 'filter') {\r\n            return this.getLogsFor(params || { topics: [] });\r\n        }\r\n        if (filterType === 'block') {\r\n            const blocks = this.oldLogs.filter(x => x.type === 'block').filter(x => tracking.block === undefined || x.blockNumber >= tracking.block);\r\n            tracking.block = blocks[blocks.length - 1];\r\n            return blocks.map(block => ('0x' + block.hash().toString('hex')));\r\n        }\r\n        if (filterType === 'pendingTransactions') {\r\n            return [];\r\n        }\r\n    }\r\n    getLogsFor(params) {\r\n        const results = [];\r\n        for (const log of this.oldLogs) {\r\n            if (this.eventMatchesFilter(log, 'logs', params)) {\r\n                results.push({\r\n                    logIndex: '0x1',\r\n                    blockNumber: log.blockNumber,\r\n                    blockHash: ('0x' + log.block.hash().toString('hex')),\r\n                    transactionHash: ('0x' + log.tx.hash().toString('hex')),\r\n                    transactionIndex: '0x' + log.txNumber.toString(16),\r\n                    // TODO: if it's a contract deploy, it should be that address instead\r\n                    address: log.log.address,\r\n                    data: log.log.data,\r\n                    topics: log.log.topics\r\n                });\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n}\r\nexports.LogsManager = LogsManager;\r\n//# sourceMappingURL=logsManager.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ethers_1 = require(\"ethers\");\r\n/**\r\n  * deploy the given contract\r\n  *\r\n  * @param {String} from    - sender address\r\n  * @param {String} data    - data to send with the transaction ( return of txFormat.buildData(...) ).\r\n  * @param {String} value    - decimal representation of value.\r\n  * @param {String} gasLimit    - decimal representation of gas limit.\r\n  * @param {Object} txRunner    - TxRunner.js instance\r\n  * @param {Object} callbacks    - { confirmationCb, gasEstimationForceSend, promptCb }\r\n  *     [validate transaction] confirmationCb (network, tx, gasEstimation, continueTxExecution, cancelCb)\r\n  *     [transaction failed, force send] gasEstimationForceSend (error, continueTxExecution, cancelCb)\r\n  *     [personal mode enabled, need password to continue] promptCb (okCb, cancelCb)\r\n  * @param {Function} finalCallback    - last callback.\r\n  */\r\nfunction createContract(from, data, value, gasLimit, txRunner, callbacks, finalCallback) {\r\n    if (!callbacks.confirmationCb || !callbacks.gasEstimationForceSend || !callbacks.promptCb) {\r\n        return finalCallback('all the callbacks must have been defined');\r\n    }\r\n    const tx = { from: from, to: null, data: data, useCall: false, value: value, gasLimit: gasLimit };\r\n    txRunner.rawRun(tx, callbacks.confirmationCb, callbacks.gasEstimationForceSend, callbacks.promptCb, (error, txResult) => {\r\n        // see universaldapp.js line 660 => 700 to check possible values of txResult (error case)\r\n        finalCallback(error, txResult);\r\n    });\r\n}\r\nexports.createContract = createContract;\r\n/**\r\n  * call the current given contract ! that will create a transaction !\r\n  *\r\n  * @param {String} from    - sender address\r\n  * @param {String} to    - recipient address\r\n  * @param {String} data    - data to send with the transaction ( return of txFormat.buildData(...) ).\r\n  * @param {String} value    - decimal representation of value.\r\n  * @param {String} gasLimit    - decimal representation of gas limit.\r\n  * @param {Object} txRunner    - TxRunner.js instance\r\n  * @param {Object} callbacks    - { confirmationCb, gasEstimationForceSend, promptCb }\r\n  *     [validate transaction] confirmationCb (network, tx, gasEstimation, continueTxExecution, cancelCb)\r\n  *     [transaction failed, force send] gasEstimationForceSend (error, continueTxExecution, cancelCb)\r\n  *     [personal mode enabled, need password to continue] promptCb (okCb, cancelCb)\r\n  * @param {Function} finalCallback    - last callback.\r\n  */\r\nfunction callFunction(from, to, data, value, gasLimit, funAbi, txRunner, callbacks, finalCallback) {\r\n    const useCall = funAbi.stateMutability === 'view' || funAbi.stateMutability === 'pure' || funAbi.constant;\r\n    const tx = { from, to, data, useCall, value, gasLimit };\r\n    txRunner.rawRun(tx, callbacks.confirmationCb, callbacks.gasEstimationForceSend, callbacks.promptCb, (error, txResult) => {\r\n        // see universaldapp.js line 660 => 700 to check possible values of txResult (error case)\r\n        finalCallback(error, txResult);\r\n    });\r\n}\r\nexports.callFunction = callFunction;\r\n/**\r\n  * check if the vm has errored\r\n  *\r\n  * @param {Object} txResult    - the value returned by the vm\r\n  * @return {Object} -  { error: true/false, message: DOMNode }\r\n  */\r\nfunction checkVMError(txResult) {\r\n    const errorCode = {\r\n        OUT_OF_GAS: 'out of gas',\r\n        STACK_UNDERFLOW: 'stack underflow',\r\n        STACK_OVERFLOW: 'stack overflow',\r\n        INVALID_JUMP: 'invalid JUMP',\r\n        INVALID_OPCODE: 'invalid opcode',\r\n        REVERT: 'revert',\r\n        STATIC_STATE_CHANGE: 'static state change',\r\n        INTERNAL_ERROR: 'internal error',\r\n        CREATE_COLLISION: 'create collision',\r\n        STOP: 'stop',\r\n        REFUND_EXHAUSTED: 'refund exhausted'\r\n    };\r\n    const ret = {\r\n        error: false,\r\n        message: ''\r\n    };\r\n    if (!txResult.result.execResult.exceptionError) {\r\n        return ret;\r\n    }\r\n    const exceptionError = txResult.result.execResult.exceptionError.error || '';\r\n    const error = `VM error: ${exceptionError}.\\n`;\r\n    let msg;\r\n    if (exceptionError === errorCode.INVALID_OPCODE) {\r\n        msg = '\\t\\n\\tThe execution might have thrown.\\n';\r\n        ret.error = true;\r\n    }\r\n    else if (exceptionError === errorCode.OUT_OF_GAS) {\r\n        msg = '\\tThe transaction ran out of gas. Please increase the Gas Limit.\\n';\r\n        ret.error = true;\r\n    }\r\n    else if (exceptionError === errorCode.REVERT) {\r\n        const returnData = txResult.result.execResult.returnValue;\r\n        // It is the hash of Error(string)\r\n        if (returnData && (returnData.slice(0, 4).toString('hex') === '08c379a0')) {\r\n            const abiCoder = new ethers_1.ethers.utils.AbiCoder();\r\n            const reason = abiCoder.decode(['string'], returnData.slice(4))[0];\r\n            msg = `\\tThe transaction has been reverted to the initial state.\\nReason provided by the contract: \"${reason}\".`;\r\n        }\r\n        else {\r\n            msg = '\\tThe transaction has been reverted to the initial state.\\nNote: The called function should be payable if you send value and the value you send should be less than your current balance.';\r\n        }\r\n        ret.error = true;\r\n    }\r\n    else if (exceptionError === errorCode.STATIC_STATE_CHANGE) {\r\n        msg = '\\tState changes is not allowed in Static Call context\\n';\r\n        ret.error = true;\r\n    }\r\n    ret.message = `${error}${exceptionError}${msg}\\tDebug the transaction to get more information.`;\r\n    return ret;\r\n}\r\nexports.checkVMError = checkVMError;\r\n//# sourceMappingURL=txExecution.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ethers_1 = require(\"ethers\");\r\nconst txHelper_1 = require(\"./txHelper\");\r\nconst async_1 = require(\"async\");\r\nconst linker_1 = require(\"solc/linker\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\n/**\r\n  * build the transaction data\r\n  *\r\n  * @param {Object} function abi\r\n  * @param {Object} values to encode\r\n  * @param {String} contractbyteCode\r\n  */\r\nfunction encodeData(funABI, values, contractbyteCode) {\r\n    let encoded;\r\n    let encodedHex;\r\n    try {\r\n        encoded = txHelper_1.encodeParams(funABI, values);\r\n        encodedHex = encoded.toString('hex');\r\n    }\r\n    catch (e) {\r\n        return { error: 'cannot encode arguments' };\r\n    }\r\n    if (contractbyteCode) {\r\n        return { data: '0x' + contractbyteCode + encodedHex.replace('0x', '') };\r\n    }\r\n    else {\r\n        return { data: txHelper_1.encodeFunctionId(funABI) + encodedHex.replace('0x', '') };\r\n    }\r\n}\r\nexports.encodeData = encodeData;\r\n/**\r\n* encode function / constructor parameters\r\n*\r\n* @param {Object} params    - input paramater of the function to call\r\n* @param {Object} funAbi    - abi definition of the function to call. null if building data for the ctor.\r\n* @param {Function} callback    - callback\r\n*/\r\nfunction encodeParams(params, funAbi, callback) {\r\n    let data = '';\r\n    let dataHex = '';\r\n    let funArgs;\r\n    if (params.indexOf('raw:0x') === 0) {\r\n        // in that case we consider that the input is already encoded and *does not* contain the method signature\r\n        dataHex = params.replace('raw:0x', '');\r\n        data = Buffer.from(dataHex, 'hex');\r\n    }\r\n    else {\r\n        try {\r\n            params = params.replace(/(^|,\\s+|,)(\\d+)(\\s+,|,|$)/g, '$1\"$2\"$3'); // replace non quoted number by quoted number\r\n            params = params.replace(/(^|,\\s+|,)(0[xX][0-9a-fA-F]+)(\\s+,|,|$)/g, '$1\"$2\"$3'); // replace non quoted hex string by quoted hex string\r\n            funArgs = JSON.parse('[' + params + ']');\r\n        }\r\n        catch (e) {\r\n            return callback('Error encoding arguments: ' + e);\r\n        }\r\n        if (funArgs.length > 0) {\r\n            try {\r\n                data = txHelper_1.encodeParams(funAbi, funArgs);\r\n                dataHex = data.toString();\r\n            }\r\n            catch (e) {\r\n                return callback('Error encoding arguments: ' + e);\r\n            }\r\n        }\r\n        if (data.slice(0, 9) === 'undefined') {\r\n            dataHex = data.slice(9);\r\n        }\r\n        if (data.slice(0, 2) === '0x') {\r\n            dataHex = data.slice(2);\r\n        }\r\n    }\r\n    callback(null, { data: data, dataHex: dataHex, funArgs: funArgs });\r\n}\r\nexports.encodeParams = encodeParams;\r\n/**\r\n* encode function call (function id + encoded parameters)\r\n*\r\n* @param {Object} params    - input paramater of the function to call\r\n* @param {Object} funAbi    - abi definition of the function to call. null if building data for the ctor.\r\n* @param {Function} callback    - callback\r\n*/\r\nfunction encodeFunctionCall(params, funAbi, callback) {\r\n    this.encodeParams(params, funAbi, (error, encodedParam) => {\r\n        if (error)\r\n            return callback(error);\r\n        callback(null, { dataHex: txHelper_1.encodeFunctionId(funAbi) + encodedParam.dataHex, funAbi, funArgs: encodedParam.funArgs });\r\n    });\r\n}\r\nexports.encodeFunctionCall = encodeFunctionCall;\r\n/**\r\n* encode constructor creation and link with provided libraries if needed\r\n*\r\n* @param {Object} contract    - input paramater of the function to call\r\n* @param {Object} params    - input paramater of the function to call\r\n* @param {Object} funAbi    - abi definition of the function to call. null if building data for the ctor.\r\n* @param {Object} linkLibraries    - contains {linkReferences} object which list all the addresses to be linked\r\n* @param {Object} linkReferences    - given by the compiler, contains the proper linkReferences\r\n* @param {Function} callback    - callback\r\n*/\r\nfunction encodeConstructorCallAndLinkLibraries(contract, params, funAbi, linkLibraries, linkReferences, callback) {\r\n    this.encodeParams(params, funAbi, (error, encodedParam) => {\r\n        if (error)\r\n            return callback(error);\r\n        let bytecodeToDeploy = contract.evm.bytecode.object;\r\n        if (bytecodeToDeploy.indexOf('_') >= 0) {\r\n            if (linkLibraries && linkReferences) {\r\n                for (const libFile in linkLibraries) {\r\n                    for (const lib in linkLibraries[libFile]) {\r\n                        const address = linkLibraries[libFile][lib];\r\n                        if (!ethereumjs_util_1.isValidAddress(address))\r\n                            return callback(address + ' is not a valid address. Please check the provided address is valid.');\r\n                        bytecodeToDeploy = this.linkLibraryStandardFromlinkReferences(lib, address.replace('0x', ''), bytecodeToDeploy, linkReferences);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (bytecodeToDeploy.indexOf('_') >= 0) {\r\n            return callback('Failed to link some libraries');\r\n        }\r\n        return callback(null, { dataHex: bytecodeToDeploy + encodedParam.dataHex, funAbi, funArgs: encodedParam.funArgs, contractBytecode: contract.evm.bytecode.object });\r\n    });\r\n}\r\nexports.encodeConstructorCallAndLinkLibraries = encodeConstructorCallAndLinkLibraries;\r\n/**\r\n* encode constructor creation and deploy librairies if needed\r\n*\r\n* @param {String} contractName    - current contract name\r\n* @param {Object} contract    - input paramater of the function to call\r\n* @param {Object} contracts    - map of all compiled contracts.\r\n* @param {Object} params    - input paramater of the function to call\r\n* @param {Object} funAbi    - abi definition of the function to call. null if building data for the ctor.\r\n* @param {Function} callback    - callback\r\n* @param {Function} callbackStep  - callbackStep\r\n* @param {Function} callbackDeployLibrary  - callbackDeployLibrary\r\n* @param {Function} callback    - callback\r\n*/\r\nfunction encodeConstructorCallAndDeployLibraries(contractName, contract, contracts, params, funAbi, callback, callbackStep, callbackDeployLibrary) {\r\n    this.encodeParams(params, funAbi, (error, encodedParam) => {\r\n        if (error)\r\n            return callback(error);\r\n        let dataHex = '';\r\n        const contractBytecode = contract.evm.bytecode.object;\r\n        let bytecodeToDeploy = contract.evm.bytecode.object;\r\n        if (bytecodeToDeploy.indexOf('_') >= 0) {\r\n            this.linkBytecode(contract, contracts, (err, bytecode) => {\r\n                if (err) {\r\n                    callback('Error deploying required libraries: ' + err);\r\n                }\r\n                else {\r\n                    bytecodeToDeploy = bytecode + dataHex;\r\n                    return callback(null, { dataHex: bytecodeToDeploy, funAbi, funArgs: encodedParam.funArgs, contractBytecode, contractName: contractName });\r\n                }\r\n            }, callbackStep, callbackDeployLibrary);\r\n            return;\r\n        }\r\n        else {\r\n            dataHex = bytecodeToDeploy + encodedParam.dataHex;\r\n        }\r\n        callback(null, { dataHex: bytecodeToDeploy, funAbi, funArgs: encodedParam.funArgs, contractBytecode, contractName: contractName });\r\n    });\r\n}\r\nexports.encodeConstructorCallAndDeployLibraries = encodeConstructorCallAndDeployLibraries;\r\n/**\r\n* (DEPRECATED) build the transaction data\r\n*\r\n* @param {String} contractName\r\n* @param {Object} contract    - abi definition of the current contract.\r\n* @param {Object} contracts    - map of all compiled contracts.\r\n* @param {Bool} isConstructor    - isConstructor.\r\n* @param {Object} funAbi    - abi definition of the function to call. null if building data for the ctor.\r\n* @param {Object} params    - input paramater of the function to call\r\n* @param {Function} callback    - callback\r\n* @param {Function} callbackStep  - callbackStep\r\n* @param {Function} callbackDeployLibrary  - callbackDeployLibrary\r\n*/\r\nfunction buildData(contractName, contract, contracts, isConstructor, funAbi, params, callback, callbackStep, callbackDeployLibrary) {\r\n    let funArgs = [];\r\n    let data = '';\r\n    let dataHex = '';\r\n    if (params.indexOf('raw:0x') === 0) {\r\n        // in that case we consider that the input is already encoded and *does not* contain the method signature\r\n        dataHex = params.replace('raw:0x', '');\r\n        data = Buffer.from(dataHex, 'hex');\r\n    }\r\n    else {\r\n        try {\r\n            if (params.length > 0) {\r\n                funArgs = this.parseFunctionParams(params);\r\n            }\r\n        }\r\n        catch (e) {\r\n            return callback('Error encoding arguments: ' + e);\r\n        }\r\n        try {\r\n            data = txHelper_1.encodeParams(funAbi, funArgs);\r\n            dataHex = data.toString();\r\n        }\r\n        catch (e) {\r\n            return callback('Error encoding arguments: ' + e);\r\n        }\r\n        if (data.slice(0, 9) === 'undefined') {\r\n            dataHex = data.slice(9);\r\n        }\r\n        if (data.slice(0, 2) === '0x') {\r\n            dataHex = data.slice(2);\r\n        }\r\n    }\r\n    let contractBytecode;\r\n    if (isConstructor) {\r\n        contractBytecode = contract.evm.bytecode.object;\r\n        let bytecodeToDeploy = contract.evm.bytecode.object;\r\n        if (bytecodeToDeploy.indexOf('_') >= 0) {\r\n            this.linkBytecode(contract, contracts, (err, bytecode) => {\r\n                if (err) {\r\n                    callback('Error deploying required libraries: ' + err);\r\n                }\r\n                else {\r\n                    bytecodeToDeploy = bytecode + dataHex;\r\n                    return callback(null, { dataHex: bytecodeToDeploy, funAbi, funArgs, contractBytecode, contractName: contractName });\r\n                }\r\n            }, callbackStep, callbackDeployLibrary);\r\n            return;\r\n        }\r\n        else {\r\n            dataHex = bytecodeToDeploy + dataHex;\r\n        }\r\n    }\r\n    else {\r\n        dataHex = txHelper_1.encodeFunctionId(funAbi) + dataHex;\r\n    }\r\n    callback(null, { dataHex, funAbi, funArgs, contractBytecode, contractName: contractName });\r\n}\r\nexports.buildData = buildData;\r\nfunction atAddress() { }\r\nexports.atAddress = atAddress;\r\nfunction linkBytecodeStandard(contract, contracts, callback, callbackStep, callbackDeployLibrary) {\r\n    let contractBytecode = contract.evm.bytecode.object;\r\n    async_1.eachOfSeries(contract.evm.bytecode.linkReferences, (libs, file, cbFile) => {\r\n        async_1.eachOfSeries(contract.evm.bytecode.linkReferences[file], (libRef, libName, cbLibDeployed) => {\r\n            const library = contracts[file][libName];\r\n            if (library) {\r\n                this.deployLibrary(file + ':' + libName, libName, library, contracts, (error, address) => {\r\n                    if (error) {\r\n                        return cbLibDeployed(error);\r\n                    }\r\n                    let hexAddress = address.toString('hex');\r\n                    if (hexAddress.slice(0, 2) === '0x') {\r\n                        hexAddress = hexAddress.slice(2);\r\n                    }\r\n                    contractBytecode = this.linkLibraryStandard(libName, hexAddress, contractBytecode, contract);\r\n                    cbLibDeployed();\r\n                }, callbackStep, callbackDeployLibrary);\r\n            }\r\n            else {\r\n                cbLibDeployed('Cannot find compilation data of library ' + libName);\r\n            }\r\n        }, (error) => {\r\n            cbFile(error);\r\n        });\r\n    }, (error) => {\r\n        if (error) {\r\n            callbackStep(error);\r\n        }\r\n        callback(error, contractBytecode);\r\n    });\r\n}\r\nexports.linkBytecodeStandard = linkBytecodeStandard;\r\nfunction linkBytecodeLegacy(contract, contracts, callback, callbackStep, callbackDeployLibrary) {\r\n    const libraryRefMatch = contract.evm.bytecode.object.match(/__([^_]{1,36})__/);\r\n    if (!libraryRefMatch) {\r\n        return callback('Invalid bytecode format.');\r\n    }\r\n    const libraryName = libraryRefMatch[1];\r\n    // file_name:library_name\r\n    const libRef = libraryName.match(/(.*):(.*)/);\r\n    if (!libRef) {\r\n        return callback('Cannot extract library reference ' + libraryName);\r\n    }\r\n    if (!contracts[libRef[1]] || !contracts[libRef[1]][libRef[2]]) {\r\n        return callback('Cannot find library reference ' + libraryName);\r\n    }\r\n    const libraryShortName = libRef[2];\r\n    const library = contracts[libRef[1]][libraryShortName];\r\n    if (!library) {\r\n        return callback('Library ' + libraryName + ' not found.');\r\n    }\r\n    this.deployLibrary(libraryName, libraryShortName, library, contracts, (err, address) => {\r\n        if (err) {\r\n            return callback(err);\r\n        }\r\n        let hexAddress = address.toString('hex');\r\n        if (hexAddress.slice(0, 2) === '0x') {\r\n            hexAddress = hexAddress.slice(2);\r\n        }\r\n        contract.evm.bytecode.object = this.linkLibrary(libraryName, hexAddress, contract.evm.bytecode.object);\r\n        this.linkBytecode(contract, contracts, callback, callbackStep, callbackDeployLibrary);\r\n    }, callbackStep, callbackDeployLibrary);\r\n}\r\nexports.linkBytecodeLegacy = linkBytecodeLegacy;\r\nfunction linkBytecode(contract, contracts, callback, callbackStep, callbackDeployLibrary) {\r\n    if (contract.evm.bytecode.object.indexOf('_') < 0) {\r\n        return callback(null, contract.evm.bytecode.object);\r\n    }\r\n    if (contract.evm.bytecode.linkReferences && Object.keys(contract.evm.bytecode.linkReferences).length) {\r\n        this.linkBytecodeStandard(contract, contracts, callback, callbackStep, callbackDeployLibrary);\r\n    }\r\n    else {\r\n        this.linkBytecodeLegacy(contract, contracts, callback, callbackStep, callbackDeployLibrary);\r\n    }\r\n}\r\nexports.linkBytecode = linkBytecode;\r\nfunction deployLibrary(libraryName, libraryShortName, library, contracts, callback, callbackStep, callbackDeployLibrary) {\r\n    const address = library.address;\r\n    if (address) {\r\n        return callback(null, address);\r\n    }\r\n    const bytecode = library.evm.bytecode.object;\r\n    if (bytecode.indexOf('_') >= 0) {\r\n        this.linkBytecode(library, contracts, (err, bytecode) => {\r\n            if (err)\r\n                callback(err);\r\n            else {\r\n                library.evm.bytecode.object = bytecode;\r\n                this.deployLibrary(libraryName, libraryShortName, library, contracts, callback, callbackStep, callbackDeployLibrary);\r\n            }\r\n        }, callbackStep, callbackDeployLibrary);\r\n    }\r\n    else {\r\n        callbackStep(`creation of library ${libraryName} pending...`);\r\n        const data = { dataHex: bytecode, funAbi: { type: 'constructor' }, funArgs: [], contractBytecode: bytecode, contractName: libraryShortName };\r\n        callbackDeployLibrary({ data: data, useCall: false }, (err, txResult) => {\r\n            if (err) {\r\n                return callback(err);\r\n            }\r\n            const address = txResult.result.createdAddress || txResult.result.contractAddress;\r\n            library.address = address;\r\n            callback(err, address);\r\n        });\r\n    }\r\n}\r\nexports.deployLibrary = deployLibrary;\r\nfunction linkLibraryStandardFromlinkReferences(libraryName, address, bytecode, linkReferences) {\r\n    for (const file in linkReferences) {\r\n        for (const libName in linkReferences[file]) {\r\n            if (libraryName === libName) {\r\n                bytecode = this.setLibraryAddress(address, bytecode, linkReferences[file][libName]);\r\n            }\r\n        }\r\n    }\r\n    return bytecode;\r\n}\r\nexports.linkLibraryStandardFromlinkReferences = linkLibraryStandardFromlinkReferences;\r\nfunction linkLibraryStandard(libraryName, address, bytecode, contract) {\r\n    return this.linkLibraryStandardFromlinkReferences(libraryName, address, bytecode, contract.evm.bytecode.linkReferences);\r\n}\r\nexports.linkLibraryStandard = linkLibraryStandard;\r\nfunction setLibraryAddress(address, bytecodeToLink, positions) {\r\n    if (positions) {\r\n        for (const pos of positions) {\r\n            const regpos = bytecodeToLink.match(new RegExp(`(.{${2 * pos.start}})(.{${2 * pos.length}})(.*)`));\r\n            if (regpos) {\r\n                bytecodeToLink = regpos[1] + address + regpos[3];\r\n            }\r\n        }\r\n    }\r\n    return bytecodeToLink;\r\n}\r\nexports.setLibraryAddress = setLibraryAddress;\r\nfunction linkLibrary(libraryName, address, bytecodeToLink) {\r\n    return linker_1.linkBytecode(bytecodeToLink, { [libraryName]: ethereumjs_util_1.addHexPrefix(address) });\r\n}\r\nexports.linkLibrary = linkLibrary;\r\nfunction decodeResponse(response, fnabi) {\r\n    // Only decode if there supposed to be fields\r\n    if (fnabi.outputs && fnabi.outputs.length > 0) {\r\n        try {\r\n            let i;\r\n            const outputTypes = [];\r\n            for (i = 0; i < fnabi.outputs.length; i++) {\r\n                const type = fnabi.outputs[i].type;\r\n                outputTypes.push(type.indexOf('tuple') === 0 ? txHelper_1.makeFullTypeDefinition(fnabi.outputs[i]) : type);\r\n            }\r\n            if (!response.length)\r\n                response = new Uint8Array(32 * fnabi.outputs.length); // ensuring the data is at least filled by 0 cause `AbiCoder` throws if there's not engouh data\r\n            // decode data\r\n            const abiCoder = new ethers_1.ethers.utils.AbiCoder();\r\n            const decodedObj = abiCoder.decode(outputTypes, response);\r\n            const json = {};\r\n            for (i = 0; i < outputTypes.length; i++) {\r\n                const name = fnabi.outputs[i].name;\r\n                json[i] = outputTypes[i] + ': ' + (name ? name + ' ' + decodedObj[i] : decodedObj[i]);\r\n            }\r\n            return json;\r\n        }\r\n        catch (e) {\r\n            return { error: 'Failed to decode output: ' + e };\r\n        }\r\n    }\r\n    return {};\r\n}\r\nexports.decodeResponse = decodeResponse;\r\nfunction parseFunctionParams(params) {\r\n    let args = [];\r\n    // Check if parameter string starts with array or string\r\n    let startIndex = this.isArrayOrStringStart(params, 0) ? -1 : 0;\r\n    for (let i = 0; i < params.length; i++) {\r\n        // If a quote is received\r\n        if (params.charAt(i) === '\"') {\r\n            startIndex = -1;\r\n            let endQuoteIndex = false;\r\n            // look for closing quote. On success, push the complete string in arguments list\r\n            for (let j = i + 1; !endQuoteIndex; j++) {\r\n                if (params.charAt(j) === '\"') {\r\n                    args.push(params.substring(i + 1, j));\r\n                    endQuoteIndex = true;\r\n                    i = j;\r\n                }\r\n                // Throw error if end of params string is arrived but couldn't get end quote\r\n                if (!endQuoteIndex && j === params.length - 1) {\r\n                    throw new Error('invalid params');\r\n                }\r\n            }\r\n        }\r\n        else if (params.charAt(i) === '[') { // If an array/struct opening bracket is received\r\n            startIndex = -1;\r\n            let bracketCount = 1;\r\n            let j;\r\n            for (j = i + 1; bracketCount !== 0; j++) {\r\n                // Increase count if another array opening bracket is received (To handle nested array)\r\n                if (params.charAt(j) === '[') {\r\n                    bracketCount++;\r\n                }\r\n                else if (params.charAt(j) === ']') { // // Decrease count if an array closing bracket is received (To handle nested array)\r\n                    bracketCount--;\r\n                }\r\n                // Throw error if end of params string is arrived but couldn't get end of tuple\r\n                if (bracketCount !== 0 && j === params.length - 1) {\r\n                    throw new Error('invalid tuple params');\r\n                }\r\n            }\r\n            // If bracketCount = 0, it means complete array/nested array parsed, push it to the arguments list\r\n            args.push(JSON.parse(params.substring(i, j)));\r\n            i = j - 1;\r\n        }\r\n        else if (params.charAt(i) === ',') {\r\n            // if startIndex >= 0, it means a parameter was being parsed, it can be first or other parameter\r\n            if (startIndex >= 0) {\r\n                args.push(params.substring(startIndex, i));\r\n            }\r\n            // Register start index of a parameter to parse\r\n            startIndex = this.isArrayOrStringStart(params, i + 1) ? -1 : i + 1;\r\n        }\r\n        else if (startIndex >= 0 && i === params.length - 1) {\r\n            // If start index is registered and string is completed (To handle last parameter)\r\n            args.push(params.substring(startIndex, params.length));\r\n        }\r\n    }\r\n    args = args.map(e => {\r\n        if (!Array.isArray(e)) {\r\n            return e.trim();\r\n        }\r\n        else {\r\n            return e;\r\n        }\r\n    });\r\n    return args;\r\n}\r\nexports.parseFunctionParams = parseFunctionParams;\r\nfunction isArrayOrStringStart(str, index) {\r\n    return str.charAt(index) === '\"' || str.charAt(index) === '[';\r\n}\r\nexports.isArrayOrStringStart = isArrayOrStringStart;\r\n//# sourceMappingURL=txFormat.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ethers_1 = require(\"ethers\");\r\nfunction makeFullTypeDefinition(typeDef) {\r\n    if (typeDef && typeDef.type.indexOf('tuple') === 0 && typeDef.components) {\r\n        const innerTypes = typeDef.components.map((innerType) => { return this.makeFullTypeDefinition(innerType); });\r\n        return `tuple(${innerTypes.join(',')})${this.extractSize(typeDef.type)}`;\r\n    }\r\n    return typeDef.type;\r\n}\r\nexports.makeFullTypeDefinition = makeFullTypeDefinition;\r\nfunction encodeParams(funABI, args) {\r\n    const types = [];\r\n    if (funABI.inputs && funABI.inputs.length) {\r\n        for (let i = 0; i < funABI.inputs.length; i++) {\r\n            const type = funABI.inputs[i].type;\r\n            // \"false\" will be converting to `false` and \"true\" will be working\r\n            // fine as abiCoder assume anything in quotes as `true`\r\n            if (type === 'bool' && args[i] === 'false') {\r\n                args[i] = false;\r\n            }\r\n            types.push(type.indexOf('tuple') === 0 ? this.makeFullTypeDefinition(funABI.inputs[i]) : type);\r\n            if (args.length < types.length) {\r\n                args.push('');\r\n            }\r\n        }\r\n    }\r\n    // NOTE: the caller will concatenate the bytecode and this\r\n    //       it could be done here too for consistency\r\n    const abiCoder = new ethers_1.ethers.utils.AbiCoder();\r\n    return abiCoder.encode(types, args);\r\n}\r\nexports.encodeParams = encodeParams;\r\nfunction encodeFunctionId(funABI) {\r\n    if (funABI.type === 'fallback' || funABI.type === 'receive')\r\n        return '0x';\r\n    const abi = new ethers_1.ethers.utils.Interface([funABI]);\r\n    return abi.getSighash(funABI.name);\r\n}\r\nexports.encodeFunctionId = encodeFunctionId;\r\nfunction sortAbiFunction(contractabi) {\r\n    // Check if function is constant (introduced with Solidity 0.6.0)\r\n    const isConstant = ({ stateMutability }) => stateMutability === 'view' || stateMutability === 'pure';\r\n    // Sorts the list of ABI entries. Constant functions will appear first,\r\n    // followed by non-constant functions. Within those t wo groupings, functions\r\n    // will be sorted by their names.\r\n    return contractabi.sort(function (a, b) {\r\n        if (isConstant(a) && !isConstant(b)) {\r\n            return 1;\r\n        }\r\n        else if (isConstant(b) && !isConstant(a)) {\r\n            return -1;\r\n        }\r\n        // If we reach here, either a and b are both constant or both not; sort by name then\r\n        // special case for fallback, receive and constructor function\r\n        if (a.type === 'function' && typeof a.name !== 'undefined') {\r\n            return a.name.localeCompare(b.name);\r\n        }\r\n        else if (a.type === 'constructor' || a.type === 'fallback' || a.type === 'receive') {\r\n            return 1;\r\n        }\r\n    });\r\n}\r\nexports.sortAbiFunction = sortAbiFunction;\r\nfunction getConstructorInterface(abi) {\r\n    const funABI = { name: '', inputs: [], type: 'constructor', payable: false, outputs: [] };\r\n    if (typeof abi === 'string') {\r\n        try {\r\n            abi = JSON.parse(abi);\r\n        }\r\n        catch (e) {\r\n            console.log('exception retrieving ctor abi ' + abi);\r\n            return funABI;\r\n        }\r\n    }\r\n    for (let i = 0; i < abi.length; i++) {\r\n        if (abi[i].type === 'constructor') {\r\n            funABI.inputs = abi[i].inputs || [];\r\n            funABI.payable = abi[i].payable;\r\n            funABI['stateMutability'] = abi[i].stateMutability;\r\n            break;\r\n        }\r\n    }\r\n    return funABI;\r\n}\r\nexports.getConstructorInterface = getConstructorInterface;\r\nfunction serializeInputs(fnAbi) {\r\n    let serialized = '(';\r\n    if (fnAbi.inputs && fnAbi.inputs.length) {\r\n        serialized += fnAbi.inputs.map((input) => { return input.type; }).join(',');\r\n    }\r\n    serialized += ')';\r\n    return serialized;\r\n}\r\nexports.serializeInputs = serializeInputs;\r\nfunction extractSize(type) {\r\n    const size = type.match(/([a-zA-Z0-9])(\\[.*\\])/);\r\n    return size ? size[2] : '';\r\n}\r\nexports.extractSize = extractSize;\r\nfunction getFunction(abi, fnName) {\r\n    for (let i = 0; i < abi.length; i++) {\r\n        const fn = abi[i];\r\n        if (fn.type === 'function' && fnName === fn.name + '(' + fn.inputs.map((value) => {\r\n            if (value.components) {\r\n                const fullType = this.makeFullTypeDefinition(value);\r\n                return fullType.replace(/tuple/g, ''); // return of makeFullTypeDefinition might contain `tuple`, need to remove it cause `methodIdentifier` (fnName) does not include `tuple` keyword\r\n            }\r\n            else {\r\n                return value.type;\r\n            }\r\n        }).join(',') + ')') {\r\n            return fn;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexports.getFunction = getFunction;\r\nfunction getFallbackInterface(abi) {\r\n    for (let i = 0; i < abi.length; i++) {\r\n        if (abi[i].type === 'fallback') {\r\n            return abi[i];\r\n        }\r\n    }\r\n}\r\nexports.getFallbackInterface = getFallbackInterface;\r\nfunction getReceiveInterface(abi) {\r\n    for (let i = 0; i < abi.length; i++) {\r\n        if (abi[i].type === 'receive') {\r\n            return abi[i];\r\n        }\r\n    }\r\n}\r\nexports.getReceiveInterface = getReceiveInterface;\r\n/**\r\n  * return the contract obj of the given @arg name. Uses last compilation result.\r\n  * return null if not found\r\n  * @param {String} name    - contract name\r\n  * @returns contract obj and associated file: { contract, file } or null\r\n  */\r\nfunction getContract(contractName, contracts) {\r\n    for (const file in contracts) {\r\n        if (contracts[file][contractName]) {\r\n            return { object: contracts[file][contractName], file: file };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexports.getContract = getContract;\r\n/**\r\n  * call the given @arg cb (function) for all the contracts. Uses last compilation result\r\n  * stop visiting when cb return true\r\n  * @param {Function} cb    - callback\r\n  */\r\nfunction visitContracts(contracts, cb) {\r\n    for (const file in contracts) {\r\n        for (const name in contracts[file]) {\r\n            if (cb({ name: name, object: contracts[file][name], file: file }))\r\n                return;\r\n        }\r\n    }\r\n}\r\nexports.visitContracts = visitContracts;\r\nfunction inputParametersDeclarationToString(abiinputs) {\r\n    const inputs = (abiinputs || []).map((inp) => inp.type + ' ' + inp.name);\r\n    return inputs.join(', ');\r\n}\r\nexports.inputParametersDeclarationToString = inputParametersDeclarationToString;\r\n//# sourceMappingURL=txHelper.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst async_1 = require(\"async\");\r\nconst ethers_1 = require(\"ethers\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst eventManager_1 = require(\"../eventManager\");\r\nconst util_1 = require(\"../util\");\r\nconst execution_context_1 = require(\"./execution-context\");\r\nconst txFormat_1 = require(\"./txFormat\");\r\nconst txHelper_1 = require(\"./txHelper\");\r\nfunction addExecutionCosts(txResult, tx) {\r\n    if (txResult && txResult.result) {\r\n        if (txResult.result.execResult) {\r\n            tx.returnValue = txResult.result.execResult.returnValue;\r\n            if (txResult.result.execResult.gasUsed)\r\n                tx.executionCost = txResult.result.execResult.gasUsed.toString(10);\r\n        }\r\n        if (txResult.result.gasUsed)\r\n            tx.transactionCost = txResult.result.gasUsed.toString(10);\r\n    }\r\n}\r\n/**\r\n  * poll web3 each 2s if web3\r\n  * listen on transaction executed event if VM\r\n  * attention: blocks returned by the event `newBlock` have slightly different json properties whether web3 or the VM is used\r\n  * trigger 'newBlock'\r\n  *\r\n  */\r\nclass TxListener {\r\n    constructor(opt, executionContext) {\r\n        this.event = new eventManager_1.EventManager();\r\n        // has a default for now for backwards compatability\r\n        this.executionContext = executionContext || new execution_context_1.ExecutionContext();\r\n        this._api = opt.api;\r\n        this._resolvedTransactions = {};\r\n        this._resolvedContracts = {};\r\n        this._isListening = false;\r\n        this._listenOnNetwork = false;\r\n        this._loopId = null;\r\n        this.init();\r\n        this.executionContext.event.register('contextChanged', (context) => {\r\n            if (this._isListening) {\r\n                this.stopListening();\r\n                this.startListening();\r\n            }\r\n        });\r\n        opt.event.udapp.register('callExecuted', (error, from, to, data, lookupOnly, txResult) => {\r\n            if (error)\r\n                return;\r\n            // we go for that case if\r\n            // in VM mode\r\n            // in web3 mode && listen remix txs only\r\n            if (!this._isListening)\r\n                return; // we don't listen\r\n            if (this._loopId && this.executionContext.getProvider() !== 'vm')\r\n                return; // we seems to already listen on a \"web3\" network\r\n            const call = {\r\n                from: from,\r\n                to: to,\r\n                input: data,\r\n                hash: txResult.transactionHash ? txResult.transactionHash : 'call' + (from || '') + to + data,\r\n                isCall: true,\r\n                returnValue: this.executionContext.isVM() ? txResult.result.execResult.returnValue : ethereumjs_util_1.toBuffer(txResult.result),\r\n                envMode: this.executionContext.getProvider()\r\n            };\r\n            addExecutionCosts(txResult, call);\r\n            this._resolveTx(call, call, (error, resolvedData) => {\r\n                if (!error) {\r\n                    this.event.trigger('newCall', [call]);\r\n                }\r\n            });\r\n        });\r\n        opt.event.udapp.register('transactionExecuted', (error, from, to, data, lookupOnly, txResult) => {\r\n            if (error)\r\n                return;\r\n            if (lookupOnly)\r\n                return;\r\n            // we go for that case if\r\n            // in VM mode\r\n            // in web3 mode && listen remix txs only\r\n            if (!this._isListening)\r\n                return; // we don't listen\r\n            if (this._loopId && this.executionContext.getProvider() !== 'vm')\r\n                return; // we seems to already listen on a \"web3\" network\r\n            this.executionContext.web3().eth.getTransaction(txResult.transactionHash, (error, tx) => {\r\n                if (error)\r\n                    return console.log(error);\r\n                addExecutionCosts(txResult, tx);\r\n                tx.envMode = this.executionContext.getProvider();\r\n                tx.status = txResult.result.status; // 0x0 or 0x1\r\n                this._resolve([tx], () => {\r\n                });\r\n            });\r\n        });\r\n    }\r\n    /**\r\n      * define if txlistener should listen on the network or if only tx created from remix are managed\r\n      *\r\n      * @param {Bool} type - true if listen on the network\r\n      */\r\n    setListenOnNetwork(listenOnNetwork) {\r\n        this._listenOnNetwork = listenOnNetwork;\r\n        if (this._loopId) {\r\n            clearInterval(this._loopId);\r\n        }\r\n        if (this._listenOnNetwork) {\r\n            this._startListenOnNetwork();\r\n        }\r\n    }\r\n    /**\r\n      * reset recorded transactions\r\n      */\r\n    init() {\r\n        this.blocks = [];\r\n        this.lastBlock = null;\r\n    }\r\n    /**\r\n      * start listening for incoming transactions\r\n      *\r\n      * @param {String} type - type/name of the provider to add\r\n      * @param {Object} obj  - provider\r\n      */\r\n    startListening() {\r\n        this.init();\r\n        this._isListening = true;\r\n        if (this._listenOnNetwork && this.executionContext.getProvider() !== 'vm') {\r\n            this._startListenOnNetwork();\r\n        }\r\n    }\r\n    /**\r\n      * stop listening for incoming transactions. do not reset the recorded pool.\r\n      *\r\n      * @param {String} type - type/name of the provider to add\r\n      * @param {Object} obj  - provider\r\n      */\r\n    stopListening() {\r\n        if (this._loopId) {\r\n            clearInterval(this._loopId);\r\n        }\r\n        this._loopId = null;\r\n        this._isListening = false;\r\n    }\r\n    _startListenOnNetwork() {\r\n        this._loopId = setInterval(() => {\r\n            const currentLoopId = this._loopId;\r\n            this.executionContext.web3().eth.getBlockNumber((error, blockNumber) => {\r\n                if (this._loopId === null)\r\n                    return;\r\n                if (error)\r\n                    return console.log(error);\r\n                if (currentLoopId === this._loopId && (!this.lastBlock || blockNumber > this.lastBlock)) {\r\n                    if (!this.lastBlock)\r\n                        this.lastBlock = blockNumber - 1;\r\n                    let current = this.lastBlock + 1;\r\n                    this.lastBlock = blockNumber;\r\n                    while (blockNumber >= current) {\r\n                        try {\r\n                            this._manageBlock(current);\r\n                        }\r\n                        catch (e) {\r\n                            console.log(e);\r\n                        }\r\n                        current++;\r\n                    }\r\n                }\r\n            });\r\n        }, 2000);\r\n    }\r\n    _manageBlock(blockNumber) {\r\n        this.executionContext.web3().eth.getBlock(blockNumber, true, (error, result) => {\r\n            if (!error) {\r\n                this._newBlock(Object.assign({ type: 'web3' }, result));\r\n            }\r\n        });\r\n    }\r\n    /**\r\n      * try to resolve the contract name from the given @arg address\r\n      *\r\n      * @param {String} address - contract address to resolve\r\n      * @return {String} - contract name\r\n      */\r\n    resolvedContract(address) {\r\n        if (this._resolvedContracts[address])\r\n            return this._resolvedContracts[address].name;\r\n        return null;\r\n    }\r\n    /**\r\n      * try to resolve the transaction from the given @arg txHash\r\n      *\r\n      * @param {String} txHash - contract address to resolve\r\n      * @return {String} - contract name\r\n      */\r\n    resolvedTransaction(txHash) {\r\n        return this._resolvedTransactions[txHash];\r\n    }\r\n    _newBlock(block) {\r\n        this.blocks.push(block);\r\n        this._resolve(block.transactions, () => {\r\n            this.event.trigger('newBlock', [block]);\r\n        });\r\n    }\r\n    _resolve(transactions, callback) {\r\n        async_1.each(transactions, (tx, cb) => {\r\n            this._api.resolveReceipt(tx, (error, receipt) => {\r\n                if (error)\r\n                    return cb(error);\r\n                this._resolveTx(tx, receipt, (error, resolvedData) => {\r\n                    if (error)\r\n                        cb(error);\r\n                    if (resolvedData) {\r\n                        this.event.trigger('txResolved', [tx, receipt, resolvedData]);\r\n                    }\r\n                    this.event.trigger('newTransaction', [tx, receipt]);\r\n                    cb();\r\n                });\r\n            });\r\n        }, () => {\r\n            callback();\r\n        });\r\n    }\r\n    _resolveTx(tx, receipt, cb) {\r\n        const contracts = this._api.contracts();\r\n        if (!contracts)\r\n            return cb();\r\n        let fun;\r\n        let contract;\r\n        if (!tx.to || tx.to === '0x0') { // testrpc returns 0x0 in that case\r\n            // contract creation / resolve using the creation bytes code\r\n            // if web3: we have to call getTransactionReceipt to get the created address\r\n            // if VM: created address already included\r\n            const code = tx.input;\r\n            contract = this._tryResolveContract(code, contracts, true);\r\n            if (contract) {\r\n                const address = receipt.contractAddress;\r\n                this._resolvedContracts[address] = contract;\r\n                fun = this._resolveFunction(contract, tx, true);\r\n                if (this._resolvedTransactions[tx.hash]) {\r\n                    this._resolvedTransactions[tx.hash].contractAddress = address;\r\n                }\r\n                return cb(null, { to: null, contractName: contract.name, function: fun, creationAddress: address });\r\n            }\r\n            return cb();\r\n        }\r\n        else {\r\n            // first check known contract, resolve against the `runtimeBytecode` if not known\r\n            contract = this._resolvedContracts[tx.to];\r\n            if (!contract) {\r\n                this.executionContext.web3().eth.getCode(tx.to, (error, code) => {\r\n                    if (error)\r\n                        return cb(error);\r\n                    if (code) {\r\n                        const contract = this._tryResolveContract(code, contracts, false);\r\n                        if (contract) {\r\n                            this._resolvedContracts[tx.to] = contract;\r\n                            const fun = this._resolveFunction(contract, tx, false);\r\n                            return cb(null, { to: tx.to, contractName: contract.name, function: fun });\r\n                        }\r\n                    }\r\n                    return cb();\r\n                });\r\n                return;\r\n            }\r\n            if (contract) {\r\n                fun = this._resolveFunction(contract, tx, false);\r\n                return cb(null, { to: tx.to, contractName: contract.name, function: fun });\r\n            }\r\n            return cb();\r\n        }\r\n    }\r\n    _resolveFunction(contract, tx, isCtor) {\r\n        if (!contract) {\r\n            console.log('txListener: cannot resolve contract - contract is null');\r\n            return;\r\n        }\r\n        const abi = contract.object.abi;\r\n        const inputData = tx.input.replace('0x', '');\r\n        if (!isCtor) {\r\n            const methodIdentifiers = contract.object.evm.methodIdentifiers;\r\n            for (const fn in methodIdentifiers) {\r\n                if (methodIdentifiers[fn] === inputData.substring(0, 8)) {\r\n                    const fnabi = txHelper_1.getFunction(abi, fn);\r\n                    this._resolvedTransactions[tx.hash] = {\r\n                        contractName: contract.name,\r\n                        to: tx.to,\r\n                        fn: fn,\r\n                        params: this._decodeInputParams(inputData.substring(8), fnabi)\r\n                    };\r\n                    if (tx.returnValue) {\r\n                        this._resolvedTransactions[tx.hash].decodedReturnValue = txFormat_1.decodeResponse(tx.returnValue, fnabi);\r\n                    }\r\n                    return this._resolvedTransactions[tx.hash];\r\n                }\r\n            }\r\n            // receive function\r\n            if (!inputData && txHelper_1.getReceiveInterface(abi)) {\r\n                this._resolvedTransactions[tx.hash] = {\r\n                    contractName: contract.name,\r\n                    to: tx.to,\r\n                    fn: '(receive)',\r\n                    params: null\r\n                };\r\n            }\r\n            else {\r\n                // fallback function\r\n                this._resolvedTransactions[tx.hash] = {\r\n                    contractName: contract.name,\r\n                    to: tx.to,\r\n                    fn: '(fallback)',\r\n                    params: null\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            const bytecode = contract.object.evm.bytecode.object;\r\n            let params = null;\r\n            if (bytecode && bytecode.length) {\r\n                params = this._decodeInputParams(inputData.substring(bytecode.length), txHelper_1.getConstructorInterface(abi));\r\n            }\r\n            this._resolvedTransactions[tx.hash] = {\r\n                contractName: contract.name,\r\n                to: null,\r\n                fn: '(constructor)',\r\n                params: params\r\n            };\r\n        }\r\n        return this._resolvedTransactions[tx.hash];\r\n    }\r\n    _tryResolveContract(codeToResolve, compiledContracts, isCreation) {\r\n        let found = null;\r\n        txHelper_1.visitContracts(compiledContracts, (contract) => {\r\n            const bytes = isCreation ? contract.object.evm.bytecode.object : contract.object.evm.deployedBytecode.object;\r\n            if (util_1.compareByteCode(codeToResolve, '0x' + bytes)) {\r\n                found = contract;\r\n                return true;\r\n            }\r\n        });\r\n        return found;\r\n    }\r\n    _decodeInputParams(data, abi) {\r\n        data = ethereumjs_util_1.toBuffer('0x' + data);\r\n        if (!data.length)\r\n            data = new Uint8Array(32 * abi.inputs.length); // ensuring the data is at least filled by 0 cause `AbiCoder` throws if there's not engouh data\r\n        const inputTypes = [];\r\n        for (let i = 0; i < abi.inputs.length; i++) {\r\n            const type = abi.inputs[i].type;\r\n            inputTypes.push(type.indexOf('tuple') === 0 ? txHelper_1.makeFullTypeDefinition(abi.inputs[i]) : type);\r\n        }\r\n        const abiCoder = new ethers_1.ethers.utils.AbiCoder();\r\n        const decoded = abiCoder.decode(inputTypes, data);\r\n        const ret = {};\r\n        for (var k in abi.inputs) {\r\n            ret[abi.inputs[k].type + ' ' + abi.inputs[k].name] = decoded[k];\r\n        }\r\n        return ret;\r\n    }\r\n}\r\nexports.TxListener = TxListener;\r\n//# sourceMappingURL=txListener.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst ethereumjs_tx_1 = require(\"ethereumjs-tx\");\r\nconst ethereumjs_block_1 = tslib_1.__importDefault(require(\"ethereumjs-block\"));\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst execution_context_1 = require(\"./execution-context\");\r\nconst eventManager_1 = require(\"../eventManager\");\r\nclass TxRunner {\r\n    constructor(vmaccounts, api, executionContext) {\r\n        this.event = new eventManager_1.EventManager();\r\n        // has a default for now for backwards compatability\r\n        this.executionContext = executionContext || new execution_context_1.ExecutionContext();\r\n        this._api = api;\r\n        this.blockNumber = 0;\r\n        this.runAsync = true;\r\n        if (this.executionContext.isVM()) {\r\n            // this.blockNumber = 1150000 // The VM is running in Homestead mode, which started at this block.\r\n            this.blockNumber = 0; // The VM is running in Homestead mode, which started at this block.\r\n            this.runAsync = false; // We have to run like this cause the VM Event Manager does not support running multiple txs at the same time.\r\n        }\r\n        this.pendingTxs = {};\r\n        this.vmaccounts = vmaccounts;\r\n        this.queusTxs = [];\r\n        this.blocks = [];\r\n    }\r\n    rawRun(args, confirmationCb, gasEstimationForceSend, promptCb, cb) {\r\n        let timestamp = Date.now();\r\n        if (args.timestamp) {\r\n            timestamp = args.timestamp;\r\n        }\r\n        run(this, args, timestamp, confirmationCb, gasEstimationForceSend, promptCb, cb);\r\n    }\r\n    _executeTx(tx, gasPrice, api, promptCb, callback) {\r\n        if (gasPrice)\r\n            tx.gasPrice = this.executionContext.web3().utils.toHex(gasPrice);\r\n        if (api.personalMode()) {\r\n            promptCb((value) => {\r\n                this._sendTransaction(this.executionContext.web3().personal.sendTransaction, tx, value, callback);\r\n            }, () => {\r\n                return callback('Canceled by user.');\r\n            });\r\n        }\r\n        else {\r\n            this._sendTransaction(this.executionContext.web3().eth.sendTransaction, tx, null, callback);\r\n        }\r\n    }\r\n    _sendTransaction(sendTx, tx, pass, callback) {\r\n        const cb = (err, resp) => {\r\n            if (err) {\r\n                return callback(err, resp);\r\n            }\r\n            this.event.trigger('transactionBroadcasted', [resp]);\r\n            var listenOnResponse = () => {\r\n                // eslint-disable-next-line no-async-promise-executor\r\n                return new Promise((resolve, reject) => tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n                    const result = yield tryTillReceiptAvailable(resp, this.executionContext);\r\n                    tx = yield tryTillTxAvailable(resp, this.executionContext);\r\n                    resolve({\r\n                        result,\r\n                        tx,\r\n                        transactionHash: result ? result['transactionHash'] : null\r\n                    });\r\n                }));\r\n            };\r\n            listenOnResponse().then((txData) => { callback(null, txData); }).catch((error) => { callback(error); });\r\n        };\r\n        const args = pass !== null ? [tx, pass, cb] : [tx, cb];\r\n        try {\r\n            sendTx.apply({}, args);\r\n        }\r\n        catch (e) {\r\n            return callback(`Send transaction failed: ${e.message} . if you use an injected provider, please check it is properly unlocked. `);\r\n        }\r\n    }\r\n    execute(args, confirmationCb, gasEstimationForceSend, promptCb, callback) {\r\n        let data = args.data;\r\n        if (data.slice(0, 2) !== '0x') {\r\n            data = '0x' + data;\r\n        }\r\n        if (!this.executionContext.isVM()) {\r\n            return this.runInNode(args.from, args.to, data, args.value, args.gasLimit, args.useCall, confirmationCb, gasEstimationForceSend, promptCb, callback);\r\n        }\r\n        try {\r\n            this.runInVm(args.from, args.to, data, args.value, args.gasLimit, args.useCall, args.timestamp, callback);\r\n        }\r\n        catch (e) {\r\n            callback(e, null);\r\n        }\r\n    }\r\n    runInVm(from, to, data, value, gasLimit, useCall, timestamp, callback) {\r\n        const self = this;\r\n        const account = self.vmaccounts[from];\r\n        if (!account) {\r\n            return callback('Invalid account selected');\r\n        }\r\n        this.executionContext.vm().stateManager.getAccount(Buffer.from(from.replace('0x', ''), 'hex'), (err, res) => {\r\n            if (err) {\r\n                callback('Account not found');\r\n            }\r\n            else {\r\n                // See https://github.com/ethereumjs/ethereumjs-tx/blob/master/docs/classes/transaction.md#constructor\r\n                // for initialization fields and their types\r\n                value = value ? parseInt(value) : 0;\r\n                const tx = new ethereumjs_tx_1.Transaction({\r\n                    nonce: new ethereumjs_util_1.BN(res.nonce),\r\n                    gasPrice: '0x1',\r\n                    gasLimit: gasLimit,\r\n                    to: to,\r\n                    value: value,\r\n                    data: Buffer.from(data.slice(2), 'hex')\r\n                });\r\n                tx.sign(account.privateKey);\r\n                const coinbases = ['0x0e9281e9c6a0808672eaba6bd1220e144c9bb07a', '0x8945a1288dc78a6d8952a92c77aee6730b414778', '0x94d76e24f818426ae84aa404140e8d5f60e10e7e'];\r\n                const difficulties = [new ethereumjs_util_1.BN('69762765929000', 10), new ethereumjs_util_1.BN('70762765929000', 10), new ethereumjs_util_1.BN('71762765929000', 10)];\r\n                const block = new ethereumjs_block_1.default({\r\n                    header: {\r\n                        timestamp: timestamp || (new Date().getTime() / 1000 | 0),\r\n                        number: self.blockNumber,\r\n                        coinbase: coinbases[self.blockNumber % coinbases.length],\r\n                        difficulty: difficulties[self.blockNumber % difficulties.length],\r\n                        gasLimit: new ethereumjs_util_1.BN(gasLimit, 10).imuln(2)\r\n                    },\r\n                    transactions: [tx],\r\n                    uncleHeaders: []\r\n                });\r\n                if (!useCall) {\r\n                    ++self.blockNumber;\r\n                    this.runBlockInVm(tx, block, callback);\r\n                }\r\n                else {\r\n                    this.executionContext.vm().stateManager.checkpoint(() => {\r\n                        this.runBlockInVm(tx, block, (err, result) => {\r\n                            this.executionContext.vm().stateManager.revert(() => {\r\n                                callback(err, result);\r\n                            });\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n    runBlockInVm(tx, block, callback) {\r\n        this.executionContext.vm().runBlock({ block: block, generate: true, skipBlockValidation: true, skipBalance: false }).then((results) => {\r\n            const result = results.results[0];\r\n            if (result) {\r\n                const status = result.execResult.exceptionError ? 0 : 1;\r\n                result.status = `0x${status}`;\r\n            }\r\n            this.executionContext.addBlock(block);\r\n            this.executionContext.trackTx('0x' + tx.hash().toString('hex'), block);\r\n            callback(null, {\r\n                result: result,\r\n                transactionHash: ethereumjs_util_1.bufferToHex(Buffer.from(tx.hash()))\r\n            });\r\n        }).catch(function (err) {\r\n            callback(err);\r\n        });\r\n    }\r\n    runInNode(from, to, data, value, gasLimit, useCall, confirmCb, gasEstimationForceSend, promptCb, callback) {\r\n        const tx = { from: from, to: to, data: data, value: value };\r\n        if (useCall) {\r\n            tx['gas'] = gasLimit;\r\n            return this.executionContext.web3().eth.call(tx, function (error, result) {\r\n                callback(error, {\r\n                    result: result,\r\n                    transactionHash: result ? result.transactionHash : null\r\n                });\r\n            });\r\n        }\r\n        this.executionContext.web3().eth.estimateGas(tx, (err, gasEstimation) => {\r\n            if (err && err.message.indexOf('Invalid JSON RPC response') !== -1) {\r\n                // // @todo(#378) this should be removed when https://github.com/WalletConnect/walletconnect-monorepo/issues/334 is fixed\r\n                err = 'Gas estimation failed because of an unknown internal error. This may indicated that the transaction will fail.';\r\n            }\r\n            gasEstimationForceSend(err, () => {\r\n                // callback is called whenever no error\r\n                tx['gas'] = !gasEstimation ? gasLimit : gasEstimation;\r\n                if (this._api.config.getUnpersistedProperty('doNotShowTransactionConfirmationAgain')) {\r\n                    return this._executeTx(tx, null, this._api, promptCb, callback);\r\n                }\r\n                this._api.detectNetwork((err, network) => {\r\n                    if (err) {\r\n                        console.log(err);\r\n                        return;\r\n                    }\r\n                    confirmCb(network, tx, tx['gas'], (gasPrice) => {\r\n                        return this._executeTx(tx, gasPrice, this._api, promptCb, callback);\r\n                    }, (error) => {\r\n                        callback(error);\r\n                    });\r\n                });\r\n            }, () => {\r\n                const blockGasLimit = this.executionContext.currentblockGasLimit();\r\n                // NOTE: estimateGas very likely will return a large limit if execution of the code failed\r\n                //       we want to be able to run the code in order to debug and find the cause for the failure\r\n                if (err)\r\n                    return callback(err);\r\n                let warnEstimation = ' An important gas estimation might also be the sign of a problem in the contract code. Please check loops and be sure you did not sent value to a non payable function (that\\'s also the reason of strong gas estimation). ';\r\n                warnEstimation += ' ' + err;\r\n                if (gasEstimation > gasLimit) {\r\n                    return callback('Gas required exceeds limit: ' + gasLimit + '. ' + warnEstimation);\r\n                }\r\n                if (gasEstimation > blockGasLimit) {\r\n                    return callback('Gas required exceeds block gas limit: ' + gasLimit + '. ' + warnEstimation);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.TxRunner = TxRunner;\r\nfunction tryTillReceiptAvailable(txhash, executionContext) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        return new Promise((resolve, reject) => {\r\n            executionContext.web3().eth.getTransactionReceipt(txhash, (err, receipt) => tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n                if (err || !receipt) {\r\n                    // Try again with a bit of delay if error or if result still null\r\n                    yield pause();\r\n                    return resolve(yield tryTillReceiptAvailable(txhash, executionContext));\r\n                }\r\n                return resolve(receipt);\r\n            }));\r\n        });\r\n    });\r\n}\r\nfunction tryTillTxAvailable(txhash, executionContext) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        return new Promise((resolve, reject) => {\r\n            executionContext.web3().eth.getTransaction(txhash, (err, tx) => tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n                if (err || !tx) {\r\n                    // Try again with a bit of delay if error or if result still null\r\n                    yield pause();\r\n                    return resolve(yield tryTillTxAvailable(txhash, executionContext));\r\n                }\r\n                return resolve(tx);\r\n            }));\r\n        });\r\n    });\r\n}\r\nfunction pause() {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () { return new Promise((resolve, reject) => { setTimeout(resolve, 500); }); });\r\n}\r\nfunction run(self, tx, stamp, confirmationCb, gasEstimationForceSend = null, promptCb = null, callback = null) {\r\n    if (!self.runAsync && Object.keys(self.pendingTxs).length) {\r\n        return self.queusTxs.push({ tx, stamp, callback });\r\n    }\r\n    self.pendingTxs[stamp] = tx;\r\n    self.execute(tx, confirmationCb, gasEstimationForceSend, promptCb, function (error, result) {\r\n        delete self.pendingTxs[stamp];\r\n        if (callback && typeof callback === 'function')\r\n            callback(error, result);\r\n        if (self.queusTxs.length) {\r\n            const next = self.queusTxs.pop();\r\n            run(self, next.tx, next.stamp, next.callback);\r\n        }\r\n    });\r\n}\r\n//# sourceMappingURL=txRunner.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nfunction toInt(h) {\r\n    if (h.indexOf && h.indexOf('0x') === 0) {\r\n        return (new ethereumjs_util_1.BN(h.replace('0x', ''), 16)).toString(10);\r\n    }\r\n    else if ((h.constructor && h.constructor.name === 'BigNumber') || ethereumjs_util_1.BN.isBN(h)) {\r\n        return h.toString(10);\r\n    }\r\n    return h;\r\n}\r\nexports.toInt = toInt;\r\nexports.stringify = convertToString;\r\nfunction convertToString(v) {\r\n    try {\r\n        if (v instanceof Array) {\r\n            const ret = [];\r\n            for (var k in v) {\r\n                ret.push(convertToString(v[k]));\r\n            }\r\n            return ret;\r\n        }\r\n        else if (ethereumjs_util_1.BN.isBN(v) || (v.constructor && v.constructor.name === 'BigNumber')) {\r\n            return v.toString(10);\r\n        }\r\n        else if (v._isBuffer) {\r\n            return ethereumjs_util_1.bufferToHex(v);\r\n        }\r\n        else if (typeof v === 'object') {\r\n            const retObject = {};\r\n            for (const i in v) {\r\n                retObject[i] = convertToString(v[i]);\r\n            }\r\n            return retObject;\r\n        }\r\n        else {\r\n            return v;\r\n        }\r\n    }\r\n    catch (e) {\r\n        console.log(e);\r\n        return v;\r\n    }\r\n}\r\n//# sourceMappingURL=typeConversion.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction compilerInput(contracts) {\r\n    return JSON.stringify({\r\n        language: 'Solidity',\r\n        sources: {\r\n            'test.sol': {\r\n                content: contracts\r\n            }\r\n        },\r\n        settings: {\r\n            optimizer: {\r\n                enabled: false,\r\n                runs: 200\r\n            },\r\n            outputSelection: {\r\n                '*': {\r\n                    '': ['ast'],\r\n                    '*': ['abi', 'metadata', 'evm.legacyAssembly', 'evm.bytecode', 'evm.deployedBytecode', 'evm.methodIdentifiers', 'evm.gasEstimates']\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\nexports.compilerInput = compilerInput;\r\n//# sourceMappingURL=compilerHelper.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst ethjs_util_1 = require(\"ethjs-util\");\r\nfunction convertToPrefixedHex(input) {\r\n    if (input === undefined || input === null || ethjs_util_1.isHexString(input)) {\r\n        return input;\r\n    }\r\n    else if (Buffer.isBuffer(input)) {\r\n        return ethereumjs_util_1.bufferToHex(input);\r\n    }\r\n    return '0x' + input.toString(16);\r\n}\r\n/*\r\n txResult.result can be 3 different things:\r\n - VM call or tx: ethereumjs-vm result object\r\n - Node transaction: object returned from eth.getTransactionReceipt()\r\n - Node call: return value from function call (not an object)\r\n\r\n Also, VM results use BN and Buffers, Node results use hex strings/ints,\r\n So we need to normalize the values to prefixed hex strings\r\n*/\r\nfunction resultToRemixTx(txResult) {\r\n    const { result, transactionHash } = txResult;\r\n    const { status, execResult, gasUsed, createdAddress, contractAddress } = result;\r\n    let returnValue, errorMessage;\r\n    if (ethjs_util_1.isHexString(result)) {\r\n        returnValue = result;\r\n    }\r\n    else if (execResult !== undefined) {\r\n        returnValue = execResult.returnValue;\r\n        errorMessage = execResult.exceptionError;\r\n    }\r\n    return {\r\n        transactionHash,\r\n        status,\r\n        gasUsed: convertToPrefixedHex(gasUsed),\r\n        error: errorMessage,\r\n        return: convertToPrefixedHex(returnValue),\r\n        createdAddress: convertToPrefixedHex(createdAddress || contractAddress)\r\n    };\r\n}\r\nexports.resultToRemixTx = resultToRemixTx;\r\n//# sourceMappingURL=txResultHelper.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction formatMemory(mem, width) {\r\n    const ret = {};\r\n    if (!mem) {\r\n        return ret;\r\n    }\r\n    if (!mem.substr) {\r\n        mem = mem.join(''); // geth returns an array, eth return raw string\r\n    }\r\n    for (let k = 0; k < mem.length; k += (width * 2)) {\r\n        const memory = mem.substr(k, width * 2);\r\n        const content = this.tryConvertAsciiFormat(memory);\r\n        ret['0x' + (k / 2).toString(16)] = content.raw + '\\t' + content.ascii;\r\n    }\r\n    return ret;\r\n}\r\nexports.formatMemory = formatMemory;\r\nfunction tryConvertAsciiFormat(memorySlot) {\r\n    const ret = { ascii: '', raw: '' };\r\n    for (let k = 0; k < memorySlot.length; k += 2) {\r\n        const raw = memorySlot.substr(k, 2);\r\n        let ascii = String.fromCharCode(parseInt(raw, 16));\r\n        ascii = ascii.replace(/[^\\w\\s]/, '?');\r\n        if (ascii === '') {\r\n            ascii = '?';\r\n        }\r\n        ret.ascii += ascii;\r\n        ret.raw += raw;\r\n    }\r\n    return ret;\r\n}\r\nexports.tryConvertAsciiFormat = tryConvertAsciiFormat;\r\n/**\r\n * format @args css1, css2, css3 to css inline style\r\n *\r\n * @param {Object} css1 - css inline declaration\r\n * @param {Object} css2 - css inline declaration\r\n * @param {Object} css3 - css inline declaration\r\n * @param {Object} ...\r\n * @return {String} css inline style\r\n *                  if the key start with * the value is direcly appended to the inline style (which should be already inline style formatted)\r\n *                  used if multiple occurences of the same key is needed\r\n */\r\nfunction formatCss(css1, css2) {\r\n    let ret = '';\r\n    for (const arg in arguments) {\r\n        for (const k in arguments[arg]) {\r\n            if (arguments[arg][k] && ret.indexOf(k) === -1) {\r\n                if (k.indexOf('*') === 0) {\r\n                    ret += arguments[arg][k];\r\n                }\r\n                else {\r\n                    ret += k + ':' + arguments[arg][k] + ';';\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return ret;\r\n}\r\nexports.formatCss = formatCss;\r\nfunction normalizeHex(hex) {\r\n    if (hex.indexOf('0x') === 0) {\r\n        hex = hex.replace('0x', '');\r\n    }\r\n    hex = hex.replace(/^0+/, '');\r\n    return '0x' + hex;\r\n}\r\nexports.normalizeHex = normalizeHex;\r\nfunction normalizeHexAddress(hex) {\r\n    if (hex.indexOf('0x') === 0)\r\n        hex = hex.replace('0x', '');\r\n    if (hex.length >= 40) {\r\n        const reg = /(.{40})$/.exec(hex);\r\n        if (reg) {\r\n            return '0x' + reg[0];\r\n        }\r\n    }\r\n    else {\r\n        return '0x' + (new Array(40 - hex.length + 1).join('0')) + hex;\r\n    }\r\n}\r\nexports.normalizeHexAddress = normalizeHexAddress;\r\nfunction runInBrowser() {\r\n    return typeof window !== 'undefined';\r\n}\r\nexports.runInBrowser = runInBrowser;\r\n//# sourceMappingURL=uiHelper.js.map","\"use strict\";\r\nconst tslib_1 = require(\"tslib\");\r\nconst eventManager_1 = require(\"./eventManager\");\r\nconst uiHelper = tslib_1.__importStar(require(\"./helpers/uiHelper\"));\r\nconst compilerHelper = tslib_1.__importStar(require(\"./helpers/compilerHelper\"));\r\nconst util = tslib_1.__importStar(require(\"./util\"));\r\nconst web3Providers_1 = require(\"./web3Provider/web3Providers\");\r\nconst dummyProvider_1 = require(\"./web3Provider/dummyProvider\");\r\nconst web3VmProvider_1 = require(\"./web3Provider/web3VmProvider\");\r\nconst storage_1 = require(\"./storage\");\r\nconst eventsDecoder_1 = require(\"./execution/eventsDecoder\");\r\nconst txExecution = tslib_1.__importStar(require(\"./execution/txExecution\"));\r\nconst txHelper = tslib_1.__importStar(require(\"./execution/txHelper\"));\r\nconst txFormat = tslib_1.__importStar(require(\"./execution/txFormat\"));\r\nconst txListener_1 = require(\"./execution/txListener\");\r\nconst txRunner_1 = require(\"./execution/txRunner\");\r\nconst execution_context_1 = require(\"./execution/execution-context\");\r\nconst typeConversion = tslib_1.__importStar(require(\"./execution/typeConversion\"));\r\nconst universalDapp_1 = require(\"./universalDapp\");\r\nfunction modules() {\r\n    return {\r\n        EventManager: eventManager_1.EventManager,\r\n        helpers: {\r\n            ui: uiHelper,\r\n            compiler: compilerHelper\r\n        },\r\n        vm: {\r\n            Web3Providers: web3Providers_1.Web3Providers,\r\n            DummyProvider: dummyProvider_1.DummyProvider,\r\n            Web3VMProvider: web3VmProvider_1.Web3VmProvider\r\n        },\r\n        Storage: storage_1.Storage,\r\n        util: util,\r\n        execution: {\r\n            EventsDecoder: eventsDecoder_1.EventsDecoder,\r\n            txExecution: txExecution,\r\n            txHelper: txHelper,\r\n            executionContext: new execution_context_1.ExecutionContext(),\r\n            txFormat: txFormat,\r\n            txListener: txListener_1.TxListener,\r\n            txRunner: txRunner_1.TxRunner,\r\n            typeConversion: typeConversion\r\n        },\r\n        UniversalDApp: universalDapp_1.UniversalDApp\r\n    };\r\n}\r\nmodule.exports = modules();\r\n//# sourceMappingURL=index.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nfunction loadWeb3(url = 'http://localhost:8545') {\r\n    const web3 = new web3_1.default();\r\n    web3.setProvider(new web3_1.default.providers.HttpProvider(url));\r\n    this.extend(web3);\r\n    return web3;\r\n}\r\nexports.loadWeb3 = loadWeb3;\r\nfunction extendWeb3(web3) {\r\n    this.extend(web3);\r\n}\r\nexports.extendWeb3 = extendWeb3;\r\nfunction setProvider(web3, url) {\r\n    web3.setProvider(new web3.providers.HttpProvider(url));\r\n}\r\nexports.setProvider = setProvider;\r\nfunction web3DebugNode(network) {\r\n    const web3DebugNodes = {\r\n        Main: 'https://gethmainnet.komputing.org',\r\n        Rinkeby: 'https://remix-rinkeby.ethdevops.io',\r\n        Ropsten: 'https://remix-ropsten.ethdevops.io',\r\n        Goerli: 'https://remix-goerli.ethdevops.io',\r\n        Kovan: 'https://remix-kovan.ethdevops.io'\r\n    };\r\n    if (web3DebugNodes[network]) {\r\n        return this.loadWeb3(web3DebugNodes[network]);\r\n    }\r\n    return null;\r\n}\r\nexports.web3DebugNode = web3DebugNode;\r\nfunction extend(web3) {\r\n    if (!web3.extend) {\r\n        return;\r\n    }\r\n    // DEBUG\r\n    const methods = [];\r\n    if (!(web3.debug && web3.debug.preimage)) {\r\n        methods.push(new web3.extend.Method({\r\n            name: 'preimage',\r\n            call: 'debug_preimage',\r\n            inputFormatter: [null],\r\n            params: 1\r\n        }));\r\n    }\r\n    if (!(web3.debug && web3.debug.traceTransaction)) {\r\n        methods.push(new web3.extend.Method({\r\n            name: 'traceTransaction',\r\n            call: 'debug_traceTransaction',\r\n            inputFormatter: [null, null],\r\n            params: 2\r\n        }));\r\n    }\r\n    if (!(web3.debug && web3.debug.storageRangeAt)) {\r\n        methods.push(new web3.extend.Method({\r\n            name: 'storageRangeAt',\r\n            call: 'debug_storageRangeAt',\r\n            inputFormatter: [null, null, null, null, null],\r\n            params: 5\r\n        }));\r\n    }\r\n    if (methods.length > 0) {\r\n        web3.extend({\r\n            property: 'debug',\r\n            methods: methods,\r\n            properties: []\r\n        });\r\n    }\r\n}\r\nexports.extend = extend;\r\n//# sourceMappingURL=init.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Storage {\r\n    constructor(prefix) {\r\n        this.prefix = prefix;\r\n        // on startup, upgrade the old storage layout\r\n        if (typeof window !== 'undefined') {\r\n            this.safeKeys().forEach(function (name) {\r\n                if (name.indexOf('sol-cache-file-', 0) === 0) {\r\n                    var content = window.localStorage.getItem(name);\r\n                    window.localStorage.setItem(name.replace(/^sol-cache-file-/, 'sol:'), content);\r\n                    window.localStorage.removeItem(name);\r\n                }\r\n            });\r\n        }\r\n        // remove obsolete key\r\n        if (typeof window !== 'undefined') {\r\n            window.localStorage.removeItem('editor-size-cache');\r\n        }\r\n    }\r\n    exists(name) {\r\n        if (typeof window !== 'undefined') {\r\n            return this.get(name) !== null;\r\n        }\r\n    }\r\n    get(name) {\r\n        if (typeof window !== 'undefined') {\r\n            return window.localStorage.getItem(this.prefix + name);\r\n        }\r\n    }\r\n    set(name, content) {\r\n        try {\r\n            if (typeof window !== 'undefined') {\r\n                window.localStorage.setItem(this.prefix + name, content);\r\n            }\r\n        }\r\n        catch (exception) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    remove(name) {\r\n        if (typeof window !== 'undefined') {\r\n            window.localStorage.removeItem(this.prefix + name);\r\n        }\r\n        return true;\r\n    }\r\n    rename(originalName, newName) {\r\n        const content = this.get(originalName);\r\n        if (!this.set(newName, content)) {\r\n            return false;\r\n        }\r\n        this.remove(originalName);\r\n        return true;\r\n    }\r\n    safeKeys() {\r\n        // NOTE: this is a workaround for some browsers\r\n        if (typeof window !== 'undefined') {\r\n            return Object.keys(window.localStorage).filter(function (item) { return item !== null && item !== undefined; });\r\n        }\r\n        return [];\r\n    }\r\n    keys() {\r\n        return this.safeKeys()\r\n            // filter any names not including the prefix\r\n            .filter(item => item.indexOf(this.prefix, 0) === 0)\r\n            // remove prefix from filename and add the 'browser' path\r\n            .map(item => item.substr(this.prefix.length));\r\n    }\r\n}\r\nexports.Storage = Storage;\r\n//# sourceMappingURL=storage.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst async_1 = require(\"async\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst ethjs_util_1 = require(\"ethjs-util\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst events_1 = require(\"events\");\r\nconst txRunner_1 = require(\"./execution/txRunner\");\r\nconst txHelper_1 = require(\"./execution/txHelper\");\r\nconst eventManager_1 = require(\"./eventManager\");\r\nconst execution_context_1 = require(\"./execution/execution-context\");\r\nconst txResultHelper_1 = require(\"./helpers/txResultHelper\");\r\nclass UniversalDApp {\r\n    constructor(config, executionContext) {\r\n        this.events = new events_1.EventEmitter();\r\n        this.event = new eventManager_1.EventManager();\r\n        // has a default for now for backwards compatability\r\n        this.executionContext = executionContext || new execution_context_1.ExecutionContext();\r\n        this.config = config;\r\n        this.txRunner = new txRunner_1.TxRunner({}, {\r\n            config: config,\r\n            detectNetwork: (cb) => {\r\n                this.executionContext.detectNetwork(cb);\r\n            },\r\n            personalMode: () => {\r\n                return this.executionContext.getProvider() === 'web3' ? this.config.get('settings/personal-mode') : false;\r\n            }\r\n        }, this.executionContext);\r\n        this.accounts = {};\r\n        this.executionContext.event.register('contextChanged', this.resetEnvironment.bind(this));\r\n    }\r\n    // TODO : event should be triggered by Udapp instead of TxListener\r\n    /** Listen on New Transaction. (Cannot be done inside constructor because txlistener doesn't exist yet) */\r\n    startListening(txlistener) {\r\n        txlistener.event.register('newTransaction', (tx) => {\r\n            this.events.emit('newTransaction', tx);\r\n        });\r\n    }\r\n    resetEnvironment() {\r\n        this.accounts = {};\r\n        if (this.executionContext.isVM()) {\r\n            this._addAccount('3cd7232cd6f3fc66a57a6bedc1a8ed6c228fff0a327e169c2bcc5e869ed49511', '0x56BC75E2D63100000');\r\n            this._addAccount('2ac6c190b09897cd8987869cc7b918cfea07ee82038d492abce033c75c1b1d0c', '0x56BC75E2D63100000');\r\n            this._addAccount('dae9801649ba2d95a21e688b56f77905e5667c44ce868ec83f82e838712a2c7a', '0x56BC75E2D63100000');\r\n            this._addAccount('d74aa6d18aa79a05f3473dd030a97d3305737cbc8337d940344345c1f6b72eea', '0x56BC75E2D63100000');\r\n            this._addAccount('71975fbf7fe448e004ac7ae54cad0a383c3906055a65468714156a07385e96ce', '0x56BC75E2D63100000');\r\n        }\r\n        // TODO: most params here can be refactored away in txRunner\r\n        this.txRunner = new txRunner_1.TxRunner(this.accounts, {\r\n            // TODO: only used to check value of doNotShowTransactionConfirmationAgain property\r\n            config: this.config,\r\n            // TODO: to refactor, TxRunner already has access to executionContext\r\n            detectNetwork: (cb) => {\r\n                this.executionContext.detectNetwork(cb);\r\n            },\r\n            personalMode: () => {\r\n                return this.executionContext.getProvider() === 'web3' ? this.config.get('settings/personal-mode') : false;\r\n            }\r\n        }, this.executionContext);\r\n        this.txRunner.event.register('transactionBroadcasted', (txhash) => {\r\n            this.executionContext.detectNetwork((error, network) => {\r\n                if (error || !network)\r\n                    return;\r\n                this.event.trigger('transactionBroadcasted', [txhash, network.name]);\r\n            });\r\n        });\r\n    }\r\n    resetAPI(transactionContextAPI) {\r\n        this.transactionContextAPI = transactionContextAPI;\r\n    }\r\n    /**\r\n     * Create a VM Account\r\n     * @param {{privateKey: string, balance: string}} newAccount The new account to create\r\n     */\r\n    createVMAccount(newAccount) {\r\n        const { privateKey, balance } = newAccount;\r\n        if (this.executionContext.getProvider() !== 'vm') {\r\n            throw new Error('plugin API does not allow creating a new account through web3 connection. Only vm mode is allowed');\r\n        }\r\n        this._addAccount(privateKey, balance);\r\n        const privKey = Buffer.from(privateKey, 'hex');\r\n        return '0x' + ethereumjs_util_1.privateToAddress(privKey).toString('hex');\r\n    }\r\n    newAccount(password, passwordPromptCb, cb) {\r\n        if (!this.executionContext.isVM()) {\r\n            if (!this.config.get('settings/personal-mode')) {\r\n                return cb('Not running in personal mode');\r\n            }\r\n            return passwordPromptCb((passphrase) => {\r\n                this.executionContext.web3().personal.newAccount(passphrase, cb);\r\n            });\r\n        }\r\n        let privateKey;\r\n        do {\r\n            privateKey = crypto_1.randomBytes(32);\r\n        } while (!ethereumjs_util_1.isValidPrivate(privateKey));\r\n        this._addAccount(privateKey, '0x56BC75E2D63100000');\r\n        cb(null, '0x' + ethereumjs_util_1.privateToAddress(privateKey).toString('hex'));\r\n    }\r\n    /** Add an account to the list of account (only for Javascript VM) */\r\n    _addAccount(privateKey, balance) {\r\n        if (!this.executionContext.isVM()) {\r\n            throw new Error('_addAccount() cannot be called in non-VM mode');\r\n        }\r\n        if (!this.accounts) {\r\n            return;\r\n        }\r\n        privateKey = Buffer.from(privateKey, 'hex');\r\n        const address = ethereumjs_util_1.privateToAddress(privateKey);\r\n        // FIXME: we don't care about the callback, but we should still make this proper\r\n        const stateManager = this.executionContext.vm().stateManager;\r\n        stateManager.getAccount(address, (error, account) => {\r\n            if (error)\r\n                return console.log(error);\r\n            account.balance = balance || '0xf00000000000000001';\r\n            stateManager.putAccount(address, account, function cb(error) {\r\n                if (error)\r\n                    console.log(error);\r\n            });\r\n        });\r\n        this.accounts[ethereumjs_util_1.toChecksumAddress('0x' + address.toString('hex'))] = { privateKey, nonce: 0 };\r\n    }\r\n    /** Return the list of accounts */\r\n    getAccounts(cb) {\r\n        return new Promise((resolve, reject) => {\r\n            const provider = this.executionContext.getProvider();\r\n            switch (provider) {\r\n                case 'vm':\r\n                    if (!this.accounts) {\r\n                        if (cb)\r\n                            cb('No accounts?');\r\n                        reject(new Error('No accounts?'));\r\n                        return;\r\n                    }\r\n                    if (cb)\r\n                        cb(null, Object.keys(this.accounts));\r\n                    resolve(Object.keys(this.accounts));\r\n                    break;\r\n                case 'web3':\r\n                    if (this.config.get('settings/personal-mode')) {\r\n                        return this.executionContext.web3().personal.getListAccounts((error, accounts) => {\r\n                            if (cb)\r\n                                cb(error, accounts);\r\n                            if (error)\r\n                                return reject(error);\r\n                            resolve(accounts);\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.executionContext.web3().eth.getAccounts((error, accounts) => {\r\n                            if (cb)\r\n                                cb(error, accounts);\r\n                            if (error)\r\n                                return reject(error);\r\n                            resolve(accounts);\r\n                        });\r\n                    }\r\n                    break;\r\n                case 'injected': {\r\n                    this.executionContext.web3().eth.getAccounts((error, accounts) => {\r\n                        if (cb)\r\n                            cb(error, accounts);\r\n                        if (error)\r\n                            return reject(error);\r\n                        resolve(accounts);\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /** Get the balance of an address */\r\n    getBalance(address, cb) {\r\n        address = ethjs_util_1.stripHexPrefix(address);\r\n        if (!this.executionContext.isVM()) {\r\n            return this.executionContext.web3().eth.getBalance(address, (err, res) => {\r\n                if (err) {\r\n                    return cb(err);\r\n                }\r\n                cb(null, res.toString(10));\r\n            });\r\n        }\r\n        if (!this.accounts) {\r\n            return cb('No accounts?');\r\n        }\r\n        this.executionContext.vm().stateManager.getAccount(Buffer.from(address, 'hex'), (err, res) => {\r\n            if (err) {\r\n                return cb('Account not found');\r\n            }\r\n            cb(null, new ethereumjs_util_1.BN(res.balance).toString(10));\r\n        });\r\n    }\r\n    /** Get the balance of an address, and convert wei to ether */\r\n    getBalanceInEther(address, callback) {\r\n        this.getBalance(address, (error, balance) => {\r\n            if (error) {\r\n                return callback(error);\r\n            }\r\n            callback(null, this.executionContext.web3().utils.fromWei(balance, 'ether'));\r\n        });\r\n    }\r\n    pendingTransactionsCount() {\r\n        return Object.keys(this.txRunner.pendingTxs).length;\r\n    }\r\n    /**\r\n      * deploy the given contract\r\n      *\r\n      * @param {String} data    - data to send with the transaction ( return of txFormat.buildData(...) ).\r\n      * @param {Function} callback    - callback.\r\n      */\r\n    createContract(data, confirmationCb, continueCb, promptCb, callback) {\r\n        this.runTx({ data: data, useCall: false }, confirmationCb, continueCb, promptCb, callback);\r\n    }\r\n    /**\r\n      * call the current given contract\r\n      *\r\n      * @param {String} to    - address of the contract to call.\r\n      * @param {String} data    - data to send with the transaction ( return of txFormat.buildData(...) ).\r\n      * @param {Object} funAbi    - abi definition of the function to call.\r\n      * @param {Function} callback    - callback.\r\n      */\r\n    callFunction(to, data, funAbi, confirmationCb, continueCb, promptCb, callback) {\r\n        const useCall = funAbi.stateMutability === 'view' || funAbi.stateMutability === 'pure';\r\n        this.runTx({ to, data, useCall }, confirmationCb, continueCb, promptCb, callback);\r\n    }\r\n    /**\r\n      * call the current given contract\r\n      *\r\n      * @param {String} to    - address of the contract to call.\r\n      * @param {String} data    - data to send with the transaction ( return of txFormat.buildData(...) ).\r\n      * @param {Function} callback    - callback.\r\n      */\r\n    sendRawTransaction(to, data, confirmationCb, continueCb, promptCb, callback) {\r\n        this.runTx({ to, data, useCall: false }, confirmationCb, continueCb, promptCb, callback);\r\n    }\r\n    context() {\r\n        return (this.executionContext.isVM() ? 'memory' : 'blockchain');\r\n    }\r\n    getABI(contract) {\r\n        return txHelper_1.sortAbiFunction(contract.abi);\r\n    }\r\n    getFallbackInterface(contractABI) {\r\n        return txHelper_1.getFallbackInterface(contractABI);\r\n    }\r\n    getReceiveInterface(contractABI) {\r\n        return txHelper_1.getReceiveInterface(contractABI);\r\n    }\r\n    getInputs(funABI) {\r\n        if (!funABI.inputs) {\r\n            return '';\r\n        }\r\n        return txHelper_1.inputParametersDeclarationToString(funABI.inputs);\r\n    }\r\n    /**\r\n     * This function send a tx only to javascript VM or testnet, will return an error for the mainnet\r\n     * SHOULD BE TAKEN CAREFULLY!\r\n     *\r\n     * @param {Object} tx    - transaction.\r\n     */\r\n    sendTransaction(tx) {\r\n        return new Promise((resolve, reject) => {\r\n            this.executionContext.detectNetwork((error, network) => {\r\n                if (error)\r\n                    return reject(error);\r\n                if (network.name === 'Main' && network.id === '1') {\r\n                    return reject(new Error('It is not allowed to make this action against mainnet'));\r\n                }\r\n                this.silentRunTx(tx, (error, result) => {\r\n                    if (error)\r\n                        return reject(error);\r\n                    try {\r\n                        resolve(txResultHelper_1.resultToRemixTx(result));\r\n                    }\r\n                    catch (e) {\r\n                        reject(e);\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * This function send a tx without alerting the user (if mainnet or if gas estimation too high).\r\n     * SHOULD BE TAKEN CAREFULLY!\r\n     *\r\n     * @param {Object} tx    - transaction.\r\n     * @param {Function} callback    - callback.\r\n     */\r\n    silentRunTx(tx, cb) {\r\n        this.txRunner.rawRun(tx, (network, tx, gasEstimation, continueTxExecution, cancelCb) => { continueTxExecution(); }, (error, continueTxExecution, cancelCb) => { if (error) {\r\n            cb(error);\r\n        }\r\n        else {\r\n            continueTxExecution();\r\n        } }, (okCb, cancelCb) => { okCb(); }, cb);\r\n    }\r\n    runTx(args, confirmationCb, continueCb, promptCb, cb) {\r\n        const self = this;\r\n        async_1.waterfall([\r\n            function getGasLimit(next) {\r\n                if (self.transactionContextAPI.getGasLimit) {\r\n                    return self.transactionContextAPI.getGasLimit(next);\r\n                }\r\n                next(null, 3000000);\r\n            },\r\n            function queryValue(gasLimit, next) {\r\n                if (args.value) {\r\n                    return next(null, args.value, gasLimit);\r\n                }\r\n                if (args.useCall || !self.transactionContextAPI.getValue) {\r\n                    return next(null, 0, gasLimit);\r\n                }\r\n                self.transactionContextAPI.getValue(function (err, value) {\r\n                    next(err, value, gasLimit);\r\n                });\r\n            },\r\n            function getAccount(value, gasLimit, next) {\r\n                if (args.from) {\r\n                    return next(null, args.from, value, gasLimit);\r\n                }\r\n                if (self.transactionContextAPI.getAddress) {\r\n                    return self.transactionContextAPI.getAddress(function (err, address) {\r\n                        next(err, address, value, gasLimit);\r\n                    });\r\n                }\r\n                self.getAccounts(function (err, accounts) {\r\n                    const address = accounts[0];\r\n                    if (err)\r\n                        return next(err);\r\n                    if (!address)\r\n                        return next('No accounts available');\r\n                    if (self.executionContext.isVM() && !self.accounts[address]) {\r\n                        return next('Invalid account selected');\r\n                    }\r\n                    next(null, address, value, gasLimit);\r\n                });\r\n            },\r\n            function runTransaction(fromAddress, value, gasLimit, next) {\r\n                const tx = { to: args.to, data: args.data.dataHex, useCall: args.useCall, from: fromAddress, value: value, gasLimit: gasLimit, timestamp: args.data.timestamp };\r\n                const payLoad = { funAbi: args.data.funAbi, funArgs: args.data.funArgs, contractBytecode: args.data.contractBytecode, contractName: args.data.contractName, contractABI: args.data.contractABI, linkReferences: args.data.linkReferences };\r\n                let timestamp = Date.now();\r\n                if (tx.timestamp) {\r\n                    timestamp = tx.timestamp;\r\n                }\r\n                self.event.trigger('initiatingTransaction', [timestamp, tx, payLoad]);\r\n                self.txRunner.rawRun(tx, confirmationCb, continueCb, promptCb, function (error, result) {\r\n                    const eventName = (tx.useCall ? 'callExecuted' : 'transactionExecuted');\r\n                    self.event.trigger(eventName, [error, tx.from, tx.to, tx.data, tx.useCall, result, timestamp, payLoad]);\r\n                    if (error && (typeof (error) !== 'string')) {\r\n                        if (error.message)\r\n                            error = error.message;\r\n                        else {\r\n                            // eslint-disable-next-line no-empty\r\n                            try {\r\n                                error = 'error: ' + JSON.stringify(error);\r\n                            }\r\n                            catch (e) { }\r\n                        }\r\n                    }\r\n                    next(error, result);\r\n                });\r\n            }\r\n        ], cb);\r\n    }\r\n}\r\nexports.UniversalDApp = UniversalDApp;\r\n//# sourceMappingURL=universalDapp.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\n/*\r\n contains misc util: @TODO should be splitted\r\n  - hex conversion\r\n  - binary search\r\n  - CALL related look up\r\n  - sha3 calculation\r\n  - swarm hash extraction\r\n  - bytecode comparison\r\n*/\r\n/*\r\n    ints: IntArray\r\n  */\r\nfunction hexConvert(ints) {\r\n    let ret = '0x';\r\n    for (let i = 0; i < ints.length; i++) {\r\n        const h = ints[i];\r\n        if (h) {\r\n            ret += (h <= 0xf ? '0' : '') + h.toString(16);\r\n        }\r\n        else {\r\n            ret += '00';\r\n        }\r\n    }\r\n    return ret;\r\n}\r\nexports.hexConvert = hexConvert;\r\n/**\r\n   * Converts a hex string to an array of integers.\r\n   */\r\nfunction hexToIntArray(hexString) {\r\n    if (hexString.slice(0, 2) === '0x') {\r\n        hexString = hexString.slice(2);\r\n    }\r\n    const integers = [];\r\n    for (let i = 0; i < hexString.length; i += 2) {\r\n        integers.push(parseInt(hexString.slice(i, i + 2), 16));\r\n    }\r\n    return integers;\r\n}\r\nexports.hexToIntArray = hexToIntArray;\r\n/*\r\n    ints: list of BNs\r\n  */\r\nfunction hexListFromBNs(bnList) {\r\n    const ret = [];\r\n    for (const k in bnList) {\r\n        const v = bnList[k];\r\n        if (ethereumjs_util_1.BN.isBN(v)) {\r\n            ret.push('0x' + v.toString('hex', 64));\r\n        }\r\n        else {\r\n            ret.push('0x' + (new ethereumjs_util_1.BN(v)).toString('hex', 64)); // TEMP FIX TO REMOVE ONCE https://github.com/ethereumjs/ethereumjs-vm/pull/293 is released\r\n        }\r\n    }\r\n    return ret;\r\n}\r\nexports.hexListFromBNs = hexListFromBNs;\r\n/*\r\n  ints: list of IntArrays\r\n*/\r\nfunction hexListConvert(intsList) {\r\n    const ret = [];\r\n    for (const k in intsList) {\r\n        ret.push(this.hexConvert(intsList[k]));\r\n    }\r\n    return ret;\r\n}\r\nexports.hexListConvert = hexListConvert;\r\n/*\r\n  ints: ints: IntArray\r\n*/\r\nfunction formatMemory(mem) {\r\n    const hexMem = this.hexConvert(mem).substr(2);\r\n    const ret = [];\r\n    for (let k = 0; k < hexMem.length; k += 32) {\r\n        const row = hexMem.substr(k, 32);\r\n        ret.push(row);\r\n    }\r\n    return ret;\r\n}\r\nexports.formatMemory = formatMemory;\r\n/*\r\n  Binary Search:\r\n  Assumes that @arg array is sorted increasingly\r\n  return largest i such that array[i] <= target; return -1 if array[0] > target || array is empty\r\n*/\r\nfunction findLowerBound(target, array) {\r\n    let start = 0;\r\n    let length = array.length;\r\n    while (length > 0) {\r\n        const half = length >> 1;\r\n        const middle = start + half;\r\n        if (array[middle] <= target) {\r\n            length = length - 1 - half;\r\n            start = middle + 1;\r\n        }\r\n        else {\r\n            length = half;\r\n        }\r\n    }\r\n    return start - 1;\r\n}\r\nexports.findLowerBound = findLowerBound;\r\n/*\r\n  Binary Search:\r\n  Assumes that @arg array is sorted increasingly\r\n  return largest array[i] such that array[i] <= target; return null if array[0] > target || array is empty\r\n*/\r\nfunction findLowerBoundValue(target, array) {\r\n    const index = this.findLowerBound(target, array);\r\n    return index >= 0 ? array[index] : null;\r\n}\r\nexports.findLowerBoundValue = findLowerBoundValue;\r\n/*\r\n  Binary Search:\r\n  Assumes that @arg array is sorted increasingly\r\n  return Return i such that |array[i] - target| is smallest among all i and -1 for an empty array.\r\n  Returns the smallest i for multiple candidates.\r\n*/\r\nfunction findClosestIndex(target, array) {\r\n    if (array.length === 0) {\r\n        return -1;\r\n    }\r\n    const index = this.findLowerBound(target, array);\r\n    if (index < 0) {\r\n        return 0;\r\n    }\r\n    else if (index >= array.length - 1) {\r\n        return array.length - 1;\r\n    }\r\n    else {\r\n        const middle = (array[index] + array[index + 1]) / 2;\r\n        return target <= middle ? index : index + 1;\r\n    }\r\n}\r\nexports.findClosestIndex = findClosestIndex;\r\n/**\r\n  * Find the call from @args rootCall which contains @args index (recursive)\r\n  *\r\n  * @param {Int} index - index of the vmtrace\r\n  * @param {Object} rootCall  - call tree, built by the trace analyser\r\n  * @return {Object} - return the call which include the @args index\r\n  */\r\nfunction findCall(index, rootCall) {\r\n    const ret = buildCallPath(index, rootCall);\r\n    return ret[ret.length - 1];\r\n}\r\nexports.findCall = findCall;\r\n/**\r\n  * Find calls path from @args rootCall which leads to @args index (recursive)\r\n  *\r\n  * @param {Int} index - index of the vmtrace\r\n  * @param {Object} rootCall  - call tree, built by the trace analyser\r\n  * @return {Array} - return the calls path to @args index\r\n  */\r\nfunction buildCallPath(index, rootCall) {\r\n    const ret = [];\r\n    findCallInternal(index, rootCall, ret);\r\n    return ret;\r\n}\r\nexports.buildCallPath = buildCallPath;\r\n/**\r\n  * sha3 the given @arg value (left pad to 32 bytes)\r\n  *\r\n  * @param {String} value - value to sha3\r\n  * @return {Object} - return sha3ied value\r\n  */\r\nfunction sha3_256(value) {\r\n    if (typeof value === 'string' && value.indexOf('0x') !== 0) {\r\n        value = '0x' + value;\r\n    }\r\n    const ret = ethereumjs_util_1.bufferToHex(ethereumjs_util_1.setLengthLeft(value, 32));\r\n    const retInBuffer = ethereumjs_util_1.keccak(ret);\r\n    return ethereumjs_util_1.bufferToHex(retInBuffer);\r\n}\r\nexports.sha3_256 = sha3_256;\r\n/**\r\n  * return a regex which extract the swarmhash from the bytecode.\r\n  *\r\n  * @return {RegEx}\r\n  */\r\nfunction swarmHashExtraction() {\r\n    return /a165627a7a72305820([0-9a-f]{64})0029$/;\r\n}\r\nexports.swarmHashExtraction = swarmHashExtraction;\r\n/**\r\n  * return a regex which extract the swarmhash from the bytecode, from POC 0.3\r\n  *\r\n  * @return {RegEx}\r\n  */\r\nfunction swarmHashExtractionPOC31() {\r\n    return /a265627a7a72315820([0-9a-f]{64})64736f6c6343([0-9a-f]{6})0032$/;\r\n}\r\nexports.swarmHashExtractionPOC31 = swarmHashExtractionPOC31;\r\n/**\r\n  * return a regex which extract the swarmhash from the bytecode, from POC 0.3\r\n  *\r\n  * @return {RegEx}\r\n  */\r\nfunction swarmHashExtractionPOC32() {\r\n    return /a265627a7a72305820([0-9a-f]{64})64736f6c6343([0-9a-f]{6})0032$/;\r\n}\r\nexports.swarmHashExtractionPOC32 = swarmHashExtractionPOC32;\r\n/**\r\n  * return a regex which extract the cbor encoded metadata : {\"ipfs\": <IPFS hash>, \"solc\": <compiler version>} from the bytecode.\r\n  * ref https://solidity.readthedocs.io/en/v0.6.6/metadata.html?highlight=ipfs#encoding-of-the-metadata-hash-in-the-bytecode\r\n  * @return {RegEx}\r\n  */\r\nfunction cborEncodedValueExtraction() {\r\n    return /64697066735822([0-9a-f]{68})64736f6c6343([0-9a-f]{6})0033$/;\r\n}\r\nexports.cborEncodedValueExtraction = cborEncodedValueExtraction;\r\nfunction extractcborMetadata(value) {\r\n    return value.replace(this.cborEncodedValueExtraction(), '');\r\n}\r\nexports.extractcborMetadata = extractcborMetadata;\r\nfunction extractSwarmHash(value) {\r\n    value = value.replace(this.swarmHashExtraction(), '');\r\n    value = value.replace(this.swarmHashExtractionPOC31(), '');\r\n    value = value.replace(this.swarmHashExtractionPOC32(), '');\r\n    return value;\r\n}\r\nexports.extractSwarmHash = extractSwarmHash;\r\n/**\r\n  * Compare bytecode. return true if the code is equal (handle swarm hash and library references)\r\n  * @param {String} code1 - the bytecode that is actually deployed (contains resolved library reference and a potentially different swarmhash)\r\n  * @param {String} code2 - the bytecode generated by the compiler (contains unresolved library reference and a potentially different swarmhash)\r\n                            this will return false if the generated bytecode is empty (asbtract contract cannot be deployed)\r\n  *\r\n  * @return {bool}\r\n  */\r\nfunction compareByteCode(code1, code2) {\r\n    if (code1 === code2)\r\n        return true;\r\n    if (code2 === '0x')\r\n        return false; // abstract contract. see comment\r\n    if (code2.substr(2, 46) === '7300000000000000000000000000000000000000003014') {\r\n        // testing the following signature: PUSH20 00..00 ADDRESS EQ\r\n        // in the context of a library, that slot contains the address of the library (pushed by the compiler to avoid calling library other than with a DELEGATECALL)\r\n        // if code2 is not a library, well we still suppose that the comparison remain relevant even if we remove some information from `code1`\r\n        code1 = replaceLibReference(code1, 4);\r\n    }\r\n    let pos = -1;\r\n    while ((pos = code2.search(/__(.*)__/)) !== -1) {\r\n        code2 = replaceLibReference(code2, pos);\r\n        code1 = replaceLibReference(code1, pos);\r\n    }\r\n    code1 = this.extractSwarmHash(code1);\r\n    code1 = this.extractcborMetadata(code1);\r\n    code2 = this.extractSwarmHash(code2);\r\n    code2 = this.extractcborMetadata(code2);\r\n    if (code1 && code2 && code1.indexOf(code2) === 0) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.compareByteCode = compareByteCode;\r\n/* util extracted out from remix-ide. @TODO split this file, cause it mix real util fn with solidity related stuff ... */\r\nfunction groupBy(arr, key) {\r\n    return arr.reduce((sum, item) => {\r\n        const groupByVal = item[key];\r\n        const groupedItems = sum[groupByVal] || [];\r\n        groupedItems.push(item);\r\n        sum[groupByVal] = groupedItems;\r\n        return sum;\r\n    }, {});\r\n}\r\nexports.groupBy = groupBy;\r\nfunction concatWithSeperator(list, seperator) {\r\n    return list.reduce((sum, item) => sum + item + seperator, '').slice(0, -seperator.length);\r\n}\r\nexports.concatWithSeperator = concatWithSeperator;\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[-[\\]/{}()+?.\\\\^$|]/g, '\\\\$&');\r\n}\r\nexports.escapeRegExp = escapeRegExp;\r\nfunction replaceLibReference(code, pos) {\r\n    return code.substring(0, pos) + '0000000000000000000000000000000000000000' + code.substring(pos + 40);\r\n}\r\nfunction findCallInternal(index, rootCall, callsPath) {\r\n    const calls = Object.keys(rootCall.calls);\r\n    const ret = rootCall;\r\n    callsPath.push(rootCall);\r\n    for (const k in calls) {\r\n        const subCall = rootCall.calls[calls[k]];\r\n        if (index >= subCall.start && index <= subCall.return) {\r\n            findCallInternal(index, subCall, callsPath);\r\n            break;\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n//# sourceMappingURL=util.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass DummyProvider {\r\n    constructor() {\r\n        this.eth = {};\r\n        this.debug = {};\r\n        this.eth.getCode = (address, cb) => { return this.getCode(address, cb); };\r\n        this.eth.getTransaction = (hash, cb) => { return this.getTransaction(hash, cb); };\r\n        this.eth.getTransactionFromBlock = (blockNumber, txIndex, cb) => { return this.getTransactionFromBlock(blockNumber, txIndex, cb); };\r\n        this.eth.getBlockNumber = (cb) => { return this.getBlockNumber(cb); };\r\n        this.debug.traceTransaction = (hash, options, cb) => { return this.traceTransaction(hash, options, cb); };\r\n        this.debug.storageRangeAt = (blockNumber, txIndex, address, start, end, maxLength, cb) => { return this.storageRangeAt(blockNumber, txIndex, address, start, end, maxLength, cb); };\r\n        this.providers = { HttpProvider: function (url) { } };\r\n        this.currentProvider = { host: '' };\r\n    }\r\n    getCode(address, cb) {\r\n        cb(null, '');\r\n    }\r\n    setProvider(provider) { }\r\n    traceTransaction(txHash, options, cb) {\r\n        if (cb) {\r\n            cb(null, {});\r\n        }\r\n        return {};\r\n    }\r\n    storageRangeAt(blockNumber, txIndex, address, start, end, maxLength, cb) {\r\n        if (cb) {\r\n            cb(null, {});\r\n        }\r\n        return {};\r\n    }\r\n    getBlockNumber(cb) { cb(null, ''); }\r\n    getTransaction(txHash, cb) {\r\n        if (cb) {\r\n            cb(null, {});\r\n        }\r\n        return {};\r\n    }\r\n    getTransactionFromBlock(blockNumber, txIndex, cb) {\r\n        if (cb) {\r\n            cb(null, {});\r\n        }\r\n        return {};\r\n    }\r\n}\r\nexports.DummyProvider = DummyProvider;\r\n//# sourceMappingURL=dummyProvider.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst web3VmProvider_1 = require(\"./web3VmProvider\");\r\nconst init_1 = require(\"../init\");\r\nclass Web3Providers {\r\n    constructor() {\r\n        this.modes = {};\r\n    }\r\n    addProvider(type, obj) {\r\n        if (type === 'INTERNAL') {\r\n            const web3 = init_1.loadWeb3();\r\n            this.addWeb3(type, web3);\r\n        }\r\n        else if (type === 'vm') {\r\n            this.addVM(type, obj);\r\n        }\r\n        else {\r\n            init_1.extendWeb3(obj);\r\n            this.addWeb3(type, obj);\r\n        }\r\n    }\r\n    get(type, cb) {\r\n        if (this.modes[type]) {\r\n            return cb(null, this.modes[type]);\r\n        }\r\n        cb('error: this provider has not been setup (' + type + ')', null);\r\n    }\r\n    addWeb3(type, web3) {\r\n        this.modes[type] = web3;\r\n    }\r\n    addVM(type, vm) {\r\n        const vmProvider = new web3VmProvider_1.Web3VmProvider();\r\n        vmProvider.setVM(vm);\r\n        this.modes[type] = vmProvider;\r\n    }\r\n}\r\nexports.Web3Providers = Web3Providers;\r\n//# sourceMappingURL=web3Providers.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst util_1 = require(\"../util\");\r\nconst uiHelper_1 = require(\"../helpers/uiHelper\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nclass Web3VmProvider {\r\n    constructor() {\r\n        this.web3 = new web3_1.default();\r\n        this.vm = null;\r\n        this.vmTraces = {};\r\n        this.txs = {};\r\n        this.txsReceipt = {};\r\n        this.processingHash = null;\r\n        this.processingAddress = null;\r\n        this.processingIndex = null;\r\n        this.previousDepth = 0;\r\n        this.incr = 0;\r\n        this.eth = {};\r\n        this.debug = {};\r\n        this.eth.getCode = (address, cb) => this.getCode(address, cb);\r\n        this.eth.getTransaction = (txHash, cb) => this.getTransaction(txHash, cb);\r\n        this.eth.getTransactionReceipt = (txHash, cb) => this.getTransactionReceipt(txHash, cb);\r\n        this.eth.getTransactionFromBlock = (blockNumber, txIndex, cb) => this.getTransactionFromBlock(blockNumber, txIndex, cb);\r\n        this.eth.getBlockNumber = (cb) => this.getBlockNumber(cb);\r\n        this.debug.traceTransaction = (txHash, options, cb) => this.traceTransaction(txHash, options, cb);\r\n        this.debug.storageRangeAt = (blockNumber, txIndex, address, start, maxLength, cb) => this.storageRangeAt(blockNumber, txIndex, address, start, maxLength, cb);\r\n        this.debug.preimage = (hashedKey, cb) => this.preimage(hashedKey, cb);\r\n        this.providers = { HttpProvider: function (url) { } };\r\n        this.currentProvider = { host: 'vm provider' };\r\n        this.storageCache = {};\r\n        this.lastProcessedStorageTxHash = {};\r\n        this.sha3Preimages = {};\r\n        // util\r\n        this.sha3 = (...args) => this.web3.utils.sha3(...args);\r\n        this.toHex = (...args) => this.web3.utils.toHex(...args);\r\n        this.toAscii = (...args) => this.web3.utils.hexToAscii(...args);\r\n        this.fromAscii = (...args) => this.web3.utils.asciiToHex(...args);\r\n        this.fromDecimal = (...args) => this.web3.utils.numberToHex(...args);\r\n        this.fromWei = (...args) => this.web3.utils.fromWei(...args);\r\n        this.toWei = (...args) => this.web3.utils.toWei(...args);\r\n        this.toBigNumber = (...args) => this.web3.utils.toBN(...args);\r\n        this.isAddress = (...args) => this.web3.utils.isAddress(...args);\r\n        this.utils = web3_1.default.utils || [];\r\n    }\r\n    setVM(vm) {\r\n        if (this.vm === vm)\r\n            return;\r\n        this.vm = vm;\r\n        this.vm.on('step', (data) => {\r\n            this.pushTrace(data);\r\n        });\r\n        this.vm.on('afterTx', (data) => {\r\n            this.txProcessed(data);\r\n        });\r\n        this.vm.on('beforeTx', (data) => {\r\n            this.txWillProcess(data);\r\n        });\r\n    }\r\n    releaseCurrentHash() {\r\n        const ret = this.processingHash;\r\n        this.processingHash = undefined;\r\n        return ret;\r\n    }\r\n    txWillProcess(data) {\r\n        this.incr++;\r\n        this.processingHash = util_1.hexConvert(data.hash());\r\n        this.vmTraces[this.processingHash] = {\r\n            gas: '0x0',\r\n            return: '0x0',\r\n            structLogs: []\r\n        };\r\n        const tx = {};\r\n        tx['hash'] = this.processingHash;\r\n        tx['from'] = ethereumjs_util_1.toChecksumAddress(util_1.hexConvert(data.getSenderAddress()));\r\n        if (data.to && data.to.length) {\r\n            tx['to'] = ethereumjs_util_1.toChecksumAddress(util_1.hexConvert(data.to));\r\n        }\r\n        this.processingAddress = tx['to'];\r\n        tx['data'] = util_1.hexConvert(data.data);\r\n        tx['input'] = util_1.hexConvert(data.input);\r\n        tx['gas'] = (new ethereumjs_util_1.BN(util_1.hexConvert(data.gas).replace('0x', ''), 16)).toString(10);\r\n        if (data.value) {\r\n            tx['value'] = util_1.hexConvert(data.value);\r\n        }\r\n        this.txs[this.processingHash] = tx;\r\n        this.txsReceipt[this.processingHash] = tx;\r\n        this.storageCache[this.processingHash] = {};\r\n        if (tx['to']) {\r\n            const account = ethereumjs_util_1.toBuffer(tx['to']);\r\n            this.vm.stateManager.dumpStorage(account, (storage) => {\r\n                this.storageCache[this.processingHash][tx['to']] = storage;\r\n                this.lastProcessedStorageTxHash[tx['to']] = this.processingHash;\r\n            });\r\n        }\r\n        this.processingIndex = 0;\r\n    }\r\n    txProcessed(data) {\r\n        const lastOp = this.vmTraces[this.processingHash].structLogs[this.processingIndex - 1];\r\n        if (lastOp) {\r\n            lastOp.error = lastOp.op !== 'RETURN' && lastOp.op !== 'STOP' && lastOp.op !== 'thisDESTRUCT';\r\n        }\r\n        this.vmTraces[this.processingHash].gas = '0x' + data.gasUsed.toString(16);\r\n        const logs = [];\r\n        for (const l in data.execResult.logs) {\r\n            const log = data.execResult.logs[l];\r\n            const topics = [];\r\n            if (log[1].length > 0) {\r\n                for (var k in log[1]) {\r\n                    topics.push('0x' + log[1][k].toString('hex'));\r\n                }\r\n            }\r\n            else {\r\n                topics.push('0x');\r\n            }\r\n            logs.push({\r\n                address: '0x' + log[0].toString('hex'),\r\n                data: '0x' + log[2].toString('hex'),\r\n                topics: topics,\r\n                rawVMResponse: log\r\n            });\r\n        }\r\n        this.txsReceipt[this.processingHash].logs = logs;\r\n        this.txsReceipt[this.processingHash].transactionHash = this.processingHash;\r\n        const status = data.execResult.exceptionError ? 0 : 1;\r\n        this.txsReceipt[this.processingHash].status = `0x${status}`;\r\n        if (data.createdAddress) {\r\n            const address = util_1.hexConvert(data.createdAddress);\r\n            this.vmTraces[this.processingHash].return = ethereumjs_util_1.toChecksumAddress(address);\r\n            this.txsReceipt[this.processingHash].contractAddress = ethereumjs_util_1.toChecksumAddress(address);\r\n        }\r\n        else if (data.execResult.returnValue) {\r\n            this.vmTraces[this.processingHash].return = util_1.hexConvert(data.execResult.returnValue);\r\n        }\r\n        else {\r\n            this.vmTraces[this.processingHash].return = '0x';\r\n        }\r\n        this.processingIndex = null;\r\n        this.processingAddress = null;\r\n        this.previousDepth = 0;\r\n    }\r\n    pushTrace(data) {\r\n        const depth = data.depth + 1; // geth starts the depth from 1\r\n        if (!this.processingHash) {\r\n            console.log('no tx processing');\r\n            return;\r\n        }\r\n        let previousopcode;\r\n        if (this.vmTraces[this.processingHash] && this.vmTraces[this.processingHash].structLogs[this.processingIndex - 1]) {\r\n            previousopcode = this.vmTraces[this.processingHash].structLogs[this.processingIndex - 1];\r\n        }\r\n        if (this.previousDepth > depth && previousopcode) {\r\n            // returning from context, set error it is not STOP, RETURN\r\n            previousopcode.invalidDepthChange = previousopcode.op !== 'RETURN' && previousopcode.op !== 'STOP';\r\n        }\r\n        const step = {\r\n            stack: util_1.hexListFromBNs(data.stack),\r\n            memory: util_1.formatMemory(data.memory),\r\n            storage: data.storage,\r\n            op: data.opcode.name,\r\n            pc: data.pc,\r\n            gasCost: data.opcode.fee.toString(),\r\n            gas: data.gasLeft.toString(),\r\n            depth: depth,\r\n            error: data.error === false ? undefined : data.error\r\n        };\r\n        this.vmTraces[this.processingHash].structLogs.push(step);\r\n        if (step.op === 'CREATE' || step.op === 'CALL') {\r\n            if (step.op === 'CREATE') {\r\n                this.processingAddress = '(Contract Creation - Step ' + this.processingIndex + ')';\r\n                this.storageCache[this.processingHash][this.processingAddress] = {};\r\n                this.lastProcessedStorageTxHash[this.processingAddress] = this.processingHash;\r\n            }\r\n            else {\r\n                this.processingAddress = uiHelper_1.normalizeHexAddress(step.stack[step.stack.length - 2]);\r\n                this.processingAddress = ethereumjs_util_1.toChecksumAddress(this.processingAddress);\r\n                if (!this.storageCache[this.processingHash][this.processingAddress]) {\r\n                    const account = ethereumjs_util_1.toBuffer(this.processingAddress);\r\n                    this.vm.stateManager.dumpStorage(account, function (storage) {\r\n                        this.storageCache[this.processingHash][this.processingAddress] = storage;\r\n                        this.lastProcessedStorageTxHash[this.processingAddress] = this.processingHash;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        if (previousopcode && previousopcode.op === 'SHA3') {\r\n            const preimage = this.getSha3Input(previousopcode.stack, previousopcode.memory);\r\n            const imageHash = step.stack[step.stack.length - 1].replace('0x', '');\r\n            this.sha3Preimages[imageHash] = {\r\n                preimage: preimage\r\n            };\r\n        }\r\n        this.processingIndex++;\r\n        this.previousDepth = depth;\r\n    }\r\n    getCode(address, cb) {\r\n        address = ethereumjs_util_1.toChecksumAddress(address);\r\n        const account = ethereumjs_util_1.toBuffer(address);\r\n        this.vm.stateManager.getContractCode(account, (error, result) => {\r\n            cb(error, util_1.hexConvert(result));\r\n        });\r\n    }\r\n    setProvider(provider) { }\r\n    traceTransaction(txHash, options, cb) {\r\n        if (this.vmTraces[txHash]) {\r\n            if (cb) {\r\n                cb(null, this.vmTraces[txHash]);\r\n            }\r\n            return this.vmTraces[txHash];\r\n        }\r\n        if (cb) {\r\n            cb('unable to retrieve traces ' + txHash, null);\r\n        }\r\n    }\r\n    storageRangeAt(blockNumber, txIndex, address, start, maxLength, cb) {\r\n        // we don't use the range params here\r\n        address = ethereumjs_util_1.toChecksumAddress(address);\r\n        if (txIndex === 'latest') {\r\n            txIndex = this.lastProcessedStorageTxHash[address];\r\n        }\r\n        if (this.storageCache[txIndex] && this.storageCache[txIndex][address]) {\r\n            const storage = this.storageCache[txIndex][address];\r\n            return cb(null, {\r\n                storage: JSON.parse(JSON.stringify(storage)),\r\n                nextKey: null\r\n            });\r\n        }\r\n        cb('unable to retrieve storage ' + txIndex + ' ' + address);\r\n    }\r\n    getBlockNumber(cb) { cb(null, 'vm provider'); }\r\n    getTransaction(txHash, cb) {\r\n        if (this.txs[txHash]) {\r\n            if (cb) {\r\n                cb(null, this.txs[txHash]);\r\n            }\r\n            return this.txs[txHash];\r\n        }\r\n        if (cb) {\r\n            cb('unable to retrieve tx ' + txHash, null);\r\n        }\r\n    }\r\n    getTransactionReceipt(txHash, cb) {\r\n        // same as getTransaction but return the created address also\r\n        if (this.txsReceipt[txHash]) {\r\n            if (cb) {\r\n                cb(null, this.txsReceipt[txHash]);\r\n            }\r\n            return this.txsReceipt[txHash];\r\n        }\r\n        if (cb) {\r\n            cb('unable to retrieve txReceipt ' + txHash, null);\r\n        }\r\n    }\r\n    getTransactionFromBlock(blockNumber, txIndex, cb) {\r\n        const mes = 'not supposed to be needed by remix in vmmode';\r\n        console.log(mes);\r\n        if (cb) {\r\n            cb(mes, null);\r\n        }\r\n    }\r\n    preimage(hashedKey, cb) {\r\n        hashedKey = hashedKey.replace('0x', '');\r\n        cb(null, this.sha3Preimages[hashedKey] !== undefined ? this.sha3Preimages[hashedKey].preimage : null);\r\n    }\r\n    getSha3Input(stack, memory) {\r\n        let memoryStart = stack[stack.length - 1];\r\n        let memoryLength = stack[stack.length - 2];\r\n        const memStartDec = (new ethereumjs_util_1.BN(memoryStart.replace('0x', ''), 16)).toString(10);\r\n        memoryStart = parseInt(memStartDec) * 2;\r\n        const memLengthDec = (new ethereumjs_util_1.BN(memoryLength.replace('0x', ''), 16).toString(10));\r\n        memoryLength = parseInt(memLengthDec) * 2;\r\n        let i = Math.floor(memoryStart / 32);\r\n        const maxIndex = Math.floor(memoryLength / 32) + i;\r\n        if (!memory[i]) {\r\n            return this.emptyFill(memoryLength);\r\n        }\r\n        let sha3Input = memory[i].slice(memoryStart - 32 * i);\r\n        i++;\r\n        while (i < maxIndex) {\r\n            sha3Input += memory[i] ? memory[i] : this.emptyFill(32);\r\n            i++;\r\n        }\r\n        if (sha3Input.length < memoryLength) {\r\n            const leftSize = memoryLength - sha3Input.length;\r\n            sha3Input += memory[i] ? memory[i].slice(0, leftSize) : this.emptyFill(leftSize);\r\n        }\r\n        return sha3Input;\r\n    }\r\n    emptyFill(size) {\r\n        return (new Array(size)).join('0');\r\n    }\r\n}\r\nexports.Web3VmProvider = Web3VmProvider;\r\n//# sourceMappingURL=web3VmProvider.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst ethereumjs_block_1 = tslib_1.__importDefault(require(\"ethereumjs-block\"));\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nfunction generateBlock(executionContext) {\r\n    const block = new ethereumjs_block_1.default({\r\n        header: {\r\n            timestamp: (new Date().getTime() / 1000 | 0),\r\n            number: 0,\r\n            coinbase: '0x0e9281e9c6a0808672eaba6bd1220e144c9bb07a',\r\n            difficulty: (new ethereumjs_util_1.BN('69762765929000', 10)),\r\n            gasLimit: new ethereumjs_util_1.BN('8000000').imuln(1)\r\n        },\r\n        transactions: [],\r\n        uncleHeaders: []\r\n    });\r\n    executionContext.vm().runBlock({ block: block, generate: true, skipBlockValidation: true, skipBalance: false }).then(() => {\r\n        executionContext.addBlock(block);\r\n    });\r\n}\r\nexports.generateBlock = generateBlock;\r\n//# sourceMappingURL=genesis.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provider_1 = require(\"./provider\");\r\nexports.Provider = provider_1.Provider;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst ethjs_util_1 = require(\"ethjs-util\");\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nconst crypto = tslib_1.__importStar(require(\"crypto\"));\r\nclass Accounts {\r\n    constructor(executionContext) {\r\n        this.web3 = new web3_1.default();\r\n        this.executionContext = executionContext;\r\n        // TODO: make it random and/or use remix-libs\r\n        this.accounts = {};\r\n        this.accountsKeys = {};\r\n        this.executionContext.init({ get: () => { return true; } });\r\n    }\r\n    resetAccounts() {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            // TODO: setting this to {} breaks the app currently, unclear why still\r\n            // this.accounts = {}\r\n            // this.accountsKeys = {}\r\n            yield this._addAccount('503f38a9c967ed597e47fe25643985f032b072db8075426a92110f82df48dfcb', '0x56BC75E2D63100000');\r\n            yield this._addAccount('7e5bfb82febc4c2c8529167104271ceec190eafdca277314912eaabdb67c6e5f', '0x56BC75E2D63100000');\r\n            yield this._addAccount('cc6d63f85de8fef05446ebdd3c537c72152d0fc437fd7aa62b3019b79bd1fdd4', '0x56BC75E2D63100000');\r\n            yield this._addAccount('638b5c6c8c5903b15f0d3bf5d3f175c64e6e98a10bdb9768a2003bf773dcb86a', '0x56BC75E2D63100000');\r\n            yield this._addAccount('f49bf239b6e554fdd08694fde6c67dac4d01c04e0dda5ee11abee478983f3bc0', '0x56BC75E2D63100000');\r\n            yield this._addAccount('adeee250542d3790253046eee928d8058fd544294a5219bea152d1badbada395', '0x56BC75E2D63100000');\r\n            yield this._addAccount('097ffe12069dcb3c3d99e6771e2cbf491a9b8b2f93ff4d3468f550c5e8264755', '0x56BC75E2D63100000');\r\n            yield this._addAccount('5f58e8b9f1867ef00578b6f03e159428ab168f776aa445bc3ecdb02c7db8e865', '0x56BC75E2D63100000');\r\n            yield this._addAccount('290e721ac87c7b3f31bef7b70104b9280ed3fa1425a59451490c9c02bf50d08f', '0x56BC75E2D63100000');\r\n            yield this._addAccount('27efe944ff128cf510ab447b529eec28772f13bf65ebf1cbd504192c4f26e9d8', '0x56BC75E2D63100000');\r\n            yield this._addAccount('3cd7232cd6f3fc66a57a6bedc1a8ed6c228fff0a327e169c2bcc5e869ed49511', '0x56BC75E2D63100000');\r\n            yield this._addAccount('2ac6c190b09897cd8987869cc7b918cfea07ee82038d492abce033c75c1b1d0c', '0x56BC75E2D63100000');\r\n            yield this._addAccount('dae9801649ba2d95a21e688b56f77905e5667c44ce868ec83f82e838712a2c7a', '0x56BC75E2D63100000');\r\n            yield this._addAccount('d74aa6d18aa79a05f3473dd030a97d3305737cbc8337d940344345c1f6b72eea', '0x56BC75E2D63100000');\r\n            yield this._addAccount('71975fbf7fe448e004ac7ae54cad0a383c3906055a65468714156a07385e96ce', '0x56BC75E2D63100000');\r\n        });\r\n    }\r\n    _addAccount(privateKey, balance) {\r\n        return new Promise((resolve, reject) => {\r\n            privateKey = Buffer.from(privateKey, 'hex');\r\n            const address = ethereumjs_util_1.privateToAddress(privateKey);\r\n            this.accounts[ethereumjs_util_1.toChecksumAddress('0x' + address.toString('hex'))] = { privateKey, nonce: 0 };\r\n            this.accountsKeys[ethereumjs_util_1.toChecksumAddress('0x' + address.toString('hex'))] = '0x' + privateKey.toString('hex');\r\n            const stateManager = this.executionContext.vm().stateManager;\r\n            stateManager.getAccount(address, (error, account) => {\r\n                if (error) {\r\n                    console.log(error);\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                account.balance = balance || '0xf00000000000000001';\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    newAccount(cb) {\r\n        let privateKey;\r\n        do {\r\n            privateKey = crypto.randomBytes(32);\r\n        } while (!ethereumjs_util_1.isValidPrivate(privateKey));\r\n        this._addAccount(privateKey, '0x56BC75E2D63100000');\r\n        return cb(null, '0x' + ethereumjs_util_1.privateToAddress(privateKey).toString('hex'));\r\n    }\r\n    methods() {\r\n        return {\r\n            eth_accounts: this.eth_accounts.bind(this),\r\n            eth_getBalance: this.eth_getBalance.bind(this),\r\n            eth_sign: this.eth_sign.bind(this)\r\n        };\r\n    }\r\n    eth_accounts(_payload, cb) {\r\n        return cb(null, Object.keys(this.accounts));\r\n    }\r\n    eth_getBalance(payload, cb) {\r\n        let address = payload.params[0];\r\n        address = ethjs_util_1.stripHexPrefix(address);\r\n        this.executionContext.vm().stateManager.getAccount(Buffer.from(address, 'hex'), (err, account) => {\r\n            if (err) {\r\n                return cb(err);\r\n            }\r\n            cb(null, new ethereumjs_util_1.BN(account.balance).toString(10));\r\n        });\r\n    }\r\n    eth_sign(payload, cb) {\r\n        const address = payload.params[0];\r\n        const message = payload.params[1];\r\n        const privateKey = this.accountsKeys[ethereumjs_util_1.toChecksumAddress(address)];\r\n        if (!privateKey) {\r\n            return cb(new Error('unknown account'));\r\n        }\r\n        const account = this.web3.eth.accounts.privateKeyToAccount(privateKey);\r\n        const data = account.sign(message);\r\n        cb(null, data.signature);\r\n    }\r\n}\r\nexports.Accounts = Accounts;\r\n//# sourceMappingURL=accounts.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Blocks {\r\n    constructor(executionContext, _options) {\r\n        this.executionContext = executionContext;\r\n        const options = _options || {};\r\n        this.coinbase = options.coinbase || '0x0000000000000000000000000000000000000000';\r\n        this.blockNumber = 0;\r\n    }\r\n    methods() {\r\n        return {\r\n            eth_getBlockByNumber: this.eth_getBlockByNumber.bind(this),\r\n            eth_gasPrice: this.eth_gasPrice.bind(this),\r\n            eth_coinbase: this.eth_coinbase.bind(this),\r\n            eth_blockNumber: this.eth_blockNumber.bind(this),\r\n            eth_getBlockByHash: this.eth_getBlockByHash.bind(this),\r\n            eth_getBlockTransactionCountByHash: this.eth_getBlockTransactionCountByHash.bind(this),\r\n            eth_getBlockTransactionCountByNumber: this.eth_getBlockTransactionCountByNumber.bind(this),\r\n            eth_getUncleCountByBlockHash: this.eth_getUncleCountByBlockHash.bind(this),\r\n            eth_getUncleCountByBlockNumber: this.eth_getUncleCountByBlockNumber.bind(this),\r\n            eth_getStorageAt: this.eth_getStorageAt.bind(this)\r\n        };\r\n    }\r\n    eth_getBlockByNumber(payload, cb) {\r\n        let blockIndex = payload.params[0];\r\n        if (blockIndex === 'latest') {\r\n            blockIndex = this.executionContext.latestBlockNumber;\r\n        }\r\n        const block = this.executionContext.blocks[blockIndex];\r\n        if (!block) {\r\n            return cb(new Error('block not found'));\r\n        }\r\n        const b = {\r\n            number: this.toHex(block.header.number),\r\n            hash: this.toHex(block.hash()),\r\n            parentHash: this.toHex(block.header.parentHash),\r\n            nonce: this.toHex(block.header.nonce),\r\n            sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',\r\n            logsBloom: '0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331',\r\n            transactionsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',\r\n            stateRoot: this.toHex(block.header.stateRoot),\r\n            miner: this.coinbase,\r\n            difficulty: this.toHex(block.header.difficulty),\r\n            totalDifficulty: this.toHex(block.header.totalDifficulty),\r\n            extraData: this.toHex(block.header.extraData),\r\n            size: '0x027f07',\r\n            gasLimit: this.toHex(block.header.gasLimit),\r\n            gasUsed: this.toHex(block.header.gasUsed),\r\n            timestamp: this.toHex(block.header.timestamp),\r\n            transactions: block.transactions.map((t) => '0x' + t.hash().toString('hex')),\r\n            uncles: []\r\n        };\r\n        cb(null, b);\r\n    }\r\n    toHex(value) {\r\n        if (!value)\r\n            return '0x0';\r\n        const v = value.toString('hex');\r\n        return ((v === '0x' || v === '') ? '0x0' : ('0x' + v));\r\n    }\r\n    eth_getBlockByHash(payload, cb) {\r\n        const block = this.executionContext.blocks[payload.params[0]];\r\n        const b = {\r\n            number: this.toHex(block.header.number),\r\n            hash: this.toHex(block.hash()),\r\n            parentHash: this.toHex(block.header.parentHash),\r\n            nonce: this.toHex(block.header.nonce),\r\n            sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',\r\n            logsBloom: '0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331',\r\n            transactionsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',\r\n            stateRoot: this.toHex(block.header.stateRoot),\r\n            miner: this.coinbase,\r\n            difficulty: this.toHex(block.header.difficulty),\r\n            totalDifficulty: this.toHex(block.header.totalDifficulty),\r\n            extraData: this.toHex(block.header.extraData),\r\n            size: '0x027f07',\r\n            gasLimit: this.toHex(block.header.gasLimit),\r\n            gasUsed: this.toHex(block.header.gasUsed),\r\n            timestamp: this.toHex(block.header.timestamp),\r\n            transactions: block.transactions.map((t) => '0x' + t.hash().toString('hex')),\r\n            uncles: []\r\n        };\r\n        cb(null, b);\r\n    }\r\n    eth_gasPrice(payload, cb) {\r\n        cb(null, 1);\r\n    }\r\n    eth_coinbase(payload, cb) {\r\n        cb(null, this.coinbase);\r\n    }\r\n    eth_blockNumber(payload, cb) {\r\n        cb(null, this.blockNumber);\r\n    }\r\n    eth_getBlockTransactionCountByHash(payload, cb) {\r\n        const block = this.executionContext.blocks[payload.params[0]];\r\n        cb(null, block.transactions.length);\r\n    }\r\n    eth_getBlockTransactionCountByNumber(payload, cb) {\r\n        const block = this.executionContext.blocks[payload.params[0]];\r\n        cb(null, block.transactions.length);\r\n    }\r\n    eth_getUncleCountByBlockHash(payload, cb) {\r\n        cb(null, 0);\r\n    }\r\n    eth_getUncleCountByBlockNumber(payload, cb) {\r\n        cb(null, 0);\r\n    }\r\n    eth_getStorageAt(payload, cb) {\r\n        const [address, position, blockNumber] = payload.params;\r\n        this.executionContext.web3().debug.storageRangeAt(blockNumber, 'latest', address.toLowerCase(), position, 1, (err, result) => {\r\n            if (err || (result.storage && Object.values(result.storage).length === 0)) {\r\n                return cb(err, '');\r\n            }\r\n            const value = Object.values(result.storage)[0]['value'];\r\n            cb(err, value);\r\n        });\r\n    }\r\n}\r\nexports.Blocks = Blocks;\r\n//# sourceMappingURL=blocks.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Debug {\r\n    constructor(executionContext) {\r\n        this.executionContext = executionContext;\r\n    }\r\n    methods() {\r\n        return {\r\n            debug_traceTransaction: this.debug_traceTransaction.bind(this),\r\n            debug_preimage: this.debug_preimage.bind(this),\r\n            debug_storageRangeAt: this.debug_storageRangeAt.bind(this)\r\n        };\r\n    }\r\n    debug_traceTransaction(payload, cb) {\r\n        this.executionContext.web3().debug.traceTransaction(payload.params[0], {}, cb);\r\n    }\r\n    debug_preimage(payload, cb) {\r\n        this.executionContext.web3().debug.preimage(payload.params[0], cb);\r\n    }\r\n    debug_storageRangeAt(payload, cb) {\r\n        this.executionContext.web3().debug.storageRangeAt(payload.params[0], payload.params[1], payload.params[2], payload.params[3], payload.params[4], cb);\r\n    }\r\n}\r\nexports.Debug = Debug;\r\n//# sourceMappingURL=debug.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Filters {\r\n    constructor(executionContext) {\r\n        this.executionContext = executionContext;\r\n    }\r\n    methods() {\r\n        return {\r\n            eth_getLogs: this.eth_getLogs.bind(this),\r\n            eth_subscribe: this.eth_subscribe.bind(this),\r\n            eth_unsubscribe: this.eth_unsubscribe.bind(this)\r\n        };\r\n    }\r\n    eth_getLogs(payload, cb) {\r\n        const results = this.executionContext.logsManager.getLogsFor(payload.params[0]);\r\n        cb(null, results);\r\n    }\r\n    eth_subscribe(payload, cb) {\r\n        const subscriptionId = this.executionContext.logsManager.subscribe(payload.params);\r\n        cb(null, subscriptionId);\r\n    }\r\n    eth_unsubscribe(payload, cb) {\r\n        this.executionContext.logsManager.unsubscribe(payload.params[0]);\r\n        cb(null, true);\r\n    }\r\n    eth_newFilter(payload, cb) {\r\n        const filterId = this.executionContext.logsManager.newFilter('filter', payload.params[0]);\r\n        cb(null, filterId);\r\n    }\r\n    eth_newBlockFilter(payload, cb) {\r\n        const filterId = this.executionContext.logsManager.newFilter('block');\r\n        cb(null, filterId);\r\n    }\r\n    eth_newPendingTransactionFilter(payload, cb) {\r\n        const filterId = this.executionContext.logsManager.newFilter('pendingTransactions');\r\n        cb(null, filterId);\r\n    }\r\n    eth_uninstallfilter(payload, cb) {\r\n        const result = this.executionContext.logsManager.uninstallFilter(payload.params[0]);\r\n        cb(null, result);\r\n    }\r\n    eth_getFilterChanges(payload, cb) {\r\n        const filterId = payload.params[0];\r\n        const results = this.executionContext.logsManager.getLogsForFilter(filterId);\r\n        cb(null, results);\r\n    }\r\n    eth_getFilterLogs(payload, cb) {\r\n        const filterId = payload.params[0];\r\n        const results = this.executionContext.logsManager.getLogsForFilter(filterId, true);\r\n        cb(null, results);\r\n    }\r\n}\r\nexports.Filters = Filters;\r\n//# sourceMappingURL=filters.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst version = require('../../package.json').version;\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nfunction methods() {\r\n    return {\r\n        web3_clientVersion: this.web3_clientVersion.bind(this),\r\n        eth_protocolVersion: this.eth_protocolVersion.bind(this),\r\n        eth_syncing: this.eth_syncing.bind(this),\r\n        eth_mining: this.eth_mining.bind(this),\r\n        eth_hashrate: this.eth_hashrate.bind(this),\r\n        web3_sha3: this.web3_sha3.bind(this),\r\n        eth_getCompilers: this.eth_getCompilers.bind(this),\r\n        eth_compileSolidity: this.eth_compileSolidity.bind(this),\r\n        eth_compileLLL: this.eth_compileLLL.bind(this),\r\n        eth_compileSerpent: this.eth_compileSerpent.bind(this)\r\n    };\r\n}\r\nexports.methods = methods;\r\nfunction web3_clientVersion(payload, cb) {\r\n    cb(null, 'Remix Simulator/' + version);\r\n}\r\nexports.web3_clientVersion = web3_clientVersion;\r\nfunction eth_protocolVersion(payload, cb) {\r\n    cb(null, '0x3f');\r\n}\r\nexports.eth_protocolVersion = eth_protocolVersion;\r\nfunction eth_syncing(payload, cb) {\r\n    cb(null, false);\r\n}\r\nexports.eth_syncing = eth_syncing;\r\nfunction eth_mining(payload, cb) {\r\n    // TODO: should depend on the state\r\n    cb(null, false);\r\n}\r\nexports.eth_mining = eth_mining;\r\nfunction eth_hashrate(payload, cb) {\r\n    cb(null, '0x0');\r\n}\r\nexports.eth_hashrate = eth_hashrate;\r\nfunction web3_sha3(payload, cb) {\r\n    const str = payload.params[0];\r\n    cb(null, web3_1.default.utils.sha3(str));\r\n}\r\nexports.web3_sha3 = web3_sha3;\r\nfunction eth_getCompilers(payload, cb) {\r\n    cb(null, []);\r\n}\r\nexports.eth_getCompilers = eth_getCompilers;\r\nfunction eth_compileSolidity(payload, cb) {\r\n    cb(null, 'unsupported');\r\n}\r\nexports.eth_compileSolidity = eth_compileSolidity;\r\nfunction eth_compileLLL(payload, cb) {\r\n    cb(null, 'unsupported');\r\n}\r\nexports.eth_compileLLL = eth_compileLLL;\r\nfunction eth_compileSerpent(payload, cb) {\r\n    cb(null, 'unsupported');\r\n}\r\nexports.eth_compileSerpent = eth_compileSerpent;\r\n//# sourceMappingURL=misc.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction methods() {\r\n    return {\r\n        net_version: this.net_version,\r\n        net_listening: this.net_listening,\r\n        net_peerCount: this.net_peerCount\r\n    };\r\n}\r\nexports.methods = methods;\r\nfunction net_version(payload, cb) {\r\n    // should be configured networkId\r\n    cb(null, 1337);\r\n}\r\nexports.net_version = net_version;\r\nfunction net_listening(payload, cb) {\r\n    cb(null, true);\r\n}\r\nexports.net_listening = net_listening;\r\nfunction net_peerCount(payload, cb) {\r\n    cb(null, 0);\r\n}\r\nexports.net_peerCount = net_peerCount;\r\n//# sourceMappingURL=net.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nconst ethereumjs_util_1 = require(\"ethereumjs-util\");\r\nconst txProcess_1 = require(\"./txProcess\");\r\nclass Transactions {\r\n    constructor(executionContext) {\r\n        this.executionContext = executionContext;\r\n    }\r\n    init(accounts) {\r\n        this.accounts = accounts;\r\n    }\r\n    methods() {\r\n        return {\r\n            eth_sendTransaction: this.eth_sendTransaction.bind(this),\r\n            eth_getTransactionReceipt: this.eth_getTransactionReceipt.bind(this),\r\n            eth_getCode: this.eth_getCode.bind(this),\r\n            eth_call: this.eth_call.bind(this),\r\n            eth_estimateGas: this.eth_estimateGas.bind(this),\r\n            eth_getTransactionCount: this.eth_getTransactionCount.bind(this),\r\n            eth_getTransactionByHash: this.eth_getTransactionByHash.bind(this),\r\n            eth_getTransactionByBlockHashAndIndex: this.eth_getTransactionByBlockHashAndIndex.bind(this),\r\n            eth_getTransactionByBlockNumberAndIndex: this.eth_getTransactionByBlockNumberAndIndex.bind(this)\r\n        };\r\n    }\r\n    eth_sendTransaction(payload, cb) {\r\n        // from might be lowercased address (web3)\r\n        if (payload.params && payload.params.length > 0 && payload.params[0].from) {\r\n            payload.params[0].from = ethereumjs_util_1.toChecksumAddress(payload.params[0].from);\r\n        }\r\n        txProcess_1.processTx(this.executionContext, this.accounts, payload, false, cb);\r\n    }\r\n    eth_getTransactionReceipt(payload, cb) {\r\n        this.executionContext.web3().eth.getTransactionReceipt(payload.params[0], (error, receipt) => {\r\n            if (error) {\r\n                return cb(error);\r\n            }\r\n            const txBlock = this.executionContext.txs[receipt.hash];\r\n            const r = {\r\n                transactionHash: receipt.hash,\r\n                transactionIndex: '0x00',\r\n                blockHash: '0x' + txBlock.hash().toString('hex'),\r\n                blockNumber: '0x' + txBlock.header.number.toString('hex'),\r\n                gasUsed: web3_1.default.utils.toHex(receipt.gas),\r\n                cumulativeGasUsed: web3_1.default.utils.toHex(receipt.gas),\r\n                contractAddress: receipt.contractAddress,\r\n                logs: receipt.logs,\r\n                status: receipt.status,\r\n                to: receipt.to\r\n            };\r\n            if (r.blockNumber === '0x') {\r\n                r.blockNumber = '0x0';\r\n            }\r\n            cb(null, r);\r\n        });\r\n    }\r\n    eth_estimateGas(payload, cb) {\r\n        cb(null, 3000000);\r\n    }\r\n    eth_getCode(payload, cb) {\r\n        const address = payload.params[0];\r\n        this.executionContext.web3().eth.getCode(address, (error, result) => {\r\n            if (error) {\r\n                console.dir('error getting code');\r\n                console.dir(error);\r\n            }\r\n            cb(error, result);\r\n        });\r\n    }\r\n    eth_call(payload, cb) {\r\n        // from might be lowercased address (web3)\r\n        if (payload.params && payload.params.length > 0 && payload.params[0].from) {\r\n            payload.params[0].from = ethereumjs_util_1.toChecksumAddress(payload.params[0].from);\r\n        }\r\n        if (payload.params && payload.params.length > 0 && payload.params[0].to) {\r\n            payload.params[0].to = ethereumjs_util_1.toChecksumAddress(payload.params[0].to);\r\n        }\r\n        payload.params[0].value = undefined;\r\n        txProcess_1.processTx(this.executionContext, this.accounts, payload, true, cb);\r\n    }\r\n    eth_getTransactionCount(payload, cb) {\r\n        const address = payload.params[0];\r\n        this.executionContext.vm().stateManager.getAccount(address, (err, account) => {\r\n            if (err) {\r\n                return cb(err);\r\n            }\r\n            const nonce = new ethereumjs_util_1.BN(account.nonce).toString(10);\r\n            cb(null, nonce);\r\n        });\r\n    }\r\n    eth_getTransactionByHash(payload, cb) {\r\n        const address = payload.params[0];\r\n        this.executionContext.web3().eth.getTransactionReceipt(address, (error, receipt) => {\r\n            if (error) {\r\n                return cb(error);\r\n            }\r\n            const txBlock = this.executionContext.txs[receipt.transactionHash];\r\n            // TODO: params to add later\r\n            const r = {\r\n                blockHash: '0x' + txBlock.hash().toString('hex'),\r\n                blockNumber: '0x' + txBlock.header.number.toString('hex'),\r\n                from: receipt.from,\r\n                gas: web3_1.default.utils.toHex(receipt.gas),\r\n                // 'gasPrice': '2000000000000', // 0x123\r\n                gasPrice: '0x4a817c800',\r\n                hash: receipt.transactionHash,\r\n                input: receipt.input,\r\n                nonce: 2,\r\n                // \"transactionIndex\": 0,\r\n                value: receipt.value\r\n                // \"value\":\"0xf3dbb76162000\" // 4290000000000000\r\n                // \"v\": \"0x25\", // 37\r\n                // \"r\": \"0x1b5e176d927f8e9ab405058b2d2457392da3e20f328b16ddabcebc33eaac5fea\",\r\n                // \"s\": \"0x4ba69724e8f69de52f0125ad8b3c5c2cef33019bac3249e2c0a2192766d1721c\"\r\n            };\r\n            if (receipt.to) {\r\n                r['to'] = receipt.to;\r\n            }\r\n            if (r.value === '0x') {\r\n                r.value = '0x0';\r\n            }\r\n            if (r.blockNumber === '0x') {\r\n                r.blockNumber = '0x0';\r\n            }\r\n            cb(null, r);\r\n        });\r\n    }\r\n    eth_getTransactionByBlockHashAndIndex(payload, cb) {\r\n        const txIndex = payload.params[1];\r\n        const txBlock = this.executionContext.blocks[payload.params[0]];\r\n        const txHash = '0x' + txBlock.transactions[web3_1.default.utils.toDecimal(txIndex)].hash().toString('hex');\r\n        this.executionContext.web3().eth.getTransactionReceipt(txHash, (error, receipt) => {\r\n            if (error) {\r\n                return cb(error);\r\n            }\r\n            // TODO: params to add later\r\n            const r = {\r\n                blockHash: '0x' + txBlock.hash().toString('hex'),\r\n                blockNumber: '0x' + txBlock.header.number.toString('hex'),\r\n                from: receipt.from,\r\n                gas: web3_1.default.utils.toHex(receipt.gas),\r\n                // 'gasPrice': '2000000000000', // 0x123\r\n                gasPrice: '0x4a817c800',\r\n                hash: receipt.transactionHash,\r\n                input: receipt.input,\r\n                nonce: 2,\r\n                // \"transactionIndex\": 0,\r\n                value: receipt.value\r\n                // \"value\":\"0xf3dbb76162000\" // 4290000000000000\r\n                // \"v\": \"0x25\", // 37\r\n                // \"r\": \"0x1b5e176d927f8e9ab405058b2d2457392da3e20f328b16ddabcebc33eaac5fea\",\r\n                // \"s\": \"0x4ba69724e8f69de52f0125ad8b3c5c2cef33019bac3249e2c0a2192766d1721c\"\r\n            };\r\n            if (receipt.to) {\r\n                r['to'] = receipt.to;\r\n            }\r\n            if (r.value === '0x') {\r\n                r.value = '0x0';\r\n            }\r\n            cb(null, r);\r\n        });\r\n    }\r\n    eth_getTransactionByBlockNumberAndIndex(payload, cb) {\r\n        const txIndex = payload.params[1];\r\n        const txBlock = this.executionContext.blocks[payload.params[0]];\r\n        const txHash = '0x' + txBlock.transactions[web3_1.default.utils.toDecimal(txIndex)].hash().toString('hex');\r\n        this.executionContext.web3().eth.getTransactionReceipt(txHash, (error, receipt) => {\r\n            if (error) {\r\n                return cb(error);\r\n            }\r\n            // TODO: params to add later\r\n            const r = {\r\n                blockHash: '0x' + txBlock.hash().toString('hex'),\r\n                blockNumber: '0x' + txBlock.header.number.toString('hex'),\r\n                from: receipt.from,\r\n                gas: web3_1.default.utils.toHex(receipt.gas),\r\n                // 'gasPrice': '2000000000000', // 0x123\r\n                gasPrice: '0x4a817c800',\r\n                hash: receipt.transactionHash,\r\n                input: receipt.input,\r\n                nonce: 2,\r\n                // \"transactionIndex\": 0,\r\n                value: receipt.value\r\n                // \"value\":\"0xf3dbb76162000\" // 4290000000000000\r\n                // \"v\": \"0x25\", // 37\r\n                // \"r\": \"0x1b5e176d927f8e9ab405058b2d2457392da3e20f328b16ddabcebc33eaac5fea\",\r\n                // \"s\": \"0x4ba69724e8f69de52f0125ad8b3c5c2cef33019bac3249e2c0a2192766d1721c\"\r\n            };\r\n            if (receipt.to) {\r\n                r['to'] = receipt.to;\r\n            }\r\n            if (r.value === '0x') {\r\n                r.value = '0x0';\r\n            }\r\n            cb(null, r);\r\n        });\r\n    }\r\n}\r\nexports.Transactions = Transactions;\r\n//# sourceMappingURL=transactions.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst TxExecution = remix_lib_1.execution.txExecution;\r\nconst TxRunner = remix_lib_1.execution.txRunner;\r\nfunction runCall(payload, from, to, data, value, gasLimit, txRunner, callbacks, callback) {\r\n    const finalCallback = function (err, result) {\r\n        if (err) {\r\n            return callback(err);\r\n        }\r\n        const returnValue = result.result.execResult.returnValue.toString('hex');\r\n        const toReturn = `0x${returnValue || '0'}`;\r\n        return callback(null, toReturn);\r\n    };\r\n    TxExecution.callFunction(from, to, data, value, gasLimit, { constant: true }, txRunner, callbacks, finalCallback);\r\n}\r\nfunction runTx(payload, from, to, data, value, gasLimit, txRunner, callbacks, callback) {\r\n    const finalCallback = function (err, result) {\r\n        if (err) {\r\n            return callback(err);\r\n        }\r\n        callback(null, result.transactionHash);\r\n    };\r\n    TxExecution.callFunction(from, to, data, value, gasLimit, { constant: false }, txRunner, callbacks, finalCallback);\r\n}\r\nfunction createContract(payload, from, data, value, gasLimit, txRunner, callbacks, callback) {\r\n    const finalCallback = function (err, result) {\r\n        if (err) {\r\n            return callback(err);\r\n        }\r\n        callback(null, result.transactionHash);\r\n    };\r\n    TxExecution.createContract(from, data, value, gasLimit, txRunner, callbacks, finalCallback);\r\n}\r\nlet txRunnerInstance;\r\nfunction processTx(executionContext, accounts, payload, isCall, callback) {\r\n    const api = {\r\n        logMessage: (msg) => {\r\n        },\r\n        logHtmlMessage: (msg) => {\r\n        },\r\n        config: {\r\n            getUnpersistedProperty: (key) => {\r\n                return true;\r\n            },\r\n            get: () => {\r\n                return true;\r\n            }\r\n        },\r\n        detectNetwork: (cb) => {\r\n            cb();\r\n        },\r\n        personalMode: () => {\r\n            return false;\r\n        }\r\n    };\r\n    executionContext.init(api.config);\r\n    // let txRunner = new TxRunner(accounts, api)\r\n    if (!txRunnerInstance) {\r\n        txRunnerInstance = new TxRunner(accounts, api, executionContext);\r\n    }\r\n    txRunnerInstance.vmaccounts = accounts;\r\n    let { from, to, data, value, gas } = payload.params[0];\r\n    gas = gas || 3000000;\r\n    const callbacks = {\r\n        confirmationCb: (network, tx, gasEstimation, continueTxExecution, cancelCb) => {\r\n            continueTxExecution(null);\r\n        },\r\n        gasEstimationForceSend: (error, continueTxExecution, cancelCb) => {\r\n            if (error) {\r\n                continueTxExecution(error);\r\n            }\r\n            continueTxExecution();\r\n        },\r\n        promptCb: (okCb, cancelCb) => {\r\n            okCb();\r\n        }\r\n    };\r\n    if (isCall) {\r\n        runCall(payload, from, to, data, value, gas, txRunnerInstance, callbacks, callback);\r\n    }\r\n    else if (to) {\r\n        runTx(payload, from, to, data, value, gas, txRunnerInstance, callbacks, callback);\r\n    }\r\n    else {\r\n        createContract(payload, from, data, value, gas, txRunnerInstance, callbacks, callback);\r\n    }\r\n}\r\nexports.processTx = processTx;\r\n//# sourceMappingURL=txProcess.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst blocks_1 = require(\"./methods/blocks\");\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\nconst { executionContext } = remix_lib_1.execution;\r\nconst logs_1 = require(\"./utils/logs\");\r\nconst merge_1 = tslib_1.__importDefault(require(\"merge\"));\r\nconst accounts_1 = require(\"./methods/accounts\");\r\nconst filters_1 = require(\"./methods/filters\");\r\nconst misc_1 = require(\"./methods/misc\");\r\nconst net_1 = require(\"./methods/net\");\r\nconst transactions_1 = require(\"./methods/transactions\");\r\nconst debug_1 = require(\"./methods/debug\");\r\nconst genesis_1 = require(\"./genesis\");\r\nclass Provider {\r\n    constructor(host = 'vm', options = {}) {\r\n        this.options = options;\r\n        this.host = host;\r\n        this.connected = true;\r\n        // TODO: init executionContext here\r\n        this.executionContext = executionContext;\r\n        this.Accounts = new accounts_1.Accounts(this.executionContext);\r\n        this.Transactions = new transactions_1.Transactions(this.executionContext);\r\n        this.methods = {};\r\n        this.methods = merge_1.default(this.methods, this.Accounts.methods());\r\n        this.methods = merge_1.default(this.methods, (new blocks_1.Blocks(this.executionContext, options)).methods());\r\n        this.methods = merge_1.default(this.methods, misc_1.methods());\r\n        this.methods = merge_1.default(this.methods, (new filters_1.Filters(this.executionContext)).methods());\r\n        this.methods = merge_1.default(this.methods, net_1.methods());\r\n        this.methods = merge_1.default(this.methods, this.Transactions.methods());\r\n        this.methods = merge_1.default(this.methods, (new debug_1.Debug(this.executionContext)).methods());\r\n        genesis_1.generateBlock(this.executionContext);\r\n        this.init();\r\n    }\r\n    init() {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            yield this.Accounts.resetAccounts();\r\n            this.Transactions.init(this.Accounts.accounts);\r\n        });\r\n    }\r\n    sendAsync(payload, callback) {\r\n        // log.info('payload method is ', payload.method) // commented because, this floods the IDE console\r\n        const method = this.methods[payload.method];\r\n        if (this.options.logDetails) {\r\n            logs_1.info(payload);\r\n        }\r\n        if (method) {\r\n            return method.call(method, payload, (err, result) => {\r\n                if (this.options.logDetails) {\r\n                    logs_1.info(err);\r\n                    logs_1.info(result);\r\n                }\r\n                if (err) {\r\n                    return callback(err);\r\n                }\r\n                const response = { id: payload.id, jsonrpc: '2.0', result: result };\r\n                callback(null, response);\r\n            });\r\n        }\r\n        callback(new Error('unknown method ' + payload.method));\r\n    }\r\n    send(payload, callback) {\r\n        this.sendAsync(payload, callback || function () { });\r\n    }\r\n    isConnected() {\r\n        return true;\r\n    }\r\n    disconnect() {\r\n        return false;\r\n    }\r\n    ;\r\n    supportsSubscriptions() {\r\n        return true;\r\n    }\r\n    ;\r\n    on(type, cb) {\r\n        this.executionContext.logsManager.addListener(type, cb);\r\n    }\r\n}\r\nexports.Provider = Provider;\r\n//# sourceMappingURL=provider.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst ansi_gray_1 = tslib_1.__importDefault(require(\"ansi-gray\"));\r\nconst time_stamp_1 = tslib_1.__importDefault(require(\"time-stamp\"));\r\nconst color_support_1 = tslib_1.__importDefault(require(\"color-support\"));\r\nfunction hasFlag(flag) {\r\n    return ((typeof (process) !== 'undefined') && (process.argv.indexOf('--' + flag) !== -1));\r\n}\r\nfunction addColor(str) {\r\n    if (this.hasFlag('no-color')) {\r\n        return str;\r\n    }\r\n    if (this.hasFlag('color')) {\r\n        return ansi_gray_1.default(str);\r\n    }\r\n    if (color_support_1.default()) {\r\n        return ansi_gray_1.default(str);\r\n    }\r\n    return str;\r\n}\r\nfunction stdout(arg) {\r\n    if (typeof (process) === 'undefined' || !process.stdout)\r\n        return;\r\n    process.stdout.write(arg);\r\n}\r\nfunction stderr(arg) {\r\n    if (typeof (process) === 'undefined' || process.stderr)\r\n        return;\r\n    process.stderr.write(arg);\r\n}\r\nfunction getTimestamp() {\r\n    const coloredTimestamp = this.addColor(time_stamp_1.default('HH:mm:ss'));\r\n    return '[' + coloredTimestamp + ']';\r\n}\r\nfunction log(...args) {\r\n    const time = this.getTimestamp();\r\n    this.stdout(time + ' ');\r\n    console.log(args);\r\n    return this;\r\n}\r\nexports.log = log;\r\nfunction info(...args) {\r\n    const time = this.getTimestamp();\r\n    this.stdout(time + ' ');\r\n    console.info(args);\r\n    return this;\r\n}\r\nexports.info = info;\r\nfunction dir(...args) {\r\n    const time = this.getTimestamp();\r\n    this.stdout(time + ' ');\r\n    console.dir(args);\r\n    return this;\r\n}\r\nexports.dir = dir;\r\nfunction warn(...args) {\r\n    const time = this.getTimestamp();\r\n    this.stderr(time + ' ');\r\n    console.warn(args);\r\n    return this;\r\n}\r\nexports.warn = warn;\r\nfunction error(...args) {\r\n    const time = this.getTimestamp();\r\n    this.stderr(time + ' ');\r\n    console.error(args);\r\n    return this;\r\n}\r\nexports.error = error;\r\n//# sourceMappingURL=logs.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = (sources, opts) => {\r\n    const o = {\r\n        language: 'Solidity',\r\n        sources: sources,\r\n        settings: {\r\n            optimizer: {\r\n                enabled: opts.optimize === true || opts.optimize === 1,\r\n                runs: opts.runs || 200\r\n            },\r\n            libraries: opts.libraries,\r\n            outputSelection: {\r\n                '*': {\r\n                    '': ['ast'],\r\n                    '*': ['abi', 'metadata', 'devdoc', 'userdoc', 'evm.legacyAssembly', 'evm.bytecode', 'evm.deployedBytecode', 'evm.methodIdentifiers', 'evm.gasEstimates', 'evm.assembly']\r\n                }\r\n            }\r\n        }\r\n    };\r\n    if (opts.evmVersion) {\r\n        o.settings.evmVersion = opts.evmVersion;\r\n    }\r\n    if (opts.language) {\r\n        o.language = opts.language;\r\n    }\r\n    if (opts.language === 'Yul' && o.settings.optimizer.enabled) {\r\n        if (!o.settings.optimizer.details)\r\n            o.settings.optimizer.details = {};\r\n        o.settings.optimizer.details.yul = true;\r\n    }\r\n    return JSON.stringify(o);\r\n};\r\n//# sourceMappingURL=compiler-input.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst solc = require(\"solc/wrapper\");\r\nlet compileJSON = (input) => { return ''; };\r\nconst missingInputs = [];\r\n// 'DedicatedWorkerGlobalScope' object (the Worker global scope) is accessible through the self keyword\r\n// 'dom' and 'webworker' library files can't be included together https://github.com/microsoft/TypeScript/issues/20595\r\nfunction default_1(self) {\r\n    self.addEventListener('message', (e) => {\r\n        const data = e.data;\r\n        switch (data.cmd) {\r\n            case 'loadVersion':\r\n                {\r\n                    delete self.Module;\r\n                    // NOTE: workaround some browsers?\r\n                    self.Module = undefined;\r\n                    compileJSON = null;\r\n                    //importScripts() method of synchronously imports one or more scripts into the worker's scope\r\n                    self.importScripts(data.data);\r\n                    const compiler = solc(self.Module);\r\n                    compileJSON = (input) => {\r\n                        try {\r\n                            const missingInputsCallback = (path) => {\r\n                                missingInputs.push(path);\r\n                                return { 'error': 'Deferred import' };\r\n                            };\r\n                            return compiler.compile(input, { import: missingInputsCallback });\r\n                        }\r\n                        catch (exception) {\r\n                            return JSON.stringify({ error: 'Uncaught JavaScript exception:\\n' + exception });\r\n                        }\r\n                    };\r\n                    self.postMessage({\r\n                        cmd: 'versionLoaded',\r\n                        data: compiler.version()\r\n                    });\r\n                    break;\r\n                }\r\n            case 'compile':\r\n                missingInputs.length = 0;\r\n                if (data.input && compileJSON) {\r\n                    self.postMessage({\r\n                        cmd: 'compiled',\r\n                        job: data.job,\r\n                        data: compileJSON(data.input),\r\n                        missingInputs: missingInputs\r\n                    });\r\n                }\r\n                break;\r\n        }\r\n    }, false);\r\n}\r\nexports.default = default_1;\r\n//# sourceMappingURL=compiler-worker.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst abi_1 = require(\"solc/abi\");\r\nconst webworkify = require(\"webworkify-webpack\");\r\nconst compiler_input_1 = require(\"./compiler-input\");\r\nconst eventManager_1 = require(\"../lib/eventManager\");\r\nconst txHelper_1 = require(\"./txHelper\");\r\nconst types_1 = require(\"./types\");\r\n/*\r\n  trigger compilationFinished, compilerLoaded, compilationStarted, compilationDuration\r\n*/\r\nclass Compiler {\r\n    constructor(handleImportCall) {\r\n        this.handleImportCall = handleImportCall;\r\n        this.event = new eventManager_1.default();\r\n        this.state = {\r\n            compileJSON: null,\r\n            worker: null,\r\n            currentVersion: null,\r\n            optimize: false,\r\n            runs: 200,\r\n            evmVersion: null,\r\n            language: 'Solidity',\r\n            compilationStartTime: null,\r\n            target: null,\r\n            lastCompilationResult: {\r\n                data: null,\r\n                source: null\r\n            }\r\n        };\r\n        this.event.register('compilationFinished', (success, data, source) => {\r\n            if (success && this.state.compilationStartTime) {\r\n                this.event.trigger('compilationDuration', [(new Date().getTime()) - this.state.compilationStartTime]);\r\n            }\r\n            this.state.compilationStartTime = null;\r\n        });\r\n        this.event.register('compilationStarted', () => {\r\n            this.state.compilationStartTime = new Date().getTime();\r\n        });\r\n    }\r\n    /**\r\n     * @dev Setter function for CompilerState's properties (used by IDE)\r\n     * @param key key\r\n     * @param value value of key in CompilerState\r\n     */\r\n    set(key, value) {\r\n        this.state[key] = value;\r\n        if (key === 'runs')\r\n            this.state['runs'] = parseInt(value);\r\n    }\r\n    /**\r\n     * @dev Internal function to compile the contract after gathering imports\r\n     * @param files source file\r\n     * @param missingInputs missing import file path list\r\n     */\r\n    internalCompile(files, missingInputs) {\r\n        this.gatherImports(files, missingInputs, (error, input) => {\r\n            if (error) {\r\n                this.state.lastCompilationResult = null;\r\n                this.event.trigger('compilationFinished', [false, { 'error': { formattedMessage: error, severity: 'error' } }, files]);\r\n            }\r\n            else if (this.state.compileJSON && input)\r\n                this.state.compileJSON(input);\r\n        });\r\n    }\r\n    /**\r\n     * @dev Compile source files (used by IDE)\r\n     * @param files source files\r\n     * @param target target file name (This is passed as it is to IDE)\r\n     */\r\n    compile(files, target) {\r\n        this.state.target = target;\r\n        this.event.trigger('compilationStarted', []);\r\n        this.internalCompile(files);\r\n    }\r\n    /**\r\n     * @dev Called when compiler is loaded, set current compiler version\r\n     * @param version compiler version\r\n     */\r\n    onCompilerLoaded(version) {\r\n        this.state.currentVersion = version;\r\n        this.event.trigger('compilerLoaded', [version]);\r\n    }\r\n    /**\r\n     * @dev Called when compiler is loaded internally (without worker)\r\n     */\r\n    onInternalCompilerLoaded() {\r\n        if (this.state.worker === null) {\r\n            const compiler = typeof (window) !== 'undefined' && window['Module'] ? require('solc/wrapper')(window['Module']) : require('solc');\r\n            this.state.compileJSON = (source) => {\r\n                const missingInputs = [];\r\n                const missingInputsCallback = (path) => {\r\n                    missingInputs.push(path);\r\n                    return { error: 'Deferred import' };\r\n                };\r\n                let result = {};\r\n                try {\r\n                    if (source && source.sources) {\r\n                        const { optimize, runs, evmVersion, language } = this.state;\r\n                        const input = compiler_input_1.default(source.sources, { optimize, runs, evmVersion, language });\r\n                        result = JSON.parse(compiler.compile(input, { import: missingInputsCallback }));\r\n                    }\r\n                }\r\n                catch (exception) {\r\n                    result = { error: { formattedMessage: 'Uncaught JavaScript exception:\\n' + exception, severity: 'error', mode: 'panic' } };\r\n                }\r\n                this.onCompilationFinished(result, missingInputs, source);\r\n            };\r\n            this.onCompilerLoaded(compiler.version());\r\n        }\r\n    }\r\n    /**\r\n     * @dev Called when compilation is finished\r\n     * @param data compilation result data\r\n     * @param missingInputs missing imports\r\n     * @param source Source\r\n     */\r\n    onCompilationFinished(data, missingInputs, source) {\r\n        let noFatalErrors = true; // ie warnings are ok\r\n        const checkIfFatalError = (error) => {\r\n            // Ignore warnings and the 'Deferred import' error as those are generated by us as a workaround\r\n            const isValidError = (error.message && error.message.includes('Deferred import')) ? false : error.severity !== 'warning';\r\n            if (isValidError)\r\n                noFatalErrors = false;\r\n        };\r\n        if (data.error)\r\n            checkIfFatalError(data.error);\r\n        if (data.errors)\r\n            data.errors.forEach((err) => checkIfFatalError(err));\r\n        if (!noFatalErrors) {\r\n            // There are fatal errors, abort here\r\n            this.state.lastCompilationResult = null;\r\n            this.event.trigger('compilationFinished', [false, data, source]);\r\n        }\r\n        else if (missingInputs !== undefined && missingInputs.length > 0 && source && source.sources) {\r\n            // try compiling again with the new set of inputs\r\n            this.internalCompile(source.sources, missingInputs);\r\n        }\r\n        else {\r\n            data = this.updateInterface(data);\r\n            if (source) {\r\n                source.target = this.state.target;\r\n                this.state.lastCompilationResult = {\r\n                    data: data,\r\n                    source: source\r\n                };\r\n            }\r\n            this.event.trigger('compilationFinished', [true, data, source]);\r\n        }\r\n    }\r\n    /**\r\n     * @dev Load compiler using given URL (used by IDE)\r\n     * @param usingWorker if true, load compiler using worker\r\n     * @param url URL to load compiler from\r\n     */\r\n    loadVersion(usingWorker, url) {\r\n        console.log('Loading ' + url + ' ' + (usingWorker ? 'with worker' : 'without worker'));\r\n        this.event.trigger('loadingCompiler', [url, usingWorker]);\r\n        if (this.state.worker) {\r\n            this.state.worker.terminate();\r\n            this.state.worker = null;\r\n        }\r\n        if (usingWorker) {\r\n            this.loadWorker(url);\r\n        }\r\n        else {\r\n            this.loadInternal(url);\r\n        }\r\n    }\r\n    /**\r\n     * @dev Load compiler using 'script' element (without worker)\r\n     * @param url URL to load compiler from\r\n     */\r\n    loadInternal(url) {\r\n        delete window['Module'];\r\n        // NOTE: workaround some browsers?\r\n        window['Module'] = undefined;\r\n        // Set a safe fallback until the new one is loaded\r\n        this.state.compileJSON = (source) => {\r\n            this.onCompilationFinished({ error: { formattedMessage: 'Compiler not yet loaded.' } });\r\n        };\r\n        const newScript = document.createElement('script');\r\n        newScript.type = 'text/javascript';\r\n        newScript.src = url;\r\n        document.getElementsByTagName('head')[0].appendChild(newScript);\r\n        const check = window.setInterval(() => {\r\n            if (!window['Module']) {\r\n                return;\r\n            }\r\n            window.clearInterval(check);\r\n            this.onInternalCompilerLoaded();\r\n        }, 200);\r\n    }\r\n    /**\r\n     * @dev Load compiler using web worker\r\n     * @param url URL to load compiler from\r\n     */\r\n    loadWorker(url) {\r\n        this.state.worker = webworkify(require.resolve('./compiler-worker'));\r\n        const jobs = [];\r\n        this.state.worker.addEventListener('message', (msg) => {\r\n            const data = msg.data;\r\n            switch (data.cmd) {\r\n                case 'versionLoaded':\r\n                    if (data.data)\r\n                        this.onCompilerLoaded(data.data);\r\n                    break;\r\n                case 'compiled':\r\n                    {\r\n                        let result;\r\n                        if (data.data && data.job !== undefined && data.job >= 0) {\r\n                            try {\r\n                                result = JSON.parse(data.data);\r\n                            }\r\n                            catch (exception) {\r\n                                result = { error: { formattedMessage: 'Invalid JSON output from the compiler: ' + exception } };\r\n                            }\r\n                            let sources = {};\r\n                            if (data.job in jobs !== undefined) {\r\n                                sources = jobs[data.job].sources;\r\n                                delete jobs[data.job];\r\n                            }\r\n                            this.onCompilationFinished(result, data.missingInputs, sources);\r\n                        }\r\n                        break;\r\n                    }\r\n            }\r\n        });\r\n        this.state.worker.addEventListener('error', (msg) => {\r\n            this.onCompilationFinished({ error: { formattedMessage: 'Worker error: ' + msg.data } });\r\n        });\r\n        this.state.compileJSON = (source) => {\r\n            if (source && source.sources) {\r\n                const { optimize, runs, evmVersion, language } = this.state;\r\n                jobs.push({ sources: source });\r\n                this.state.worker.postMessage({\r\n                    cmd: 'compile',\r\n                    job: jobs.length - 1,\r\n                    input: compiler_input_1.default(source.sources, { optimize, runs, evmVersion, language })\r\n                });\r\n            }\r\n        };\r\n        this.state.worker.postMessage({\r\n            cmd: 'loadVersion',\r\n            data: url\r\n        });\r\n    }\r\n    /**\r\n     * @dev Gather imports for compilation\r\n     * @param files file sources\r\n     * @param importHints import file list\r\n     * @param cb callback\r\n     */\r\n    gatherImports(files, importHints, cb) {\r\n        importHints = importHints || [];\r\n        // FIXME: This will only match imports if the file begins with one '.'\r\n        // It should tokenize by lines and check each.\r\n        const importRegex = /^\\s*import\\s*['\"]([^'\"]+)['\"];/g;\r\n        for (const fileName in files) {\r\n            let match;\r\n            while ((match = importRegex.exec(files[fileName].content))) {\r\n                let importFilePath = match[1];\r\n                if (importFilePath.startsWith('./')) {\r\n                    const path = /(.*\\/).*/.exec(fileName);\r\n                    importFilePath = path ? importFilePath.replace('./', path[1]) : importFilePath.slice(2);\r\n                }\r\n                if (!importHints.includes(importFilePath))\r\n                    importHints.push(importFilePath);\r\n            }\r\n        }\r\n        while (importHints.length > 0) {\r\n            const m = importHints.pop();\r\n            if (m && m in files)\r\n                continue;\r\n            if (this.handleImportCall) {\r\n                this.handleImportCall(m, (err, content) => {\r\n                    if (err && cb)\r\n                        cb(err);\r\n                    else {\r\n                        files[m] = { content };\r\n                        this.gatherImports(files, importHints, cb);\r\n                    }\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        if (cb)\r\n            cb(null, { 'sources': files });\r\n    }\r\n    /**\r\n     * @dev Truncate version string\r\n     * @param version version\r\n     */\r\n    truncateVersion(version) {\r\n        const tmp = /^(\\d+.\\d+.\\d+)/.exec(version);\r\n        return tmp ? tmp[1] : version;\r\n    }\r\n    /**\r\n     * @dev Update ABI according to current compiler version\r\n     * @param data Compilation result\r\n     */\r\n    updateInterface(data) {\r\n        txHelper_1.default.visitContracts(data.contracts, (contract) => {\r\n            if (!contract.object.abi)\r\n                contract.object.abi = [];\r\n            if (this.state.language === 'Yul' && contract.object.abi.length === 0) {\r\n                // yul compiler does not return any abi,\r\n                // we default to accept the fallback function (which expect raw data as argument).\r\n                contract.object.abi.push({\r\n                    'payable': true,\r\n                    'stateMutability': 'payable',\r\n                    'type': 'fallback'\r\n                });\r\n            }\r\n            if (data && data.contracts && this.state.currentVersion) {\r\n                const version = this.truncateVersion(this.state.currentVersion);\r\n                data.contracts[contract.file][contract.name].abi = abi_1.update(version, contract.object.abi);\r\n                // if \"constant\" , payable must not be true and stateMutability must be view.\r\n                // see https://github.com/ethereum/solc-js/issues/500\r\n                for (const item of data.contracts[contract.file][contract.name].abi) {\r\n                    if (types_1.isFunctionDescription(item) && item.constant) {\r\n                        item.payable = false;\r\n                        item.stateMutability = 'view';\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n    /**\r\n     * @dev Get contract obj of the given contract name from last compilation result.\r\n     * @param name contract name\r\n     */\r\n    getContract(name) {\r\n        if (this.state.lastCompilationResult && this.state.lastCompilationResult.data && this.state.lastCompilationResult.data.contracts) {\r\n            return txHelper_1.default.getContract(name, this.state.lastCompilationResult.data.contracts);\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * @dev Call the given callback for all the contracts from last compilation result\r\n     * @param cb callback\r\n     */\r\n    visitContracts(cb) {\r\n        if (this.state.lastCompilationResult && this.state.lastCompilationResult.data && this.state.lastCompilationResult.data.contracts) {\r\n            return txHelper_1.default.visitContracts(this.state.lastCompilationResult.data.contracts, cb);\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * @dev Get the compiled contracts data from last compilation result\r\n     */\r\n    getContracts() {\r\n        if (this.state.lastCompilationResult && this.state.lastCompilationResult.data && this.state.lastCompilationResult.data.contracts) {\r\n            return this.state.lastCompilationResult.data.contracts;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * @dev Get sources from last compilation result\r\n     */\r\n    getSources() {\r\n        if (this.state.lastCompilationResult && this.state.lastCompilationResult.source) {\r\n            return this.state.lastCompilationResult.source.sources;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * @dev Get sources of passed file name from last compilation result\r\n     * @param fileName file name\r\n     */\r\n    getSource(fileName) {\r\n        if (this.state.lastCompilationResult && this.state.lastCompilationResult.source && this.state.lastCompilationResult.source.sources) {\r\n            return this.state.lastCompilationResult.source.sources[fileName];\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * @dev Get source name at passed index from last compilation result\r\n     * @param index    - index of the source\r\n     */\r\n    getSourceName(index) {\r\n        if (this.state.lastCompilationResult && this.state.lastCompilationResult.data && this.state.lastCompilationResult.data.sources) {\r\n            return Object.keys(this.state.lastCompilationResult.data.sources)[index];\r\n        }\r\n        return null;\r\n    }\r\n}\r\nexports.Compiler = Compiler;\r\n//# sourceMappingURL=compiler.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = {\r\n    /**\r\n     * @dev Get contract obj of given contract name from last compilation result.\r\n     * @param name contract name\r\n     * @param contracts 'contracts' object from last compilation result\r\n     */\r\n    getContract: (contractName, contracts) => {\r\n        for (const file in contracts) {\r\n            if (contracts[file][contractName]) {\r\n                return { object: contracts[file][contractName], file: file };\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    /**\r\n     * @dev call the given callback for all contracts from last compilation result, stop visiting when cb return true\r\n     * @param contracts - 'contracts' object from last compilation result\r\n     * @param cb    - callback\r\n     */\r\n    visitContracts: (contracts, cb) => {\r\n        for (const file in contracts) {\r\n            for (const name in contracts[file]) {\r\n                const param = {\r\n                    name: name,\r\n                    object: contracts[file][name],\r\n                    file: file\r\n                };\r\n                if (cb(param))\r\n                    return;\r\n            }\r\n        }\r\n    }\r\n};\r\n//# sourceMappingURL=txHelper.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isFunctionDescription = (item) => item.stateMutability !== undefined;\r\nexports.isEventDescription = (item) => item.type === 'event';\r\n//# sourceMappingURL=types.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nvar compiler_1 = require(\"./compiler/compiler\");\r\nexports.Compiler = compiler_1.Compiler;\r\nvar compiler_input_1 = require(\"./compiler/compiler-input\");\r\nexports.CompilerInput = compiler_input_1.default;\r\ntslib_1.__exportStar(require(\"./compiler/types\"), exports);\r\n//# sourceMappingURL=index.js.map","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass EventManager {\r\n    constructor() {\r\n        this.registered = {}; // eslint-disable-line\r\n        this.anonymous = {}; // eslint-disable-line\r\n    }\r\n    /*\r\n     * Unregister a listener.\r\n     * Note that if obj is a function. the unregistration will be applied to the dummy obj {}.\r\n     *\r\n     * @param {String} eventName  - the event name\r\n     * @param {Object or Func} obj - object that will listen on this event\r\n     * @param {Func} func         - function of the listeners that will be executed\r\n   */\r\n    unregister(eventName, obj, func) {\r\n        if (!this.registered[eventName]) {\r\n            return;\r\n        }\r\n        if (obj instanceof Function) {\r\n            func = obj;\r\n            obj = this.anonymous;\r\n        }\r\n        for (const reg in this.registered[eventName]) {\r\n            if (this.registered[eventName][reg].obj === obj && this.registered[eventName][reg].func === func) {\r\n                this.registered[eventName].splice(reg, 1);\r\n            }\r\n        }\r\n    }\r\n    /*\r\n     * Register a new listener.\r\n     * Note that if obj is a function, the function registration will be associated with the dummy object {}\r\n     *\r\n     * @param {String} eventName  - the event name\r\n     * @param {Object or Func} obj - object that will listen on this event\r\n     * @param {Func} func         - function of the listeners that will be executed\r\n    */\r\n    register(eventName, obj, func) {\r\n        if (!this.registered[eventName]) {\r\n            this.registered[eventName] = [];\r\n        }\r\n        if (obj instanceof Function) {\r\n            func = obj;\r\n            obj = this.anonymous;\r\n        }\r\n        this.registered[eventName].push({\r\n            obj: obj,\r\n            func: func\r\n        });\r\n    }\r\n    /*\r\n     * trigger event.\r\n     * Every listener have their associated function executed\r\n     *\r\n     * @param {String} eventName  - the event name\r\n     * @param {Array}j - argument that will be passed to the executed function.\r\n    */\r\n    trigger(eventName, args) {\r\n        if (!this.registered[eventName]) {\r\n            return;\r\n        }\r\n        for (const listener in this.registered[eventName]) {\r\n            const l = this.registered[eventName][listener];\r\n            l.func.apply(l.obj === this.anonymous ? {} : l.obj, args);\r\n        }\r\n    }\r\n}\r\nexports.default = EventManager;\r\n//# sourceMappingURL=eventManager.js.map","module.exports = `// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity >=0.4.22 <0.8.0;\r\n\r\nlibrary Assert {\r\n\r\n  event AssertionEvent(\r\n    bool passed,\r\n    string message,\r\n    string methodName\r\n  );\r\n\r\n  event AssertionEventUint(\r\n    bool passed,\r\n    string message,\r\n    string methodName,\r\n    uint256 returned,\r\n    uint256 expected\r\n  );\r\n\r\n  event AssertionEventInt(\r\n    bool passed,\r\n    string message,\r\n    string methodName,\r\n    int256 returned,\r\n    int256 expected\r\n  );\r\n\r\n  event AssertionEventBool(\r\n    bool passed,\r\n    string message,\r\n    string methodName,\r\n    bool returned,\r\n    bool expected\r\n  );\r\n\r\n  event AssertionEventAddress(\r\n    bool passed,\r\n    string message,\r\n    string methodName,\r\n    address returned,\r\n    address expected\r\n  );\r\n\r\n  event AssertionEventBytes32(\r\n    bool passed,\r\n    string message,\r\n    string methodName,\r\n    bytes32 returned,\r\n    bytes32 expected\r\n  );\r\n\r\n  event AssertionEventString(\r\n    bool passed,\r\n    string message,\r\n    string methodName,\r\n    string returned,\r\n    string expected\r\n  );\r\n\r\n  event AssertionEventUintInt(\r\n    bool passed,\r\n    string message,\r\n    string methodName,\r\n    uint256 returned,\r\n    int256 expected\r\n  );\r\n\r\n  event AssertionEventIntUint(\r\n    bool passed,\r\n    string message,\r\n    string methodName,\r\n    int256 returned,\r\n    uint256 expected\r\n  );\r\n\r\n  function ok(bool a, string memory message) public returns (bool result) {\r\n    result = a;\r\n    emit AssertionEvent(result, message, \"ok\");\r\n  }\r\n\r\n  function equal(uint256 a, uint256 b, string memory message) public returns (bool result) {\r\n    result = (a == b);\r\n    emit AssertionEventUint(result, message, \"equal\", a, b);\r\n  }\r\n\r\n  function equal(int256 a, int256 b, string memory message) public returns (bool result) {\r\n    result = (a == b);\r\n    emit AssertionEventInt(result, message, \"equal\", a, b);\r\n  }\r\n\r\n  function equal(bool a, bool b, string memory message) public returns (bool result) {\r\n    result = (a == b);\r\n    emit AssertionEventBool(result, message, \"equal\", a, b);\r\n  }\r\n\r\n  // TODO: only for certain versions of solc\r\n  //function equal(fixed a, fixed b, string message) public returns (bool result) {\r\n  //  result = (a == b);\r\n  //  emit AssertionEvent(result, message);\r\n  //}\r\n\r\n  // TODO: only for certain versions of solc\r\n  //function equal(ufixed a, ufixed b, string message) public returns (bool result) {\r\n  //  result = (a == b);\r\n  //  emit AssertionEvent(result, message);\r\n  //}\r\n\r\n  function equal(address a, address b, string memory message) public returns (bool result) {\r\n    result = (a == b);\r\n    emit AssertionEventAddress(result, message, \"equal\", a, b);\r\n  }\r\n\r\n  function equal(bytes32 a, bytes32 b, string memory message) public returns (bool result) {\r\n    result = (a == b);\r\n    emit AssertionEventBytes32(result, message, \"equal\", a, b);\r\n  }\r\n\r\n  function equal(string memory a, string memory b, string memory message) public returns (bool result) {\r\n     result = (keccak256(abi.encodePacked(a)) == keccak256(abi.encodePacked(b)));\r\n     emit AssertionEventString(result, message, \"equal\", a, b);\r\n  }\r\n\r\n  function notEqual(uint256 a, uint256 b, string memory message) public returns (bool result) {\r\n    result = (a != b);\r\n    emit AssertionEventUint(result, message, \"notEqual\", a, b);\r\n  }\r\n\r\n  function notEqual(int256 a, int256 b, string memory message) public returns (bool result) {\r\n    result = (a != b);\r\n    emit AssertionEventInt(result, message, \"notEqual\", a, b);\r\n  }\r\n\r\n  function notEqual(bool a, bool b, string memory message) public returns (bool result) {\r\n    result = (a != b);\r\n    emit AssertionEventBool(result, message, \"notEqual\", a, b);\r\n  }\r\n\r\n  // TODO: only for certain versions of solc\r\n  //function notEqual(fixed a, fixed b, string message) public returns (bool result) {\r\n  //  result = (a != b);\r\n  //  emit AssertionEvent(result, message);\r\n  //}\r\n\r\n  // TODO: only for certain versions of solc\r\n  //function notEqual(ufixed a, ufixed b, string message) public returns (bool result) {\r\n  //  result = (a != b);\r\n  //  emit AssertionEvent(result, message);\r\n  //}\r\n\r\n  function notEqual(address a, address b, string memory message) public returns (bool result) {\r\n    result = (a != b);\r\n    emit AssertionEventAddress(result, message, \"notEqual\", a, b);\r\n  }\r\n\r\n  function notEqual(bytes32 a, bytes32 b, string memory message) public returns (bool result) {\r\n    result = (a != b);\r\n    emit AssertionEventBytes32(result, message, \"notEqual\", a, b);\r\n  }\r\n\r\n  function notEqual(string memory a, string memory b, string memory message) public returns (bool result) {\r\n    result = (keccak256(abi.encodePacked(a)) != keccak256(abi.encodePacked(b)));\r\n    emit AssertionEventString(result, message, \"notEqual\", a, b);\r\n  }\r\n\r\n  /*----------------- Greater than --------------------*/\r\n  function greaterThan(uint256 a, uint256 b, string memory message) public returns (bool result) {\r\n    result = (a > b);\r\n    emit AssertionEventUint(result, message, \"greaterThan\", a, b);\r\n  }\r\n\r\n  function greaterThan(int256 a, int256 b, string memory message) public returns (bool result) {\r\n    result = (a > b);\r\n    emit AssertionEventInt(result, message, \"greaterThan\", a, b);\r\n  }\r\n  // TODO: safely compare between uint and int\r\n  function greaterThan(uint256 a, int256 b, string memory message) public returns (bool result) {\r\n    if(b < int(0)) {\r\n      // int is negative uint \"a\" always greater\r\n      result = true;\r\n    } else {\r\n      result = (a > uint(b));\r\n    }\r\n    emit AssertionEventUintInt(result, message, \"greaterThan\", a, b);\r\n  }\r\n  function greaterThan(int256 a, uint256 b, string memory message) public returns (bool result) {\r\n    if(a < int(0)) {\r\n      // int is negative uint \"b\" always greater\r\n      result = false;\r\n    } else {\r\n      result = (uint(a) > b);\r\n    }\r\n    emit AssertionEventIntUint(result, message, \"greaterThan\", a, b);\r\n  }\r\n  /*----------------- Lesser than --------------------*/\r\n  function lesserThan(uint256 a, uint256 b, string memory message) public returns (bool result) {\r\n    result = (a < b);\r\n    emit AssertionEventUint(result, message, \"lesserThan\", a, b);\r\n  }\r\n\r\n  function lesserThan(int256 a, int256 b, string memory message) public returns (bool result) {\r\n    result = (a < b);\r\n    emit AssertionEventInt(result, message, \"lesserThan\", a, b);\r\n  }\r\n  // TODO: safely compare between uint and int\r\n  function lesserThan(uint256 a, int256 b, string memory message) public returns (bool result) {\r\n    if(b < int(0)) {\r\n      // int is negative int \"b\" always lesser\r\n      result = false;\r\n    } else {\r\n      result = (a < uint(b));\r\n    }\r\n    emit AssertionEventUintInt(result, message, \"lesserThan\", a, b);\r\n  }\r\n\r\n  function lesserThan(int256 a, uint256 b, string memory message) public returns (bool result) {\r\n    if(a < int(0)) {\r\n      // int is negative int \"a\" always lesser\r\n      result = true;\r\n    } else {\r\n      result = (uint(a) < b);\r\n    }\r\n    emit AssertionEventIntUint(result, message, \"lesserThan\", a, b);\r\n  }\r\n}\r\n`;\r\n//# sourceMappingURL=tests.sol.js.map","module.exports = `// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity >=0.4.22 <0.8.0;\r\n\r\nlibrary TestsAccounts {\r\n    function getAccount(uint index) public returns (address) {\r\n        >accounts<\r\n        return accounts[index];\r\n    }\r\n}\r\n`;\r\n//# sourceMappingURL=tests_accounts.sol.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst assertionEvents = [\r\n    {\r\n        name: 'AssertionEvent',\r\n        params: ['bool', 'string', 'string']\r\n    },\r\n    {\r\n        name: 'AssertionEventUint',\r\n        params: ['bool', 'string', 'string', 'uint256', 'uint256']\r\n    },\r\n    {\r\n        name: 'AssertionEventInt',\r\n        params: ['bool', 'string', 'string', 'int256', 'int256']\r\n    },\r\n    {\r\n        name: 'AssertionEventBool',\r\n        params: ['bool', 'string', 'string', 'bool', 'bool']\r\n    },\r\n    {\r\n        name: 'AssertionEventAddress',\r\n        params: ['bool', 'string', 'string', 'address', 'address']\r\n    },\r\n    {\r\n        name: 'AssertionEventBytes32',\r\n        params: ['bool', 'string', 'string', 'bytes32', 'bytes32']\r\n    },\r\n    {\r\n        name: 'AssertionEventString',\r\n        params: ['bool', 'string', 'string', 'string', 'string']\r\n    },\r\n    {\r\n        name: 'AssertionEventUintInt',\r\n        params: ['bool', 'string', 'string', 'uint256', 'int256']\r\n    },\r\n    {\r\n        name: 'AssertionEventIntUint',\r\n        params: ['bool', 'string', 'string', 'int256', 'uint256']\r\n    }\r\n];\r\nexports.default = assertionEvents;\r\n//# sourceMappingURL=assertionEvents.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst fileSystem_1 = tslib_1.__importDefault(require(\"./fileSystem\"));\r\nconst async_1 = tslib_1.__importDefault(require(\"async\"));\r\nconst path_1 = tslib_1.__importDefault(require(\"path\"));\r\nconst logger_1 = tslib_1.__importDefault(require(\"./logger\"));\r\nconst logger = new logger_1.default();\r\nconst log = logger.logger;\r\nconst remix_solidity_1 = require(\"@remix-project/remix-solidity\");\r\nconst types_1 = require(\"./types\");\r\nfunction regexIndexOf(inputString, regex, startpos = 0) {\r\n    const indexOf = inputString.substring(startpos).search(regex);\r\n    return (indexOf >= 0) ? (indexOf + (startpos)) : indexOf;\r\n}\r\nfunction writeTestAccountsContract(accounts) {\r\n    const testAccountContract = require('../sol/tests_accounts.sol');\r\n    let body = `address[${accounts.length}] memory accounts;`;\r\n    if (!accounts.length)\r\n        body += ';';\r\n    else {\r\n        accounts.map((address, index) => {\r\n            body += `\\naccounts[${index}] = ${address};\\n`;\r\n        });\r\n    }\r\n    return testAccountContract.replace('>accounts<', body);\r\n}\r\n/**\r\n * @dev Check if path includes name of a remix test file\r\n * @param path file path to check\r\n */\r\nfunction isRemixTestFile(path) {\r\n    return ['tests.sol', 'remix_tests.sol', 'remix_accounts.sol'].some(name => path.includes(name));\r\n}\r\n/**\r\n * @dev Process file to prepare sources object to be passed in solc compiler input\r\n *\r\n * See: https://solidity.readthedocs.io/en/latest/using-the-compiler.html#input-description\r\n *\r\n * @param filePath path of file to process\r\n * @param sources existing 'sources' object in which keys are the \"global\" names of the source files and\r\n *                value is object containing content of corresponding file with under key 'content'\r\n * @param isRoot True, If file is a root test contract file which is getting processed, not an imported file\r\n */\r\nfunction processFile(filePath, sources, isRoot = false) {\r\n    const importRegEx = /import ['\"](.+?)['\"];/g;\r\n    let group = null;\r\n    const isFileAlreadyInSources = Object.keys(sources).includes(filePath);\r\n    // Return if file is a remix test file or already processed\r\n    if (isRemixTestFile(filePath) || isFileAlreadyInSources)\r\n        return;\r\n    let content = fileSystem_1.default.readFileSync(filePath, { encoding: 'utf-8' });\r\n    const testFileImportRegEx = /^(import)\\s['\"](remix_tests.sol|tests.sol)['\"];/gm;\r\n    // import 'remix_tests.sol', if file is a root test contract file and doesn't already have it \r\n    if (isRoot && filePath.endsWith('_test.sol') && regexIndexOf(content, testFileImportRegEx) < 0) {\r\n        const includeTestLibs = '\\nimport \\'remix_tests.sol\\';\\n';\r\n        content = includeTestLibs.concat(content);\r\n    }\r\n    sources[filePath] = { content };\r\n    importRegEx.exec(''); // Resetting state of RegEx\r\n    // Process each 'import' in file content\r\n    while ((group = importRegEx.exec(content))) {\r\n        const importedFile = group[1];\r\n        const importedFilePath = path_1.default.join(path_1.default.dirname(filePath), importedFile);\r\n        processFile(importedFilePath, sources);\r\n    }\r\n}\r\nconst userAgent = (typeof (navigator) !== 'undefined') && navigator.userAgent ? navigator.userAgent.toLowerCase() : '-';\r\nconst isBrowser = !(typeof (window) === 'undefined' || userAgent.indexOf(' electron/') > -1);\r\n/**\r\n * @dev Compile file or files before running tests (used for CLI execution)\r\n * @param filename Name of file\r\n * @param isDirectory True, if path is a directory\r\n * @param opts Options\r\n * @param cb Callback\r\n *\r\n * TODO: replace this with remix's own compiler code\r\n */\r\nfunction compileFileOrFiles(filename, isDirectory, opts, cb) {\r\n    let compiler;\r\n    const accounts = opts.accounts || [];\r\n    const sources = {\r\n        'tests.sol': { content: require('../sol/tests.sol') },\r\n        'remix_tests.sol': { content: require('../sol/tests.sol') },\r\n        'remix_accounts.sol': { content: writeTestAccountsContract(accounts) }\r\n    };\r\n    const filepath = (isDirectory ? filename : path_1.default.dirname(filename));\r\n    try {\r\n        if (!isDirectory && fileSystem_1.default.existsSync(filename)) {\r\n            if (filename.split('.').pop() === 'sol') {\r\n                processFile(filename, sources, true);\r\n            }\r\n            else {\r\n                throw new Error('Not a solidity file');\r\n            }\r\n        }\r\n        else {\r\n            // walkSync only if it is a directory\r\n            let testFileCount = 0;\r\n            fileSystem_1.default.walkSync(filepath, (foundpath) => {\r\n                // only process .sol files\r\n                if (foundpath.split('.').pop() === 'sol' && foundpath.endsWith('_test.sol')) {\r\n                    testFileCount++;\r\n                    processFile(foundpath, sources, true);\r\n                }\r\n            });\r\n            if (testFileCount > 0) {\r\n                log.info(`${testFileCount} Solidity test file${testFileCount === 1 ? '' : 's'} found`);\r\n            }\r\n            else {\r\n                log.error(`No Solidity test file found. Make sure your test file ends with '_test.sol'`);\r\n                process.exit();\r\n            }\r\n        }\r\n    }\r\n    catch (e) { // eslint-disable-line no-useless-catch\r\n        throw e;\r\n    }\r\n    finally {\r\n        async_1.default.waterfall([\r\n            function loadCompiler(next) {\r\n                compiler = new remix_solidity_1.Compiler();\r\n                compiler.onInternalCompilerLoaded();\r\n                // compiler.event.register('compilerLoaded', this, function (version) {\r\n                next();\r\n                // });\r\n            },\r\n            function doCompilation(next) {\r\n                // @ts-ignore\r\n                compiler.event.register('compilationFinished', this, (success, data, source) => {\r\n                    next(null, data);\r\n                });\r\n                compiler.compile(sources, filepath);\r\n            }\r\n        ], function (err, result) {\r\n            const error = [];\r\n            if (result.error)\r\n                error.push(result.error);\r\n            const errors = (result.errors || error).filter((e) => e.type === 'Error' || e.severity === 'error');\r\n            if (errors.length > 0) {\r\n                if (!isBrowser)\r\n                    require('signale').fatal(errors);\r\n                return cb(new types_1.CompilationErrors(errors));\r\n            }\r\n            cb(err, result.contracts, result.sources); //return callback with contract details & ASTs\r\n        });\r\n    }\r\n}\r\nexports.compileFileOrFiles = compileFileOrFiles;\r\n/**\r\n * @dev Compile contract source before running tests (used for IDE tests execution)\r\n * @param sources sources\r\n * @param compilerConfig current compiler configuration\r\n * @param importFileCb Import file callback\r\n * @param opts Options\r\n * @param cb Callback\r\n */\r\nfunction compileContractSources(sources, compilerConfig, importFileCb, opts, cb) {\r\n    let compiler, filepath;\r\n    const accounts = opts.accounts || [];\r\n    // Iterate over sources keys. Inject test libraries. Inject test library import statements.\r\n    if (!('remix_tests.sol' in sources) && !('tests.sol' in sources)) {\r\n        sources['tests.sol'] = { content: require('../sol/tests.sol.js') };\r\n        sources['remix_tests.sol'] = { content: require('../sol/tests.sol.js') };\r\n        sources['remix_accounts.sol'] = { content: writeTestAccountsContract(accounts) };\r\n    }\r\n    const testFileImportRegEx = /^(import)\\s['\"](remix_tests.sol|tests.sol)['\"];/gm;\r\n    const includeTestLibs = '\\nimport \\'remix_tests.sol\\';\\n';\r\n    for (const file in sources) {\r\n        const c = sources[file].content;\r\n        if (file.endsWith('_test.sol') && c && regexIndexOf(c, testFileImportRegEx) < 0) {\r\n            sources[file].content = includeTestLibs.concat(c);\r\n        }\r\n    }\r\n    async_1.default.waterfall([\r\n        function loadCompiler(next) {\r\n            const { currentCompilerUrl, evmVersion, optimize, runs, usingWorker } = compilerConfig;\r\n            compiler = new remix_solidity_1.Compiler(importFileCb);\r\n            compiler.set('evmVersion', evmVersion);\r\n            compiler.set('optimize', optimize);\r\n            compiler.set('runs', runs);\r\n            compiler.loadVersion(usingWorker, currentCompilerUrl);\r\n            // @ts-ignore\r\n            compiler.event.register('compilerLoaded', this, (version) => {\r\n                next();\r\n            });\r\n        },\r\n        function doCompilation(next) {\r\n            // @ts-ignore\r\n            compiler.event.register('compilationFinished', this, (success, data, source) => {\r\n                next(null, data);\r\n            });\r\n            compiler.compile(sources, filepath);\r\n        }\r\n    ], function (err, result) {\r\n        const error = [];\r\n        if (result.error)\r\n            error.push(result.error);\r\n        const errors = (result.errors || error).filter((e) => e.type === 'Error' || e.severity === 'error');\r\n        if (errors.length > 0) {\r\n            if (!isBrowser)\r\n                require('signale').fatal(errors);\r\n            return cb(new types_1.CompilationErrors(errors));\r\n        }\r\n        cb(err, result.contracts, result.sources); // return callback with contract details & ASTs\r\n    });\r\n}\r\nexports.compileContractSources = compileContractSources;\r\n//# sourceMappingURL=compiler.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst async_1 = tslib_1.__importDefault(require(\"async\"));\r\nconst remix_lib_1 = require(\"@remix-project/remix-lib\");\r\n/**\r\n * @dev Deploy all contracts from compilation result\r\n * @param compileResult compilation result\r\n * @param web3 web3 object\r\n * @param withDoubleGas If true, try deployment with gas double of estimation (used for Out-of-gas error only)\r\n * @param callback Callback\r\n */\r\nfunction deployAll(compileResult, web3, withDoubleGas, callback) {\r\n    const compiledObject = {};\r\n    const contracts = {};\r\n    let accounts = [];\r\n    async_1.default.waterfall([\r\n        function getAccountList(next) {\r\n            web3.eth.getAccounts((_err, _accounts) => {\r\n                accounts = _accounts;\r\n                next();\r\n            });\r\n        },\r\n        function getContractData(next) {\r\n            for (const contractFile in compileResult) {\r\n                for (const contractName in compileResult[contractFile]) {\r\n                    const contract = compileResult[contractFile][contractName];\r\n                    const className = contractName;\r\n                    const filename = contractFile;\r\n                    const abi = contract.abi;\r\n                    const code = contract.evm.bytecode.object;\r\n                    compiledObject[className] = {};\r\n                    compiledObject[className].abi = abi;\r\n                    compiledObject[className].code = code;\r\n                    compiledObject[className].filename = filename;\r\n                    compiledObject[className].className = className;\r\n                    compiledObject[className].raw = contract;\r\n                    if (contractFile.endsWith('_test.sol')) {\r\n                        compiledObject[className].isTest = true;\r\n                    }\r\n                }\r\n            }\r\n            next();\r\n        },\r\n        function determineContractsToDeploy(next) {\r\n            const contractsToDeploy = ['Assert'];\r\n            const allContracts = Object.keys(compiledObject);\r\n            for (const contractName of allContracts) {\r\n                if (contractName === 'Assert') {\r\n                    continue;\r\n                }\r\n                if (compiledObject[contractName].isTest) {\r\n                    contractsToDeploy.push(contractName);\r\n                }\r\n            }\r\n            next(null, contractsToDeploy);\r\n        },\r\n        function deployContracts(contractsToDeploy, next) {\r\n            const deployRunner = (deployObject, contractObject, contractName, filename, callback) => {\r\n                deployObject.estimateGas().then((gasValue) => {\r\n                    const gasBase = Math.ceil(gasValue * 1.2);\r\n                    const gas = withDoubleGas ? gasBase * 2 : gasBase;\r\n                    deployObject.send({\r\n                        from: accounts[0],\r\n                        gas: gas\r\n                    }).on('receipt', function (receipt) {\r\n                        contractObject.options.address = receipt.contractAddress;\r\n                        contractObject.options.from = accounts[0];\r\n                        contractObject.options.gas = 5000 * 1000;\r\n                        compiledObject[contractName].deployedAddress = receipt.contractAddress;\r\n                        contracts[contractName] = contractObject;\r\n                        contracts[contractName].filename = filename;\r\n                        callback(null, { result: { createdAddress: receipt.contractAddress } }); // TODO this will only work with JavaScriptV VM\r\n                    }).on('error', function (err) {\r\n                        console.error(err);\r\n                        callback(err);\r\n                    });\r\n                });\r\n            };\r\n            async_1.default.eachOfLimit(contractsToDeploy, 1, function (contractName, index, nextEach) {\r\n                const contract = compiledObject[contractName];\r\n                const encodeDataFinalCallback = (error, contractDeployData) => {\r\n                    if (error)\r\n                        return nextEach(error);\r\n                    const contractObject = new web3.eth.Contract(contract.abi);\r\n                    const deployObject = contractObject.deploy({ arguments: [], data: '0x' + contractDeployData.dataHex });\r\n                    deployRunner(deployObject, contractObject, contractName, contract.filename, (error) => { nextEach(error); });\r\n                };\r\n                const encodeDataStepCallback = (msg) => { console.dir(msg); };\r\n                const encodeDataDeployLibraryCallback = (libData, callback) => {\r\n                    const abi = compiledObject[libData.data.contractName].abi;\r\n                    const code = compiledObject[libData.data.contractName].code;\r\n                    const libraryObject = new web3.eth.Contract(abi);\r\n                    const deployObject = libraryObject.deploy({ arguments: [], data: '0x' + code });\r\n                    deployRunner(deployObject, libraryObject, libData.data.contractName, contract.filename, callback);\r\n                };\r\n                const funAbi = null; // no need to set the abi for encoding the constructor\r\n                const params = ''; // we suppose that the test contract does not have any param in the constructor\r\n                remix_lib_1.execution.txFormat.encodeConstructorCallAndDeployLibraries(contractName, contract.raw, compileResult, params, funAbi, encodeDataFinalCallback, encodeDataStepCallback, encodeDataDeployLibraryCallback);\r\n            }, function (err) {\r\n                if (err)\r\n                    next(err);\r\n                next(null, contracts);\r\n            });\r\n        }\r\n    ], callback);\r\n}\r\nexports.deployAll = deployAll;\r\n//# sourceMappingURL=deployer.js.map","\"use strict\";\r\nconst tslib_1 = require(\"tslib\");\r\n// Extend fs\r\nconst fs = require('fs');\r\nconst path_1 = tslib_1.__importDefault(require(\"path\"));\r\n// https://github.com/mikeal/node-utils/blob/master/file/lib/main.js\r\nfs.walkSync = function (start, callback) {\r\n    fs.readdirSync(start).forEach((name) => {\r\n        if (name === 'node_modules') {\r\n            return; // hack\r\n        }\r\n        const abspath = path_1.default.join(start, name);\r\n        if (fs.statSync(abspath).isDirectory()) {\r\n            fs.walkSync(abspath, callback);\r\n        }\r\n        else {\r\n            callback(abspath);\r\n        }\r\n    });\r\n};\r\nmodule.exports = fs;\r\n//# sourceMappingURL=fileSystem.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nvar runTestFiles_1 = require(\"./runTestFiles\");\r\nexports.runTestFiles = runTestFiles_1.runTestFiles;\r\nvar runTestSources_1 = require(\"./runTestSources\");\r\nexports.runTestSources = runTestSources_1.runTestSources;\r\nvar testRunner_1 = require(\"./testRunner\");\r\nexports.runTest = testRunner_1.runTest;\r\ntslib_1.__exportStar(require(\"./types\"), exports);\r\nexports.assertLibCode = require('../sol/tests.sol');\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nconst tslib_1 = require(\"tslib\");\r\nconst colors_1 = tslib_1.__importDefault(require(\"colors\"));\r\nconst winston_1 = tslib_1.__importDefault(require(\"winston\"));\r\nconst time_stamp_1 = tslib_1.__importDefault(require(\"time-stamp\"));\r\nconst color_support_1 = tslib_1.__importDefault(require(\"color-support\"));\r\nfunction hasFlag(flag) {\r\n    return ((typeof (process) !== 'undefined') && (process.argv.indexOf('--' + flag) !== -1));\r\n}\r\nfunction addColor(str) {\r\n    if (hasFlag('no-color')) {\r\n        return str;\r\n    }\r\n    if (hasFlag('color')) {\r\n        return colors_1.default.gray(str);\r\n    }\r\n    if (color_support_1.default()) {\r\n        return colors_1.default.gray(str);\r\n    }\r\n    return str;\r\n}\r\nfunction getTimestamp() {\r\n    return '[' + addColor(time_stamp_1.default('HH:mm:ss')) + ']';\r\n}\r\n// create winston logger format\r\nconst logFmt = winston_1.default.format.printf((info) => {\r\n    return `${getTimestamp()} ${info.level}: ${info.message}`;\r\n});\r\nclass Log {\r\n    constructor() {\r\n        this.logger = winston_1.default.createLogger({\r\n            level: 'info',\r\n            transports: [new winston_1.default.transports.Console()],\r\n            format: winston_1.default.format.combine(winston_1.default.format.colorize({ all: true }), logFmt)\r\n        });\r\n    }\r\n    setVerbosity(v) {\r\n        this.logger.configure({\r\n            level: v,\r\n            transports: [new winston_1.default.transports.Console()],\r\n            format: winston_1.default.format.combine(winston_1.default.format.colorize({ all: true }), logFmt)\r\n        });\r\n    }\r\n}\r\nmodule.exports = Log;\r\n//# sourceMappingURL=logger.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst async_1 = tslib_1.__importDefault(require(\"async\"));\r\nconst fileSystem_1 = tslib_1.__importDefault(require(\"./fileSystem\"));\r\nconst testRunner_1 = require(\"./testRunner\");\r\nconst colors_1 = tslib_1.__importDefault(require(\"colors\"));\r\nconst compiler_1 = require(\"./compiler\");\r\nconst deployer_1 = require(\"./deployer\");\r\n/**\r\n * @dev run test contract files (used for CLI)\r\n * @param filepath Path of file\r\n * @param isDirectory True, if path is a directory\r\n * @param web3 Web3\r\n * @param finalCallback optional callback to run finally\r\n * @param opts Options\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-empty-function\r\nfunction runTestFiles(filepath, isDirectory, web3, finalCallback = () => { }, opts) {\r\n    opts = opts || {};\r\n    const sourceASTs = {};\r\n    const { Signale } = require('signale');\r\n    // signale configuration\r\n    const options = {\r\n        types: {\r\n            result: {\r\n                badge: '\\t✓',\r\n                label: '',\r\n                color: 'greenBright'\r\n            },\r\n            name: {\r\n                badge: '\\n\\t◼',\r\n                label: '',\r\n                color: 'white'\r\n            },\r\n            error: {\r\n                badge: '\\t✘',\r\n                label: '',\r\n                color: 'redBright'\r\n            }\r\n        }\r\n    };\r\n    const signale = new Signale(options);\r\n    let accounts = opts['accounts'] || null;\r\n    async_1.default.waterfall([\r\n        function getAccountList(next) {\r\n            if (accounts)\r\n                return next(null);\r\n            web3.eth.getAccounts((_err, _accounts) => {\r\n                accounts = _accounts;\r\n                next(null);\r\n            });\r\n        },\r\n        function compile(next) {\r\n            compiler_1.compileFileOrFiles(filepath, isDirectory, { accounts }, next);\r\n        },\r\n        function deployAllContracts(compilationResult, asts, next) {\r\n            // Extract AST of test contract file source\r\n            for (const filename in asts) {\r\n                if (filename.endsWith('_test.sol'))\r\n                    sourceASTs[filename] = asts[filename].ast;\r\n            }\r\n            deployer_1.deployAll(compilationResult, web3, false, (err, contracts) => {\r\n                if (err) {\r\n                    next(err);\r\n                }\r\n                next(null, compilationResult, contracts);\r\n            });\r\n        },\r\n        function determineTestContractsToRun(compilationResult, contracts, next) {\r\n            const contractsToTest = [];\r\n            const contractsToTestDetails = [];\r\n            const gatherContractsFrom = function (filename) {\r\n                if (!filename.endsWith('_test.sol')) {\r\n                    return;\r\n                }\r\n                try {\r\n                    Object.keys(compilationResult[filename]).forEach(contractName => {\r\n                        contractsToTest.push(contractName);\r\n                        contractsToTestDetails.push(compilationResult[filename][contractName]);\r\n                    });\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n            if (isDirectory) {\r\n                fileSystem_1.default.walkSync(filepath, (foundpath) => {\r\n                    gatherContractsFrom(foundpath);\r\n                });\r\n            }\r\n            else {\r\n                gatherContractsFrom(filepath);\r\n            }\r\n            next(null, contractsToTest, contractsToTestDetails, contracts);\r\n        },\r\n        function runTests(contractsToTest, contractsToTestDetails, contracts, next) {\r\n            let totalPassing = 0;\r\n            let totalFailing = 0;\r\n            let totalTime = 0;\r\n            const errors = [];\r\n            const _testCallback = function (err, result) {\r\n                if (err)\r\n                    throw err;\r\n                if (result.type === 'contract') {\r\n                    signale.name(result.value.white);\r\n                }\r\n                else if (result.type === 'testPass') {\r\n                    signale.result(result.value);\r\n                }\r\n                else if (result.type === 'testFailure') {\r\n                    signale.error(result.value.red);\r\n                    errors.push(result);\r\n                }\r\n            };\r\n            const _resultsCallback = (_err, result, cb) => {\r\n                totalPassing += result.passingNum;\r\n                totalFailing += result.failureNum;\r\n                totalTime += result.timePassed;\r\n                cb();\r\n            };\r\n            async_1.default.eachOfLimit(contractsToTest, 1, (contractName, index, cb) => {\r\n                try {\r\n                    const fileAST = sourceASTs[contracts[contractName]['filename']];\r\n                    testRunner_1.runTest(contractName, contracts[contractName], contractsToTestDetails[index], fileAST, { accounts }, _testCallback, (err, result) => {\r\n                        if (err) {\r\n                            console.log(err);\r\n                            return cb(err);\r\n                        }\r\n                        _resultsCallback(null, result, cb);\r\n                    });\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            }, function (err) {\r\n                if (err) {\r\n                    return next(err);\r\n                }\r\n                console.log('\\n');\r\n                if (totalPassing > 0) {\r\n                    console.log(colors_1.default.green(totalPassing + ' passing ') + colors_1.default.grey('(' + totalTime + 's)'));\r\n                }\r\n                if (totalFailing > 0) {\r\n                    console.log(colors_1.default.red(totalFailing + ' failing'));\r\n                }\r\n                console.log('');\r\n                errors.forEach((error, index) => {\r\n                    console.log('  ' + (index + 1) + ') ' + colors_1.default.bold(error.context + ': ') + error.value);\r\n                    console.log('');\r\n                    console.log(colors_1.default.red('\\t error: ' + error.errMsg));\r\n                    console.log(colors_1.default.green('\\t expected value to be ' + error.assertMethod + ' to: ' + error.expected));\r\n                    console.log(colors_1.default.red('\\t returned: ' + error.returned));\r\n                });\r\n                console.log('');\r\n                next();\r\n            });\r\n        }\r\n    ], finalCallback);\r\n}\r\nexports.runTestFiles = runTestFiles;\r\n//# sourceMappingURL=runTestFiles.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst async_1 = tslib_1.__importDefault(require(\"async\"));\r\nrequire('colors');\r\nconst compiler_1 = require(\"./compiler\");\r\nconst deployer_1 = require(\"./deployer\");\r\nconst testRunner_1 = require(\"./testRunner\");\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nconst remix_simulator_1 = require(\"@remix-project/remix-simulator\");\r\nconst createWeb3Provider = function () {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        const web3 = new web3_1.default();\r\n        const provider = new remix_simulator_1.Provider();\r\n        yield provider.init();\r\n        web3.setProvider(provider);\r\n        return web3;\r\n    });\r\n};\r\n/**\r\n * @dev Run tests from source of a test contract file (used for IDE)\r\n * @param contractSources Sources of contract\r\n * @param compilerConfig current compiler configuration\r\n * @param testCallback Test callback\r\n * @param resultCallback Result Callback\r\n * @param finalCallback Final Callback\r\n * @param importFileCb Import file callback\r\n * @param opts Options\r\n */\r\nfunction runTestSources(contractSources, compilerConfig, testCallback, resultCallback, finalCallback, importFileCb, opts) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n        opts = opts || {};\r\n        const sourceASTs = {};\r\n        const web3 = opts.web3 || (yield createWeb3Provider());\r\n        let accounts = opts.accounts || null;\r\n        async_1.default.waterfall([\r\n            function getAccountList(next) {\r\n                if (accounts)\r\n                    return next();\r\n                web3.eth.getAccounts((_err, _accounts) => {\r\n                    accounts = _accounts;\r\n                    next();\r\n                });\r\n            },\r\n            function compile(next) {\r\n                compiler_1.compileContractSources(contractSources, compilerConfig, importFileCb, { accounts }, next);\r\n            },\r\n            function deployAllContracts(compilationResult, asts, next) {\r\n                for (const filename in asts) {\r\n                    if (filename.endsWith('_test.sol'))\r\n                        sourceASTs[filename] = asts[filename].ast;\r\n                }\r\n                deployer_1.deployAll(compilationResult, web3, false, (err, contracts) => {\r\n                    if (err) {\r\n                        // If contract deployment fails because of 'Out of Gas' error, try again with double gas\r\n                        // This is temporary, should be removed when remix-tests will have a dedicated UI to \r\n                        // accept deployment params from UI\r\n                        if (err.message.includes('The contract code couldn\\'t be stored, please check your gas limit')) {\r\n                            deployer_1.deployAll(compilationResult, web3, true, (error, contracts) => {\r\n                                if (error)\r\n                                    next([{ message: 'contract deployment failed after trying twice: ' + error.message, severity: 'error' }]); // IDE expects errors in array\r\n                                else\r\n                                    next(null, compilationResult, contracts);\r\n                            });\r\n                        }\r\n                        else\r\n                            next([{ message: 'contract deployment failed: ' + err.message, severity: 'error' }]); // IDE expects errors in array\r\n                    }\r\n                    else\r\n                        next(null, compilationResult, contracts);\r\n                });\r\n            },\r\n            function determineTestContractsToRun(compilationResult, contracts, next) {\r\n                const contractsToTest = [];\r\n                const contractsToTestDetails = [];\r\n                for (const filename in compilationResult) {\r\n                    if (!filename.endsWith('_test.sol')) {\r\n                        continue;\r\n                    }\r\n                    Object.keys(compilationResult[filename]).forEach(contractName => {\r\n                        contractsToTestDetails.push(compilationResult[filename][contractName]);\r\n                        contractsToTest.push(contractName);\r\n                    });\r\n                }\r\n                next(null, contractsToTest, contractsToTestDetails, contracts);\r\n            },\r\n            function runTests(contractsToTest, contractsToTestDetails, contracts, next) {\r\n                let totalPassing = 0;\r\n                let totalFailing = 0;\r\n                let totalTime = 0;\r\n                const errors = [];\r\n                const _testCallback = function (err, result) {\r\n                    if (result.type === 'testFailure') {\r\n                        errors.push(result);\r\n                    }\r\n                    testCallback(result);\r\n                };\r\n                const _resultsCallback = function (_err, result, cb) {\r\n                    resultCallback(_err, result, () => { }); //eslint-disable-line @typescript-eslint/no-empty-function\r\n                    totalPassing += result.passingNum;\r\n                    totalFailing += result.failureNum;\r\n                    totalTime += result.timePassed;\r\n                    cb();\r\n                };\r\n                async_1.default.eachOfLimit(contractsToTest, 1, (contractName, index, cb) => {\r\n                    const fileAST = sourceASTs[contracts[contractName]['filename']];\r\n                    testRunner_1.runTest(contractName, contracts[contractName], contractsToTestDetails[index], fileAST, { accounts }, _testCallback, (err, result) => {\r\n                        if (err) {\r\n                            return cb(err);\r\n                        }\r\n                        _resultsCallback(null, result, cb);\r\n                    });\r\n                }, function (err) {\r\n                    if (err) {\r\n                        return next(err);\r\n                    }\r\n                    const finalResults = {\r\n                        totalPassing: 0,\r\n                        totalFailing: 0,\r\n                        totalTime: 0,\r\n                        errors: [],\r\n                    };\r\n                    finalResults.totalPassing = totalPassing || 0;\r\n                    finalResults.totalFailing = totalFailing || 0;\r\n                    finalResults.totalTime = totalTime || 0;\r\n                    finalResults.errors = [];\r\n                    errors.forEach((error, _index) => {\r\n                        finalResults.errors.push({ context: error.context, value: error.value, message: error.errMsg });\r\n                    });\r\n                    next(null, finalResults);\r\n                });\r\n            }\r\n        ], finalCallback);\r\n    });\r\n}\r\nexports.runTestSources = runTestSources;\r\n//# sourceMappingURL=runTestSources.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst async_1 = tslib_1.__importDefault(require(\"async\"));\r\nconst changeCase = tslib_1.__importStar(require(\"change-case\"));\r\nconst web3_1 = tslib_1.__importDefault(require(\"web3\"));\r\nconst assertionEvents_1 = tslib_1.__importDefault(require(\"./assertionEvents\"));\r\n/**\r\n * @dev Get function name using method signature\r\n * @param signature siganture\r\n * @param methodIdentifiers Object containing all methods identifier\r\n */\r\nfunction getFunctionFullName(signature, methodIdentifiers) {\r\n    for (const method in methodIdentifiers) {\r\n        if (signature.replace('0x', '') === methodIdentifiers[method].replace('0x', '')) {\r\n            return method;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * @dev Check if function is constant using function ABI\r\n * @param funcABI function ABI\r\n */\r\nfunction isConstant(funcABI) {\r\n    return (funcABI.constant || funcABI.stateMutability === 'view' || funcABI.stateMutability === 'pure');\r\n}\r\n/**\r\n * @dev Check if function is payable using function ABI\r\n * @param funcABI function ABI\r\n */\r\nfunction isPayable(funcABI) {\r\n    return (funcABI.payable || funcABI.stateMutability === 'payable');\r\n}\r\n/**\r\n * @dev Check node name\r\n * @param node AST node\r\n * @param name name\r\n */\r\nfunction isNodeName(node, name) {\r\n    return node.name === name;\r\n}\r\n/**\r\n * @dev Check node type\r\n * @param node AST node\r\n * @param type type\r\n */\r\nfunction isNodeType(node, type) {\r\n    return node.nodeType === type;\r\n}\r\n/**\r\n * @dev Check if node type is from the typesList\r\n * @param node AST node to be checked\r\n * @param typesList list of types\r\n */\r\nfunction isNodeTypeIn(node, typesList) {\r\n    return typesList.includes(node.nodeType);\r\n}\r\n/**\r\n * @dev Get overrided sender provided using natspec\r\n * @param userdoc method user documentaion\r\n * @param signature signature\r\n * @param methodIdentifiers Object containing all methods identifier\r\n */\r\nfunction getOverridedSender(userdoc, signature, methodIdentifiers) {\r\n    const fullName = getFunctionFullName(signature, methodIdentifiers);\r\n    const senderRegex = /#sender: account-+(\\d)/g;\r\n    const accountIndex = fullName && userdoc.methods[fullName] ? senderRegex.exec(userdoc.methods[fullName].notice) : null;\r\n    return fullName && accountIndex ? accountIndex[1] : null;\r\n}\r\n/**\r\n * @dev Get value provided using natspec\r\n * @param userdoc method user documentaion\r\n * @param signature signature\r\n * @param methodIdentifiers Object containing all methods identifier\r\n */\r\nfunction getProvidedValue(userdoc, signature, methodIdentifiers) {\r\n    const fullName = getFunctionFullName(signature, methodIdentifiers);\r\n    const valueRegex = /#value: (\\d+)/g;\r\n    const value = fullName && userdoc.methods[fullName] ? valueRegex.exec(userdoc.methods[fullName].notice) : null;\r\n    return fullName && value ? value[1] : null;\r\n}\r\n/**\r\n * @dev returns functions of a test contract file in same sequence they appear in file (using passed AST)\r\n * @param fileAST AST of test contract file source\r\n * @param testContractName Name of test contract\r\n */\r\nfunction getAvailableFunctions(fileAST, testContractName) {\r\n    let funcList = [];\r\n    if (fileAST.nodes && fileAST.nodes.length > 0) {\r\n        const contractAST = fileAST.nodes.filter(node => isNodeName(node, testContractName) && isNodeType(node, 'ContractDefinition'));\r\n        if (contractAST.length > 0 && contractAST[0].nodes) {\r\n            const funcNodes = contractAST[0].nodes.filter(node => ((node.kind === \"function\" && isNodeType(node, 'FunctionDefinition')) || isNodeType(node, 'FunctionDefinition')));\r\n            funcList = funcNodes.map(node => node.name);\r\n        }\r\n    }\r\n    return funcList;\r\n}\r\nfunction getAssertMethodLocation(fileAST, testContractName, functionName, assertMethod) {\r\n    var _a, _b, _c;\r\n    if ((_a = fileAST.nodes) === null || _a === void 0 ? void 0 : _a.length) {\r\n        const contractAST = fileAST.nodes.find(node => isNodeName(node, testContractName) && isNodeType(node, 'ContractDefinition'));\r\n        if ((_b = contractAST === null || contractAST === void 0 ? void 0 : contractAST.nodes) === null || _b === void 0 ? void 0 : _b.length) {\r\n            const funcNode = contractAST.nodes.find(node => isNodeName(node, functionName) && isNodeType(node, 'FunctionDefinition'));\r\n            // Check if statement nodeType is 'ExpressionStatement' or 'Return', for examples:\r\n            // Assert.equal(foo.get(), 100, \"initial value is not correct\");\r\n            // return Assert.equal(foo.get(), 100, \"initial value is not correct\");\r\n            const expressions = funcNode.body.statements.filter(s => isNodeTypeIn(s, ['ExpressionStatement', 'Return'])\r\n                && isNodeType(s.expression, 'FunctionCall'));\r\n            const assetExpression = expressions.find(e => e.expression.expression\r\n                && isNodeType(e.expression.expression, 'MemberAccess')\r\n                && e.expression.expression.memberName === assertMethod\r\n                && isNodeName(e.expression.expression.expression, 'Assert'));\r\n            return (_c = assetExpression === null || assetExpression === void 0 ? void 0 : assetExpression.expression) === null || _c === void 0 ? void 0 : _c.src;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @dev returns ABI of passed method list from passed interface\r\n * @param jsonInterface Json Interface\r\n * @param funcList Methods to extract the interface of\r\n */\r\nfunction getTestFunctionsInterface(jsonInterface, funcList) {\r\n    const functionsInterface = [];\r\n    const specialFunctions = ['beforeAll', 'beforeEach', 'afterAll', 'afterEach'];\r\n    for (const func of funcList) {\r\n        if (!specialFunctions.includes(func)) {\r\n            const funcInterface = jsonInterface.find(node => node.type === 'function' && node.name === func);\r\n            if (funcInterface)\r\n                functionsInterface.push(funcInterface);\r\n        }\r\n    }\r\n    return functionsInterface;\r\n}\r\n/**\r\n * @dev returns ABI of special functions from passed interface\r\n * @param jsonInterface Json Interface\r\n */\r\nfunction getSpecialFunctionsInterface(jsonInterface) {\r\n    const specialFunctionsInterface = {};\r\n    const funcList = ['beforeAll', 'beforeEach', 'afterAll', 'afterEach'];\r\n    for (const func of funcList) {\r\n        const funcInterface = jsonInterface.find(node => node.type === 'function' && node.name === func);\r\n        if (funcInterface) {\r\n            specialFunctionsInterface[func] = funcInterface;\r\n        }\r\n    }\r\n    return specialFunctionsInterface;\r\n}\r\n/**\r\n * @dev Prepare a list of tests to run using test contract file ABI, AST & contract name\r\n * @param jsonInterface File JSON interface\r\n * @param fileAST File AST\r\n * @param testContractName Test contract name\r\n */\r\nfunction createRunList(jsonInterface, fileAST, testContractName) {\r\n    const availableFunctions = getAvailableFunctions(fileAST, testContractName);\r\n    const testFunctionsInterface = getTestFunctionsInterface(jsonInterface, availableFunctions);\r\n    const specialFunctionsInterface = getSpecialFunctionsInterface(jsonInterface);\r\n    const runList = [];\r\n    if (availableFunctions.includes('beforeAll')) {\r\n        const func = specialFunctionsInterface['beforeAll'];\r\n        runList.push({ name: 'beforeAll', inputs: func.inputs, signature: func.signature, type: 'internal', constant: isConstant(func), payable: isPayable(func) });\r\n    }\r\n    for (const func of testFunctionsInterface) {\r\n        if (availableFunctions.includes('beforeEach')) {\r\n            const func = specialFunctionsInterface['beforeEach'];\r\n            runList.push({ name: 'beforeEach', inputs: func.inputs, signature: func.signature, type: 'internal', constant: isConstant(func), payable: isPayable(func) });\r\n        }\r\n        if (func.name && func.inputs)\r\n            runList.push({ name: func.name, inputs: func.inputs, signature: func.signature, type: 'test', constant: isConstant(func), payable: isPayable(func) });\r\n        if (availableFunctions.indexOf('afterEach') >= 0) {\r\n            const func = specialFunctionsInterface['afterEach'];\r\n            runList.push({ name: 'afterEach', inputs: func.inputs, signature: func.signature, type: 'internal', constant: isConstant(func), payable: isPayable(func) });\r\n        }\r\n    }\r\n    if (availableFunctions.indexOf('afterAll') >= 0) {\r\n        const func = specialFunctionsInterface['afterAll'];\r\n        runList.push({ name: 'afterAll', inputs: func.inputs, signature: func.signature, type: 'internal', constant: isConstant(func), payable: isPayable(func) });\r\n    }\r\n    return runList;\r\n}\r\nfunction runTest(testName, testObject, contractDetails, fileAST, opts, testCallback, resultsCallback) {\r\n    let passingNum = 0;\r\n    let failureNum = 0;\r\n    let timePassed = 0;\r\n    const isJSONInterfaceAvailable = testObject && testObject.options && testObject.options.jsonInterface;\r\n    if (!isJSONInterfaceAvailable)\r\n        return resultsCallback(new Error('Contract interface not available'), { passingNum, failureNum, timePassed });\r\n    const runList = createRunList(testObject.options.jsonInterface, fileAST, testName);\r\n    const web3 = new web3_1.default();\r\n    const accts = {\r\n        type: 'accountList',\r\n        value: opts.accounts\r\n    };\r\n    testCallback(undefined, accts);\r\n    const resp = {\r\n        type: 'contract',\r\n        value: testName,\r\n        filename: testObject.filename\r\n    };\r\n    testCallback(undefined, resp);\r\n    async_1.default.eachOfLimit(runList, 1, function (func, index, next) {\r\n        let sender = null;\r\n        if (func.signature) {\r\n            sender = getOverridedSender(contractDetails.userdoc, func.signature, contractDetails.evm.methodIdentifiers);\r\n            if (opts.accounts && sender) {\r\n                sender = opts.accounts[sender];\r\n            }\r\n        }\r\n        let sendParams = null;\r\n        if (sender)\r\n            sendParams = { from: sender };\r\n        if (func.inputs && func.inputs.length > 0)\r\n            return resultsCallback(new Error(`Method '${func.name}' can not have parameters inside a test contract`), { passingNum, failureNum, timePassed });\r\n        const method = testObject.methods[func.name].apply(testObject.methods[func.name], []);\r\n        const startTime = Date.now();\r\n        if (func.constant) {\r\n            method.call(sendParams).then((result) => {\r\n                const time = (Date.now() - startTime) / 1000.0;\r\n                if (result) {\r\n                    const resp = {\r\n                        type: 'testPass',\r\n                        value: changeCase.sentenceCase(func.name),\r\n                        filename: testObject.filename,\r\n                        time: time,\r\n                        context: testName\r\n                    };\r\n                    testCallback(undefined, resp);\r\n                    passingNum += 1;\r\n                    timePassed += time;\r\n                }\r\n                else {\r\n                    const resp = {\r\n                        type: 'testFailure',\r\n                        value: changeCase.sentenceCase(func.name),\r\n                        filename: testObject.filename,\r\n                        time: time,\r\n                        errMsg: 'function returned false',\r\n                        context: testName\r\n                    };\r\n                    testCallback(undefined, resp);\r\n                    failureNum += 1;\r\n                    timePassed += time;\r\n                }\r\n                next();\r\n            });\r\n        }\r\n        else {\r\n            if (func.payable) {\r\n                const value = getProvidedValue(contractDetails.userdoc, func.signature, contractDetails.evm.methodIdentifiers);\r\n                if (value) {\r\n                    if (sendParams)\r\n                        sendParams.value = value;\r\n                    else\r\n                        sendParams = { value };\r\n                }\r\n            }\r\n            method.send(sendParams).on('receipt', (receipt) => {\r\n                try {\r\n                    const time = (Date.now() - startTime) / 1000.0;\r\n                    const assertionEventHashes = assertionEvents_1.default.map(e => web3_1.default.utils.sha3(e.name + '(' + e.params.join() + ')'));\r\n                    let testPassed = false;\r\n                    for (const i in receipt.events) {\r\n                        let events = receipt.events[i];\r\n                        if (!Array.isArray(events))\r\n                            events = [events];\r\n                        for (const event of events) {\r\n                            const eIndex = assertionEventHashes.indexOf(event.raw.topics[0]); // event name topic will always be at index 0\r\n                            if (eIndex >= 0) {\r\n                                const testEvent = web3.eth.abi.decodeParameters(assertionEvents_1.default[eIndex].params, event.raw.data);\r\n                                if (!testEvent[0]) {\r\n                                    const assertMethod = testEvent[2];\r\n                                    if (assertMethod === 'ok') { // for 'Assert.ok' method\r\n                                        testEvent[3] = 'false';\r\n                                        testEvent[4] = 'true';\r\n                                    }\r\n                                    const location = getAssertMethodLocation(fileAST, testName, func.name, assertMethod);\r\n                                    const resp = {\r\n                                        type: 'testFailure',\r\n                                        value: changeCase.sentenceCase(func.name),\r\n                                        filename: testObject.filename,\r\n                                        time: time,\r\n                                        errMsg: testEvent[1],\r\n                                        context: testName,\r\n                                        assertMethod,\r\n                                        returned: testEvent[3],\r\n                                        expected: testEvent[4],\r\n                                        location\r\n                                    };\r\n                                    testCallback(undefined, resp);\r\n                                    failureNum += 1;\r\n                                    timePassed += time;\r\n                                    return next();\r\n                                }\r\n                                testPassed = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (testPassed) {\r\n                        const resp = {\r\n                            type: 'testPass',\r\n                            value: changeCase.sentenceCase(func.name),\r\n                            filename: testObject.filename,\r\n                            time: time,\r\n                            context: testName\r\n                        };\r\n                        testCallback(undefined, resp);\r\n                        passingNum += 1;\r\n                        timePassed += time;\r\n                    }\r\n                    return next();\r\n                }\r\n                catch (err) {\r\n                    console.error(err);\r\n                    return next(err);\r\n                }\r\n            }).on('error', function (err) {\r\n                const time = (Date.now() - startTime) / 1000.0;\r\n                const resp = {\r\n                    type: 'testFailure',\r\n                    value: changeCase.sentenceCase(func.name),\r\n                    filename: testObject.filename,\r\n                    time: time,\r\n                    errMsg: err.message,\r\n                    context: testName\r\n                };\r\n                testCallback(undefined, resp);\r\n                failureNum += 1;\r\n                timePassed += time;\r\n                return next();\r\n            });\r\n        }\r\n    }, function (error) {\r\n        resultsCallback(error, { passingNum, failureNum, timePassed });\r\n    });\r\n}\r\nexports.runTest = runTest;\r\n//# sourceMappingURL=testRunner.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass CompilationErrors extends Error {\r\n    constructor(errors) {\r\n        const mapError = errors.map((e) => { return e.formattedMessage || e.message; });\r\n        super(mapError.join('\\n'));\r\n        this.errors = errors;\r\n        this.name = 'CompilationErrors';\r\n    }\r\n}\r\nexports.CompilationErrors = CompilationErrors;\r\n//# sourceMappingURL=types.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar resolve_1 = require(\"./resolve\");\r\nexports.RemixURLResolver = resolve_1.RemixURLResolver;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst axios_1 = tslib_1.__importDefault(require(\"axios\"));\r\nconst bzz_node_1 = require(\"@erebos/bzz-node\");\r\nclass RemixURLResolver {\r\n    constructor(gistToken, protocol = 'http:') {\r\n        this.previouslyHandled = {};\r\n        this.gistAccessToken = gistToken ? gistToken : '';\r\n        this.protocol = protocol;\r\n    }\r\n    /**\r\n    * Handle an import statement based on github\r\n    * @param root The root of the github import statement\r\n    * @param filePath path of the file in github\r\n    */\r\n    handleGithubCall(root, filePath) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            let param = '?';\r\n            param += this.gistAccessToken ? 'access_token=' + this.gistAccessToken : '';\r\n            const regex = filePath.match(/blob\\/([^/]+)\\/(.*)/);\r\n            if (regex) {\r\n                // if we have /blob/master/+path we extract the branch name \"master\" and add it as a parameter to the github api\r\n                // the ref can be branch name, tag, commit id\r\n                const reference = regex[1];\r\n                param += '&ref=' + reference;\r\n                filePath = filePath.replace(`blob/${reference}/`, '');\r\n            }\r\n            //eslint-disable-next-line no-useless-catch\r\n            try {\r\n                const req = 'https://api.github.com/repos/' + root + '/contents/' + filePath + param;\r\n                const response = yield axios_1.default.get(req);\r\n                return { content: Buffer.from(response.data.content, 'base64').toString(), cleanUrl: root + '/' + filePath };\r\n            }\r\n            catch (e) {\r\n                throw e;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n    * Handle an import statement based on http\r\n    * @param url The url of the import statement\r\n    * @param cleanUrl\r\n    */\r\n    handleHttp(url, cleanUrl) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            //eslint-disable-next-line no-useless-catch\r\n            try {\r\n                const response = yield axios_1.default.get(url);\r\n                return { content: response.data, cleanUrl };\r\n            }\r\n            catch (e) {\r\n                throw e;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n    * Handle an import statement based on https\r\n    * @param url The url of the import statement\r\n    * @param cleanUrl\r\n    */\r\n    handleHttps(url, cleanUrl) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            //eslint-disable-next-line no-useless-catch\r\n            try {\r\n                const response = yield axios_1.default.get(url);\r\n                return { content: response.data, cleanUrl };\r\n            }\r\n            catch (e) {\r\n                throw e;\r\n            }\r\n        });\r\n    }\r\n    handleSwarm(url, cleanUrl) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            //eslint-disable-next-line no-useless-catch\r\n            try {\r\n                const bzz = new bzz_node_1.BzzNode({ url: this.protocol + '//swarm-gateways.net' });\r\n                const url = bzz.getDownloadURL(cleanUrl, { mode: 'raw' });\r\n                const response = yield axios_1.default.get(url);\r\n                return { content: response.data, cleanUrl };\r\n            }\r\n            catch (e) {\r\n                throw e;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n    * Handle an import statement based on IPFS\r\n    * @param url The url of the IPFS import statement\r\n    */\r\n    handleIPFS(url) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            // replace ipfs:// with /ipfs/\r\n            url = url.replace(/^ipfs:\\/\\/?/, 'ipfs/');\r\n            //eslint-disable-next-line no-useless-catch\r\n            try {\r\n                const req = 'https://ipfsgw.komputing.org/' + url;\r\n                // If you don't find greeter.sol on ipfs gateway use local\r\n                // const req = 'http://localhost:8080/' + url\r\n                const response = yield axios_1.default.get(req);\r\n                return { content: response.data, cleanUrl: url };\r\n            }\r\n            catch (e) {\r\n                throw e;\r\n            }\r\n        });\r\n    }\r\n    getHandlers() {\r\n        return [\r\n            {\r\n                type: 'github',\r\n                match: (url) => { return /^(https?:\\/\\/)?(www.)?github.com\\/([^/]*\\/[^/]*)\\/(.*)/.exec(url); },\r\n                handle: (match) => this.handleGithubCall(match[3], match[4])\r\n            },\r\n            {\r\n                type: 'http',\r\n                match: (url) => { return /^(http?:\\/\\/?(.*))$/.exec(url); },\r\n                handle: (match) => this.handleHttp(match[1], match[2])\r\n            },\r\n            {\r\n                type: 'https',\r\n                match: (url) => { return /^(https?:\\/\\/?(.*))$/.exec(url); },\r\n                handle: (match) => this.handleHttps(match[1], match[2])\r\n            },\r\n            {\r\n                type: 'swarm',\r\n                match: (url) => { return /^(bzz-raw?:\\/\\/?(.*))$/.exec(url); },\r\n                handle: (match) => this.handleSwarm(match[1], match[2])\r\n            },\r\n            {\r\n                type: 'ipfs',\r\n                match: (url) => { return /^(ipfs:\\/\\/?.+)/.exec(url); },\r\n                handle: (match) => this.handleIPFS(match[1])\r\n            }\r\n        ];\r\n    }\r\n    resolve(filePath, customHandlers) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\r\n            let imported = this.previouslyHandled[filePath];\r\n            if (imported) {\r\n                return imported;\r\n            }\r\n            const builtinHandlers = this.getHandlers();\r\n            const handlers = customHandlers ? [...builtinHandlers, ...customHandlers] : [...builtinHandlers];\r\n            const matchedHandler = handlers.filter(handler => handler.match(filePath));\r\n            const handler = matchedHandler[0];\r\n            const match = handler.match(filePath);\r\n            const { content, cleanUrl } = yield handler.handle(match);\r\n            imported = {\r\n                content,\r\n                cleanUrl: cleanUrl ? cleanUrl : filePath,\r\n                type: handler.type\r\n            };\r\n            this.previouslyHandled[filePath] = imported;\r\n            return imported;\r\n        });\r\n    }\r\n}\r\nexports.RemixURLResolver = RemixURLResolver;\r\n//# sourceMappingURL=resolve.js.map","export * from './lib/copy-to-clipboard/copy-to-clipboard';\r\n","var content = require(\"!!../../../../../../node_modules/postcss-loader/src/index.js??embedded!./copy-to-clipboard.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","import React, { useState } from 'react'\r\nimport copy from 'copy-text-to-clipboard'\r\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap'\r\n\r\nimport './copy-to-clipboard.css'\r\n\r\nexport const CopyToClipboard = ({ content, tip='Copy', icon='fa-copy', ...otherProps }) => {\r\n  const [message, setMessage] = useState(tip)\r\n  const handleClick = () => {\r\n    if (content && content !== '') {   // module `copy` keeps last copied thing in the memory, so don't show tooltip if nothing is copied, because nothing was added to memory\r\n      try {\r\n        if (typeof content !== 'string') {\r\n          content = JSON.stringify(content, null, '\\t')\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n      copy(content)\r\n      setMessage('Copied')\r\n    } else {\r\n      setMessage('Cannot copy empty content!')\r\n    }\r\n  }\r\n\r\n  const reset = () => {\r\n    setTimeout(() => setMessage('Copy'), 500)\r\n  }\r\n\r\n  return (\r\n    <a href=\"#\" onClick={handleClick} onMouseLeave={reset}>\r\n      <OverlayTrigger placement=\"right\" overlay={\r\n        <Tooltip id=\"overlay-tooltip\">\r\n            { message }\r\n        </Tooltip>\r\n      }>\r\n        <i className={`far ${icon} ml-1 p-2`} aria-hidden=\"true\"\r\n          {...otherProps}\r\n        ></i>\r\n      </OverlayTrigger>\r\n    </a>\r\n  )\r\n}\r\n\r\nexport default CopyToClipboard\r\n","export * from './lib/debugger-ui'\r\n","var content = require(\"!!../../../../../../node_modules/postcss-loader/src/index.js??embedded!./button-navigator.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","import React, { useState, useEffect } from 'react'\r\nimport './button-navigator.css'\r\n\r\nexport const ButtonNavigation = ({ stepOverBack, stepIntoBack, stepIntoForward, stepOverForward, jumpOut, jumpPreviousBreakpoint, jumpNextBreakpoint, jumpToException, revertedReason, stepState, jumpOutDisabled }) => {\r\n  const [state, setState] = useState({\r\n    intoBackDisabled: true,\r\n    overBackDisabled: true,\r\n    intoForwardDisabled: true,\r\n    overForwardDisabled: true,\r\n    jumpOutDisabled: true,\r\n    jumpNextBreakpointDisabled: true,\r\n    jumpPreviousBreakpointDisabled: true\r\n  })\r\n\r\n  useEffect(() => {\r\n    stepChanged(stepState, jumpOutDisabled)\r\n  }, [stepState, jumpOutDisabled])\r\n\r\n  const reset = () => {\r\n    setState(() => {\r\n      return {\r\n        intoBackDisabled: true,\r\n        overBackDisabled: true,\r\n        intoForwardDisabled: true,\r\n        overForwardDisabled: true,\r\n        jumpOutDisabled: true,\r\n        jumpNextBreakpointDisabled: true,\r\n        jumpPreviousBreakpointDisabled: true\r\n      }\r\n    })\r\n  }\r\n\r\n  const stepChanged = (stepState, jumpOutDisabled) => {\r\n    if (stepState === 'invalid') {\r\n      // TODO: probably not necessary, already implicit done in the next steps\r\n      reset()\r\n      return\r\n    }\r\n\r\n    setState(() => {\r\n      return {\r\n        intoBackDisabled: stepState === 'initial',\r\n        overBackDisabled: stepState === 'initial',\r\n        jumpPreviousBreakpointDisabled: stepState === 'initial',\r\n        intoForwardDisabled: stepState === 'end',\r\n        overForwardDisabled: stepState === 'end',\r\n        jumpNextBreakpointDisabled: stepState === 'end',\r\n        jumpOutDisabled: jumpOutDisabled ? jumpOutDisabled : true\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"buttons\">\r\n      <div className=\"stepButtons btn-group py-1\">\r\n        <button id='overback' className='btn btn-primary btn-sm navigator stepButton fas fa-reply' title='Step over back' onClick={() => { stepOverBack && stepOverBack() }} disabled={state.overBackDisabled} ></button>\r\n        <button id='intoback' data-id=\"buttonNavigatorIntoBack\" className='btn btn-primary btn-sm navigator stepButton fas fa-level-up-alt' title='Step back' onClick={() => { stepIntoBack && stepIntoBack() }} disabled={state.intoBackDisabled}></button>\r\n        <button id='intoforward' data-id=\"buttonNavigatorIntoForward\" className='btn btn-primary btn-sm navigator stepButton fas fa-level-down-alt' title='Step into' onClick={() => { stepIntoForward && stepIntoForward() }} disabled={state.intoForwardDisabled}></button>\r\n        <button id='overforward' className='btn btn-primary btn-sm navigator stepButton fas fa-share' title='Step over forward' onClick={() => { stepOverForward && stepOverForward() }} disabled={state.overForwardDisabled}></button>\r\n      </div>\r\n\r\n      <div className=\"jumpButtons btn-group py-1\">\r\n        <button className='btn btn-primary btn-sm navigator jumpButton fas fa-step-backward'  id='jumppreviousbreakpoint' data-id=\"buttonNavigatorJumpPreviousBreakpoint\" title='Jump to the previous breakpoint' onClick={() => { jumpPreviousBreakpoint && jumpPreviousBreakpoint() }} disabled={state.jumpPreviousBreakpointDisabled}></button>\r\n        <button className='btn btn-primary btn-sm navigator jumpButton fas fa-eject' id='jumpout' title='Jump out' onClick={() => { jumpOut && jumpOut() }} disabled={state.jumpOutDisabled}></button>\r\n        <button className='btn btn-primary btn-sm navigator jumpButton fas fa-step-forward' id='jumpnextbreakpoint' data-id=\"buttonNavigatorJumpNextBreakpoint\" title='Jump to the next breakpoint' onClick={() => { jumpNextBreakpoint && jumpNextBreakpoint() }} disabled={state.jumpNextBreakpointDisabled}></button>\r\n      </div>\r\n      <div id='reverted' style={{ display: revertedReason === '' ? 'none' : 'block' }}>\r\n        <button id='jumptoexception' title='Jump to exception' className='btn btn-danger btn-sm navigator button fas fa-exclamation-triangle' onClick={() => { jumpToException && jumpToException() }} disabled={state.jumpOutDisabled}>\r\n        </button>\r\n        <span>State changes made during this call will be reverted.</span>\r\n        <span id='outofgas' style={{ display: revertedReason === 'outofgas' ? 'inline' : 'none' }}>This call will run out of gas.</span>\r\n        <span id='parenthasthrown' style={{ display: revertedReason === 'parenthasthrown' ? 'inline' : 'none' }}>The parent call will throw an exception</span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ButtonNavigation\r\n","var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??embedded!./debugger-ui.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","import React, { useState, useEffect } from 'react'\r\nimport TxBrowser from './tx-browser/tx-browser'\r\nimport StepManager from './step-manager/step-manager'\r\nimport VmDebugger from './vm-debugger/vm-debugger'\r\nimport VmDebuggerHead from './vm-debugger/vm-debugger-head'\r\nimport { TransactionDebugger as Debugger } from '@remix-project/remix-debug'\r\nimport { DebuggerUIProps } from './DebuggerAPI'\r\nimport { Toaster } from '@remix-ui/toaster'\r\n/* eslint-disable-next-line */\r\nimport './debugger-ui.css'\r\n\r\nexport const DebuggerUI = (props: DebuggerUIProps) => {\r\n  const debuggerModule = props.debuggerAPI\r\n  const [state, setState] = useState({\r\n    isActive: false,\r\n    statusMessage: '',\r\n    debugger: null,\r\n    currentReceipt: {\r\n      contractAddress: null,\r\n      to: null\r\n    },\r\n    blockNumber: null,\r\n    txNumber: '',\r\n    debugging: false,\r\n    opt: {\r\n      debugWithGeneratedSources: false\r\n    },\r\n    toastMessage: ''\r\n  })\r\n\r\n  useEffect(() => {\r\n    return unLoad()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (debuggerModule.debugHash) {\r\n      debug(debuggerModule.debugHash)\r\n    }\r\n  }, [debuggerModule.debugHashRequest])\r\n\r\n  useEffect(() => {\r\n    if (debuggerModule.removeHighlights) deleteHighlights()\r\n  }, [debuggerModule.removeHighlights])\r\n\r\n  useEffect(() => {\r\n    const setEditor = () => {\r\n      const editor = debuggerModule.editor\r\n\r\n      editor.event.register('breakpointCleared', (fileName, row) => {\r\n        if (state.debugger) state.debugger.breakPointManager.remove({fileName: fileName, row: row})\r\n      })\r\n  \r\n      editor.event.register('breakpointAdded', (fileName, row) => {\r\n        if (state.debugger) {\r\n          state.debugger.breakPointManager.add({fileName: fileName, row: row})\r\n        }\r\n      })\r\n  \r\n      editor.event.register('contentChanged', () => {\r\n        unLoad()\r\n      })\r\n    }\r\n\r\n    setEditor()\r\n  }, [state.debugger])\r\n\r\n  const listenToEvents = (debuggerInstance, currentReceipt) => {\r\n    if (!debuggerInstance) return\r\n\r\n    debuggerInstance.event.register('debuggerStatus', async (isActive) => {\r\n      await debuggerModule.discardHighlight()\r\n      setState( prevState => {\r\n        return { ...prevState, isActive }\r\n      })\r\n    })\r\n\r\n    debuggerInstance.event.register('newSourceLocation', async (lineColumnPos, rawLocation, generatedSources, address) => {\r\n      if (!lineColumnPos) return\r\n      const contracts = await debuggerModule.fetchContractAndCompile(\r\n        address || currentReceipt.contractAddress || currentReceipt.to,\r\n        currentReceipt)\r\n      if (contracts) {\r\n        let path = contracts.getSourceName(rawLocation.file)\r\n        if (!path) {\r\n          // check in generated sources\r\n          for (const source of generatedSources) {\r\n            if (source.id === rawLocation.file) {\r\n              path = `browser/.debugger/generated-sources/${source.name}`\r\n              let content\r\n              try {\r\n                content = await debuggerModule.getFile(path)\r\n              } catch (e) {\r\n                console.log('unable to fetch generated sources, the file probably doesn\\'t exist yet', e)\r\n              }\r\n              if (content !== source.contents) {\r\n                await debuggerModule.setFile(path, source.contents)\r\n              }\r\n              break\r\n            }\r\n          }\r\n        }\r\n        if (path) {\r\n          await debuggerModule.discardHighlight()\r\n          await debuggerModule.highlight(lineColumnPos, path)\r\n        }\r\n      }\r\n    })\r\n\r\n    debuggerInstance.event.register('debuggerUnloaded', () => unLoad())\r\n  }\r\n\r\n  const requestDebug = (blockNumber, txNumber, tx) => {\r\n    startDebugging(blockNumber, txNumber, tx)\r\n  }\r\n\r\n  const unloadRequested = (blockNumber, txIndex, tx) => {\r\n    unLoad()\r\n  }\r\n\r\n  const isDebuggerActive = () => {\r\n    return state.isActive\r\n  }\r\n\r\n  const unLoad = () => {\r\n    if (state.debugger) state.debugger.unload()\r\n    setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        isActive: false,\r\n        statusMessage: '',\r\n        debugger: null,\r\n        currentReceipt: {\r\n          contractAddress: null,\r\n          to: null\r\n        },\r\n        blockNumber: null,\r\n        ready: {\r\n          vmDebugger: false,\r\n          vmDebuggerHead: false\r\n        },\r\n        debugging: false\r\n      }\r\n    })\r\n  }\r\n  const startDebugging = async (blockNumber, txNumber, tx) => {\r\n    if (state.debugger) unLoad()\r\n    if (!txNumber) return\r\n    const web3 = await debuggerModule.getDebugWeb3()\r\n    const currentReceipt = await web3.eth.getTransactionReceipt(txNumber)\r\n    const debuggerInstance = new Debugger({\r\n      web3,\r\n      offsetToLineColumnConverter: debuggerModule.offsetToLineColumnConverter,\r\n      compilationResult: async (address) => {\r\n        try {\r\n          const ret = await debuggerModule.fetchContractAndCompile(address, currentReceipt)          \r\n          return ret\r\n        } catch (e) {\r\n          console.error(e)\r\n        }\r\n        return null\r\n      },\r\n      debugWithGeneratedSources: state.opt.debugWithGeneratedSources\r\n    })\r\n    debuggerInstance.debug(blockNumber, txNumber, tx, () => {\r\n      listenToEvents(debuggerInstance, currentReceipt)\r\n      setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          blockNumber,\r\n          txNumber,\r\n          debugging: true,\r\n          currentReceipt,\r\n          debugger: debuggerInstance,\r\n          toastMessage: `debugging ${txNumber}`\r\n        }\r\n      })\r\n    }).catch((error) => {\r\n      setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          toastMessage: JSON.stringify(error)\r\n        }\r\n      })\r\n      unLoad()\r\n    })\r\n  }\r\n\r\nconst debug = (txHash) => {\r\n  startDebugging(null, txHash, null)\r\n}\r\n\r\n\r\n\r\nconst deleteHighlights = async () => {\r\n  await debuggerModule.discardHighlight()\r\n}\r\n\r\nconst stepManager = {\r\n  jumpTo: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.jumpTo.bind(state.debugger.step_manager) : null,\r\n  stepOverBack: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.stepOverBack.bind(state.debugger.step_manager) : null,\r\n  stepIntoBack: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.stepIntoBack.bind(state.debugger.step_manager) : null,\r\n  stepIntoForward: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.stepIntoForward.bind(state.debugger.step_manager) : null,\r\n  stepOverForward: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.stepOverForward.bind(state.debugger.step_manager) : null,\r\n  jumpOut: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.jumpOut.bind(state.debugger.step_manager) : null,\r\n  jumpPreviousBreakpoint: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.jumpPreviousBreakpoint.bind(state.debugger.step_manager) : null,\r\n  jumpNextBreakpoint: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.jumpNextBreakpoint.bind(state.debugger.step_manager) : null,\r\n  jumpToException: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.jumpToException.bind(state.debugger.step_manager) : null,\r\n  traceLength: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.traceLength : null,\r\n  registerEvent: state.debugger && state.debugger.step_manager ? state.debugger.step_manager.event.register.bind(state.debugger.step_manager.event) : null,\r\n}\r\nconst vmDebugger = {\r\n  registerEvent: state.debugger && state.debugger.vmDebuggerLogic ? state.debugger.vmDebuggerLogic.event.register.bind(state.debugger.vmDebuggerLogic.event) : null,\r\n  triggerEvent: state.debugger && state.debugger.vmDebuggerLogic ? state.debugger.vmDebuggerLogic.event.trigger.bind(state.debugger.vmDebuggerLogic.event) : null\r\n}\r\n return (\r\n      <div>\r\n        <Toaster message={state.toastMessage} />\r\n        <div className=\"px-2\">\r\n          <div className=\"mt-3\">\r\n            <p className=\"mt-2 debuggerLabel\">Debugger Configuration</p>\r\n            <div className=\"mt-2 debuggerConfig custom-control custom-checkbox\">\r\n              <input className=\"custom-control-input\" id=\"debugGeneratedSourcesInput\" onChange={({ target: { checked } }) => {\r\n                setState(prevState => {\r\n                  return { ...prevState, opt: { debugWithGeneratedSources: checked }}\r\n                })\r\n              }} type=\"checkbox\" title=\"Debug with generated sources\" />\r\n              <label data-id=\"debugGeneratedSourcesLabel\" className=\"form-check-label custom-control-label\" htmlFor=\"debugGeneratedSourcesInput\">Use generated sources (from Solidity v0.7.2)</label>\r\n            </div>\r\n          </div>\r\n          <TxBrowser requestDebug={ requestDebug } unloadRequested={ unloadRequested } transactionNumber={ state.txNumber } debugging={ state.debugging } />\r\n  { state.debugging && <StepManager stepManager={ stepManager } /> }\r\n  { state.debugging && <VmDebuggerHead vmDebugger={ vmDebugger } /> }\r\n        </div>\r\n  { state.debugging && <div className=\"statusMessage\">{ state.statusMessage }</div> }\r\n  { state.debugging && <VmDebugger vmDebugger={ vmDebugger } /> }\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default DebuggerUI\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nexport const Slider = ({ jumpTo, sliderValue, traceLength }) => {\r\n  const [state, setState] = useState({\r\n    currentValue: 0\r\n  })\r\n\r\n  useEffect(() => {\r\n    setValue(sliderValue)\r\n  }, [sliderValue])\r\n\r\n  const setValue = (value) => {\r\n    if (value === state.currentValue) return\r\n    setState(prevState => {\r\n      return { ...prevState, currentValue: value }\r\n    })\r\n    jumpTo && jumpTo(value)\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    const value = parseInt(e.target.value)\r\n\r\n    setValue(value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n        <input id='slider'\r\n            data-id=\"slider\"\r\n            className='w-100 my-0'\r\n            type='range'\r\n            min={0}\r\n            max={traceLength ? traceLength - 1 : 0}\r\n            value={state.currentValue}\r\n            onChange={handleChange}\r\n            disabled={traceLength ? traceLength === 0 : true}\r\n        />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Slider\r\n","import React, { useState, useEffect } from 'react'\r\nimport Slider from '../slider/slider'\r\nimport ButtonNavigator from '../button-navigator/button-navigator'\r\n\r\nexport const StepManager = ({ stepManager: { jumpTo, traceLength, stepIntoBack, stepIntoForward, stepOverBack, stepOverForward, jumpOut, jumpNextBreakpoint, jumpPreviousBreakpoint, jumpToException, registerEvent } }) => {\r\n  const [state, setState] = useState({\r\n    sliderValue: 0,\r\n    revertWarning: '',\r\n    stepState: '',\r\n    jumpOutDisabled: true\r\n  })\r\n\r\n  useEffect(() => {\r\n    registerEvent && registerEvent('revertWarning', setRevertWarning)\r\n    registerEvent && registerEvent('stepChanged', updateStep)\r\n  }, [registerEvent])\r\n\r\n  const setRevertWarning = (warning) => {\r\n    setState(prevState => {\r\n      return { ...prevState, revertWarning: warning }\r\n    })\r\n  }\r\n\r\n  const updateStep = (step, stepState, jumpOutDisabled) => {\r\n    setState(prevState => {\r\n      return { ...prevState, sliderValue: step, stepState, jumpOutDisabled }\r\n    })\r\n  }\r\n  const { sliderValue, revertWarning, stepState, jumpOutDisabled } = state\r\n\r\n  return (\r\n    <div className=\"py-1\">\r\n      <Slider jumpTo={jumpTo} sliderValue={sliderValue} traceLength={traceLength} />\r\n      <ButtonNavigator \r\n        stepIntoBack={stepIntoBack}\r\n        stepIntoForward={stepIntoForward}\r\n        stepOverBack={stepOverBack}\r\n        stepOverForward={stepOverForward}\r\n        revertedReason={revertWarning}\r\n        stepState={stepState}\r\n        jumpOutDisabled={jumpOutDisabled}\r\n        jumpOut={jumpOut}\r\n        jumpNextBreakpoint={jumpNextBreakpoint}\r\n        jumpPreviousBreakpoint={jumpPreviousBreakpoint}\r\n        jumpToException={jumpToException}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default StepManager\r\n","var content = require(\"!!../../../../../../node_modules/postcss-loader/src/index.js??embedded!./tx-browser.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","import React, { useState, useEffect } from 'react'\r\nimport './tx-browser.css'\r\n\r\nexport const TxBrowser = ({ requestDebug, unloadRequested, transactionNumber, debugging }) => {\r\n  const [state, setState] = useState({\r\n    txNumber: ''\r\n  })\r\n\r\n  useEffect(() => {\r\n    setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        txNumber: transactionNumber\r\n      }\r\n    })\r\n  }, [transactionNumber])\r\n\r\n  const handleSubmit = () => {\r\n    if (debugging) {\r\n      unload()\r\n    } else {\r\n      requestDebug(undefined, state.txNumber)\r\n    }\r\n  }\r\n\r\n  const unload = () => {\r\n    unloadRequested()\r\n  }\r\n\r\n  const txInputChanged = (value) => {\r\n    // todo check validation of txnumber in the input element, use\r\n    // required\r\n    // oninvalid=\"setCustomValidity('Please provide a valid transaction number, must start with 0x and have length of 22')\"\r\n    // pattern=\"^0[x,X]+[0-9a-fA-F]{22}\"\r\n    // this.state.txNumberInput.setCustomValidity('')\r\n    setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        txNumber: value\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"container px-0\">\r\n      <div className=\"txContainer\">\r\n        <div className=\"py-1 d-flex justify-content-center w-100 input-group\">\r\n          <input\r\n            value={state.txNumber}\r\n            className=\"form-control m-0 txinput\"\r\n            id='txinput'\r\n            type='text'\r\n            onChange={({ target: { value } }) => txInputChanged(value)}\r\n            placeholder={'Transaction hash, should start with 0x'}\r\n            data-id=\"debuggerTransactionInput\"\r\n            disabled={debugging}\r\n          />\r\n        </div>\r\n        <div className=\"d-flex justify-content-center w-100 btn-group py-1\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm txbutton\"\r\n            id=\"load\"\r\n            title={debugging ? 'Stop debugging' : 'Start debugging'}\r\n            onClick={handleSubmit}\r\n            data-id=\"debuggerTransactionStartButton\"\r\n            disabled={!state.txNumber ? true : false }\r\n          >\r\n            { debugging ? 'Stop' : 'Start' } debugging\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <span id='error'></span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TxBrowser\r\n","import React, { useState, useRef, useEffect, useReducer } from 'react'\r\nimport { initialState, reducer } from '../../reducers/assembly-items'\r\nimport './styles/assembly-items.css'\r\n\r\nexport const AssemblyItems = ({ registerEvent }) => {\r\n    const [assemblyItems, dispatch] = useReducer(reducer, initialState)\r\n    const [selectedItem, setSelectedItem] = useState(0)\r\n    const refs = useRef({})\r\n    const asmItemsRef = useRef(null)\r\n\r\n    useEffect(()=>{\r\n        registerEvent && registerEvent('codeManagerChanged', (code, address, index) => {\r\n            dispatch({ type: 'FETCH_OPCODES_SUCCESS', payload: { code, address, index } })\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (selectedItem !== assemblyItems.index) {\r\n            indexChanged(assemblyItems.index)\r\n        }\r\n    }, [assemblyItems.index])\r\n\r\n    const indexChanged = (index: number) => {\r\n        if (index < 0) return\r\n        let currentItem = refs.current[selectedItem] ? refs.current[selectedItem] : null\r\n\r\n        if (currentItem) {\r\n            currentItem.removeAttribute('selected')\r\n            currentItem.removeAttribute('style')\r\n            if (currentItem.firstChild) {\r\n                currentItem.firstChild.removeAttribute('style')\r\n            }\r\n            const codeView = asmItemsRef.current\r\n    \r\n            currentItem = codeView.children[index]\r\n            currentItem.style.setProperty('border-color', 'var(--primary)')\r\n            currentItem.style.setProperty('border-style', 'solid')\r\n            currentItem.setAttribute('selected', 'selected')\r\n            codeView.scrollTop = currentItem.offsetTop - parseInt(codeView.offsetTop)\r\n            setSelectedItem(index)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"border rounded px-1 mt-1 bg-light\">\r\n            <div className='dropdownpanel'>\r\n                <div className='dropdowncontent'>\r\n                    <div className=\"pl-2 my-1 small instructions\" id='asmitems' ref={asmItemsRef}>\r\n                        {\r\n                            assemblyItems.display.map((item, i) => {\r\n                                return <div className=\"px-1\" key={i} ref={ref => refs.current[i] = ref}><span>{item}</span></div>\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AssemblyItems","import React from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\n\r\nexport const CalldataPanel = ({ calldata }) => {\r\n    return (\r\n        <div id='calldatapanel'>\r\n            <DropdownPanel dropdownName='Call Data' calldata={calldata || {}} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CalldataPanel","import React from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\n\r\nexport const CallstackPanel = ({ calldata }) => {\r\n    return (\r\n        <div id='callstackpanel'>\r\n            <DropdownPanel dropdownName='Call Stack' calldata={calldata || {}} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CallstackPanel","import React, { useState, useEffect } from 'react'\r\nimport AssemblyItems from './assembly-items'\r\n\r\nexport const CodeListView = ({ registerEvent }) => {\r\n  const [state, setState] = useState({\r\n    code: [],\r\n    address: '',\r\n    itemSelected: null,\r\n    index: null\r\n  })\r\n\r\n  const indexChanged = (index) => {\r\n    if(index < 0) return\r\n    setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        index\r\n      }\r\n    })\r\n  }\r\n\r\n  const changed = (code, address, index) => {\r\n    if (state.address === address) {\r\n      return indexChanged(index)\r\n    }\r\n    setState(prevState => {\r\n      return {\r\n        ...prevState,\r\n        code,\r\n        address\r\n      }\r\n    })\r\n    indexChanged(index)\r\n  } \r\n\r\n  return (\r\n    <div id='asmcodes'>\r\n      <AssemblyItems registerEvent={registerEvent} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CodeListView\r\n","import React, { useState, useEffect, useReducer } from 'react'\r\nimport { TreeView, TreeViewItem } from '@remix-ui/tree-view'\r\nimport { DropdownPanelProps, ExtractData, ExtractFunc } from '../../types'\r\nimport { CopyToClipboard } from '@remix-ui/clipboard'\r\nimport { initialState, reducer } from '../../reducers/calldata'\r\nimport './styles/dropdown-panel.css'\r\n\r\nexport const DropdownPanel = (props: DropdownPanelProps) => {\r\n    const [calldataObj, dispatch] = useReducer(reducer, initialState)\r\n    const { dropdownName, dropdownMessage, calldata, header, loading, extractFunc, formatSelfFunc, registerEvent, triggerEvent, loadMoreEvent, loadMoreCompletedEvent } = props\r\n    const extractDataDefault: ExtractFunc = (item, parent?) => {\r\n        const ret: ExtractData = {}\r\n\r\n        if (item instanceof Array) {\r\n            ret.children = item.map((item, index) => {\r\n            return {key: index, value: item}\r\n            })\r\n            ret.self = 'Array'\r\n            ret.isNode = true\r\n            ret.isLeaf = false\r\n        } else if (item instanceof Object) {\r\n            ret.children = Object.keys(item).map((key) => {\r\n                return {key: key, value: item[key]}\r\n            })\r\n            ret.self = 'Object'\r\n            ret.isNode = true\r\n            ret.isLeaf = false\r\n        } else {\r\n            ret.self = item\r\n            ret.children = null\r\n            ret.isNode = false\r\n            ret.isLeaf = true\r\n        }\r\n        return ret\r\n    }\r\n    const formatSelfDefault = (key: string | number, data: ExtractData) => {\r\n        return (\r\n            <div className=\"d-flex mb-1 flex-row label_item\">\r\n                <label className=\"small font-weight-bold pr-1 label_key\">{key}:</label> \r\n                <label className=\"m-0 label_value\">{data.self}</label>\r\n            </div>\r\n        )\r\n    }\r\n    const [state, setState] = useState({\r\n        header: '',\r\n        toggleDropdown: false,\r\n        message: {\r\n            innerText: 'No data available.',\r\n            display: 'block'\r\n        },\r\n        dropdownContent: {\r\n            innerText: '',\r\n            display: 'none'\r\n        },\r\n        title: {\r\n            innerText: '',\r\n            display: 'none'\r\n        },\r\n        copiableContent: '',\r\n        updating: false,\r\n        expandPath: [],\r\n        data: null\r\n    })\r\n\r\n    useEffect(() => {\r\n        registerEvent && registerEvent(loadMoreCompletedEvent, (updatedCalldata) => {\r\n            dispatch({ type: 'UPDATE_CALLDATA_SUCCESS', payload: updatedCalldata })\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        dispatch({ type: 'FETCH_CALLDATA_SUCCESS', payload: calldata })\r\n    }, [calldata])\r\n\r\n    useEffect(() => {\r\n        update(calldata)\r\n    }, [calldataObj.calldata])\r\n\r\n    useEffect(() => {\r\n        message(dropdownMessage)\r\n    }, [dropdownMessage])\r\n\r\n    useEffect(() => {\r\n        if (loading && !state.updating) setLoading()\r\n    }, [loading])\r\n\r\n    const handleToggle = () => {\r\n        setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                toggleDropdown: !prevState.toggleDropdown\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleExpand = (keyPath) => {\r\n        if (!state.expandPath.includes(keyPath)) {\r\n            state.expandPath.push(keyPath)\r\n        } else {\r\n            state.expandPath = state.expandPath.filter(path => !path.startsWith(keyPath))\r\n        }\r\n    }\r\n\r\n    const message = (message) => {\r\n        if (message === state.message.innerText) return\r\n        setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                message: {\r\n                    innerText: message,\r\n                    display: message ? 'block' : ''\r\n                },\r\n                updating: false\r\n            }\r\n        })\r\n    }\r\n\r\n    const setLoading = () => {\r\n        setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                message: {\r\n                    innerText: '',\r\n                    display: 'none'\r\n                },\r\n                dropdownContent: {\r\n                    ...prevState.dropdownContent,\r\n                    display: 'none'\r\n                },\r\n                copiableContent: '',\r\n                updating: true\r\n            }\r\n        })\r\n    }\r\n\r\n    const update = function (calldata) {\r\n        let isEmpty = !calldata ? true : false\r\n\r\n        if(calldata && Array.isArray(calldata) && calldata.length === 0) isEmpty = true\r\n        else if(calldata && Object.keys(calldata).length === 0 && calldata.constructor === Object) isEmpty = true\r\n\r\n        setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                dropdownContent: {\r\n                    ...prevState.dropdownContent,\r\n                    display: 'block'\r\n                },\r\n                copiableContent: JSON.stringify(calldata, null, '\\t'),\r\n                message: {\r\n                    innerText: isEmpty ? 'No data available' : '',\r\n                    display: isEmpty ? 'block' : 'none'\r\n                },\r\n                updating: false,\r\n                toggleDropdown: !isEmpty,\r\n                data: calldata\r\n            }\r\n        })\r\n    }\r\n\r\n    const renderData = (item: ExtractData, parent, key: string | number, keyPath: string) => {\r\n        const data = extractFunc ? extractFunc(item, parent) : extractDataDefault(item, parent)\r\n        const children = (data.children || []).map((child) => {\r\n            return (\r\n                renderData(child.value, data, child.key, keyPath + '/' + child.key)\r\n            )\r\n        })\r\n\r\n        if (children && children.length > 0 ) {\r\n            return (\r\n                <TreeViewItem id={`treeViewItem${key}`} key={keyPath} label={ formatSelfFunc ? formatSelfFunc(key, data) : formatSelfDefault(key, data) } onClick={() => handleExpand(keyPath)} expand={state.expandPath.includes(keyPath)}>\r\n                    <TreeView id={`treeView${key}`} key={keyPath}>\r\n                        { children }\r\n                        { data.hasNext && <TreeViewItem id={`treeViewLoadMore`} data-id={`treeViewLoadMore`} className=\"cursor_pointer\" label=\"Load more\" onClick={() => { triggerEvent(loadMoreEvent, [data.cursor]) }} /> }\r\n                    </TreeView>\r\n                </TreeViewItem>\r\n            )\r\n        } else {\r\n            return <TreeViewItem id={key.toString()} key={keyPath} label={ formatSelfFunc ? formatSelfFunc(key, data) : formatSelfDefault(key, data) } onClick={() => handleExpand(keyPath)} expand={state.expandPath.includes(keyPath)} />\r\n        }\r\n    }\r\n\r\n    const uniquePanelName = dropdownName.split(' ').join('')\r\n\r\n    return (\r\n        <div className=\"border rounded px-1 mt-1 bg-light\">\r\n            <div className=\"py-0 px-1 title\">\r\n                <div className={state.toggleDropdown ? 'icon fas fa-caret-down' : 'icon fas fa-caret-right'} onClick={handleToggle}></div>\r\n                <div className=\"name\" data-id={`dropdownPanel${uniquePanelName}`} onClick={handleToggle}>{dropdownName}</div><span className=\"nameDetail\" onClick={handleToggle}>{ header }</span>\r\n                <CopyToClipboard content={state.copiableContent} data-id={`dropdownPanelCopyToClipboard${uniquePanelName}`} />\r\n            </div>\r\n            <div className='dropdownpanel' style={{ display: state.toggleDropdown ? 'block' : 'none' }}>\r\n                <i className=\"refresh fas fa-sync\" style={{ display: state.updating ? 'inline-block' : 'none' }} aria-hidden=\"true\"></i>\r\n                <div className='dropdowncontent' style={{ display: state.dropdownContent.display }}>\r\n                    {\r\n                        state.data &&\r\n                        <TreeView id=\"treeView\">\r\n                            {\r\n                                Object.keys(state.data).map((innerkey) => renderData(state.data[innerkey], state.data, innerkey, innerkey))\r\n                            }\r\n                        </TreeView>\r\n                    }\r\n                </div>\r\n                <div className='dropdownrawcontent' hidden={true}>{ state.copiableContent }</div>\r\n                <div className='message' style={{ display: state.message.display }}>{ state.message.innerText }</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropdownPanel","import React from 'react'\r\nimport { DropdownPanel } from './dropdown-panel'\r\n\r\nexport const FullStoragesChanges = ({ calldata }) => {\r\n    return (\r\n        <div id='fullstorageschangespanel'>\r\n            <DropdownPanel dropdownName='Full Storages Changes' calldata={ calldata || {}} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FullStoragesChanges","import React, { useState, useEffect } from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\nimport { default as deepequal } from 'deep-equal'\r\n\r\nexport const FunctionPanel = ({ data }) => {\r\n    const [calldata, setCalldata] = useState(null)\r\n\r\n    useEffect(() => {\r\n        if (!deepequal(calldata, data)) setCalldata(data)\r\n    }, [data])\r\n\r\n    return (\r\n        <div id=\"FunctionPanel\">\r\n            <DropdownPanel dropdownName='Function Stack' calldata={calldata || {}} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FunctionPanel\r\n","import React from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\n\r\nexport const MemoryPanel = ({ calldata }) => {\r\n    return (\r\n        <DropdownPanel  dropdownName='Memory' calldata={calldata || {}} />\r\n    )\r\n}\r\n\r\nexport default MemoryPanel","import React, { useState, useEffect } from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\nimport { extractData } from '../../utils/solidityTypeFormatter'\r\nimport { ExtractData } from '../../types'\r\n\r\nexport const SolidityLocals = ({ data, message, registerEvent, triggerEvent }) => {\r\n    const [calldata, setCalldata] = useState(null)\r\n\r\n    useEffect(() => {\r\n        data && setCalldata(data)\r\n    }, [data])\r\n\r\n    const formatSelf = (key: string, data: ExtractData) => {\r\n        let color = 'var(--primary)'\r\n        if (data.isArray || data.isStruct || data.isMapping) {\r\n            color = 'var(--info)'\r\n        } else if (\r\n            data.type.indexOf('uint') === 0 ||\r\n            data.type.indexOf('int') === 0 ||\r\n            data.type.indexOf('bool') === 0 ||\r\n            data.type.indexOf('enum') === 0\r\n        ) {\r\n            color = 'var(--green)'\r\n        } else if (data.type === 'string') {\r\n            color = 'var(--teal)'\r\n        } else if (data.self == 0x0) { // eslint-disable-line\r\n            color = 'var(--gray)'\r\n        }\r\n        if (data.type === 'string') {\r\n            data.self = JSON.stringify(data.self)\r\n        }\r\n        return (\r\n            <label className='mb-0' style={{ color: data.isProperty ? 'var(--info)' : '', whiteSpace: 'pre-wrap' }}>\r\n                {' ' + key}:\r\n                <label className='mb-0' style={{ color }}>\r\n                    {' ' + data.self}\r\n                </label>\r\n                <label style={{ fontStyle: 'italic' }}>\r\n                    {data.isProperty || !data.type ? '' : ' ' + data.type}\r\n                </label>\r\n            </label>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div id='soliditylocals' data-id=\"solidityLocals\">\r\n            <DropdownPanel \r\n                dropdownName='Solidity Locals'\r\n                dropdownMessage={message}\r\n                calldata={calldata || {}}\r\n                extractFunc={extractData}\r\n                formatSelfFunc={formatSelf}\r\n                registerEvent={registerEvent}\r\n                triggerEvent={triggerEvent}\r\n                loadMoreEvent='solidityLocalsLoadMore'\r\n                loadMoreCompletedEvent='solidityLocalsLoadMoreCompleted'\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SolidityLocals","import React from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\nimport { extractData } from '../../utils/solidityTypeFormatter'\r\nimport { ExtractData } from '../../types'\r\n\r\nexport const SolidityState = ({ calldata, message }) => {\r\n    const formatSelf = (key: string, data: ExtractData) => {\r\n        let color = 'var(--primary)'\r\n        if (data.isArray || data.isStruct || data.isMapping) {\r\n            color = 'var(--info)'\r\n        } else if (\r\n            data.type.indexOf('uint') === 0 ||\r\n            data.type.indexOf('int') === 0 ||\r\n            data.type.indexOf('bool') === 0 ||\r\n            data.type.indexOf('enum') === 0\r\n        ) {\r\n            color = 'var(--green)'\r\n        } else if (data.type === 'string') {\r\n            color = 'var(--teal)'\r\n        } else if (data.self == 0x0) { // eslint-disable-line\r\n            color = 'var(--gray)'\r\n        }\r\n        return (\r\n            <label className='mb-0' style={{ color: data.isProperty ? 'var(--info)' : '', whiteSpace: 'pre-wrap' }}>\r\n                {' ' + key}:\r\n                <label className='mb-0' style={{ color }}>\r\n                    {' ' + data.self}\r\n                </label>\r\n                <label style={{ fontStyle: 'italic' }}>\r\n                    {data.isProperty || !data.type ? '' : ' ' + data.type}\r\n                </label>\r\n            </label>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div id='soliditystate' data-id='soliditystate'>\r\n            {\r\n                <DropdownPanel dropdownName='Solidity State' calldata={calldata || {}} formatSelfFunc={formatSelf} extractFunc={extractData} />\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SolidityState","import React from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\n\r\nexport const StackPanel = ({ calldata }) => {\r\n    return (\r\n        <div id=\"stackpanel\">\r\n            <DropdownPanel dropdownName='Stack' calldata={calldata || {}} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StackPanel","import React from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\n\r\nexport const StepDetail = ({ stepDetail }) => {\r\n    return (\r\n        <div id='stepdetail' data-id=\"stepdetail\">\r\n            <DropdownPanel dropdownName='Step details' calldata={stepDetail || {}} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StepDetail","import React from 'react'\r\nimport DropdownPanel from './dropdown-panel'\r\n\r\nexport const StoragePanel = ({ calldata, header }) => {\r\n    return (\r\n        <div id='storagepanel'>\r\n            <DropdownPanel dropdownName='Storage' calldata={calldata || {}} header={header} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StoragePanel","var content = require(\"!!../../../../../../../node_modules/postcss-loader/src/index.js??embedded!./assembly-items.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","var content = require(\"!!../../../../../../../node_modules/postcss-loader/src/index.js??embedded!./dropdown-panel.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","import React, { useState, useEffect } from 'react'\r\nimport CodeListView from './code-list-view'\r\nimport FunctionPanel from './function-panel'\r\nimport StepDetail from './step-detail'\r\nimport SolidityState from './solidity-state'\r\nimport SolidityLocals from './solidity-locals'\r\n\r\nexport const VmDebuggerHead = ({ vmDebugger: { registerEvent, triggerEvent } }) => {\r\n  const [functionPanel, setFunctionPanel] = useState(null)\r\n  const [stepDetail, setStepDetail] = useState({\r\n    'vm trace step': '-',\r\n    'execution step': '-',\r\n    'add memory': '',\r\n    'gas': '',\r\n    'remaining gas': '-',\r\n    'loaded address': '-'\r\n  })\r\n  const [solidityState, setSolidityState] = useState({\r\n    calldata: null,\r\n    message: null,\r\n  })\r\n  const [solidityLocals, setSolidityLocals] = useState({\r\n    calldata: null,\r\n    message: null,\r\n  })\r\n\r\n  useEffect(() => {\r\n    registerEvent && registerEvent('functionsStackUpdate', (stack) => {\r\n      if (stack === null || stack.length === 0) return\r\n      const functions = []\r\n  \r\n      for (const func of stack) {\r\n        functions.push(func.functionDefinition.name + '(' + func.inputs.join(', ') + ')')\r\n      }\r\n      setFunctionPanel(() => functions)\r\n    })\r\n    registerEvent && registerEvent('traceUnloaded', () => {\r\n      setStepDetail(() => {\r\n        return { 'vm trace step': '-', 'execution step': '-', 'add memory': '', 'gas': '', 'remaining gas': '-', 'loaded address': '-' }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('newTraceLoaded', () => {\r\n      setStepDetail(() => {\r\n        return { 'vm trace step': '-', 'execution step': '-', 'add memory': '', 'gas': '', 'remaining gas': '-', 'loaded address': '-' }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('traceCurrentStepUpdate', (error, step) => {\r\n      setStepDetail(prevState => {\r\n        return { ...prevState, 'execution step': (error ? '-' : step) }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('traceMemExpandUpdate', (error, addmem) => {\r\n      setStepDetail(prevState => {\r\n        return { ...prevState, 'add memory': (error ? '-' : addmem) }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('traceStepCostUpdate', (error, gas) => {\r\n      setStepDetail(prevState => {\r\n        return { ...prevState, 'gas': (error ? '-' : gas) }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('traceCurrentCalledAddressAtUpdate', (error, address) => {\r\n      setStepDetail(prevState => {\r\n        return { ...prevState, 'loaded address': (error ? '-' : address) }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('traceRemainingGasUpdate', (error, remainingGas) => {\r\n      setStepDetail(prevState => {\r\n        return { ...prevState, 'remaining gas': (error ? '-' : remainingGas) }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('indexUpdate', (index) => {\r\n      setStepDetail(prevState => {\r\n        return { ...prevState, 'vm trace step': index }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('solidityState', (calldata) => {\r\n      setSolidityState(() => {\r\n        return { ...solidityState, calldata }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('solidityStateMessage', (message) => {\r\n      setSolidityState(() => {\r\n        return { ...solidityState, message }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('solidityLocals', (calldata) => {\r\n      setSolidityLocals(() => {\r\n        return { ...solidityLocals, calldata }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('solidityLocalsMessage', (message) => {\r\n      setSolidityLocals(() => {\r\n        return { ...solidityLocals, message }\r\n      })\r\n    })\r\n  }, [registerEvent])\r\n\r\n  return (\r\n    <div id=\"vmheadView\" className=\"mt-1 px-0\">\r\n      <div className=\"d-flex flex-column\">\r\n        <div className=\"w-100\">\r\n          <FunctionPanel data={functionPanel} />\r\n          <SolidityLocals data={solidityLocals.calldata} message={solidityLocals.message} registerEvent={registerEvent} triggerEvent={triggerEvent} />\r\n          <SolidityState calldata={solidityState.calldata} message={solidityState.message} />\r\n        </div>\r\n        <div className=\"w-100\"><CodeListView registerEvent={registerEvent} /></div>\r\n        <div className=\"w-100\"><StepDetail stepDetail={stepDetail} /></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VmDebuggerHead\r\n","import React, { useState, useEffect } from 'react'\r\nimport CalldataPanel from './calldata-panel'\r\nimport MemoryPanel from './memory-panel'\r\nimport CallstackPanel from './callstack-panel'\r\nimport StackPanel from './stack-panel'\r\nimport StoragePanel from './storage-panel'\r\nimport ReturnValuesPanel from './dropdown-panel'\r\nimport FullStoragesChangesPanel from './full-storages-changes'\r\n\r\nexport const VmDebugger = ({ vmDebugger: { registerEvent } }) => {\r\n  const [calldataPanel, setCalldataPanel] = useState(null)\r\n  const [memoryPanel, setMemoryPanel] = useState(null)\r\n  const [callStackPanel, setCallStackPanel] = useState(null)\r\n  const [stackPanel, setStackPanel] = useState(null)\r\n  const [storagePanel, setStoragePanel] = useState({\r\n    calldata: null,\r\n    header: null\r\n  })\r\n  const [returnValuesPanel, setReturnValuesPanel] = useState(null)\r\n  const [fullStoragesChangesPanel, setFullStoragesChangesPanel] = useState(null)\r\n\r\n  useEffect(() => {\r\n    registerEvent && registerEvent('traceManagerCallDataUpdate', (calldata) => {\r\n      setCalldataPanel(() => calldata)\r\n    })\r\n    registerEvent && registerEvent('traceManagerMemoryUpdate', (calldata) => {\r\n      setMemoryPanel(() => calldata)\r\n    })\r\n    registerEvent && registerEvent('traceManagerCallStackUpdate', (calldata) => {\r\n      setCallStackPanel(() => calldata)\r\n    })\r\n    registerEvent && registerEvent('traceManagerStackUpdate', (calldata) => {\r\n      setStackPanel(() => calldata)\r\n    })\r\n    registerEvent && registerEvent('traceManagerStorageUpdate', (calldata, header) => {\r\n      setStoragePanel(() => {\r\n        return { calldata, header }\r\n      })\r\n    })\r\n    registerEvent && registerEvent('traceReturnValueUpdate', (calldata) => {\r\n      setReturnValuesPanel(() => calldata)\r\n    })\r\n    registerEvent && registerEvent('traceAddressesUpdate', (calldata) => {\r\n      setFullStoragesChangesPanel(() => {\r\n        return {}\r\n      })\r\n    })\r\n    registerEvent && registerEvent('traceStorageUpdate', (calldata) => {\r\n      setFullStoragesChangesPanel(() => calldata)\r\n    })\r\n  }, [registerEvent])\r\n\r\n  return (\r\n    <div id=\"vmdebugger\" className=\"px-2\">\r\n      <div>\r\n        <StackPanel calldata={stackPanel} />\r\n        <MemoryPanel calldata={memoryPanel} />\r\n        <StoragePanel calldata={storagePanel.calldata} header={storagePanel.header} />\r\n        <CallstackPanel calldata={callStackPanel} />\r\n        <CalldataPanel calldata={calldataPanel} />\r\n        <ReturnValuesPanel dropdownName=\"Return Value\" calldata={returnValuesPanel || {}} />\r\n        <FullStoragesChangesPanel calldata={fullStoragesChangesPanel} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VmDebugger\r\n","import { default as deepEqual } from 'deep-equal'\r\n\r\ninterface Action {\r\n    type: string;\r\n    payload: { [key: string]: any };\r\n}\r\n\r\nexport const initialState = {\r\n    opCodes: {\r\n      code: [],\r\n      index: 0,\r\n      address: ''\r\n    },\r\n    display: [],\r\n    index: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    isRequesting: false,\r\n    isSuccessful: false,\r\n    hasError: null\r\n}\r\n\r\nexport const reducer = (state = initialState, action: Action) => {\r\n  switch (action.type) {\r\n    case 'FETCH_OPCODES_REQUEST': {\r\n      return {\r\n        ...state,\r\n        isRequesting: true,\r\n        isSuccessful: false,\r\n        hasError: null\r\n      };\r\n    }\r\n    case 'FETCH_OPCODES_SUCCESS': {\r\n      const opCodes = action.payload.address === state.opCodes.address ? { \r\n        ...state.opCodes, index: action.payload.index \r\n      } : deepEqual(action.payload.code, state.opCodes.code) ? state.opCodes : action.payload\r\n      const top = opCodes.index - 3 > 0 ? opCodes.index - 3 : 0\r\n      const bottom = opCodes.index + 4 < opCodes.code.length ? opCodes.index + 4 : opCodes.code.length\r\n      const display =  opCodes.code.slice(top, bottom)\r\n\r\n      return {\r\n          opCodes,\r\n          display,\r\n          index: display.findIndex(code => code === opCodes.code[opCodes.index]),\r\n          top,\r\n          bottom,\r\n          isRequesting: false,\r\n          isSuccessful: true,\r\n          hasError: null\r\n      };\r\n    }\r\n    case 'FETCH_OPCODES_ERROR': {\r\n      return {\r\n          ...state,\r\n          isRequesting: false,\r\n          isSuccessful: false,\r\n          hasError: action.payload\r\n      };\r\n    }\r\n    default:\r\n      throw new Error();\r\n  }\r\n}","interface Action {\r\n    type: string;\r\n    payload: { [key: string]: any };\r\n}\r\n\r\nexport const initialState = {\r\n    calldata: {},\r\n    isRequesting: false,\r\n    isSuccessful: false,\r\n    hasError: null\r\n}\r\n\r\nexport const reducer = (state = initialState, action: Action) => {\r\n  switch (action.type) {\r\n    case 'FETCH_CALLDATA_REQUEST':\r\n      return {\r\n          ...state,\r\n          isRequesting: true,\r\n          isSuccessful: false,\r\n          hasError: null\r\n      };\r\n    case 'FETCH_CALLDATA_SUCCESS':\r\n      return {\r\n          calldata: action.payload,\r\n          isRequesting: false,\r\n          isSuccessful: true,\r\n          hasError: null\r\n      };\r\n    case 'FETCH_CALLDATA_ERROR':\r\n        return {\r\n            ...state,\r\n            isRequesting: false,\r\n            isSuccessful: false,\r\n            hasError: action.payload\r\n        };\r\n    case 'UPDATE_CALLDATA_REQUEST':\r\n      return {\r\n          ...state,\r\n          isRequesting: true,\r\n          isSuccessful: false,\r\n          hasError: null\r\n      };\r\n    case 'UPDATE_CALLDATA_SUCCESS':\r\n      return {\r\n          calldata: mergeLocals(action.payload, state.calldata),\r\n          isRequesting: false,\r\n          isSuccessful: true,\r\n          hasError: null\r\n      };\r\n    case 'UPDATE_CALLDATA_ERROR':\r\n        return {\r\n            ...state,\r\n            isRequesting: false,\r\n            isSuccessful: false,\r\n            hasError: action.payload\r\n        };\r\n    default:\r\n      throw new Error();\r\n  }\r\n}\r\n\r\nfunction mergeLocals (locals1, locals2) {\r\n  Object.keys(locals2).map(item => {\r\n    if (locals2[item].cursor && (parseInt(locals2[item].cursor) < parseInt(locals1[item].cursor))) {\r\n      locals2[item] = {\r\n        ...locals1[item],\r\n        value: [...locals2[item].value, ...locals1[item].value]\r\n      }\r\n    }\r\n  })\r\n  return locals2\r\n}","import { BN } from 'ethereumjs-util'\r\nimport { ExtractData } from '../types'\r\n\r\nexport function extractData (item, parent): ExtractData {\r\n    const ret: ExtractData = {}\r\n\r\n    if (item.isProperty) {\r\n      return item\r\n    }\r\n    if (item.type.lastIndexOf(']') === item.type.length - 1) {\r\n      ret.children = (item.value || []).map(function (item, index) {\r\n        return {key: index, value: item}\r\n      })\r\n      ret.children.unshift({\r\n        key: 'length',\r\n        value: {\r\n          self: (new BN(item.length.replace('0x', ''), 16)).toString(10),\r\n          type: 'uint',\r\n          isProperty: true\r\n        }\r\n      })\r\n      ret.isArray = true\r\n      ret.self = parent.isArray ? '' : item.type\r\n      ret.cursor = item.cursor\r\n      ret.hasNext = item.hasNext\r\n    } else if (item.type.indexOf('struct') === 0) {\r\n      ret.children = Object.keys((item.value || {})).map(function (key) {\r\n        return {key: key, value: item.value[key]}\r\n      })\r\n      ret.self = item.type\r\n      ret.isStruct = true\r\n    } else if (item.type.indexOf('mapping') === 0) {\r\n      ret.children = Object.keys((item.value || {})).map(function (key) {\r\n        return {key: key, value: item.value[key]}\r\n      })\r\n      ret.isMapping = true\r\n      ret.self = item.type\r\n    } else {\r\n      ret.children = null\r\n      ret.self = item.value\r\n      ret.type = item.type\r\n    }\r\n    return ret\r\n}","export * from './lib/toaster'\r\n","var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??embedded!./toaster.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","import React, { useEffect, useState } from 'react' // eslint-disable-line\r\nimport { ModalDialog } from '@remix-ui/modal-dialog' // eslint-disable-line\r\n\r\nimport './toaster.css'\r\n\r\n/* eslint-disable-next-line */\r\nexport interface ToasterProps {\r\n  message: string\r\n  timeOut?: number\r\n}\r\n\r\nexport const Toaster = (props: ToasterProps) => {\r\n  const [state, setState] = useState({\r\n    message: '',\r\n    hide: true,\r\n    hiding: false,\r\n    timeOutId: null,\r\n    timeOut: props.timeOut || 7000,\r\n    showModal: false\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (props.message) {\r\n      const timeOutId = setTimeout(() => {\r\n        setState(prevState => {\r\n          return { ...prevState, hiding: true }\r\n        })\r\n      }, state.timeOut)\r\n\r\n      setState(prevState => {\r\n        const shortTooltipText = props.message.length > 201 ? props.message.substring(0, 200) + '...' : props.message\r\n\r\n        return { ...prevState, hide: false, hiding: false, timeOutId, message: shortTooltipText }\r\n      })\r\n    }\r\n  }, [props.message])\r\n\r\n  useEffect(() => {\r\n    if (state.hiding) {\r\n      setTimeout(() => {\r\n        closeTheToaster()\r\n      }, 1800)\r\n    }\r\n  }, [state.hiding])\r\n\r\n  const showFullMessage = () => {\r\n    setState(prevState => {\r\n      return { ...prevState, showModal: true }\r\n    })\r\n  }\r\n\r\n  const hideFullMessage = () => { //eslint-disable-line\r\n    setState(prevState => {\r\n      return { ...prevState, showModal: false }\r\n    })\r\n  }\r\n\r\n  const closeTheToaster = () => {\r\n    if (state.timeOutId) {\r\n      clearTimeout(state.timeOutId)\r\n    }\r\n    setState(prevState => {\r\n      return { ...prevState, message: '', hide: true, hiding: false, timeOutId: null, showModal: false }\r\n    })\r\n  }\r\n\r\n  const handleMouseEnter = () => {\r\n    if (state.timeOutId) {\r\n      clearTimeout(state.timeOutId)\r\n    }\r\n    setState(prevState => {\r\n      return { ...prevState, timeOutId: null }\r\n    })\r\n  }\r\n\r\n  const handleMouseLeave = () => {\r\n    if (!state.timeOutId) {\r\n      const timeOutId = setTimeout(() => {\r\n        setState(prevState => {\r\n          return { ...prevState, hiding: true }\r\n        })\r\n      }, state.timeOut)\r\n\r\n      setState(prevState => {\r\n        return { ...prevState, timeOutId }\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* <ModalDialog /> */}\r\n      { !state.hide &&\r\n        <div data-shared=\"tooltipPopup\" className={`remixui_tooltip alert alert-info p-2 ${state.hiding ? 'remixui_animateTop' : 'remixui_animateBottom'}`} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\r\n          <span className=\"px-2\">\r\n            { state.message }\r\n            { (props.message.length > 201) && <button className=\"btn btn-secondary btn-sm mx-3\" style={{ whiteSpace: 'nowrap' }} onClick={showFullMessage}>Show full message</button> }\r\n          </span>\r\n          <span style={{ alignSelf: 'baseline' }}>\r\n            <button data-id=\"tooltipCloseButton\" className=\"fas fa-times btn-info mx-1 p-0\" onClick={closeTheToaster}></button>\r\n          </span>\r\n        </div>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Toaster\r\n","export * from './lib/tree-view-item/tree-view-item';\r\nexport * from './lib/remix-ui-tree-view';\r\n","var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??embedded!./remix-ui-tree-view.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","import React from 'react'\r\nimport { TreeViewProps } from '../types'\r\n\r\nimport './remix-ui-tree-view.css'\r\n\r\nexport const TreeView = (props: TreeViewProps) => {\r\n  const { children, id, ...otherProps } = props\r\n  \r\n  return (\r\n    <ul data-id={`treeViewUl${id}`} className=\"ul_tv ml-0 px-2\" { ...otherProps }>\r\n      { children }\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default TreeView\r\n","var content = require(\"!!../../../../../../node_modules/postcss-loader/src/index.js??embedded!./tree-view-item.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","import React, { useState, useEffect } from 'react'\r\nimport { TreeViewItemProps } from '../../types'\r\n\r\nimport './tree-view-item.css'\r\n\r\nexport const TreeViewItem = (props: TreeViewItemProps) => {\r\n  const { id, children, label, expand, ...otherProps } = props\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setIsExpanded(expand)\r\n  }, [expand])\r\n\r\n  return (\r\n    <li key={`treeViewLi${id}`} data-id={`treeViewLi${id}`} className='li_tv' {...otherProps}>\r\n      <div key={`treeViewDiv${id}`} data-id={`treeViewDiv${id}`} className='d-flex flex-row align-items-center' onClick={() => setIsExpanded(!isExpanded)}>\r\n        <div className={isExpanded ? 'px-1 fas fa-caret-down caret caret_tv' : 'px-1 fas fa-caret-right caret caret_tv'}  style={{ visibility: children ? 'visible' : 'hidden' }}></div>\r\n        <span className='w-100 pl-1'>\r\n          { label }\r\n        </span>\r\n      </div>\r\n    { isExpanded ? children : null }\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default TreeViewItem\r\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"../../../node_modules/colors/lib sync recursive\";","module.exports = \".copyIcon {\\r\\n    margin-left: 5px;\\r\\n    cursor: pointer;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcmVtaXgtdWkvY2xpcGJvYXJkL3NyYy9saWIvY29weS10by1jbGlwYm9hcmQvY29weS10by1jbGlwYm9hcmQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksZ0JBQWdCO0lBQ2hCLGVBQWU7QUFDbkIiLCJmaWxlIjoibGlicy9yZW1peC11aS9jbGlwYm9hcmQvc3JjL2xpYi9jb3B5LXRvLWNsaXBib2FyZC9jb3B5LXRvLWNsaXBib2FyZC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29weUljb24ge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxufSJdfQ== */\"","module.exports = \".buttons {\\r\\n    display: flex;\\r\\n    flex-wrap: wrap;\\r\\n}\\r\\n.stepButtons {\\r\\n    width: 100%;\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n}\\r\\n.stepButton {\\r\\n}\\r\\n.jumpButtons {\\r\\n    width: 100%;\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n}\\r\\n.jumpButton {\\r\\n}\\r\\n.navigator {\\r\\n}\\r\\n.navigator:hover {\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcmVtaXgtdWkvZGVidWdnZXItdWkvc3JjL2xpYi9idXR0b24tbmF2aWdhdG9yL2J1dHRvbi1uYXZpZ2F0b3IuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLGVBQWU7QUFDbkI7QUFDQTtJQUNJLFdBQVc7SUFDWCxhQUFhO0lBQ2IsdUJBQXVCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0lBQ0ksV0FBVztJQUNYLGFBQWE7SUFDYix1QkFBdUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibGlicy9yZW1peC11aS9kZWJ1Z2dlci11aS9zcmMvbGliL2J1dHRvbi1uYXZpZ2F0b3IvYnV0dG9uLW5hdmlnYXRvci5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnV0dG9ucyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC13cmFwOiB3cmFwO1xyXG59XHJcbi5zdGVwQnV0dG9ucyB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxufVxyXG4uc3RlcEJ1dHRvbiB7XHJcbn1cclxuLmp1bXBCdXR0b25zIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcbi5qdW1wQnV0dG9uIHtcclxufVxyXG4ubmF2aWdhdG9yIHtcclxufVxyXG4ubmF2aWdhdG9yOmhvdmVyIHtcclxufSJdfQ== */\"","module.exports = \".statusMessage {\\r\\n  margin-left: 15px;\\r\\n}\\r\\n.debuggerLabel {\\r\\n  margin-bottom: 2px;\\r\\n  font-size: 11px;\\r\\n  line-height: 12px;\\r\\n  text-transform: uppercase;\\r\\n}\\r\\n.debuggerConfig {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n}\\r\\n.debuggerConfig label {\\r\\n  margin: 0;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcmVtaXgtdWkvZGVidWdnZXItdWkvc3JjL2xpYi9kZWJ1Z2dlci11aS5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLHlCQUF5QjtBQUMzQjtBQUNBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsU0FBUztBQUNYIiwiZmlsZSI6ImxpYnMvcmVtaXgtdWkvZGVidWdnZXItdWkvc3JjL2xpYi9kZWJ1Z2dlci11aS5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuc3RhdHVzTWVzc2FnZSB7XHJcbiAgbWFyZ2luLWxlZnQ6IDE1cHg7XHJcbn1cclxuLmRlYnVnZ2VyTGFiZWwge1xyXG4gIG1hcmdpbi1ib3R0b206IDJweDtcclxuICBmb250LXNpemU6IDExcHg7XHJcbiAgbGluZS1oZWlnaHQ6IDEycHg7XHJcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcclxufVxyXG4uZGVidWdnZXJDb25maWcge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG4uZGVidWdnZXJDb25maWcgbGFiZWwge1xyXG4gIG1hcmdpbjogMDtcclxufSJdfQ== */\"","module.exports = \".container {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n}\\r\\n.txContainer {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n}\\r\\n.txinput {\\r\\n    width: inherit;\\r\\n    font-size: small;\\r\\n    white-space: nowrap;\\r\\n    overflow: hidden;\\r\\n    text-overflow: ellipsis;\\r\\n}\\r\\n.txbutton {\\r\\n    width: inherit;\\r\\n}\\r\\n.txbutton:hover {\\r\\n}\\r\\n.vmargin {\\r\\n    margin-top: 10px;\\r\\n    margin-bottom: 10px;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcmVtaXgtdWkvZGVidWdnZXItdWkvc3JjL2xpYi90eC1icm93c2VyL3R4LWJyb3dzZXIuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtBQUMxQjtBQUNBO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtBQUMxQjtBQUNBO0lBQ0ksY0FBYztJQUNkLGdCQUFnQjtJQUNoQixtQkFBbUI7SUFDbkIsZ0JBQWdCO0lBQ2hCLHVCQUF1QjtBQUMzQjtBQUNBO0lBQ0ksY0FBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtJQUNJLGdCQUFnQjtJQUNoQixtQkFBbUI7QUFDdkIiLCJmaWxlIjoibGlicy9yZW1peC11aS9kZWJ1Z2dlci11aS9zcmMvbGliL3R4LWJyb3dzZXIvdHgtYnJvd3Nlci5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG59XHJcbi50eENvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG4udHhpbnB1dCB7XHJcbiAgICB3aWR0aDogaW5oZXJpdDtcclxuICAgIGZvbnQtc2l6ZTogc21hbGw7XHJcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG59XHJcbi50eGJ1dHRvbiB7XHJcbiAgICB3aWR0aDogaW5oZXJpdDtcclxufVxyXG4udHhidXR0b246aG92ZXIge1xyXG59XHJcbi52bWFyZ2luIHtcclxuICAgIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59Il19 */\"","module.exports = \".instructions {\\r\\n    overflow-y: scroll;\\r\\n    max-height: 130px;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcmVtaXgtdWkvZGVidWdnZXItdWkvc3JjL2xpYi92bS1kZWJ1Z2dlci9zdHlsZXMvYXNzZW1ibHktaXRlbXMuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksa0JBQWtCO0lBQ2xCLGlCQUFpQjtBQUNyQiIsImZpbGUiOiJsaWJzL3JlbWl4LXVpL2RlYnVnZ2VyLXVpL3NyYy9saWIvdm0tZGVidWdnZXIvc3R5bGVzL2Fzc2VtYmx5LWl0ZW1zLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pbnN0cnVjdGlvbnMge1xyXG4gICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xyXG4gICAgbWF4LWhlaWdodDogMTMwcHg7XHJcbn0iXX0= */\"","module.exports = \".title {\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n  }\\r\\n  .name {\\r\\n    font-weight: bold;\\r\\n  }\\r\\n  .nameDetail {\\r\\n    font-weight: bold;\\r\\n    margin-left: 3px;\\r\\n  }\\r\\n  .icon {\\r\\n    margin-right: 5%;\\r\\n  }\\r\\n  .eyeButton {\\r\\n    margin: 3px;\\r\\n  }\\r\\n  .dropdownpanel {\\r\\n    width: 100%;\\r\\n    word-break: break-word;\\r\\n  }\\r\\n  .dropdownrawcontent {\\r\\n    padding: 2px;\\r\\n    word-break: break-word;\\r\\n  }\\r\\n  .message {\\r\\n    padding: 2px;\\r\\n    word-break: break-word;\\r\\n  }\\r\\n  .refresh {\\r\\n    display: none;\\r\\n    margin-left: 4px;\\r\\n    margin-top: 4px; \\r\\n    -webkit-animation: spin 2s linear infinite; \\r\\n            animation: spin 2s linear infinite;\\r\\n  }\\r\\n  .cursor_pointer {\\r\\n    cursor: pointer;\\r\\n  }\\r\\n  @-webkit-keyframes spin {\\r\\n    to { -webkit-transform: rotate(359deg); }\\r\\n  }\\r\\n  @keyframes spin {\\r\\n    to {transform:rotate(359deg);}\\r\\n  }\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcmVtaXgtdWkvZGVidWdnZXItdWkvc3JjL2xpYi92bS1kZWJ1Z2dlci9zdHlsZXMvZHJvcGRvd24tcGFuZWwuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLG1CQUFtQjtFQUNyQjtFQUNBO0lBQ0UsaUJBQWlCO0VBQ25CO0VBQ0E7SUFDRSxpQkFBaUI7SUFDakIsZ0JBQWdCO0VBQ2xCO0VBQ0E7SUFDRSxnQkFBZ0I7RUFDbEI7RUFDQTtJQUNFLFdBQVc7RUFDYjtFQUNBO0lBQ0UsV0FBVztJQUNYLHNCQUFzQjtFQUN4QjtFQUNBO0lBQ0UsWUFBWTtJQUNaLHNCQUFzQjtFQUN4QjtFQUNBO0lBQ0UsWUFBWTtJQUNaLHNCQUFzQjtFQUN4QjtFQUNBO0lBQ0UsYUFBYTtJQUNiLGdCQUFnQjtJQUNoQixlQUFlO0lBQ2YsMENBQWtDO1lBQWxDLGtDQUFrQztFQUNwQztFQUNBO0lBQ0UsZUFBZTtFQUNqQjtFQUlBO0lBQ0UsS0FBSyxpQ0FBaUMsRUFBRTtFQUMxQztFQUNBO0lBQ0UsSUFBSSx3QkFBd0IsQ0FBQztFQUMvQiIsImZpbGUiOiJsaWJzL3JlbWl4LXVpL2RlYnVnZ2VyLXVpL3NyYy9saWIvdm0tZGVidWdnZXIvc3R5bGVzL2Ryb3Bkb3duLXBhbmVsLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi50aXRsZSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICB9XHJcbiAgLm5hbWUge1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgfVxyXG4gIC5uYW1lRGV0YWlsIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDNweDtcclxuICB9XHJcbiAgLmljb24ge1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA1JTtcclxuICB9XHJcbiAgLmV5ZUJ1dHRvbiB7XHJcbiAgICBtYXJnaW46IDNweDtcclxuICB9XHJcbiAgLmRyb3Bkb3ducGFuZWwge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xyXG4gIH1cclxuICAuZHJvcGRvd25yYXdjb250ZW50IHtcclxuICAgIHBhZGRpbmc6IDJweDtcclxuICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcbiAgfVxyXG4gIC5tZXNzYWdlIHtcclxuICAgIHBhZGRpbmc6IDJweDtcclxuICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcbiAgfVxyXG4gIC5yZWZyZXNoIHtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICBtYXJnaW4tbGVmdDogNHB4O1xyXG4gICAgbWFyZ2luLXRvcDogNHB4OyBcclxuICAgIGFuaW1hdGlvbjogc3BpbiAycyBsaW5lYXIgaW5maW5pdGU7XHJcbiAgfVxyXG4gIC5jdXJzb3JfcG9pbnRlciB7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgfVxyXG4gIEAtbW96LWtleWZyYW1lcyBzcGluIHtcclxuICAgIHRvIHsgLW1vei10cmFuc2Zvcm06IHJvdGF0ZSgzNTlkZWcpOyB9XHJcbiAgfVxyXG4gIEAtd2Via2l0LWtleWZyYW1lcyBzcGluIHtcclxuICAgIHRvIHsgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNTlkZWcpOyB9XHJcbiAgfVxyXG4gIEBrZXlmcmFtZXMgc3BpbiB7XHJcbiAgICB0byB7dHJhbnNmb3JtOnJvdGF0ZSgzNTlkZWcpO31cclxuICB9Il19 */\"","module.exports = \".remixui_tooltip {\\r\\n    z-index: 1001;\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    align-items: center;\\r\\n    position: fixed;\\r\\n    min-height: 50px;\\r\\n    padding: 16px 24px 12px;\\r\\n    border-radius: 3px;\\r\\n    left: 40%;\\r\\n    font-size: 14px;\\r\\n    text-align: center;\\r\\n    bottom: -0px;\\r\\n    flex-direction: row;\\r\\n}\\r\\n@-webkit-keyframes remixui_animatebottom  {\\r\\n  0% {bottom: -300px}\\r\\n  100% {bottom: 0px}\\r\\n}\\r\\n@keyframes remixui_animatebottom  {\\r\\n  0% {bottom: -300px}\\r\\n  100% {bottom: 0px}\\r\\n}\\r\\n@-webkit-keyframes remixui_animatetop  {\\r\\n  0% {bottom: 0px}\\r\\n  100% {bottom: -300px}\\r\\n}\\r\\n@keyframes remixui_animatetop  {\\r\\n  0% {bottom: 0px}\\r\\n  100% {bottom: -300px}\\r\\n}\\r\\n.remixui_animateTop {\\r\\n  -webkit-animation-name: remixui_animatetop;\\r\\n  -webkit-animation-duration: 2s;\\r\\n  animation-name: remixui_animatetop;\\r\\n  animation-duration: 2s;\\r\\n}\\r\\n.remixui_animateBottom {\\r\\n  -webkit-animation-name: remixui_animatebottom;\\r\\n  -webkit-animation-duration: 2s;\\r\\n  animation-name: remixui_animatebottom;\\r\\n  animation-duration: 2s;    \\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcmVtaXgtdWkvdG9hc3Rlci9zcmMvbGliL3RvYXN0ZXIuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLGFBQWE7SUFDYiw4QkFBOEI7SUFDOUIsbUJBQW1CO0lBQ25CLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsdUJBQXVCO0lBQ3ZCLGtCQUFrQjtJQUNsQixTQUFTO0lBQ1QsZUFBZTtJQUNmLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osbUJBQW1CO0FBQ3ZCO0FBQ0E7RUFDRSxJQUFJLGNBQWM7RUFDbEIsTUFBTSxXQUFXO0FBQ25CO0FBQ0E7RUFDRSxJQUFJLGNBQWM7RUFDbEIsTUFBTSxXQUFXO0FBQ25CO0FBQ0E7RUFDRSxJQUFJLFdBQVc7RUFDZixNQUFNLGNBQWM7QUFDdEI7QUFDQTtFQUNFLElBQUksV0FBVztFQUNmLE1BQU0sY0FBYztBQUN0QjtBQUNBO0VBQ0UsMENBQTBDO0VBQzFDLDhCQUE4QjtFQUM5QixrQ0FBa0M7RUFDbEMsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSw2Q0FBNkM7RUFDN0MsOEJBQThCO0VBQzlCLHFDQUFxQztFQUNyQyxzQkFBc0I7QUFDeEIiLCJmaWxlIjoibGlicy9yZW1peC11aS90b2FzdGVyL3NyYy9saWIvdG9hc3Rlci5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucmVtaXh1aV90b29sdGlwIHtcclxuICAgIHotaW5kZXg6IDEwMDE7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIG1pbi1oZWlnaHQ6IDUwcHg7XHJcbiAgICBwYWRkaW5nOiAxNnB4IDI0cHggMTJweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGxlZnQ6IDQwJTtcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGJvdHRvbTogLTBweDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbn1cclxuQC13ZWJraXQta2V5ZnJhbWVzIHJlbWl4dWlfYW5pbWF0ZWJvdHRvbSAge1xyXG4gIDAlIHtib3R0b206IC0zMDBweH1cclxuICAxMDAlIHtib3R0b206IDBweH1cclxufVxyXG5Aa2V5ZnJhbWVzIHJlbWl4dWlfYW5pbWF0ZWJvdHRvbSAge1xyXG4gIDAlIHtib3R0b206IC0zMDBweH1cclxuICAxMDAlIHtib3R0b206IDBweH1cclxufVxyXG5ALXdlYmtpdC1rZXlmcmFtZXMgcmVtaXh1aV9hbmltYXRldG9wICB7XHJcbiAgMCUge2JvdHRvbTogMHB4fVxyXG4gIDEwMCUge2JvdHRvbTogLTMwMHB4fVxyXG59XHJcbkBrZXlmcmFtZXMgcmVtaXh1aV9hbmltYXRldG9wICB7XHJcbiAgMCUge2JvdHRvbTogMHB4fVxyXG4gIDEwMCUge2JvdHRvbTogLTMwMHB4fVxyXG59XHJcbi5yZW1peHVpX2FuaW1hdGVUb3Age1xyXG4gIC13ZWJraXQtYW5pbWF0aW9uLW5hbWU6IHJlbWl4dWlfYW5pbWF0ZXRvcDtcclxuICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogMnM7XHJcbiAgYW5pbWF0aW9uLW5hbWU6IHJlbWl4dWlfYW5pbWF0ZXRvcDtcclxuICBhbmltYXRpb24tZHVyYXRpb246IDJzO1xyXG59XHJcbi5yZW1peHVpX2FuaW1hdGVCb3R0b20ge1xyXG4gIC13ZWJraXQtYW5pbWF0aW9uLW5hbWU6IHJlbWl4dWlfYW5pbWF0ZWJvdHRvbTtcclxuICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogMnM7XHJcbiAgYW5pbWF0aW9uLW5hbWU6IHJlbWl4dWlfYW5pbWF0ZWJvdHRvbTtcclxuICBhbmltYXRpb24tZHVyYXRpb246IDJzOyAgICBcclxufVxyXG4iXX0= */\"","module.exports = \".li_tv {\\r\\n    list-style-type: none;\\r\\n    -webkit-margin-before: 0px;\\r\\n    -webkit-margin-after: 0px;\\r\\n    -webkit-margin-start: 0px;\\r\\n    -webkit-margin-end: 0px;\\r\\n    -webkit-padding-start: 0px;\\r\\n  }\\r\\n  .ul_tv {\\r\\n    list-style-type: none;\\r\\n    -webkit-margin-before: 0px;\\r\\n    -webkit-margin-after: 0px;\\r\\n    -webkit-margin-start: 0px;\\r\\n    -webkit-margin-end: 0px;\\r\\n    -webkit-padding-start: 0px;\\r\\n  }\\r\\n  .caret_tv {\\r\\n    width: 10px;\\r\\n    flex-shrink: 0;\\r\\n    padding-right: 5px;\\r\\n  }\\r\\n  .label_item {\\r\\n    word-break: break-all;\\r\\n  }\\r\\n  .label_key {\\r\\n    min-width: 15%;\\r\\n    max-width: 80%;\\r\\n    word-break: break-word;\\r\\n  }\\r\\n  .label_value {\\r\\n    min-width: 10%;\\r\\n  }\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcmVtaXgtdWkvdHJlZS12aWV3L3NyYy9saWIvcmVtaXgtdWktdHJlZS12aWV3LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLHFCQUFxQjtJQUNyQiwwQkFBMEI7SUFDMUIseUJBQXlCO0lBQ3pCLHlCQUF5QjtJQUN6Qix1QkFBdUI7SUFDdkIsMEJBQTBCO0VBQzVCO0VBQ0E7SUFDRSxxQkFBcUI7SUFDckIsMEJBQTBCO0lBQzFCLHlCQUF5QjtJQUN6Qix5QkFBeUI7SUFDekIsdUJBQXVCO0lBQ3ZCLDBCQUEwQjtFQUM1QjtFQUNBO0lBQ0UsV0FBVztJQUNYLGNBQWM7SUFDZCxrQkFBa0I7RUFDcEI7RUFDQTtJQUNFLHFCQUFxQjtFQUN2QjtFQUNBO0lBQ0UsY0FBYztJQUNkLGNBQWM7SUFDZCxzQkFBc0I7RUFDeEI7RUFDQTtJQUNFLGNBQWM7RUFDaEIiLCJmaWxlIjoibGlicy9yZW1peC11aS90cmVlLXZpZXcvc3JjL2xpYi9yZW1peC11aS10cmVlLXZpZXcuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxpX3R2IHtcclxuICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcclxuICAgIC13ZWJraXQtbWFyZ2luLWJlZm9yZTogMHB4O1xyXG4gICAgLXdlYmtpdC1tYXJnaW4tYWZ0ZXI6IDBweDtcclxuICAgIC13ZWJraXQtbWFyZ2luLXN0YXJ0OiAwcHg7XHJcbiAgICAtd2Via2l0LW1hcmdpbi1lbmQ6IDBweDtcclxuICAgIC13ZWJraXQtcGFkZGluZy1zdGFydDogMHB4O1xyXG4gIH1cclxuICAudWxfdHYge1xyXG4gICAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xyXG4gICAgLXdlYmtpdC1tYXJnaW4tYmVmb3JlOiAwcHg7XHJcbiAgICAtd2Via2l0LW1hcmdpbi1hZnRlcjogMHB4O1xyXG4gICAgLXdlYmtpdC1tYXJnaW4tc3RhcnQ6IDBweDtcclxuICAgIC13ZWJraXQtbWFyZ2luLWVuZDogMHB4O1xyXG4gICAgLXdlYmtpdC1wYWRkaW5nLXN0YXJ0OiAwcHg7XHJcbiAgfVxyXG4gIC5jYXJldF90diB7XHJcbiAgICB3aWR0aDogMTBweDtcclxuICAgIGZsZXgtc2hyaW5rOiAwO1xyXG4gICAgcGFkZGluZy1yaWdodDogNXB4O1xyXG4gIH1cclxuICAubGFiZWxfaXRlbSB7XHJcbiAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XHJcbiAgfVxyXG4gIC5sYWJlbF9rZXkge1xyXG4gICAgbWluLXdpZHRoOiAxNSU7XHJcbiAgICBtYXgtd2lkdGg6IDgwJTtcclxuICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcbiAgfVxyXG4gIC5sYWJlbF92YWx1ZSB7XHJcbiAgICBtaW4td2lkdGg6IDEwJTtcclxuICB9Il19 */\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsaWJzL3JlbWl4LXVpL3RyZWUtdmlldy9zcmMvbGliL3RyZWUtdmlldy1pdGVtL3RyZWUtdmlldy1pdGVtLmNzcyJ9 */\"","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\r\nimport { basicLogo } from './app/ui/svgLogo'\r\n\r\nimport { RunTab, makeUdapp } from './app/udapp'\r\n\r\nimport PanelsResize from './lib/panels-resize'\r\nimport { RemixEngine } from './remixEngine'\r\nimport { RemixAppManager } from './remixAppManager'\r\nimport { FramingService } from './framingService'\r\nimport { MainView } from './app/panels/main-view'\r\nimport { ThemeModule } from './app/tabs/theme-module'\r\nimport { NetworkModule } from './app/tabs/network-module'\r\nimport { Web3ProviderModule } from './app/tabs/web3-provider'\r\nimport { SidePanel } from './app/components/side-panel'\r\nimport { HiddenPanel } from './app/components/hidden-panel'\r\nimport { VerticalIcons } from './app/components/vertical-icons'\r\nimport { LandingPage } from './app/ui/landing-page/landing-page'\r\nimport { MainPanel } from './app/components/main-panel'\r\nimport FetchAndCompile from './app/compiler/compiler-sourceVerifier-fetchAndCompile'\r\n\r\nimport migrateFileSystem from './migrateFileSystem'\r\n\r\nvar isElectron = require('is-electron')\r\nvar csjs = require('csjs-inject')\r\nvar yo = require('yo-yo')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar registry = require('./global/registry')\r\nvar loadFileFromParent = require('./loadFilesFromParent')\r\nvar { OffsetToLineColumnConverter } = require('./lib/offsetToLineColumnConverter')\r\nvar QueryParams = require('./lib/query-params')\r\nvar GistHandler = require('./lib/gist-handler')\r\nvar Storage = remixLib.Storage\r\nvar RemixDProvider = require('./app/files/remixDProvider')\r\nvar Config = require('./config')\r\nvar Renderer = require('./app/ui/renderer')\r\nvar examples = require('./app/editor/examples')\r\nvar modalDialogCustom = require('./app/ui/modal-dialog-custom')\r\nvar FileManager = require('./app/files/fileManager')\r\nvar FileProvider = require('./app/files/fileProvider')\r\nvar toolTip = require('./app/ui/tooltip')\r\nvar CompilerMetadata = require('./app/files/compiler-metadata')\r\nvar CompilerImport = require('./app/compiler/compiler-imports')\r\n\r\nconst Blockchain = require('./blockchain/blockchain.js')\r\nconst PluginUDapp = require('./blockchain/pluginUDapp.js')\r\n\r\nconst PluginManagerComponent = require('./app/components/plugin-manager-component')\r\nconst CompilersArtefacts = require('./app/compiler/compiler-artefacts')\r\n\r\nconst CompileTab = require('./app/tabs/compile-tab')\r\nconst SettingsTab = require('./app/tabs/settings-tab')\r\nconst AnalysisTab = require('./app/tabs/analysis-tab')\r\nconst DebuggerTab = require('./app/tabs/debugger-tab')\r\nconst TestTab = require('./app/tabs/test-tab')\r\nconst FilePanel = require('./app/panels/file-panel')\r\nconst Editor = require('./app/editor/editor')\r\nconst Terminal = require('./app/panels/terminal')\r\nconst ContextualListener = require('./app/editor/contextualListener')\r\n\r\nvar css = csjs`\r\n  html { box-sizing: border-box; }\r\n  *, *:before, *:after { box-sizing: inherit; }\r\n  body                 {\r\n    /* font: 14px/1.5 Lato, \"Helvetica Neue\", Helvetica, Arial, sans-serif; */\r\n    font-size          : .8rem;\r\n  }\r\n  pre {\r\n    overflow-x: auto;\r\n  }\r\n  .remixIDE            {\r\n    width              : 100vw;\r\n    height             : 100vh;\r\n    overflow           : hidden;\r\n    flex-direction     : row;\r\n    display            : flex;\r\n  }\r\n  .mainpanel           {\r\n    display            : flex;\r\n    flex-direction     : column;\r\n    overflow           : hidden;\r\n    flex               : 1;\r\n  }\r\n  .iconpanel           {\r\n    display            : flex;\r\n    flex-direction     : column;\r\n    overflow           : hidden;\r\n    width              : 50px;\r\n    user-select        : none;\r\n  }\r\n  .sidepanel           {\r\n    display            : flex;\r\n    flex-direction     : row-reverse;\r\n    width              : 320px;\r\n  }\r\n  .highlightcode       {\r\n    position           : absolute;\r\n    z-index            : 20;\r\n    background-color   : var(--info);\r\n  }\r\n  .highlightcode_fullLine {\r\n    position           : absolute;\r\n    z-index            : 20;\r\n    background-color   : var(--info);\r\n    opacity            : 0.5;\r\n  }\r\n  .centered {\r\n    position           : fixed;\r\n    top                : 20%;\r\n    left               : 45%;\r\n    width              : 200px;\r\n    height             : 200px;\r\n  }\r\n  .centered svg path {\r\n    fill: var(--secondary);\r\n  }\r\n  .centered svg polygon {\r\n    fill: var(--secondary);\r\n  }\r\n`\r\n\r\nclass App {\r\n  constructor (api = {}, events = {}, opts = {}) {\r\n    var self = this\r\n    self.appManager = new RemixAppManager({})\r\n    self._components = {}\r\n    self._view = {}\r\n    self._view.splashScreen = yo`\r\n    <div class=${css.centered}>\r\n      ${basicLogo()}\r\n      <div class=\"info-secondary\" style=\"text-align:center\">\r\n        REMIX IDE\r\n      </div>\r\n      </div>\r\n    `\r\n    document.body.appendChild(self._view.splashScreen)\r\n\r\n    // setup storage\r\n    const configStorage = new Storage('config-v0.8:')\r\n\r\n    // load app config\r\n    const config = new Config(configStorage)\r\n    registry.put({ api: config, name: 'config' })\r\n\r\n    // load file system\r\n    self._components.filesProviders = {}\r\n    self._components.filesProviders.browser = new FileProvider('browser')\r\n    registry.put({ api: self._components.filesProviders.browser, name: 'fileproviders/browser' })\r\n    self._components.filesProviders.localhost = new RemixDProvider(self.appManager)\r\n    registry.put({ api: self._components.filesProviders.localhost, name: 'fileproviders/localhost' })\r\n    registry.put({ api: self._components.filesProviders, name: 'fileproviders' })\r\n\r\n    migrateFileSystem(self._components.filesProviders.browser)\r\n  }\r\n\r\n  init () {\r\n    var self = this\r\n    run.apply(self)\r\n  }\r\n\r\n  render () {\r\n    var self = this\r\n    if (self._view.el) return self._view.el\r\n    // not resizable\r\n    self._view.iconpanel = yo`\r\n      <div id=\"icon-panel\" data-id=\"remixIdeIconPanel\" class=\"${css.iconpanel} bg-light\">\r\n      ${''}\r\n      </div>\r\n    `\r\n\r\n    // center panel, resizable\r\n    self._view.sidepanel = yo`\r\n      <div id=\"side-panel\" data-id=\"remixIdeSidePanel\" style=\"min-width: 320px;\" class=\"${css.sidepanel} border-right border-left\">\r\n        ${''}\r\n      </div>\r\n    `\r\n\r\n    // handle the editor + terminal\r\n    self._view.mainpanel = yo`\r\n      <div id=\"main-panel\" data-id=\"remixIdeMainPanel\" class=${css.mainpanel}>\r\n        ${''}\r\n      </div>\r\n    `\r\n\r\n    self._components.resizeFeature = new PanelsResize(self._view.sidepanel)\r\n\r\n    self._view.el = yo`\r\n      <div style=\"visibility:hidden\" class=${css.remixIDE} data-id=\"remixIDE\">\r\n        ${self._view.iconpanel}\r\n        ${self._view.sidepanel}\r\n        ${self._components.resizeFeature.render()}\r\n        ${self._view.mainpanel}\r\n      </div>\r\n    `\r\n    return self._view.el\r\n  }\r\n}\r\n\r\nmodule.exports = App\r\n\r\nasync function run () {\r\n  var self = this\r\n\r\n  // check the origin and warn message\r\n  if (window.location.hostname === 'yann300.github.io') {\r\n    modalDialogCustom.alert('This UNSTABLE ALPHA branch of Remix has been moved to http://ethereum.github.io/remix-live-alpha.')\r\n  } else if (window.location.hostname === 'remix-alpha.ethereum.org' ||\r\n  (window.location.hostname === 'ethereum.github.io' && window.location.pathname.indexOf('/remix-live-alpha') === 0)) {\r\n    modalDialogCustom.alert('Welcome to the Remix alpha instance. Please use it to try out latest features. But use preferably https://remix.ethereum.org for any production work.')\r\n  } else if (window.location.protocol.indexOf('http') === 0 &&\r\n  window.location.hostname !== 'remix.ethereum.org' &&\r\n  window.location.hostname !== 'localhost' &&\r\n  window.location.hostname !== '127.0.0.1') {\r\n    modalDialogCustom.alert(`The Remix IDE has moved to http://remix.ethereum.org.\\n\r\nThis instance of Remix you are visiting WILL NOT BE UPDATED.\\n\r\nPlease make a backup of your contracts and start using http://remix.ethereum.org`)\r\n  }\r\n  if (window.location.protocol.indexOf('https') === 0) {\r\n    toolTip('You are using an `https` connection. Please switch to `http` if you are using Remix against an `http Web3 provider` or allow Mixed Content in your browser.')\r\n  }\r\n\r\n  const hosts = ['127.0.0.1:8080', '192.168.0.101:8080', 'localhost:8080']\r\n  // workaround for Electron support\r\n  if (!isElectron() && !hosts.includes(window.location.host)) {\r\n    // Oops! Accidentally trigger refresh or bookmark.\r\n    window.onbeforeunload = function () {\r\n      return 'Are you sure you want to leave?'\r\n    }\r\n  }\r\n\r\n  // APP_MANAGER\r\n  const appManager = self.appManager\r\n  const pluginLoader = appManager.pluginLoader\r\n  const workspace = pluginLoader.get()\r\n  const engine = new RemixEngine()\r\n  engine.register(appManager)\r\n\r\n  // SERVICES\r\n  // ----------------- theme service ---------------------------------\r\n  const themeModule = new ThemeModule(registry)\r\n  registry.put({ api: themeModule, name: 'themeModule' })\r\n  themeModule.initTheme(() => {\r\n    setTimeout(() => {\r\n      document.body.removeChild(self._view.splashScreen)\r\n      self._view.el.style.visibility = 'visible'\r\n    }, 1500)\r\n  })\r\n  // ----------------- editor service ----------------------------\r\n  const editor = new Editor({}, themeModule) // wrapper around ace editor\r\n  registry.put({ api: editor, name: 'editor' })\r\n  editor.event.register('requiringToSaveCurrentfile', () => fileManager.saveCurrentFile())\r\n\r\n  // ----------------- fileManager service ----------------------------\r\n  const fileManager = new FileManager(editor, appManager)\r\n  registry.put({ api: fileManager, name: 'filemanager' })\r\n\r\n  // ----------------- import content service ------------------------\r\n  const contentImport = new CompilerImport(fileManager)\r\n\r\n  const blockchain = new Blockchain(registry.get('config').api)\r\n  const pluginUdapp = new PluginUDapp(blockchain)\r\n\r\n  // ----------------- compilation metadata generation service ---------\r\n  const compilerMetadataGenerator = new CompilerMetadata(blockchain, fileManager, registry.get('config').api)\r\n  // ----------------- compilation result service (can keep track of compilation results) ----------------------------\r\n  const compilersArtefacts = new CompilersArtefacts() // store all the compilation results (key represent a compiler name)\r\n  registry.put({ api: compilersArtefacts, name: 'compilersartefacts' })\r\n\r\n  // service which fetch contract artifacts from sourve-verify, put artifacts in remix and compile it\r\n  const fetchAndCompile = new FetchAndCompile()\r\n  // ----------------- network service (resolve network id / name) -----\r\n  const networkModule = new NetworkModule(blockchain)\r\n  // ----------------- represent the current selected web3 provider ----\r\n  const web3Provider = new Web3ProviderModule(blockchain)\r\n  // ----------------- convert offset to line/column service -----------\r\n  const offsetToLineColumnConverter = new OffsetToLineColumnConverter()\r\n  registry.put({ api: offsetToLineColumnConverter, name: 'offsettolinecolumnconverter' })\r\n\r\n  // -------------------Terminal----------------------------------------\r\n\r\n  const terminal = new Terminal(\r\n    { appManager, blockchain },\r\n    {\r\n      getPosition: (event) => {\r\n        var limitUp = 36\r\n        var limitDown = 20\r\n        var height = window.innerHeight\r\n        var newpos = (event.pageY < limitUp) ? limitUp : event.pageY\r\n        newpos = (newpos < height - limitDown) ? newpos : height - limitDown\r\n        return height - newpos\r\n      }\r\n    }\r\n  )\r\n  makeUdapp(blockchain, compilersArtefacts, (domEl) => terminal.logHtml(domEl))\r\n\r\n  const contextualListener = new ContextualListener({ editor })\r\n\r\n  engine.register([\r\n    contentImport,\r\n    themeModule,\r\n    editor,\r\n    fileManager,\r\n    compilerMetadataGenerator,\r\n    compilersArtefacts,\r\n    networkModule,\r\n    offsetToLineColumnConverter,\r\n    contextualListener,\r\n    terminal,\r\n    web3Provider,\r\n    fetchAndCompile\r\n  ])\r\n\r\n  // LAYOUT & SYSTEM VIEWS\r\n  const appPanel = new MainPanel()\r\n  const mainview = new MainView(contextualListener, editor, appPanel, fileManager, appManager, terminal)\r\n  registry.put({ api: mainview, name: 'mainview' })\r\n\r\n  engine.register([\r\n    appPanel,\r\n    mainview.tabProxy\r\n  ])\r\n\r\n  // those views depend on app_manager\r\n  const menuicons = new VerticalIcons(appManager)\r\n  const landingPage = new LandingPage(appManager, menuicons)\r\n  const sidePanel = new SidePanel(appManager, menuicons)\r\n  const hiddenPanel = new HiddenPanel()\r\n  const pluginManagerComponent = new PluginManagerComponent(appManager, engine)\r\n  const filePanel = new FilePanel(appManager)\r\n  const settings = new SettingsTab(\r\n    registry.get('config').api,\r\n    editor,\r\n    appManager\r\n  )\r\n\r\n  // adding Views to the DOM\r\n  self._view.mainpanel.appendChild(mainview.render())\r\n  self._view.iconpanel.appendChild(menuicons.render())\r\n  self._view.sidepanel.appendChild(sidePanel.render())\r\n  document.body.appendChild(hiddenPanel.render()) // Hidden Panel is display none, it can be directly on body\r\n\r\n  engine.register([\r\n    menuicons,\r\n    landingPage,\r\n    hiddenPanel,\r\n    sidePanel,\r\n    pluginManagerComponent,\r\n    filePanel,\r\n    settings\r\n  ])\r\n\r\n  // CONTENT VIEWS & DEFAULT PLUGINS\r\n  const compileTab = new CompileTab(\r\n    editor,\r\n    registry.get('config').api,\r\n    new Renderer(),\r\n    registry.get('fileproviders/browser').api,\r\n    registry.get('filemanager').api,\r\n    contentImport\r\n  )\r\n  const run = new RunTab(\r\n    blockchain,\r\n    pluginUdapp,\r\n    registry.get('config').api,\r\n    registry.get('filemanager').api,\r\n    registry.get('editor').api,\r\n    filePanel,\r\n    registry.get('compilersartefacts').api,\r\n    networkModule,\r\n    mainview,\r\n    registry.get('fileproviders/browser').api\r\n  )\r\n  const analysis = new AnalysisTab(registry)\r\n  const debug = new DebuggerTab(\r\n    blockchain,\r\n    registry.get('editor').api,\r\n    registry.get('offsettolinecolumnconverter').api)\r\n  const test = new TestTab(\r\n    registry.get('filemanager').api,\r\n    registry.get('offsettolinecolumnconverter').api,\r\n    filePanel,\r\n    compileTab,\r\n    appManager,\r\n    new Renderer(),\r\n    contentImport\r\n  )\r\n\r\n  engine.register([\r\n    compileTab,\r\n    run,\r\n    debug,\r\n    analysis,\r\n    test,\r\n    filePanel.remixdHandle,\r\n    filePanel.gitHandle\r\n  ])\r\n\r\n  try {\r\n    engine.register(await appManager.registeredPlugins())\r\n  } catch (e) {\r\n    console.log('couldn\\'t register iframe plugins', e.message)\r\n  }\r\n\r\n  await appManager.activatePlugin(['contentImport', 'theme', 'editor', 'fileManager', 'compilerMetadata', 'compilerArtefacts', 'network', 'web3Provider', 'offsetToLineColumnConverter'])\r\n  await appManager.activatePlugin(['mainPanel', 'menuicons'])\r\n  await appManager.activatePlugin(['sidePanel']) // activating  host plugin separately\r\n  await appManager.activatePlugin(['home', 'hiddenPanel', 'pluginManager', 'fileExplorers', 'settings', 'contextualListener', 'terminal', 'fetchAndCompile'])\r\n\r\n  const queryParams = new QueryParams()\r\n  const params = queryParams.get()\r\n\r\n  // Set workspace after initial activation\r\n  if (Array.isArray(workspace)) {\r\n    appManager.activatePlugin(workspace).then(async () => {\r\n      try {\r\n        if (params.deactivate) {\r\n          await appManager.deactivatePlugin(params.deactivate.split(','))\r\n        }\r\n      } catch (e) {\r\n        console.log(e)\r\n      }\r\n\r\n      // If plugins are loaded from the URL params, we focus on the last one.\r\n      if (pluginLoader.current === 'queryParams' && workspace.length > 0) menuicons.select(workspace[workspace.length - 1])\r\n\r\n      if (params.call) {\r\n        const callDetails = params.call.split('//')\r\n        if (callDetails.length > 1) {\r\n          toolTip(`initiating ${callDetails[0]} ...`)\r\n          // @todo(remove the timeout when activatePlugin is on 0.3.0)\r\n          appManager.call(...callDetails).catch(console.error)\r\n        }\r\n      }\r\n    }).catch(console.error)\r\n  } else {\r\n    // activate solidity plugin\r\n    appManager.activatePlugin(['solidity', 'udapp'])\r\n  }\r\n\r\n  // Load and start the service who manager layout and frame\r\n  const framingService = new FramingService(sidePanel, menuicons, mainview, this._components.resizeFeature)\r\n  framingService.start(params)\r\n\r\n  // get the file list from the parent iframe\r\n  loadFileFromParent(fileManager)\r\n\r\n  // get the file from gist\r\n  const gistHandler = new GistHandler()\r\n  const loadedFromGist = gistHandler.loadFromGist(params, fileManager)\r\n  if (!loadedFromGist) {\r\n    // insert example contracts if there are no files to show\r\n    self._components.filesProviders.browser.resolveDirectory('/', (error, filesList) => {\r\n      if (error) console.error(error)\r\n      if (Object.keys(filesList).length === 0) {\r\n        for (const file in examples) {\r\n          fileManager.writeFile(examples[file].name, examples[file].content)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  if (isElectron()) {\r\n    appManager.activatePlugin('remixd')\r\n  }\r\n\r\n  if (params.embed) framingService.embed()\r\n}\r\n","'use strict'\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar txHelper = remixLib.execution.txHelper\r\n\r\nmodule.exports = class CompilerAbstract {\r\n  constructor (languageversion, data, source) {\r\n    this.languageversion = languageversion\r\n    this.data = data\r\n    this.source = source // source code\r\n  }\r\n\r\n  getContracts () {\r\n    return this.data.contracts\r\n  }\r\n\r\n  getContract (name) {\r\n    return txHelper.getContract(name, this.data.contracts)\r\n  }\r\n\r\n  visitContracts (calllback) {\r\n    return txHelper.visitContracts(this.data.contracts, calllback)\r\n  }\r\n\r\n  getData () {\r\n    return this.data\r\n  }\r\n\r\n  getAsts () {\r\n    return this.data.sources // ast\r\n  }\r\n\r\n  getSourceName (fileIndex) {\r\n    if (this.data && this.data.sources) {\r\n      return Object.keys(this.data.sources)[fileIndex]\r\n    } else if (Object.keys(this.source.sources).length === 1) {\r\n      // if we don't have ast, we return the only one filename present.\r\n      const sourcesArray = Object.keys(this.source.sources)\r\n      return sourcesArray[0]\r\n    }\r\n    return null\r\n  }\r\n\r\n  getSourceCode () {\r\n    return this.source\r\n  }\r\n}\r\n","'use strict'\r\nimport { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\nimport CompilerAbstract from './compiler-abstract'\r\n\r\nconst profile = {\r\n  name: 'compilerArtefacts',\r\n  methods: [],\r\n  events: [],\r\n  version: packageJson.version\r\n}\r\n\r\nmodule.exports = class CompilerArtefacts extends Plugin {\r\n  constructor () {\r\n    super(profile)\r\n    this.compilersArtefacts = {}\r\n    this.compilersArtefactsPerFile = {}\r\n  }\r\n\r\n  clear () {\r\n    this.compilersArtefacts = {}\r\n    this.compilersArtefactsPerFile = {}\r\n  }\r\n\r\n  onActivation () {\r\n    const saveCompilationPerFileResult = (file, source, languageVersion, data) => {\r\n      this.compilersArtefactsPerFile[file] = new CompilerAbstract(languageVersion, data, source)\r\n    }\r\n\r\n    this.on('solidity', 'compilationFinished', (file, source, languageVersion, data) => {\r\n      this.compilersArtefacts.__last = new CompilerAbstract(languageVersion, data, source)\r\n      saveCompilationPerFileResult(file, source, languageVersion, data)\r\n    })\r\n\r\n    this.on('vyper', 'compilationFinished', (file, source, languageVersion, data) => {\r\n      this.compilersArtefacts.__last = new CompilerAbstract(languageVersion, data, source)\r\n      saveCompilationPerFileResult(file, source, languageVersion, data)\r\n    })\r\n\r\n    this.on('lexon', 'compilationFinished', (file, source, languageVersion, data) => {\r\n      this.compilersArtefacts.__last = new CompilerAbstract(languageVersion, data, source)\r\n      saveCompilationPerFileResult(file, source, languageVersion, data)\r\n    })\r\n\r\n    this.on('yulp', 'compilationFinished', (file, source, languageVersion, data) => {\r\n      this.compilersArtefacts.__last = new CompilerAbstract(languageVersion, data, source)\r\n      saveCompilationPerFileResult(file, source, languageVersion, data)\r\n    })\r\n\r\n    this.on('optimism-compiler', 'compilationFinished', (file, source, languageVersion, data) => {\r\n      this.compilersArtefacts.__last = new CompilerAbstract(languageVersion, data, source)\r\n      saveCompilationPerFileResult(file, source, languageVersion, data)\r\n    })\r\n  }\r\n\r\n  getAllContractDatas () {\r\n    const contractsData = {}\r\n    Object.keys(this.compilersArtefactsPerFile).map((targetFile) => {\r\n      const contracts = this.compilersArtefactsPerFile[targetFile].getContracts()\r\n      Object.keys(contracts).map((file) => { contractsData[file] = contracts[file] })\r\n    })\r\n    // making sure we save last compilation result in there\r\n    if (this.compilersArtefacts.__last) {\r\n      const contracts = this.compilersArtefacts.__last.getContracts()\r\n      Object.keys(contracts).map((file) => { contractsData[file] = contracts[file] })\r\n    }\r\n    return contractsData\r\n  }\r\n\r\n  addResolvedContract (address, compilerData) {\r\n    this.compilersArtefacts[address] = compilerData\r\n  }\r\n\r\n  isResolved (address) {\r\n    return this.compilersArtefacts[address] !== undefined\r\n  }\r\n\r\n  get (key) {\r\n    return this.compilersArtefacts[key]\r\n  }\r\n}\r\n","'use strict'\r\nimport { canUseWorker, urlFromVersion } from './compiler-utils'\r\nimport { Compiler } from '@remix-project/remix-solidity'\r\nimport CompilerAbstract from './compiler-abstract'\r\n\r\nexport const compile = async (compilationTargets, settings, contentResolverCallback) => {\r\n  const res = await (() => {\r\n    return new Promise((resolve, reject) => {\r\n      const compiler = new Compiler(contentResolverCallback)\r\n      compiler.set('evmVersion', settings.evmVersion)\r\n      compiler.set('optimize', settings.optimize)\r\n      compiler.set('language', settings.language)\r\n      compiler.set('runs', settings.runs)\r\n      compiler.loadVersion(canUseWorker(settings.version), urlFromVersion(settings.version))\r\n      compiler.event.register('compilationFinished', (success, compilationData, source) => {\r\n        resolve(new CompilerAbstract(settings.version, compilationData, source))\r\n      })\r\n      compiler.event.register('compilerLoaded', _ => compiler.compile(compilationTargets, ''))\r\n    })\r\n  })()\r\n  return res\r\n}\r\n","'use strict'\r\nimport { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\nimport { RemixURLResolver } from '@remix-project/remix-url-resolver'\r\nconst remixTests = require('@remix-project/remix-tests')\r\nconst globalRegistry = require('../../global/registry')\r\nconst addTooltip = require('../ui/tooltip')\r\nconst async = require('async')\r\nvar resolver = require('@resolver-engine/imports').ImportsEngine()\r\n\r\nconst profile = {\r\n  name: 'contentImport',\r\n  displayName: 'content import',\r\n  version: packageJson.version,\r\n  methods: ['resolve', 'resolveAndSave', 'isExternalUrl']\r\n}\r\n\r\nmodule.exports = class CompilerImports extends Plugin {\r\n  constructor (fileManager) {\r\n    super(profile)\r\n    this.fileManager = fileManager\r\n    // const token = await this.call('settings', 'getGithubAccessToken')\r\n    const token = globalRegistry.get('config').api.get('settings/gist-access-token') // TODO replace with the plugin call above https://github.com/ethereum/remix-ide/issues/2288\r\n    const protocol = window.location.protocol\r\n    this.urlResolver = new RemixURLResolver(token, protocol)\r\n    this.previouslyHandled = {} // cache import so we don't make the request at each compilation.\r\n  }\r\n\r\n  isRelativeImport (url) {\r\n    return /^([^/]+)/.exec(url)\r\n  }\r\n\r\n  isExternalUrl (url) {\r\n    const handlers = this.handlers()\r\n    return handlers.some(handler => handler.match.exec(url))\r\n  }\r\n\r\n  /**\r\n    * resolve the content of @arg url. This only resolves external URLs.\r\n    *\r\n    * @param {String} url  - external URL of the content. can be basically anything like raw HTTP, ipfs URL, github address etc...\r\n    * @returns {Promise} - { content, cleanUrl, type, url }\r\n    */\r\n  resolve (url) {\r\n    return new Promise((resolve, reject) => {\r\n      this.import(url, null, (error, content, cleanUrl, type, url) => {\r\n        if (error) return reject(error)\r\n        resolve({ content, cleanUrl, type, url })\r\n      })\r\n    })\r\n  }\r\n\r\n  import (url, force, loadingCb, cb) {\r\n    if (typeof force !== 'boolean') {\r\n      const temp = loadingCb\r\n      loadingCb = force\r\n      cb = temp\r\n      force = false\r\n    }\r\n    if (!loadingCb) loadingCb = () => {}\r\n    if (!cb) cb = () => {}\r\n\r\n    var self = this\r\n    if (force) delete this.previouslyHandled[url]\r\n    var imported = this.previouslyHandled[url]\r\n    if (imported) {\r\n      return cb(null, imported.content, imported.cleanUrl, imported.type, url)\r\n    }\r\n    var handlers = this.urlResolver.getHandlers()\r\n    var found = false\r\n    handlers.forEach(function (handler) {\r\n      if (found) return\r\n      var match = handler.match(url)\r\n      if (match) {\r\n        found = true\r\n        loadingCb('Loading ' + url + ' ...')\r\n        handler.handle(match).then(function (result) {\r\n          const { content, cleanUrl } = result\r\n          self.previouslyHandled[url] = {\r\n            content,\r\n            cleanUrl,\r\n            type: handler.type\r\n          }\r\n          cb(null, content, cleanUrl, handler.type, url)\r\n        }).catch(function (error) {\r\n          cb('Unable to import url : ' + error)\r\n        })\r\n      }\r\n    })\r\n    if (found) return\r\n\r\n    resolver\r\n      .resolve(url)\r\n      .then(result => {\r\n        return resolver.require(url)\r\n      })\r\n      .then(result => {\r\n        if (url.indexOf(result.provider + ':') === 0) {\r\n          url = url.substring(result.provider.length + 1) // remove the github prefix\r\n        }\r\n        cb(null, result.source, url, result.provider, result.url)\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n        cb('Unable to import \"' + url + '\": File not found')\r\n      })\r\n  }\r\n\r\n  importExternal (url, targetPath, cb) {\r\n    this.import(url,\r\n      // TODO: move to an event that is generated, the UI shouldn't be here\r\n      (loadingMsg) => { addTooltip(loadingMsg) },\r\n      (error, content, cleanUrl, type, url) => {\r\n        if (error) return cb(error)\r\n        if (this.fileManager) {\r\n          const browser = this.fileManager.fileProviderOf('browser/')\r\n          const path = targetPath || type + '/' + cleanUrl\r\n          if (browser) browser.addExternal(path, content, url)\r\n        }\r\n        cb(null, content)\r\n      })\r\n  }\r\n\r\n  /**\r\n    * import the content of @arg url.\r\n    * first look in the browser localstorage (browser explorer) or locahost explorer. if the url start with `browser/*` or  `localhost/*`\r\n    * then check if the @arg url is located in the localhost, in the node_modules or installed_contracts folder\r\n    * then check if the @arg url match any external url\r\n    *\r\n    * @param {String} url - URL of the content. can be basically anything like file located in the browser explorer, in the localhost explorer, raw HTTP, github address etc...\r\n    * @param {String} targetPath - (optional) internal path where the content should be saved to\r\n    * @returns {Promise} - string content\r\n    */\r\n  resolveAndSave (url, targetPath) {\r\n    return new Promise((resolve, reject) => {\r\n      if (url.indexOf('remix_tests.sol') !== -1) resolve(remixTests.assertLibCode)\r\n      if (!this.fileManager) {\r\n        // fallback to just resolving the file, it won't be saved in file manager\r\n        return this.importExternal(url, targetPath, (error, content) => {\r\n          if (error) return reject(error)\r\n          resolve(content)\r\n        })\r\n      }\r\n      var provider = this.fileManager.fileProviderOf(url)\r\n      if (provider) {\r\n        if (provider.type === 'localhost' && !provider.isConnected()) {\r\n          return reject(new Error(`file provider ${provider.type} not available while trying to resolve ${url}`))\r\n        }\r\n        provider.exists(url, (error, exist) => {\r\n          if (error) return reject(error)\r\n          if (!exist && provider.type === 'localhost') return reject(new Error(`not found ${url}`))\r\n\r\n          /*\r\n            if the path is absolute and the file does not exist, we can stop here\r\n            Doesn't make sense to try to resolve \"localhost/node_modules/localhost/node_modules/<path>\" and we'll end in an infinite loop.\r\n          */\r\n          if (!exist && url.startsWith('browser/')) return reject(new Error(`not found ${url}`))\r\n          if (!exist && url.startsWith('localhost/')) return reject(new Error(`not found ${url}`))\r\n\r\n          if (exist) {\r\n            return provider.get(url, (error, content) => {\r\n              if (error) return reject(error)\r\n              resolve(content)\r\n            })\r\n          }\r\n\r\n          // try to resolve localhost modules (aka truffle imports) - e.g from the node_modules folder\r\n          const localhostProvider = this.fileManager.getProvider('localhost')\r\n          if (localhostProvider.isConnected()) {\r\n            var splitted = /([^/]+)\\/(.*)$/g.exec(url)\r\n            return async.tryEach([\r\n              (cb) => { this.resolveAndSave('localhost/installed_contracts/' + url).then((result) => cb(null, result)).catch((error) => cb(error.message)) },\r\n              (cb) => { if (!splitted) { cb('URL not parseable: ' + url) } else { this.resolveAndSave('localhost/installed_contracts/' + splitted[1] + '/contracts/' + splitted[2]).then((result) => cb(null, result)).catch((error) => cb(error.message)) } },\r\n              (cb) => { this.resolveAndSave('localhost/node_modules/' + url).then((result) => cb(null, result)).catch((error) => cb(error.message)) },\r\n              (cb) => { if (!splitted) { cb('URL not parseable: ' + url) } else { this.resolveAndSave('localhost/node_modules/' + splitted[1] + '/contracts/' + splitted[2]).then((result) => cb(null, result)).catch((error) => cb(error.message)) } }],\r\n            (error, result) => {\r\n              if (error) {\r\n                return this.importExternal(url, targetPath, (error, content) => {\r\n                  if (error) return reject(error)\r\n                  resolve(content)\r\n                })\r\n              }\r\n              resolve(result)\r\n            })\r\n          } else {\r\n            // try to resolve external content\r\n            this.importExternal(url, targetPath, (error, content) => {\r\n              if (error) return reject(error)\r\n              resolve(content)\r\n            })\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n","import * as packageJson from '../../../../../package.json'\r\nimport { Plugin } from '@remixproject/engine'\r\nimport { compile } from './compiler-helpers'\r\nimport globalRegistry from '../../global/registry'\r\n\r\nimport remixLib from '@remix-project/remix-lib'\r\nconst ethutil = require('ethereumjs-util')\r\n\r\nconst profile = {\r\n  name: 'fetchAndCompile',\r\n  methods: ['resolve'],\r\n  version: packageJson.version\r\n}\r\n\r\nexport default class FetchAndCompile extends Plugin {\r\n  constructor () {\r\n    super(profile)\r\n    this.unresolvedAddresses = []\r\n    this.sourceVerifierNetWork = ['Main', 'Rinkeby', 'Ropsten', 'Goerli']\r\n  }\r\n\r\n  /**\r\n   * Fetch compiliation metadata from source-Verify from a given @arg contractAddress - https://github.com/ethereum/source-verify\r\n   * Put the artifacts in the file explorer\r\n   * Compile the code using Solidity compiler\r\n   * Returns compilation data\r\n   *\r\n   * @param {string} contractAddress - Address of the contrac to resolve\r\n   * @param {string} compilersartefacts - Object containing a mapping of compilation results (byContractAddress and __last)\r\n   * @return {CompilerAbstract} - compilation data targeting the given @arg contractAddress\r\n   */\r\n  async resolve (contractAddress, targetPath, web3) {\r\n    contractAddress = ethutil.toChecksumAddress(contractAddress)\r\n    const compilersartefacts = globalRegistry.get('compilersartefacts').api\r\n\r\n    const localCompilation = () => compilersartefacts.get('__last') ? compilersartefacts.get('__last') : null\r\n\r\n    const resolved = compilersartefacts.get(contractAddress)\r\n    if (resolved) return resolved\r\n    if (this.unresolvedAddresses.includes(contractAddress)) return localCompilation()\r\n\r\n    // sometimes when doing an internal call, the only available artifact is the Solidity interface.\r\n    // resolving addresses of internal call would allow to step over the source code, even if the declaration was made using an Interface.\r\n\r\n    let network\r\n    try {\r\n      network = await this.call('network', 'detectNetwork')\r\n    } catch (e) {\r\n      return localCompilation()\r\n    }\r\n    if (!network) return localCompilation()\r\n    if (!this.sourceVerifierNetWork.includes(network.name)) return localCompilation()\r\n\r\n    // check if the contract if part of the local compilation result\r\n    const codeAtAddress = await web3.eth.getCode(contractAddress)\r\n    const compilation = localCompilation()\r\n    if (compilation) {\r\n      let found = false\r\n      compilation.visitContracts((contract) => {\r\n        found = remixLib.util.compareByteCode('0x' + contract.object.evm.deployedBytecode.object, codeAtAddress)\r\n        return found\r\n      })\r\n      if (found) {\r\n        compilersartefacts.addResolvedContract(contractAddress, compilation)\r\n        setTimeout(_ => this.emit('usingLocalCompilation', contractAddress), 0)\r\n        return compilation\r\n      }\r\n    }\r\n\r\n    let name = network.name.toLowerCase()\r\n    name = name === 'main' ? 'mainnet' : name // source-verifier api expect \"mainnet\" and not \"main\"\r\n    let data\r\n    try {\r\n      data = await this.call('source-verification', 'fetchByNetwork', contractAddress, name.toLowerCase())\r\n    } catch (e) {\r\n      setTimeout(_ => this.emit('notFound', contractAddress), 0) // plugin framework returns a time out error although it actually didn't find the source...\r\n      this.unresolvedAddresses.push(contractAddress)\r\n      return localCompilation()\r\n    }\r\n    if (!data || !data.metadata) {\r\n      setTimeout(_ => this.emit('notFound', contractAddress), 0)\r\n      this.unresolvedAddresses.push(contractAddress)\r\n      return localCompilation()\r\n    }\r\n\r\n    // set the solidity contract code using metadata\r\n    await this.call('fileManager', 'setFile', `${targetPath}/${name}/${contractAddress}/metadata.json`, JSON.stringify(data.metadata, null, '\\t'))\r\n    const compilationTargets = {}\r\n    for (let file in data.metadata.sources) {\r\n      const urls = data.metadata.sources[file].urls\r\n      for (const url of urls) {\r\n        if (url.includes('ipfs')) {\r\n          const stdUrl = `ipfs://${url.split('/')[2]}`\r\n          const source = await this.call('contentImport', 'resolve', stdUrl)\r\n          if (await this.call('contentImport', 'isExternalUrl', file)) {\r\n            // nothing to do, the compiler callback will handle those\r\n          } else {\r\n            file = file.replace('browser/', '') // should be fixed in the remix IDE end.\r\n            const path = `${targetPath}/${name}/${contractAddress}/${file}`\r\n            await this.call('fileManager', 'setFile', path, source.content)\r\n            compilationTargets[path] = { content: source.content }\r\n          }\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    // compile\r\n    const settings = {\r\n      version: data.metadata.compiler.version,\r\n      language: data.metadata.language,\r\n      evmVersion: data.metadata.settings.evmVersion,\r\n      optimize: data.metadata.settings.optimizer.enabled,\r\n      runs: data.metadata.settings.runs\r\n    }\r\n    try {\r\n      setTimeout(_ => this.emit('compiling', settings), 0)\r\n      const compData = await compile(\r\n        compilationTargets,\r\n        settings,\r\n        (url, cb) => this.call('contentImport', 'resolveAndSave', url).then((result) => cb(null, result)).catch((error) => cb(error.message)))\r\n      compilersartefacts.addResolvedContract(contractAddress, compData)\r\n      return compData\r\n    } catch (e) {\r\n      this.unresolvedAddresses.push(contractAddress)\r\n      setTimeout(_ => this.emit('compilationFailed'), 0)\r\n      return localCompilation()\r\n    }\r\n  }\r\n}\r\n","const semver = require('semver')\r\nconst minixhr = require('minixhr')\r\n/* global Worker */\r\n\r\nexport const baseURLBin = 'https://solc-bin.ethereum.org/bin'\r\nexport const baseURLWasm = 'https://solc-bin.ethereum.org/wasm'\r\n\r\nexport const pathToURL = {}\r\n\r\n/**\r\n * Retrieves the URL of the given compiler version\r\n * @param version is the version of compiler with or without 'soljson-v' prefix and .js postfix\r\n */\r\nexport function urlFromVersion (version) {\r\n  if (!version.startsWith('soljson-v')) version = 'soljson-v' + version\r\n  if (!version.endsWith('.js')) version = version + '.js'\r\n  return `${pathToURL[version]}/${version}`\r\n}\r\n\r\n/**\r\n * Checks if the worker can be used to load a compiler.\r\n * checks a compiler whitelist, browser support and OS.\r\n */\r\nexport function canUseWorker (selectedVersion) {\r\n  const version = semver.coerce(selectedVersion)\r\n  const isNightly = selectedVersion.includes('nightly')\r\n  return browserSupportWorker() && (\r\n    semver.gt(version, '0.6.3') ||\r\n    (semver.gt(version, '0.3.6') && !isNightly)\r\n  )\r\n}\r\n\r\nfunction browserSupportWorker () {\r\n  return document.location.protocol !== 'file:' && Worker !== undefined\r\n}\r\n\r\n// returns a promise for minixhr\r\nexport function promisedMiniXhr (url) {\r\n  return new Promise((resolve, reject) => {\r\n    minixhr(url, (json, event) => {\r\n      resolve({ json, event })\r\n    })\r\n  })\r\n}\r\n","import { AbstractPanel } from './panel'\r\nimport * as packageJson from '../../../../../package.json'\r\nconst csjs = require('csjs-inject')\r\nconst yo = require('yo-yo')\r\n\r\nconst css = csjs`\r\n  .pluginsContainer {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst profile = {\r\n  name: 'hiddenPanel',\r\n  displayName: 'Hidden Panel',\r\n  description: '',\r\n  version: packageJson.version,\r\n  methods: ['addView', 'removeView']\r\n}\r\n\r\nexport class HiddenPanel extends AbstractPanel {\r\n  constructor () {\r\n    super(profile)\r\n  }\r\n\r\n  render () {\r\n    return yo`\r\n      <div class=${css.pluginsContainer}>\r\n        ${this.view}\r\n      </div>`\r\n  }\r\n}\r\n","/* global localStorage */\r\nconst yo = require('yo-yo')\r\nconst modalDialog = require('../ui/modaldialog')\r\n\r\nconst defaultProfile = {\r\n  methods: [],\r\n  location: 'sidePanel',\r\n  type: 'iframe'\r\n}\r\n\r\nmodule.exports = class LocalPlugin {\r\n  /**\r\n   * Open a modal to create a local plugin\r\n   * @param {Profile[]} plugins The list of the plugins in the store\r\n   * @returns {Promise<{api: any, profile: any}>} A promise with the new plugin profile\r\n   */\r\n  open (plugins) {\r\n    this.profile = JSON.parse(localStorage.getItem('plugins/local')) || defaultProfile\r\n    return new Promise((resolve, reject) => {\r\n      const onValidation = () => {\r\n        try {\r\n          const profile = this.create()\r\n          resolve(profile)\r\n        } catch (err) {\r\n          reject(err)\r\n        }\r\n      }\r\n      modalDialog('Local Plugin', this.form(),\r\n        { fn: () => onValidation() },\r\n        { fn: () => resolve() }\r\n      )\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create the object to add to the plugin-list\r\n   */\r\n  create () {\r\n    const profile = {\r\n      icon: 'assets/img/localPlugin.webp',\r\n      methods: [],\r\n      location: 'sidePanel',\r\n      type: 'iframe',\r\n      ...this.profile,\r\n      hash: `local-${this.profile.name}`\r\n    }\r\n    if (!profile.location) throw new Error('Plugin should have a location')\r\n    if (!profile.name) throw new Error('Plugin should have a name')\r\n    if (!profile.url) throw new Error('Plugin should have an URL')\r\n    localStorage.setItem('plugins/local', JSON.stringify(profile))\r\n    return profile\r\n  }\r\n\r\n  updateName ({ target }) {\r\n    this.profile.name = target.value\r\n  }\r\n\r\n  updateUrl ({ target }) {\r\n    this.profile.url = target.value\r\n  }\r\n\r\n  updateDisplayName ({ target }) {\r\n    this.profile.displayName = target.value\r\n  }\r\n\r\n  updateProfile (key, e) {\r\n    this.profile[key] = e.target.value\r\n  }\r\n\r\n  /** The form to create a local plugin */\r\n  form () {\r\n    const name = this.profile.name || ''\r\n    const url = this.profile.url || ''\r\n    const displayName = this.profile.displayName || ''\r\n    const radioSelection = (key, label, message) => {\r\n      return this.profile[key] === label\r\n        ? yo`<div class=\"radio\">\r\n          <input class=\"form-check-input\" type=\"radio\" name=\"${key}\" onclick=\"${e => this.updateProfile(key, e)}\" value=\"${label}\" id=\"${label}\" data-id=\"localPluginRadioButton${label}\" checked=\"checked\" />\r\n          <label class=\"form-check-label\" for=\"${label}\">${message}</label>\r\n        </div>`\r\n        : yo`<div class=\"radio\">\r\n          <input class=\"form-check-input\" type=\"radio\" name=\"${key}\" onclick=\"${e => this.updateProfile(key, e)}\" value=\"${label}\" id=\"${label}\" data-id=\"localPluginRadioButton${label}\" />\r\n          <label class=\"form-check-label\" for=\"${label}\">${message}</label>\r\n        </div>`\r\n    }\r\n\r\n    return yo`\r\n    <form id=\"local-plugin-form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"plugin-name\">Plugin Name <small>(required)</small></label>\r\n        <input class=\"form-control\" onchange=\"${e => this.updateName(e)}\" value=\"${name}\" id=\"plugin-name\" data-id=\"localPluginName\" placeholder=\"Should be camelCase\">\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"plugin-displayname\">Display Name</label>\r\n        <input class=\"form-control\" onchange=\"${e => this.updateDisplayName(e)}\" value=\"${displayName}\" id=\"plugin-displayname\" data-id=\"localPluginDisplayName\" placeholder=\"Name in the header\">\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"plugin-url\">Url <small>(required)</small></label>\r\n        <input class=\"form-control\" onchange=\"${e => this.updateUrl(e)}\" value=\"${url}\" id=\"plugin-url\" data-id=\"localPluginUrl\" placeholder=\"ex: https://localhost:8000\">\r\n      </div>\r\n      <h6>Type of connection <small>(required)</small></h6>\r\n      <div class=\"form-check form-group\">\r\n        ${radioSelection('type', 'iframe', 'Iframe')}\r\n        ${radioSelection('type', 'ws', 'Websocket')}\r\n      </div>\r\n      <h6>Location in remix <small>(required)</small></h6>\r\n      <div class=\"form-check form-group\">\r\n        ${radioSelection('location', 'sidePanel', 'Side Panel')}\r\n        ${radioSelection('location', 'mainPanel', 'Main Panel')}\r\n        ${radioSelection('location', 'none', 'None')}\r\n      </div>\r\n    </form>`\r\n  }\r\n}\r\n","import { AbstractPanel } from './panel'\r\nimport * as packageJson from '../../../../../package.json'\r\nconst yo = require('yo-yo')\r\nconst csjs = require('csjs-inject')\r\n\r\nconst css = csjs`\r\n  .pluginsContainer {\r\n    height: 100%;\r\n    display: flex;\r\n    overflow-y: hidden;\r\n  }\r\n`\r\n\r\nconst profile = {\r\n  name: 'mainPanel',\r\n  displayName: 'Main Panel',\r\n  description: '',\r\n  version: packageJson.version,\r\n  methods: ['addView', 'removeView']\r\n}\r\n\r\nexport class MainPanel extends AbstractPanel {\r\n  constructor () {\r\n    super(profile)\r\n  }\r\n\r\n  render () {\r\n    return yo`\r\n      <div class=${css.pluginsContainer} data-id=\"mainPanelPluginsContainer\">\r\n        ${this.view}\r\n      </div>`\r\n  }\r\n}\r\n","import { EventEmitter } from 'events'\r\nimport { HostPlugin } from '@remixproject/engine-web'\r\nconst csjs = require('csjs-inject')\r\nconst yo = require('yo-yo')\r\n\r\nconst css = csjs`\r\n  .plugins        {\r\n    height: 100%;\r\n  }\r\n  .plugItIn       {\r\n    display        : none;\r\n    height         : 100%;\r\n  }\r\n  .plugItIn > div {\r\n    overflow-y     : auto;\r\n    overflow-x     : hidden;\r\n    height         : 100%;\r\n    width          : 100%;\r\n  }\r\n  .plugItIn.active     {\r\n    display        : block;\r\n  }\r\n  .pluginsContainer {\r\n    height         : 100%;\r\n    overflow-y     : hidden;\r\n  }\r\n`\r\n\r\n/** Abstract class used for hosting the view of a plugin */\r\nexport class AbstractPanel extends HostPlugin {\r\n  constructor (profile) {\r\n    super(profile)\r\n    this.events = new EventEmitter()\r\n    this.contents = {}\r\n    this.active = undefined\r\n\r\n    // View where the plugin HTMLElement leaves\r\n    this.view = yo`<div id=\"plugins\" class=\"${css.plugins}\"></div>`\r\n  }\r\n\r\n  /**\r\n   * Add the plugin to the panel\r\n   * @param {String} name the name of the plugin\r\n   * @param {HTMLElement} content the HTMLContent of the plugin\r\n   */\r\n  add (view, name) {\r\n    if (this.contents[name]) throw new Error(`Plugin ${name} already rendered`)\r\n    view.style.height = '100%'\r\n    view.style.width = '100%'\r\n    view.style.border = '0'\r\n\r\n    const isIframe = view.tagName === 'IFRAME'\r\n    view.style.display = isIframe ? 'none' : 'block'\r\n    const loading = isIframe ? yo`\r\n      <div class=\"d-flex justify-content-center align-items-center\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n          <span class=\"sr-only\">Loading...</span>\r\n        </div>\r\n      </div>  \r\n    ` : ''\r\n    this.contents[name] = yo`<div class=\"${css.plugItIn}\" >${view}${loading}</div>`\r\n\r\n    if (view.tagName === 'IFRAME') {\r\n      view.addEventListener('load', () => {\r\n        if (this.contents[name].contains(loading)) {\r\n          this.contents[name].removeChild(loading)\r\n        }\r\n        view.style.display = 'block'\r\n      })\r\n    }\r\n    this.contents[name].style.display = 'none'\r\n    this.view.appendChild(this.contents[name])\r\n  }\r\n\r\n  addView (profile, view) {\r\n    this.add(view, profile.name)\r\n  }\r\n\r\n  removeView (profile) {\r\n    this.remove(profile.name)\r\n  }\r\n\r\n  /**\r\n   * Remove a plugin from the panel\r\n   * @param {String} name The name of the plugin to remove\r\n   */\r\n  remove (name) {\r\n    const el = this.contents[name]\r\n    delete this.contents[name]\r\n    if (el) el.parentElement.removeChild(el)\r\n    if (name === this.active) this.active = undefined\r\n  }\r\n\r\n  /**\r\n   * Display the content of this specific plugin\r\n   * @param {String} name The name of the plugin to display the content\r\n   */\r\n  showContent (name) {\r\n    if (!this.contents[name]) throw new Error(`Plugin ${name} is not yet activated`)\r\n    // hiding the current view and display the `moduleName`\r\n    if (this.active) {\r\n      this.contents[this.active].style.display = 'none'\r\n    }\r\n    this.contents[name].style.display = 'flex'\r\n    this.active = name\r\n  }\r\n\r\n  focus (name) {\r\n    this.showContent(name)\r\n  }\r\n}\r\n","import { IframePlugin, ViewPlugin, WebsocketPlugin } from '@remixproject/engine-web'\r\nimport { PluginManagerSettings } from './plugin-manager-settings'\r\nimport * as packageJson from '../../../../../package.json'\r\nconst yo = require('yo-yo')\r\nconst csjs = require('csjs-inject')\r\nconst EventEmitter = require('events')\r\nconst LocalPlugin = require('./local-plugin')\r\nconst addToolTip = require('../ui/tooltip')\r\n\r\nconst css = csjs`\r\n  .pluginSearch {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    background-color: var(--light);\r\n    padding: 10px;\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 2;\r\n    margin-bottom: 0px;\r\n  }\r\n  .pluginSearchInput {\r\n    height: 38px;\r\n  }\r\n  .pluginSearchButton {\r\n    font-size: 13px;\r\n  }\r\n  .displayName {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n  .description {\r\n    font-size: 13px;\r\n    line-height: 18px;\r\n    text-transform: capitalize;\r\n  }\r\n  .row {\r\n    display: flex;\r\n    flex-direction: row;\r\n  }\r\n  .isStuck {\r\n    background-color: var(--primary);\r\n    color: \r\n  }\r\n  .versionWarning {\r\n    padding: 4px;\r\n    margin: 0 8px;\r\n    font-weight: 700;\r\n    font-size: 9px;\r\n    line-height: 12px;\r\n    text-transform: uppercase;\r\n    cursor: default;\r\n    border: 1px solid;\r\n    border-radius: 2px;\r\n  }\r\n`\r\n\r\nconst profile = {\r\n  name: 'pluginManager',\r\n  displayName: 'Plugin manager',\r\n  methods: [],\r\n  events: [],\r\n  icon: 'assets/img/pluginManager.webp',\r\n  description: 'Start/stop services, modules and plugins',\r\n  kind: 'settings',\r\n  location: 'sidePanel',\r\n  documentation: 'https://remix-ide.readthedocs.io/en/latest/plugin_manager.html',\r\n  version: packageJson.version\r\n}\r\n\r\nclass PluginManagerComponent extends ViewPlugin {\r\n  constructor (appManager, engine) {\r\n    super(profile)\r\n    this.event = new EventEmitter()\r\n    this.appManager = appManager\r\n    this.views = {\r\n      root: null,\r\n      items: {}\r\n    }\r\n    this.localPlugin = new LocalPlugin()\r\n    this.filter = ''\r\n    this.appManager.event.on('activate', () => { this.reRender() })\r\n    this.appManager.event.on('deactivate', () => { this.reRender() })\r\n    this.engine = engine\r\n    this.engine.event.on('onRegistration', () => { this.reRender() })\r\n  }\r\n\r\n  isActive (name) {\r\n    return this.appManager.actives.includes(name)\r\n  }\r\n\r\n  renderItem (profile) {\r\n    const displayName = (profile.displayName) ? profile.displayName : profile.name\r\n\r\n    // Check version of the plugin\r\n    let versionWarning\r\n    // Alpha\r\n    if (profile.version && profile.version.match(/\\b(\\w*alpha\\w*)\\b/g)) {\r\n      versionWarning = yo`<small title=\"Version Alpha\" class=\"${css.versionWarning} plugin-version\">alpha</small>`\r\n    }\r\n    // Beta\r\n    if (profile.version && profile.version.match(/\\b(\\w*beta\\w*)\\b/g)) {\r\n      versionWarning = yo`<small title=\"Version Beta\" class=\"${css.versionWarning} plugin-version\">beta</small>`\r\n    }\r\n\r\n    const activationButton = this.isActive(profile.name)\r\n      ? yo`\r\n      <button\r\n        onclick=\"${_ => this.appManager.deactivatePlugin(profile.name)}\"\r\n        class=\"btn btn-secondary btn-sm\" data-id=\"pluginManagerComponentDeactivateButton${profile.name}\"\r\n      >\r\n        Deactivate\r\n      </button>\r\n      `\r\n      : yo`\r\n      <button\r\n        onclick=\"${_ => this.appManager.activatePlugin(profile.name)}\"\r\n        class=\"btn btn-success btn-sm\" data-id=\"pluginManagerComponentActivateButton${profile.name}\"\r\n      >\r\n        Activate\r\n      </button>`\r\n\r\n    return yo`\r\n      <article id=\"remixPluginManagerListItem_${profile.name}\" class=\"list-group-item py-1 plugins-list-group-item\" title=\"${displayName}\" >\r\n        <div class=\"${css.row} justify-content-between align-items-center mb-2\">\r\n          <h6 class=\"${css.displayName} plugin-name\">\r\n            ${displayName}\r\n            ${versionWarning}\r\n          </h6>\r\n          ${activationButton}\r\n        </div>\r\n        <p class=\"${css.description} text-body plugin-text\">${profile.description}</p>\r\n      </article>\r\n    `\r\n  }\r\n\r\n  /***************\r\n   * SUB-COMPONENT\r\n   */\r\n  /**\r\n   * Add a local plugin to the list of plugins\r\n   */\r\n  async openLocalPlugin () {\r\n    try {\r\n      const profile = await this.localPlugin.open(this.appManager.getAll())\r\n      if (!profile) return\r\n      if (this.appManager.getIds().includes(profile.name)) {\r\n        throw new Error('This name has already been used')\r\n      }\r\n      const plugin = profile.type === 'iframe' ? new IframePlugin(profile) : new WebsocketPlugin(profile)\r\n      this.engine.register(plugin)\r\n      await this.appManager.activatePlugin(plugin.name)\r\n    } catch (err) {\r\n      // TODO : Use an alert to handle this error instead of a console.log\r\n      console.log(`Cannot create Plugin : ${err.message}`)\r\n      addToolTip(`Cannot create Plugin : ${err.message}`)\r\n    }\r\n  }\r\n\r\n  render () {\r\n    // Filtering helpers\r\n    const isFiltered = (profile) => (profile.displayName ? profile.displayName : profile.name).toLowerCase().includes(this.filter)\r\n    const isNotRequired = (profile) => !this.appManager.isRequired(profile.name)\r\n    const isNotHome = (profile) => profile.name !== 'home'\r\n    const sortByName = (profileA, profileB) => {\r\n      const nameA = ((profileA.displayName) ? profileA.displayName : profileA.name).toUpperCase()\r\n      const nameB = ((profileB.displayName) ? profileB.displayName : profileB.name).toUpperCase()\r\n      return (nameA < nameB) ? -1 : (nameA > nameB) ? 1 : 0\r\n    }\r\n\r\n    // Filter all active and inactive modules that are not required\r\n    const { actives, inactives } = this.appManager.getAll()\r\n      .filter(isFiltered)\r\n      .filter(isNotRequired)\r\n      .filter(isNotHome)\r\n      .sort(sortByName)\r\n      .reduce(({ actives, inactives }, profile) => {\r\n        return this.isActive(profile.name)\r\n          ? { actives: [...actives, profile], inactives }\r\n          : { inactives: [...inactives, profile], actives }\r\n      }, { actives: [], inactives: [] })\r\n\r\n    const activeTile = actives.length !== 0\r\n      ? yo`\r\n      <nav class=\"plugins-list-header justify-content-between navbar navbar-expand-lg bg-light navbar-light align-items-center\">\r\n        <span class=\"navbar-brand plugins-list-title\">Active Modules</span>\r\n        <span class=\"badge badge-primary\" data-id=\"pluginManagerComponentActiveTilesCount\">${actives.length}</span>\r\n      </nav>`\r\n      : ''\r\n    const inactiveTile = inactives.length !== 0\r\n      ? yo`\r\n      <nav class=\"plugins-list-header justify-content-between navbar navbar-expand-lg bg-light navbar-light align-items-center\">\r\n        <span class=\"navbar-brand plugins-list-title h6 mb-0 mr-2\">Inactive Modules</span>\r\n        <span class=\"badge badge-primary\" style = \"cursor: default;\" data-id=\"pluginManagerComponentInactiveTilesCount\">${inactives.length}</span>\r\n      </nav>`\r\n      : ''\r\n\r\n    const settings = new PluginManagerSettings().render()\r\n\r\n    const rootView = yo`\r\n      <div id='pluginManager' data-id=\"pluginManagerComponentPluginManager\">\r\n        <header class=\"form-group ${css.pluginSearch} plugins-header py-3 px-4 border-bottom\" data-id=\"pluginManagerComponentPluginManagerHeader\">\r\n          <input onkeyup=\"${e => this.filterPlugins(e)}\" class=\"${css.pluginSearchInput} form-control\" placeholder=\"Search\" data-id=\"pluginManagerComponentSearchInput\">\r\n          <button onclick=\"${_ => this.openLocalPlugin()}\" class=\"${css.pluginSearchButton} btn bg-transparent text-dark border-0 mt-2 text-underline\" data-id=\"pluginManagerComponentPluginSearchButton\">\r\n            Connect to a Local Plugin\r\n          </button>\r\n        </header>\r\n        <section data-id=\"pluginManagerComponentPluginManagerSection\">\r\n          ${activeTile}\r\n          <div class=\"list-group list-group-flush plugins-list-group\" data-id=\"pluginManagerComponentActiveTile\">\r\n            ${actives.map(profile => this.renderItem(profile))}\r\n          </div>\r\n          ${inactiveTile}\r\n          <div class=\"list-group list-group-flush plugins-list-group\" data-id=\"pluginManagerComponentInactiveTile\">\r\n            ${inactives.map(profile => this.renderItem(profile))}\r\n          </div>\r\n        </section>\r\n        ${settings}\r\n      </div>\r\n    `\r\n    if (!this.views.root) this.views.root = rootView\r\n    return rootView\r\n  }\r\n\r\n  reRender () {\r\n    if (this.views.root) {\r\n      yo.update(this.views.root, this.render())\r\n    }\r\n  }\r\n\r\n  filterPlugins ({ target }) {\r\n    this.filter = target.value.toLowerCase()\r\n    this.reRender()\r\n  }\r\n}\r\n\r\nmodule.exports = PluginManagerComponent\r\n","const yo = require('yo-yo')\r\nconst csjs = require('csjs-inject')\r\nconst modalDialog = require('../ui/modaldialog')\r\n\r\nconst css = csjs` \r\n.permissions {\r\n  position: sticky;\r\n  bottom: 0;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  padding: 5px 20px;\r\n}\r\n.permissions button {\r\n  padding: 2px 5px;\r\n  cursor: pointer;\r\n}\r\n.permissionForm h4 {\r\n  font-size: 1.3rem;\r\n  text-align: center;\r\n}\r\n.permissionForm h6 {\r\n  font-size: 1.1rem;\r\n}\r\n.permissionForm hr {\r\n  width: 80%;\r\n}\r\n.permissionKey {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.permissionKey i {\r\n  cursor: pointer;\r\n}\r\n.checkbox {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.checkbox label {\r\n  margin: 0;\r\n  font-size: 1rem;\r\n}\r\n`\r\n\r\nexport class PluginManagerSettings {\r\n  openDialog () {\r\n    const fromLocal = window.localStorage.getItem('plugins/permissions')\r\n    this.permissions = JSON.parse(fromLocal || '{}')\r\n    this.currentSetting = this.settings()\r\n    modalDialog('Plugin Manager Permissions', this.currentSetting,\r\n      { fn: () => this.onValidation() }\r\n    )\r\n  }\r\n\r\n  onValidation () {\r\n    const permissions = JSON.stringify(this.permissions)\r\n    window.localStorage.setItem('plugins/permissions', permissions)\r\n  }\r\n\r\n  /** Clear one permission from a plugin */\r\n  clearPersmission (from, to, method) {\r\n    if (this.permissions[to] && this.permissions[to][method]) {\r\n      delete this.permissions[to][method][from]\r\n      if (Object.keys(this.permissions[to][method]).length === 0) {\r\n        delete this.permissions[to][method]\r\n      }\r\n      if (Object.keys(this.permissions[to]).length === 0) {\r\n        delete this.permissions[to]\r\n      }\r\n      yo.update(this.currentSetting, this.settings())\r\n    }\r\n  }\r\n\r\n  /** Clear all persmissions from a plugin */\r\n  clearAllPersmission (to) {\r\n    if (!this.permissions[to]) return\r\n    delete this.permissions[to]\r\n    yo.update(this.currentSetting, this.settings())\r\n  }\r\n\r\n  settings () {\r\n    const permissionByToPlugin = (toPlugin, funcObj) => {\r\n      const permissionByMethod = (methodName, fromPlugins) => {\r\n        const togglePermission = (fromPlugin) => {\r\n          this.permissions[toPlugin][methodName][fromPlugin].allow = !this.permissions[toPlugin][methodName][fromPlugin].allow\r\n        }\r\n        return Object.keys(fromPlugins).map(fromName => {\r\n          const fromPluginPermission = fromPlugins[fromName]\r\n          const checkbox = fromPluginPermission.allow\r\n            ? yo`<input onchange=${() => togglePermission(fromName)} class=\"mr-2\" type=\"checkbox\" checked id=\"permission-checkbox-${toPlugin}-${methodName}-${toPlugin}\" aria-describedby=\"module ${fromPluginPermission} asks permission for ${methodName}\" />`\r\n            : yo`<input onchange=${() => togglePermission(fromName)} class=\"mr-2\" type=\"checkbox\" id=\"permission-checkbox-${toPlugin}-${methodName}-${toPlugin}\" aria-describedby=\"module ${fromPluginPermission} asks permission for ${methodName}\" />`\r\n          return yo`\r\n            <div class=\"form-group ${css.permissionKey}\">\r\n              <div class=\"${css.checkbox}\">\r\n                ${checkbox}\r\n                <label for=\"permission-checkbox-${toPlugin}-${methodName}-${toPlugin}\" data-id=\"permission-label-${toPlugin}-${methodName}-${toPlugin}\">Allow <u>${fromName}</u> to call <u>${methodName}</u></label>\r\n              </div>\r\n              <i onclick=\"${() => this.clearPersmission(fromName, toPlugin, methodName)}\" class=\"fa fa-trash-alt\" data-id=\"pluginManagerSettingsRemovePermission-${toPlugin}-${methodName}-${toPlugin}\"></i>\r\n            </div>\r\n          `\r\n        })\r\n      }\r\n\r\n      const permissionsByFunctions = Object\r\n        .keys(funcObj)\r\n        .map(methodName => permissionByMethod(methodName, funcObj[methodName]))\r\n\r\n      return yo`\r\n      <div border p-2>\r\n        <div class=\"pb-2 ${css.permissionKey}\">\r\n          <h3>${toPlugin} permissions:</h3>\r\n          <i onclick=\"${() => this.clearAllPersmission(toPlugin)}\" class=\"far fa-trash-alt\" data-id=\"pluginManagerSettingsClearAllPermission-${toPlugin}\"></i>\r\n        </div>\r\n        ${permissionsByFunctions}\r\n      </div>`\r\n    }\r\n\r\n    const byToPlugin = Object\r\n      .keys(this.permissions)\r\n      .map(toPlugin => permissionByToPlugin(toPlugin, this.permissions[toPlugin]))\r\n\r\n    const title = byToPlugin.length === 0\r\n      ? yo`<h4>No Permission requested yet.</h4>`\r\n      : yo`<h4>Current Permission settings</h4>`\r\n\r\n    return yo`<form class=\"${css.permissionForm}\" data-id=\"pluginManagerSettingsPermissionForm\">\r\n      ${title}\r\n      <hr/>\r\n      ${byToPlugin}\r\n    </form>`\r\n  }\r\n\r\n  render () {\r\n    return yo`\r\n    <footer class=\"bg-light ${css.permissions} remix-bg-opacity\">\r\n      <button onclick=\"${() => this.openDialog()}\" class=\"btn btn-primary settings-button\" data-id=\"pluginManagerPermissionsButton\">Permissions</button>\r\n    </footer>`\r\n  }\r\n}\r\n","import { AbstractPanel } from './panel'\r\nimport * as packageJson from '../../../../../package.json'\r\nconst csjs = require('csjs-inject')\r\nconst yo = require('yo-yo')\r\n\r\nconst css = csjs`\r\n  .panel {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex: auto;\r\n  }\r\n  .swapitTitle {\r\n    margin: 0;\r\n    text-transform: uppercase;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .swapitTitle i{\r\n    padding-left: 6px;\r\n    font-size: 14px;\r\n  }\r\n  .swapitHeader {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 16px 24px 15px;\r\n    justify-content: space-between;\r\n  }\r\n  .icons i {\r\n    height: 80%;\r\n    cursor: pointer;\r\n  }\r\n  .pluginsContainer {\r\n    height: 100%;\r\n    overflow-y: auto;\r\n  }\r\n  .titleInfo {\r\n    padding-left: 10px;\r\n  }\r\n  .versionBadge {\r\n    background-color: var(--light);\r\n    padding: 0 7px;\r\n    font-weight: bolder;\r\n    margin-left: 5px;\r\n    text-transform: lowercase;\r\n    cursor: default;\r\n  }\r\n`\r\n\r\nconst sidePanel = {\r\n  name: 'sidePanel',\r\n  displayName: 'Side Panel',\r\n  description: '',\r\n  version: packageJson.version,\r\n  methods: ['addView', 'removeView']\r\n}\r\n\r\n// TODO merge with vertical-icons.js\r\nexport class SidePanel extends AbstractPanel {\r\n  constructor (appManager, verticalIcons) {\r\n    super(sidePanel)\r\n    this.appManager = appManager\r\n    this.header = yo`<header></header>`\r\n    this.renderHeader()\r\n    this.verticalIcons = verticalIcons\r\n\r\n    // Toggle content\r\n    verticalIcons.events.on('toggleContent', (name) => {\r\n      if (!this.contents[name]) return\r\n      if (this.active === name) {\r\n        // TODO: Only keep `this.emit` (issue#2210)\r\n        this.emit('toggle', name)\r\n        this.events.emit('toggle', name)\r\n        return\r\n      }\r\n      this.showContent(name)\r\n      // TODO: Only keep `this.emit` (issue#2210)\r\n      this.emit('showing', name)\r\n      this.events.emit('showing', name)\r\n    })\r\n    // Force opening\r\n    verticalIcons.events.on('showContent', (name) => {\r\n      if (!this.contents[name]) return\r\n      this.showContent(name)\r\n      // TODO: Only keep `this.emit` (issue#2210)\r\n      this.emit('showing', name)\r\n      this.events.emit('showing', name)\r\n    })\r\n  }\r\n\r\n  focus (name) {\r\n    this.emit('focusChanged', name)\r\n  }\r\n\r\n  removeView (profile) {\r\n    super.removeView(profile)\r\n    this.emit('pluginDisabled', profile.name)\r\n    this.verticalIcons.unlinkContent(profile)\r\n  }\r\n\r\n  addView (profile, view) {\r\n    super.addView(profile, view)\r\n    this.verticalIcons.linkContent(profile)\r\n  }\r\n\r\n  /**\r\n   * Display content and update the header\r\n   * @param {String} name The name of the plugin to display\r\n   */\r\n  async showContent (name) {\r\n    super.showContent(name)\r\n    this.renderHeader()\r\n    this.focus(name)\r\n  }\r\n\r\n  /** The header of the side panel */\r\n  async renderHeader () {\r\n    let name = ' - '\r\n    let docLink = ''\r\n    let versionWarning\r\n    if (this.active) {\r\n      const profile = await this.appManager.getProfile(this.active)\r\n      name = profile.displayName ? profile.displayName : profile.name\r\n      docLink = profile.documentation ? yo`<a href=\"${profile.documentation}\" class=\"${css.titleInfo}\" title=\"link to documentation\" target=\"_blank\"><i aria-hidden=\"true\" class=\"fas fa-book\"></i></a>` : ''\r\n      if (profile.version && profile.version.match(/\\b(\\w*alpha\\w*)\\b/g)) {\r\n        versionWarning = yo`<small title=\"Version Alpha\" class=\"badge-light ${css.versionBadge}\">alpha</small>`\r\n      }\r\n      // Beta\r\n      if (profile.version && profile.version.match(/\\b(\\w*beta\\w*)\\b/g)) {\r\n        versionWarning = yo`<small title=\"Version Beta\" class=\"badge-light ${css.versionBadge}\">beta</small>`\r\n      }\r\n    }\r\n\r\n    const header = yo`\r\n      <header class=\"${css.swapitHeader}\">\r\n        <h6 class=\"${css.swapitTitle}\" data-id=\"sidePanelSwapitTitle\">${name}</h6>\r\n        ${docLink}\r\n        ${versionWarning}\r\n      </header>\r\n    `\r\n    yo.update(this.header, header)\r\n  }\r\n\r\n  render () {\r\n    return yo`\r\n      <section class=\"${css.panel} plugin-manager\">\r\n        ${this.header}\r\n        <div class=\"${css.pluginsContainer}\">\r\n          ${this.view}\r\n        </div>\r\n      </section>`\r\n  }\r\n}\r\n","import * as packageJson from '../../../../../package.json'\r\nimport { basicLogo } from '../ui/svgLogo'\r\nvar yo = require('yo-yo')\r\nvar csjs = require('csjs-inject')\r\nvar helper = require('../../lib/helper')\r\nconst globalRegistry = require('../../global/registry')\r\nconst { Plugin } = require('@remixproject/engine')\r\n\r\nconst EventEmitter = require('events')\r\n\r\nconst profile = {\r\n  name: 'menuicons',\r\n  displayName: 'Vertical Icons',\r\n  description: '',\r\n  version: packageJson.version,\r\n  methods: ['select']\r\n}\r\n\r\n// TODO merge with side-panel.js. VerticalIcons should not be a plugin\r\nexport class VerticalIcons extends Plugin {\r\n  constructor (appManager) {\r\n    super(profile)\r\n    this.events = new EventEmitter()\r\n    this.appManager = appManager\r\n    this.icons = {}\r\n    this.iconKind = {}\r\n    this.iconStatus = {}\r\n\r\n    const themeModule = globalRegistry.get('themeModule').api\r\n    themeModule.events.on('themeChanged', (theme) => {\r\n      this.onThemeChanged(theme.quality)\r\n    })\r\n  }\r\n\r\n  linkContent (profile) {\r\n    if (!profile.icon) return\r\n    this.addIcon(profile)\r\n    this.listenOnStatus(profile)\r\n  }\r\n\r\n  unlinkContent (profile) {\r\n    this.removeIcon(profile)\r\n  }\r\n\r\n  listenOnStatus (profile) {\r\n    // the list of supported keys. 'none' will remove the status\r\n    const keys = ['edited', 'succeed', 'none', 'loading', 'failed']\r\n    const types = ['error', 'warning', 'success', 'info', '']\r\n    const fn = (status) => {\r\n      if (!types.includes(status.type) && status.type) throw new Error(`type should be ${keys.join()}`)\r\n      if (status.key === undefined) throw new Error('status key should be defined')\r\n\r\n      if (typeof status.key === 'string' && (!keys.includes(status.key))) {\r\n        throw new Error('key should contain either number or ' + keys.join())\r\n      }\r\n      this.setIconStatus(profile.name, status)\r\n    }\r\n    this.iconStatus[profile.name] = fn\r\n    this.on(profile.name, 'statusChanged', this.iconStatus[profile.name])\r\n  }\r\n\r\n  /**\r\n   * Add an icon to the map\r\n   * @param {ModuleProfile} profile The profile of the module\r\n   */\r\n  addIcon ({ kind, name, icon, displayName, tooltip }) {\r\n    let title = (tooltip || displayName || name)\r\n    title = title.replace(/^\\w/, c => c.toUpperCase())\r\n    this.icons[name] = yo`\r\n      <div\r\n        class=\"${css.icon}\"\r\n        onclick=\"${() => { this.toggle(name) }}\"\r\n        plugin=\"${name}\"\r\n        title=\"${title}\"\r\n        data-id=\"verticalIconsKind${name}\">\r\n        <img class=\"image\" src=\"${icon}\" alt=\"${name}\" />\r\n      </div>`\r\n    this.iconKind[kind || 'none'].appendChild(this.icons[name])\r\n  }\r\n\r\n  /**\r\n   * resolve a classes list for @arg key\r\n   * @param {Object} key\r\n   * @param {Object} type\r\n   */\r\n  resolveClasses (key, type) {\r\n    let classes = css.status\r\n    switch (key) {\r\n      case 'succeed':\r\n        classes += ' fas fa-check-circle text-' + type + ' ' + css.statusCheck\r\n        break\r\n      case 'edited':\r\n        classes += ' fas fa-sync text-' + type + ' ' + css.statusCheck\r\n        break\r\n      case 'loading':\r\n        classes += ' fas fa-spinner text-' + type + ' ' + css.statusCheck\r\n        break\r\n      case 'failed':\r\n        classes += ' fas fa-exclamation-triangle text-' + type + ' ' + css.statusCheck\r\n        break\r\n      default: {\r\n        classes += ' badge badge-pill badge-' + type\r\n      }\r\n    }\r\n    return classes\r\n  }\r\n\r\n  /**\r\n   * Set a new status for the @arg name\r\n   * @param {String} name\r\n   * @param {Object} status\r\n   */\r\n  setIconStatus (name, status) {\r\n    const el = this.icons[name]\r\n    if (!el) return\r\n    const statusEl = el.querySelector('span')\r\n    if (statusEl) {\r\n      el.removeChild(statusEl)\r\n    }\r\n    if (status.key === 'none') return // remove status\r\n\r\n    let text = ''\r\n    let key = ''\r\n    if (typeof status.key === 'number') {\r\n      key = status.key.toString()\r\n      text = key\r\n    } else key = helper.checkSpecialChars(status.key) ? '' : status.key\r\n\r\n    let type = ''\r\n    if (status.type === 'error') {\r\n      type = 'danger' // to use with bootstrap\r\n    } else type = helper.checkSpecialChars(status.type) ? '' : status.type\r\n    const title = helper.checkSpecialChars(status.title) ? '' : status.title\r\n\r\n    el.appendChild(yo`<span\r\n      title=\"${title}\"\r\n      class=\"${this.resolveClasses(key, type)}\"\r\n      aria-hidden=\"true\"\r\n    >\r\n    ${text}\r\n    </span>`)\r\n\r\n    el.classList.add(`${css.icon}`)\r\n  }\r\n\r\n  /**\r\n   * Remove an icon from the map\r\n   * @param {ModuleProfile} profile The profile of the module\r\n   */\r\n  removeIcon ({ kind, name }) {\r\n    if (this.icons[name]) this.iconKind[kind || 'none'].removeChild(this.icons[name])\r\n  }\r\n\r\n  /**\r\n   *  Remove active for the current activated icons\r\n   */\r\n  removeActive () {\r\n    // reset filters\r\n    const images = this.view.querySelectorAll('.image')\r\n    images.forEach(function (im) {\r\n      im.style.setProperty('filter', 'invert(0.5)')\r\n    })\r\n\r\n    // remove active\r\n    const currentActive = this.view.querySelector('.active')\r\n    if (currentActive) {\r\n      currentActive.classList.remove('active')\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Add active for the new activated icon\r\n   * @param {string} name Name of profile of the module to activate\r\n   */\r\n  addActive (name) {\r\n    if (name === 'home') return\r\n    const themeType = globalRegistry.get('themeModule').api.currentTheme().quality\r\n    const invert = themeType === 'dark' ? 1 : 0\r\n    const brightness = themeType === 'dark' ? '150' : '0' // should be >100 for icons with color\r\n    const nextActive = this.view.querySelector(`[plugin=\"${name}\"]`)\r\n    if (nextActive) {\r\n      const image = nextActive.querySelector('.image')\r\n      nextActive.classList.add('active')\r\n      image.style.setProperty('filter', `invert(${invert}) grayscale(1) brightness(${brightness}%)`)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set an icon as active\r\n   * @param {string} name Name of profile of the module to activate\r\n   */\r\n  select (name) {\r\n    this.updateActivations(name)\r\n    // TODO: Only keep `this.emit` (issue#2210)\r\n    this.emit('showContent', name)\r\n    this.events.emit('showContent', name)\r\n  }\r\n\r\n  /**\r\n   * Toggles the side panel for plugin\r\n   * @param {string} name Name of profile of the module to activate\r\n   */\r\n  toggle (name) {\r\n    this.updateActivations(name)\r\n    // TODO: Only keep `this.emit` (issue#2210)\r\n    this.emit('toggleContent', name)\r\n    this.events.emit('toggleContent', name)\r\n  }\r\n\r\n  updateActivations (name) {\r\n    this.removeActive()\r\n    this.addActive(name)\r\n  }\r\n\r\n  onThemeChanged (themeType) {\r\n    const invert = themeType === 'dark' ? 1 : 0\r\n    const active = this.view.querySelector('.active')\r\n    if (active) {\r\n      const image = active.querySelector('.image')\r\n      image.style.setProperty('filter', `invert(${invert})`)\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const home = yo`\r\n      <div\r\n        class=\"${css.homeIcon}\"\r\n        onclick=\"${async () => {\r\n          await this.appManager.activatePlugin('home')\r\n          this.call('tabs', 'focus', 'home')\r\n        }}\"\r\n        plugin=\"home\" title=\"Home\"\r\n        data-id=\"verticalIconsHomeIcon\"\r\n      >\r\n        ${basicLogo()}\r\n      </div>\r\n    `\r\n    this.iconKind.fileexplorer = yo`<div id='fileExplorerIcons' data-id=\"verticalIconsFileExplorerIcons\"></div>`\r\n    this.iconKind.compiler = yo`<div id='compileIcons'></div>`\r\n    this.iconKind.udapp = yo`<div id='runIcons'></div>`\r\n    this.iconKind.testing = yo`<div id='testingIcons'></div>`\r\n    this.iconKind.analysis = yo`<div id='analysisIcons'></div>`\r\n    this.iconKind.debugging = yo`<div id='debuggingIcons' data-id=\"verticalIconsDebuggingIcons\"></div>`\r\n    this.iconKind.none = yo`<div id='otherIcons'></div>`\r\n    this.iconKind.settings = yo`<div id='settingsIcons' data-id=\"verticalIconsSettingsIcons\"></div>`\r\n\r\n    this.view = yo`\r\n      <div class=${css.icons}>\r\n        ${home}\r\n        ${this.iconKind.fileexplorer}\r\n        ${this.iconKind.compiler}\r\n        ${this.iconKind.udapp}\r\n        ${this.iconKind.testing}\r\n        ${this.iconKind.analysis}\r\n        ${this.iconKind.debugging}\r\n        ${this.iconKind.none}\r\n        ${this.iconKind.settings}\r\n      </div>\r\n    `\r\n    return this.view\r\n  }\r\n}\r\n\r\nconst css = csjs`\r\n  .homeIcon {\r\n      display: block;\r\n      width: 42px;\r\n      height: 42px;\r\n      margin-bottom: 20px;\r\n      margin-left: -5px;\r\n      cursor: pointer;\r\n  }\r\n  .homeIcon svg path {\r\n    fill: var(--primary);\r\n  }\r\n  .homeIcon svg polygon {\r\n    fill: var(--primary);\r\n  }\r\n  .icons {\r\n    margin-left: 10px;\r\n    margin-top: 15px;\r\n  }\r\n  .icon {\r\n    cursor: pointer;\r\n    margin-bottom: 12px;\r\n    width: 36px;\r\n    height: 36px;\r\n    padding: 3px;\r\n    position: relative;\r\n    border-radius: 8px;\r\n  }\r\n  .icon img {\r\n    width: 28px;\r\n    height: 28px;\r\n    padding: 4px;\r\n    filter: invert(0.5);\r\n  }\r\n  .image {\r\n  }\r\n  .icon svg {\r\n    width: 28px;\r\n    height: 28px;\r\n    padding: 4px;\r\n  }\r\n  .icon[title='Settings'] {\r\n    position: absolute;\r\n    bottom: 0;\r\n  }\r\n  .status {\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 0;\r\n  }\r\n  .statusCheck {\r\n    font-size: 1.2em;\r\n  }\r\n  .statusWithBG\r\n    border-radius: 8px;\r\n    background-color: var(--danger);\r\n    color: var(--light);\r\n    font-size: 12px;\r\n    height: 15px;\r\n    text-align: center;\r\n    font-weight: bold;\r\n    padding-left: 5px;\r\n    padding-right: 5px;\r\n  }\r\n`\r\n","'use strict'\r\nconst SourceHighlighter = require('./sourceHighlighter')\r\n\r\nclass SourceHighlighters {\r\n  constructor () {\r\n    this.highlighters = {}\r\n  }\r\n\r\n  highlight (position, filePath, hexColor, from) {\r\n    // eslint-disable-next-line\r\n    try {\r\n      if (!this.highlighters[from]) this.highlighters[from] = []\r\n      const sourceHighlight = new SourceHighlighter()\r\n      if (\r\n        !this.highlighters[from].length ||\r\n        (this.highlighters[from].length && !this.highlighters[from].find((el) => {\r\n          return el.source === filePath && el.position === position\r\n        }))\r\n      ) {\r\n        sourceHighlight.currentSourceLocationFromfileName(position, filePath, hexColor)\r\n        this.highlighters[from].push(sourceHighlight)\r\n      }\r\n    } catch (e) {\r\n      throw e\r\n    }\r\n  }\r\n\r\n  // highlights all locations for @from plugin\r\n  highlightAllFrom (from) {\r\n    // eslint-disable-next-line\r\n    try {\r\n      if (!this.highlighters[from]) return\r\n      const sourceHighlight = new SourceHighlighter()\r\n      for (const index in this.highlighters[from]) {\r\n        sourceHighlight.currentSourceLocationFromfileName(\r\n          this.highlighters[from][index].position,\r\n          this.highlighters[from][index].source,\r\n          this.highlighters[from][index].style\r\n        )\r\n        this.highlighters[from][index] = sourceHighlight\r\n      }\r\n    } catch (e) {\r\n      throw e\r\n    }\r\n  }\r\n\r\n  discardHighlight (from) {\r\n    if (this.highlighters[from]) {\r\n      for (const index in this.highlighters[from]) this.highlighters[from][index].currentSourceLocation(null)\r\n    }\r\n    this.highlighters[from] = []\r\n  }\r\n\r\n  discardAllHighlights () {\r\n    for (const from in this.highlighters) {\r\n      this.discardHighlight(from)\r\n    }\r\n  }\r\n\r\n  hideHighlightsExcept (toStay) {\r\n    for (const highlighter in this.highlighters) {\r\n      for (const index in this.highlighters[highlighter]) {\r\n        this.highlighters[highlighter][index].currentSourceLocation(null)\r\n      }\r\n      this.highlightAllFrom(toStay)\r\n    }\r\n  }\r\n\r\n  discardHighlightAt (line, filePath, from) {\r\n    if (this.highlighters[from]) {\r\n      for (const index in this.highlighters[from]) {\r\n        const highlight = this.highlighters[from][index]\r\n        if (highlight.source === filePath &&\r\n            (highlight.position.start.line === line || highlight.position.end.line === line)) {\r\n          highlight.currentSourceLocation(null)\r\n          this.highlighters[from].splice(index, 1)\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = SourceHighlighters\r\n","'use strict'\r\nimport { sourceMappingDecoder } from '@remix-project/remix-debug'\r\nconst yo = require('yo-yo')\r\nconst globalRegistry = require('../../global/registry')\r\n\r\nconst css = require('./styles/contextView-styles')\r\n\r\n/*\r\n  Display information about the current focused code:\r\n   - if it's a reference, display information about the declaration\r\n   - jump to the declaration\r\n   - number of references\r\n   - rename declaration/references\r\n*/\r\nclass ContextView {\r\n  constructor (opts, localRegistry) {\r\n    this._components = {}\r\n    this._components.registry = localRegistry || globalRegistry\r\n    this.contextualListener = opts.contextualListener\r\n    this.editor = opts.editor\r\n    this._deps = {\r\n      compilersArtefacts: this._components.registry.get('compilersartefacts').api,\r\n      offsetToLineColumnConverter: this._components.registry.get('offsettolinecolumnconverter').api,\r\n      config: this._components.registry.get('config').api,\r\n      fileManager: this._components.registry.get('filemanager').api\r\n    }\r\n    this._view = null\r\n    this._nodes = null\r\n    this._current = null\r\n    this.sourceMappingDecoder = sourceMappingDecoder\r\n    this.previousElement = null\r\n    this.contextualListener.event.register('contextChanged', nodes => {\r\n      this.show()\r\n      this._nodes = nodes\r\n      this.update()\r\n    })\r\n    this.contextualListener.event.register('stopHighlighting', () => {\r\n    })\r\n  }\r\n\r\n  render () {\r\n    const view = yo`\r\n      <div class=\"${css.contextview} ${css.contextviewcontainer} bg-light text-dark border-0\">\r\n        <div class=${css.container}>\r\n          ${this._renderTarget()}\r\n        </div>\r\n      </div>`\r\n    if (!this._view) {\r\n      this._view = view\r\n    }\r\n    return view\r\n  }\r\n\r\n  hide () {\r\n    if (this._view) {\r\n      this._view.style.display = 'none'\r\n    }\r\n  }\r\n\r\n  show () {\r\n    if (this._view) {\r\n      this._view.style.display = 'block'\r\n    }\r\n  }\r\n\r\n  update () {\r\n    if (this._view) {\r\n      yo.update(this._view, this.render())\r\n    }\r\n  }\r\n\r\n  _renderTarget () {\r\n    let last\r\n    const previous = this._current\r\n    if (this._nodes && this._nodes.length) {\r\n      last = this._nodes[this._nodes.length - 1]\r\n      if (isDefinition(last)) {\r\n        this._current = last\r\n      } else {\r\n        const target = this.contextualListener.declarationOf(last)\r\n        if (target) {\r\n          this._current = target\r\n        } else {\r\n          this._current = null\r\n        }\r\n      }\r\n    }\r\n    if (!this._current || !previous || previous.id !== this._current.id || (this.previousElement && !this.previousElement.children.length)) {\r\n      this.previousElement = this._render(this._current, last)\r\n    }\r\n    return this.previousElement\r\n  }\r\n\r\n  _jumpToInternal (position) {\r\n    const jumpToLine = (lineColumn) => {\r\n      if (lineColumn.start && lineColumn.start.line && lineColumn.start.column) {\r\n        this.editor.gotoLine(lineColumn.start.line, lineColumn.end.column + 1)\r\n      }\r\n    }\r\n    const lastCompilationResult = this._deps.compilersArtefacts.__last\r\n    if (lastCompilationResult && lastCompilationResult.languageversion.indexOf('soljson') === 0 && lastCompilationResult.data) {\r\n      const lineColumn = this._deps.offsetToLineColumnConverter.offsetToLineColumn(\r\n        position,\r\n        position.file,\r\n        lastCompilationResult.getSourceCode().sources,\r\n        lastCompilationResult.getAsts())\r\n      const filename = lastCompilationResult.getSourceName(position.file)\r\n      // TODO: refactor with rendererAPI.errorClick\r\n      if (filename !== this._deps.config.get('currentFile')) {\r\n        const provider = this._deps.fileManager.fileProviderOf(filename)\r\n        if (provider) {\r\n          provider.exists(filename, (error, exist) => {\r\n            if (error) return console.log(error)\r\n            this._deps.fileManager.open(filename)\r\n            jumpToLine(lineColumn)\r\n          })\r\n        }\r\n      } else {\r\n        jumpToLine(lineColumn)\r\n      }\r\n    }\r\n  }\r\n\r\n  _render (node, nodeAtCursorPosition) {\r\n    if (!node) return yo`<div></div>`\r\n    let references = this.contextualListener.referencesOf(node)\r\n    const type = node.typeDescriptions && node.typeDescriptions.typeString ? node.typeDescriptions.typeString : node.nodeType\r\n    references = `${references ? references.length : '0'} reference(s)`\r\n\r\n    let ref = 0\r\n    const nodes = this.contextualListener.getActiveHighlights()\r\n    for (const k in nodes) {\r\n      if (nodeAtCursorPosition.id === nodes[k].nodeId) {\r\n        ref = k\r\n        break\r\n      }\r\n    }\r\n\r\n    // JUMP BETWEEN REFERENCES\r\n    const jump = (e) => {\r\n      e.target.dataset.action === 'next' ? ref++ : ref--\r\n      if (ref < 0) ref = nodes.length - 1\r\n      if (ref >= nodes.length) ref = 0\r\n      this._jumpToInternal(nodes[ref].position)\r\n    }\r\n\r\n    const jumpTo = () => {\r\n      if (node && node.src) {\r\n        const position = this.sourceMappingDecoder.decode(node.src)\r\n        if (position) {\r\n          this._jumpToInternal(position)\r\n        }\r\n      }\r\n    }\r\n\r\n    const showGasEstimation = () => {\r\n      if (node.nodeType === 'FunctionDefinition') {\r\n        const result = this.contextualListener.gasEstimation(node)\r\n        const executionCost = ' Execution cost: ' + result.executionCost + ' gas'\r\n        const codeDepositCost = 'Code deposit cost: ' + result.codeDepositCost + ' gas'\r\n        const estimatedGas = result.codeDepositCost ? `${codeDepositCost}, ${executionCost}` : `${executionCost}`\r\n        return yo`\r\n          <div class=${css.gasEstimation}>\r\n            <i class=\"fas fa-gas-pump ${css.gasStationIcon}\" title='Gas estimation'></i>\r\n            <span>${estimatedGas}</span>\r\n          </div>\r\n        `\r\n      }\r\n    }\r\n\r\n    return yo`\r\n      <div class=${css.line}>${showGasEstimation()}\r\n        <div title=${type} class=${css.type}>${type}</div>\r\n        <div title=${node.name} class=${css.name}>${node.name}</div>\r\n        <i class=\"fas fa-share ${css.jump}\" aria-hidden=\"true\" onclick=${jumpTo}></i>\r\n        <span class=${css.referencesnb}>${references}</span>\r\n        <i data-action='previous' class=\"fas fa-chevron-up ${css.jump}\" aria-hidden=\"true\" onclick=${jump}></i>\r\n        <i data-action='next' class=\"fas fa-chevron-down ${css.jump}\" aria-hidden=\"true\" onclick=${jump}></i>\r\n      </div>\r\n    `\r\n  }\r\n}\r\n\r\nfunction isDefinition (node) {\r\n  return node.nodeType === 'ContractDefinition' ||\r\n  node.nodeType === 'FunctionDefinition' ||\r\n  node.nodeType === 'ModifierDefinition' ||\r\n  node.nodeType === 'VariableDeclaration' ||\r\n  node.nodeType === 'StructDefinition' ||\r\n  node.nodeType === 'EventDefinition'\r\n}\r\n\r\nmodule.exports = ContextView\r\n","'use strict'\r\nimport { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\n\r\nimport { sourceMappingDecoder } from '@remix-project/remix-debug'\r\nconst { AstWalker } = require('@remix-project/remix-astwalker')\r\nconst csjs = require('csjs-inject')\r\nconst EventManager = require('../../lib/events')\r\nconst globalRegistry = require('../../global/registry')\r\n\r\nconst profile = {\r\n  name: 'contextualListener',\r\n  methods: [],\r\n  events: [],\r\n  version: packageJson.version\r\n}\r\n\r\n/*\r\n  trigger contextChanged(nodes)\r\n*/\r\nclass ContextualListener extends Plugin {\r\n  constructor (opts) {\r\n    super(profile)\r\n    this.event = new EventManager()\r\n    this._components = {}\r\n    this._components.registry = globalRegistry\r\n    this.editor = opts.editor\r\n    this.pluginManager = opts.pluginManager\r\n    this._deps = {\r\n      compilersArtefacts: this._components.registry.get('compilersartefacts').api,\r\n      config: this._components.registry.get('config').api,\r\n      offsetToLineColumnConverter: this._components.registry.get('offsettolinecolumnconverter').api\r\n    }\r\n    this._index = {\r\n      Declarations: {},\r\n      FlatReferences: {}\r\n    }\r\n    this._activeHighlights = []\r\n    this.editor.event.register('contentChanged', () => { this._stopHighlighting() })\r\n\r\n    this.sourceMappingDecoder = sourceMappingDecoder\r\n    this.astWalker = new AstWalker()\r\n  }\r\n\r\n  onActivation () {\r\n    this.on('solidity', 'compilationFinished', (file, source, languageVersion, data) => {\r\n      if (languageVersion.indexOf('soljson') !== 0) return\r\n      this._stopHighlighting()\r\n      this._index = {\r\n        Declarations: {},\r\n        FlatReferences: {}\r\n      }\r\n      this._buildIndex(data, source)\r\n    })\r\n\r\n    setInterval(() => {\r\n      if (this._deps.compilersArtefacts.__last && this._deps.compilersArtefacts.__last.languageversion.indexOf('soljson') === 0) {\r\n        this._highlightItems(this.editor.getCursorPosition(), this._deps.compilersArtefacts.__last, this._deps.config.get('currentFile'))\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  getActiveHighlights () {\r\n    return [...this._activeHighlights]\r\n  }\r\n\r\n  declarationOf (node) {\r\n    if (node && node.referencedDeclaration) {\r\n      return this._index.FlatReferences[node.referencedDeclaration]\r\n    }\r\n    return null\r\n  }\r\n\r\n  referencesOf (node) {\r\n    return this._index.Declarations[node.id]\r\n  }\r\n\r\n  _highlightItems (cursorPosition, compilationResult, file) {\r\n    if (this.currentPosition === cursorPosition) return\r\n    if (this.currentFile !== file) {\r\n      this.currentFile = file\r\n      this.currentPosition = cursorPosition\r\n      return\r\n    }\r\n    this._stopHighlighting()\r\n    this.currentPosition = cursorPosition\r\n    this.currentFile = file\r\n    if (compilationResult && compilationResult.data && compilationResult.data.sources[file]) {\r\n      const nodes = this.sourceMappingDecoder.nodesAtPosition(null, cursorPosition, compilationResult.data.sources[file])\r\n      this.nodes = nodes\r\n      if (nodes && nodes.length && nodes[nodes.length - 1]) {\r\n        this._highlightExpressions(nodes[nodes.length - 1], compilationResult)\r\n      }\r\n      this.event.trigger('contextChanged', [nodes])\r\n    }\r\n  }\r\n\r\n  _buildIndex (compilationResult, source) {\r\n    if (compilationResult && compilationResult.sources) {\r\n      const callback = (node) => {\r\n        if (node && node.referencedDeclaration) {\r\n          if (!this._index.Declarations[node.referencedDeclaration]) {\r\n            this._index.Declarations[node.referencedDeclaration] = []\r\n          }\r\n          this._index.Declarations[node.referencedDeclaration].push(node)\r\n        }\r\n        this._index.FlatReferences[node.id] = node\r\n      }\r\n      for (const s in compilationResult.sources) {\r\n        this.astWalker.walkFull(compilationResult.sources[s].ast, callback)\r\n      }\r\n    }\r\n  }\r\n\r\n  _highlight (node, compilationResult) {\r\n    if (!node) return\r\n    const position = this.sourceMappingDecoder.decode(node.src)\r\n    const eventId = this._highlightInternal(position, node)\r\n    const lastCompilationResult = this._deps.compilersArtefacts.__last\r\n    if (eventId && lastCompilationResult && lastCompilationResult.languageversion.indexOf('soljson') === 0) {\r\n      this._activeHighlights.push({ eventId, position, fileTarget: lastCompilationResult.getSourceName(position.file), nodeId: node.id })\r\n    }\r\n  }\r\n\r\n  _highlightInternal (position, node) {\r\n    if (node.nodeType === 'Block') return\r\n    const lastCompilationResult = this._deps.compilersArtefacts.__last\r\n    if (lastCompilationResult && lastCompilationResult.languageversion.indexOf('soljson') === 0) {\r\n      let lineColumn = this._deps.offsetToLineColumnConverter.offsetToLineColumn(position, position.file, lastCompilationResult.getSourceCode().sources, lastCompilationResult.getAsts())\r\n      const css = csjs`\r\n        .highlightref_fullLine {\r\n          position: absolute;\r\n          z-index: 2;\r\n          opacity: 0.1;\r\n          background-color: var(--info);\r\n        }\r\n        `\r\n      if (node.nodes && node.nodes.length) {\r\n        // If node has children, highlight the entire line. if not, just highlight the current source position of the node.\r\n        lineColumn = {\r\n          start: {\r\n            line: lineColumn.start.line,\r\n            column: 0\r\n          },\r\n          end: {\r\n            line: lineColumn.start.line + 1,\r\n            column: 0\r\n          }\r\n        }\r\n      }\r\n      const fileName = lastCompilationResult.getSourceName(position.file)\r\n      if (fileName) {\r\n        return this.editor.addMarker(lineColumn, fileName, css.highlightref_fullLine)\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  _highlightExpressions (node, compilationResult) {\r\n    const highlights = (id) => {\r\n      if (this._index.Declarations && this._index.Declarations[id]) {\r\n        const refs = this._index.Declarations[id]\r\n        for (const ref in refs) {\r\n          const node = refs[ref]\r\n          this._highlight(node, compilationResult)\r\n        }\r\n      }\r\n    }\r\n    if (node && node.referencedDeclaration) {\r\n      highlights(node.referencedDeclaration)\r\n      const current = this._index.FlatReferences[node.referencedDeclaration]\r\n      this._highlight(current, compilationResult)\r\n    } else {\r\n      highlights(node.id)\r\n      this._highlight(node, compilationResult)\r\n    }\r\n    this.results = compilationResult\r\n  }\r\n\r\n  _stopHighlighting () {\r\n    for (const eventKey in this._activeHighlights) {\r\n      const event = this._activeHighlights[eventKey]\r\n      this.editor.removeMarker(event.eventId, event.fileTarget)\r\n    }\r\n    this.event.trigger('stopHighlighting', [])\r\n    this._activeHighlights = []\r\n  }\r\n\r\n  gasEstimation (node) {\r\n    this._loadContractInfos(node)\r\n    let executionCost, codeDepositCost\r\n    if (node.nodeType === 'FunctionDefinition') {\r\n      const visibility = node.visibility\r\n      if (node.kind !== 'constructor') {\r\n        const fnName = node.name\r\n        const fn = fnName + this._getInputParams(node)\r\n        if (visibility === 'public' || visibility === 'external') {\r\n          executionCost = this.estimationObj.external[fn]\r\n        } else if (visibility === 'private' || visibility === 'internal') {\r\n          executionCost = this.estimationObj.internal[fn]\r\n        }\r\n      } else {\r\n        executionCost = this.creationCost\r\n        codeDepositCost = this.codeDepositCost\r\n      }\r\n    } else {\r\n      executionCost = '-'\r\n    }\r\n    return { executionCost, codeDepositCost }\r\n  }\r\n\r\n  _loadContractInfos (node) {\r\n    for (const i in this.nodes) {\r\n      if (this.nodes[i].id === node.scope) {\r\n        const contract = this.nodes[i]\r\n        this.contract = this.results.data.contracts[this.results.source.target][contract.name]\r\n        this.estimationObj = this.contract.evm.gasEstimates\r\n        this.creationCost = this.estimationObj.creation.totalCost\r\n        this.codeDepositCost = this.estimationObj.creation.codeDepositCost\r\n      }\r\n    }\r\n  }\r\n\r\n  _getInputParams (node) {\r\n    const params = []\r\n    const target = node.parameters\r\n    // for (const i in node.children) {\r\n    //   if (node.children[i].name === 'ParameterList') {\r\n    //     target = node.children[i]\r\n    //     break\r\n    //   }\r\n    // }\r\n    if (target) {\r\n      const children = target.parameters\r\n      for (const j in children) {\r\n        if (children[j].nodeType === 'VariableDeclaration') {\r\n          params.push(children[j].typeDescriptions.typeString)\r\n        }\r\n      }\r\n    }\r\n    return '(' + params.toString() + ')'\r\n  }\r\n}\r\n\r\nmodule.exports = ContextualListener\r\n","'use strict'\r\nimport { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\n\r\nconst EventManager = require('../../lib/events')\r\nconst yo = require('yo-yo')\r\nconst csjs = require('csjs-inject')\r\nconst ace = require('brace')\r\n\r\nconst globalRegistry = require('../../global/registry')\r\nconst SourceHighlighters = require('./SourceHighlighters')\r\n\r\nconst Range = ace.acequire('ace/range').Range\r\nrequire('brace/ext/language_tools')\r\nrequire('brace/ext/searchbox')\r\nconst langTools = ace.acequire('ace/ext/language_tools')\r\nrequire('ace-mode-solidity/build/remix-ide/mode-solidity')\r\nrequire('ace-mode-move/build/remix-ide/mode-move')\r\nrequire('ace-mode-zokrates')\r\nrequire('ace-mode-lexon')\r\nrequire('brace/mode/javascript')\r\nrequire('brace/mode/python')\r\nrequire('brace/mode/json')\r\nrequire('brace/mode/rust')\r\nrequire('brace/theme/chrome') // for all light themes\r\nrequire('brace/theme/chaos') // for all dark themes\r\nrequire('../../assets/js/editor/darkTheme') // a custom one for remix 'Dark' theme\r\n\r\nconst css = csjs`\r\n  .ace-editor {\r\n    width     : 100%;\r\n  }\r\n`\r\ndocument.head.appendChild(yo`\r\n  <style>\r\n    .ace-tm .ace_gutter,\r\n    .ace-tm .ace_gutter-active-line,\r\n    .ace-tm .ace_marker-layer .ace_active-line {\r\n        background-color: var(--secondary);\r\n    }\r\n    .ace_gutter-cell.ace_breakpoint{\r\n      background-color: var(--secondary);\r\n    }\r\n  </style>\r\n`)\r\n\r\nconst profile = {\r\n  displayName: 'Editor',\r\n  name: 'editor',\r\n  description: 'service - editor',\r\n  version: packageJson.version,\r\n  methods: ['highlight', 'discardHighlight', 'discardHighlightAt', 'clearAnnotations', 'addAnnotation']\r\n}\r\n\r\nclass Editor extends Plugin {\r\n  constructor (opts = {}, themeModule) {\r\n    super(profile)\r\n    // Dependancies\r\n    this._components = {}\r\n    this._components.registry = globalRegistry\r\n    this._deps = {\r\n      config: this._components.registry.get('config').api\r\n    }\r\n\r\n    this._themes = {\r\n      light: 'chrome',\r\n      dark: 'chaos',\r\n      remixDark: 'remixDark'\r\n    }\r\n    themeModule.events.on('themeChanged', (theme) => {\r\n      this.setTheme(theme.name === 'Dark' ? 'remixDark' : theme.quality)\r\n    })\r\n\r\n    // Init\r\n    this.event = new EventManager()\r\n    this.sessions = {}\r\n    this.sourceAnnotations = []\r\n    this.readOnlySessions = {}\r\n    this.previousInput = ''\r\n    this.saveTimeout = null\r\n    this.sourceHighlighters = new SourceHighlighters()\r\n    this.emptySession = this._createSession('')\r\n    this.modes = {\r\n      sol: 'ace/mode/solidity',\r\n      yul: 'ace/mode/solidity',\r\n      mvir: 'ace/mode/move',\r\n      js: 'ace/mode/javascript',\r\n      py: 'ace/mode/python',\r\n      vy: 'ace/mode/python',\r\n      zok: 'ace/mode/zokrates',\r\n      lex: 'ace/mode/lexon',\r\n      txt: 'ace/mode/text',\r\n      json: 'ace/mode/json',\r\n      abi: 'ace/mode/json',\r\n      rs: 'ace/mode/rust'\r\n    }\r\n\r\n    // Editor Setup\r\n    const el = yo`<div id=\"input\" data-id=\"editorInput\"></div>`\r\n    this.editor = ace.edit(el)\r\n\r\n    ace.acequire('ace/ext/language_tools')\r\n\r\n    // Unmap ctrl-l & cmd-l\r\n    this.editor.commands.bindKeys({\r\n      'ctrl-L': null,\r\n      'Command-L': null\r\n    })\r\n\r\n    // shortcuts for \"Ctrl-\"\" and \"Ctrl+\"\" to increase/decrease font size of the editor\r\n    this.editor.commands.addCommand({\r\n      name: 'increasefontsizeEqual',\r\n      bindKey: { win: 'Ctrl-=', mac: 'Command-=' },\r\n      exec: (editor) => {\r\n        this.editorFontSize(1)\r\n      },\r\n      readOnly: true\r\n    })\r\n\r\n    this.editor.commands.addCommand({\r\n      name: 'increasefontsizePlus',\r\n      bindKey: { win: 'Ctrl-+', mac: 'Command-+' },\r\n      exec: (editor) => {\r\n        this.editorFontSize(1)\r\n      },\r\n      readOnly: true\r\n    })\r\n\r\n    this.editor.commands.addCommand({\r\n      name: 'decreasefontsize',\r\n      bindKey: { win: 'Ctrl--', mac: 'Command--' },\r\n      exec: (editor) => {\r\n        this.editorFontSize(-1)\r\n      },\r\n      readOnly: true\r\n    })\r\n\r\n    this.editor.setShowPrintMargin(false)\r\n    this.editor.resize(true)\r\n\r\n    this.editor.setOptions({\r\n      enableBasicAutocompletion: true,\r\n      enableLiveAutocompletion: true\r\n    })\r\n\r\n    el.className += ' ' + css['ace-editor']\r\n    el.editor = this.editor // required to access the editor during tests\r\n    this.render = () => el\r\n\r\n    // Completer for editor\r\n    const flowCompleter = {\r\n      getCompletions: (editor, session, pos, prefix, callback) => {\r\n        // @TODO add here other propositions\r\n      }\r\n    }\r\n    langTools.addCompleter(flowCompleter)\r\n\r\n    // zoom with Ctrl+wheel\r\n    window.addEventListener('wheel', (e) => {\r\n      if (e.ctrlKey && Math.abs(e.wheelY) > 5) {\r\n        this.editorFontSize(e.wheelY > 0 ? 1 : -1)\r\n      }\r\n    })\r\n\r\n    // EVENTS LISTENERS\r\n\r\n    // Gutter Mouse down\r\n    this.editor.on('guttermousedown', e => {\r\n      const target = e.domEvent.target\r\n      if (target.className.indexOf('ace_gutter-cell') === -1) {\r\n        return\r\n      }\r\n      const row = e.getDocumentPosition().row\r\n      const breakpoints = e.editor.session.getBreakpoints()\r\n      for (const k in breakpoints) {\r\n        if (k === row.toString()) {\r\n          this.event.trigger('breakpointCleared', [this.currentSession, row])\r\n          e.editor.session.clearBreakpoint(row)\r\n          e.stop()\r\n          return\r\n        }\r\n      }\r\n      this.setBreakpoint(row)\r\n      this.event.trigger('breakpointAdded', [this.currentSession, row])\r\n      e.stop()\r\n    })\r\n\r\n    // Do setup on initialisation here\r\n    this.editor.on('changeSession', () => {\r\n      this._onChange()\r\n      this.event.trigger('sessionSwitched', [])\r\n      this.editor.getSession().on('change', () => {\r\n        this._onChange()\r\n        this.sourceHighlighters.discardAllHighlights()\r\n        this.event.trigger('contentChanged', [])\r\n      })\r\n    })\r\n  }\r\n\r\n  onActivation () {\r\n    this.on('sidePanel', 'focusChanged', (name) => this.sourceHighlighters.hideHighlightsExcept(name))\r\n    this.on('sidePanel', 'pluginDisabled', (name) => this.sourceHighlighters.discardHighlight(name))\r\n  }\r\n\r\n  onDeactivation () {\r\n    this.off('sidePanel', 'focusChanged')\r\n    this.off('sidePanel', 'pluginDisabled')\r\n  }\r\n\r\n  highlight (position, filePath, hexColor) {\r\n    const { from } = this.currentRequest\r\n    this.sourceHighlighters.highlight(position, filePath, hexColor, from)\r\n  }\r\n\r\n  discardHighlight () {\r\n    const { from } = this.currentRequest\r\n    this.sourceHighlighters.discardHighlight(from)\r\n  }\r\n\r\n  discardHighlightAt (line, filePath) {\r\n    const { from } = this.currentRequest\r\n    this.sourceHighlighters.discardHighlightAt(line, filePath, from)\r\n  }\r\n\r\n  setTheme (type) {\r\n    this.editor.setTheme('ace/theme/' + this._themes[type])\r\n  }\r\n\r\n  _onChange () {\r\n    const currentFile = this._deps.config.get('currentFile')\r\n    if (!currentFile) {\r\n      return\r\n    }\r\n    const input = this.get(currentFile)\r\n    if (!input) {\r\n      return\r\n    }\r\n    // if there's no change, don't do anything\r\n    if (input === this.previousInput) {\r\n      return\r\n    }\r\n    this.previousInput = input\r\n\r\n    // fire storage update\r\n    // NOTE: save at most once per 5 seconds\r\n    if (this.saveTimeout) {\r\n      window.clearTimeout(this.saveTimeout)\r\n    }\r\n    this.saveTimeout = window.setTimeout(() => {\r\n      this.event.trigger('requiringToSaveCurrentfile', [])\r\n    }, 5000)\r\n  }\r\n\r\n  _switchSession (path) {\r\n    this.currentSession = path\r\n    this.editor.setSession(this.sessions[this.currentSession])\r\n    this.editor.setReadOnly(this.readOnlySessions[this.currentSession])\r\n    this.editor.focus()\r\n  }\r\n\r\n  /**\r\n   * Get Ace mode base of the extension of the session file\r\n   * @param {string} path Path of the file\r\n   */\r\n  _getMode (path) {\r\n    if (!path) return this.modes.txt\r\n    const root = path.split('#')[0].split('?')[0]\r\n    let ext = root.indexOf('.') !== -1 ? /[^.]+$/.exec(root) : null\r\n    if (ext) ext = ext[0]\r\n    else ext = 'txt'\r\n    return ext && this.modes[ext] ? this.modes[ext] : this.modes.txt\r\n  }\r\n\r\n  /**\r\n   * Create an Ace session\r\n   * @param {string} content Content of the file to open\r\n   * @param {string} mode Ace Mode for this file [Default is `text`]\r\n   */\r\n  _createSession (content, mode) {\r\n    const s = new ace.EditSession(content)\r\n    s.setMode(mode || 'ace/mode/text')\r\n    s.setUndoManager(new ace.UndoManager())\r\n    s.setTabSize(4)\r\n    s.setUseSoftTabs(true)\r\n    return s\r\n  }\r\n\r\n  /**\r\n   * Attempts to find the string in the current document\r\n   * @param {string} string\r\n   */\r\n  find (string) {\r\n    return this.editor.find(string)\r\n  }\r\n\r\n  /**\r\n   * Display an Empty read-only session\r\n   */\r\n  displayEmptyReadOnlySession () {\r\n    this.currentSession = null\r\n    this.editor.setSession(this.emptySession)\r\n    this.editor.setReadOnly(true)\r\n  }\r\n\r\n  /**\r\n   * Sets a breakpoint on the row number\r\n   * @param {number} row Line index of the breakpoint\r\n   * @param {string} className Class of the breakpoint\r\n   */\r\n  setBreakpoint (row, className) {\r\n    this.editor.session.setBreakpoint(row, className)\r\n  }\r\n\r\n  /**\r\n   * Increment the font size (in pixels) for the editor text.\r\n   * @param {number} incr The amount of pixels to add to the font.\r\n   */\r\n  editorFontSize (incr) {\r\n    const newSize = this.editor.getFontSize() + incr\r\n    if (newSize >= 6) {\r\n      this.editor.setFontSize(newSize)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the text in the current session, if any.\r\n   * @param {string} text New text to be place.\r\n   */\r\n  setText (text) {\r\n    if (this.currentSession && this.sessions[this.currentSession]) {\r\n      this.sessions[this.currentSession].setValue(text)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Upsert and open a session.\r\n   * @param {string} path Path of the session to open.\r\n   * @param {string} content Content of the document or update.\r\n   */\r\n  open (path, content) {\r\n    /*\r\n      we have the following cases:\r\n       - URL prepended with \"localhost\"\r\n       - URL prepended with \"browser\"\r\n       - URL not prepended with the file explorer. We assume (as it is in the whole app, that this is a \"browser\" URL\r\n    */\r\n    if (!path.startsWith('localhost') && !path.startsWith('browser')) path = `browser/${path}`\r\n    if (!this.sessions[path]) {\r\n      const session = this._createSession(content, this._getMode(path))\r\n      this.sessions[path] = session\r\n      this.readOnlySessions[path] = false\r\n    } else if (this.sessions[path].getValue() !== content) {\r\n      this.sessions[path].setValue(content)\r\n    }\r\n    this._switchSession(path)\r\n  }\r\n\r\n  /**\r\n   * Upsert and Open a session and set it as Read-only.\r\n   * @param {string} path Path of the session to open.\r\n   * @param {string} content Content of the document or update.\r\n   */\r\n  openReadOnly (path, content) {\r\n    if (!this.sessions[path]) {\r\n      const session = this._createSession(content, this._getMode(path))\r\n      this.sessions[path] = session\r\n      this.readOnlySessions[path] = true\r\n    }\r\n    this._switchSession(path)\r\n  }\r\n\r\n  /**\r\n   * Content of the current session\r\n   * @return {String} content of the file referenced by @arg path\r\n   */\r\n  currentContent () {\r\n    return this.get(this.current())\r\n  }\r\n\r\n  /**\r\n   * Content of the session targeted by @arg path\r\n   * if @arg path is null, the content of the current session is returned\r\n   * @param {string} path Path of the session to get.\r\n   * @return {String} content of the file referenced by @arg path\r\n   */\r\n  get (path) {\r\n    if (!path || this.currentSession === path) {\r\n      return this.editor.getValue()\r\n    } else if (this.sessions[path]) {\r\n      return this.sessions[path].getValue()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Path of the currently editing file\r\n   * returns `undefined` if no session is being editer\r\n   * @return {String} path of the current session\r\n   */\r\n  current () {\r\n    if (this.editor.getSession() === this.emptySession) {\r\n      return\r\n    }\r\n    return this.currentSession\r\n  }\r\n\r\n  /**\r\n   * The position of the cursor\r\n   */\r\n  getCursorPosition () {\r\n    return this.editor.session.doc.positionToIndex(\r\n      this.editor.getCursorPosition(),\r\n      0\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Remove the current session from the list of sessions.\r\n   */\r\n  discardCurrentSession () {\r\n    if (this.sessions[this.currentSession]) {\r\n      delete this.sessions[this.currentSession]\r\n      this.currentSession = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a session based on its path.\r\n   * @param {string} path\r\n   */\r\n  discard (path) {\r\n    if (this.sessions[path]) delete this.sessions[path]\r\n    if (this.currentSession === path) this.currentSession = null\r\n  }\r\n\r\n  /**\r\n   * Resize the editor, and sets whether or not line wrapping is enabled.\r\n   * @param {boolean} useWrapMode Enable (or disable) wrap mode\r\n   */\r\n  resize (useWrapMode) {\r\n    this.editor.resize()\r\n    const session = this.editor.getSession()\r\n    session.setUseWrapMode(useWrapMode)\r\n    if (session.getUseWrapMode()) {\r\n      const characterWidth = this.editor.renderer.characterWidth\r\n      const contentWidth = this.editor.container.ownerDocument.getElementsByClassName(\r\n        'ace_scroller'\r\n      )[0].clientWidth\r\n\r\n      if (contentWidth > 0) {\r\n        session.setWrapLimit(parseInt(contentWidth / characterWidth, 10))\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a new marker to the given `Range`.\r\n   * @param {*} lineColumnPos\r\n   * @param {string} source Path of the session to add the mark on.\r\n   * @param {string} cssClass css to apply to the mark.\r\n   */\r\n  addMarker (lineColumnPos, source, cssClass) {\r\n    const currentRange = new Range(\r\n      lineColumnPos.start.line,\r\n      lineColumnPos.start.column,\r\n      lineColumnPos.end.line,\r\n      lineColumnPos.end.column\r\n    )\r\n    if (this.sessions[source]) {\r\n      return this.sessions[source].addMarker(currentRange, cssClass)\r\n    }\r\n    return null\r\n  }\r\n\r\n  /**\r\n   * Scrolls to a line. If center is true, it puts the line in middle of screen (or attempts to).\r\n   * @param {number} line The line to scroll to\r\n   * @param {boolean} center If true\r\n   * @param {boolean} animate If true animates scrolling\r\n   * @param {Function} callback Function to be called when the animation has finished\r\n   */\r\n  scrollToLine (line, center, animate, callback) {\r\n    this.editor.scrollToLine(line, center, animate, callback)\r\n  }\r\n\r\n  /**\r\n   * Remove a marker from the session\r\n   * @param {string} markerId Id of the marker\r\n   * @param {string} source Path of the session\r\n   */\r\n  removeMarker (markerId, source) {\r\n    if (this.sessions[source]) {\r\n      this.sessions[source].removeMarker(markerId)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clears all the annotations for the current session.\r\n   */\r\n  clearAnnotations () {\r\n    this.sourceAnnotations = []\r\n    this.editor.getSession().clearAnnotations()\r\n  }\r\n\r\n  /**\r\n   * Add an annotation to the current session.\r\n   * @param {Object} annotation\r\n   */\r\n  addAnnotation (annotation) {\r\n    this.sourceAnnotations[this.sourceAnnotations.length] = annotation\r\n    this.setAnnotations(this.sourceAnnotations)\r\n  }\r\n\r\n  /**\r\n   * Set a list of annotations to the current session.\r\n   * @param {Array<Object>} annotation\r\n   */\r\n  setAnnotations (sourceAnnotations) {\r\n    this.editor.getSession().setAnnotations(sourceAnnotations)\r\n  }\r\n\r\n  /**\r\n   * Moves the cursor and focus to the specified line and column number\r\n   * @param {number} line\r\n   * @param {number} col\r\n   */\r\n  gotoLine (line, col) {\r\n    this.editor.focus()\r\n    this.editor.gotoLine(line + 1, col - 1, true)\r\n  }\r\n}\r\n\r\nmodule.exports = Editor\r\n","'use strict'\r\n\r\nconst storage = `// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity >=0.7.0 <0.8.0;\r\n\r\n/**\r\n * @title Storage\r\n * @dev Store & retrieve value in a variable\r\n */\r\ncontract Storage {\r\n\r\n    uint256 number;\r\n\r\n    /**\r\n     * @dev Store value in variable\r\n     * @param num value to store\r\n     */\r\n    function store(uint256 num) public {\r\n        number = num;\r\n    }\r\n\r\n    /**\r\n     * @dev Return value \r\n     * @return value of 'number'\r\n     */\r\n    function retrieve() public view returns (uint256){\r\n        return number;\r\n    }\r\n}`\r\n\r\nconst owner = `// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity >=0.7.0 <0.8.0;\r\n\r\n/**\r\n * @title Owner\r\n * @dev Set & change owner\r\n */\r\ncontract Owner {\r\n\r\n    address private owner;\r\n    \r\n    // event for EVM logging\r\n    event OwnerSet(address indexed oldOwner, address indexed newOwner);\r\n    \r\n    // modifier to check if caller is owner\r\n    modifier isOwner() {\r\n        // If the first argument of 'require' evaluates to 'false', execution terminates and all\r\n        // changes to the state and to Ether balances are reverted.\r\n        // This used to consume all gas in old EVM versions, but not anymore.\r\n        // It is often a good idea to use 'require' to check if functions are called correctly.\r\n        // As a second argument, you can also provide an explanation about what went wrong.\r\n        require(msg.sender == owner, \"Caller is not owner\");\r\n        _;\r\n    }\r\n    \r\n    /**\r\n     * @dev Set contract deployer as owner\r\n     */\r\n    constructor() {\r\n        owner = msg.sender; // 'msg.sender' is sender of current call, contract deployer for a constructor\r\n        emit OwnerSet(address(0), owner);\r\n    }\r\n\r\n    /**\r\n     * @dev Change owner\r\n     * @param newOwner address of new owner\r\n     */\r\n    function changeOwner(address newOwner) public isOwner {\r\n        emit OwnerSet(owner, newOwner);\r\n        owner = newOwner;\r\n    }\r\n\r\n    /**\r\n     * @dev Return owner address \r\n     * @return address of owner\r\n     */\r\n    function getOwner() external view returns (address) {\r\n        return owner;\r\n    }\r\n}`\r\n\r\nconst ballot = `// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity >=0.7.0 <0.8.0;\r\n\r\n/** \r\n * @title Ballot\r\n * @dev Implements voting process along with vote delegation\r\n */\r\ncontract Ballot {\r\n   \r\n    struct Voter {\r\n        uint weight; // weight is accumulated by delegation\r\n        bool voted;  // if true, that person already voted\r\n        address delegate; // person delegated to\r\n        uint vote;   // index of the voted proposal\r\n    }\r\n\r\n    struct Proposal {\r\n        // If you can limit the length to a certain number of bytes, \r\n        // always use one of bytes1 to bytes32 because they are much cheaper\r\n        bytes32 name;   // short name (up to 32 bytes)\r\n        uint voteCount; // number of accumulated votes\r\n    }\r\n\r\n    address public chairperson;\r\n\r\n    mapping(address => Voter) public voters;\r\n\r\n    Proposal[] public proposals;\r\n\r\n    /** \r\n     * @dev Create a new ballot to choose one of 'proposalNames'.\r\n     * @param proposalNames names of proposals\r\n     */\r\n    constructor(bytes32[] memory proposalNames) {\r\n        chairperson = msg.sender;\r\n        voters[chairperson].weight = 1;\r\n\r\n        for (uint i = 0; i < proposalNames.length; i++) {\r\n            // 'Proposal({...})' creates a temporary\r\n            // Proposal object and 'proposals.push(...)'\r\n            // appends it to the end of 'proposals'.\r\n            proposals.push(Proposal({\r\n                name: proposalNames[i],\r\n                voteCount: 0\r\n            }));\r\n        }\r\n    }\r\n    \r\n    /** \r\n     * @dev Give 'voter' the right to vote on this ballot. May only be called by 'chairperson'.\r\n     * @param voter address of voter\r\n     */\r\n    function giveRightToVote(address voter) public {\r\n        require(\r\n            msg.sender == chairperson,\r\n            \"Only chairperson can give right to vote.\"\r\n        );\r\n        require(\r\n            !voters[voter].voted,\r\n            \"The voter already voted.\"\r\n        );\r\n        require(voters[voter].weight == 0);\r\n        voters[voter].weight = 1;\r\n    }\r\n\r\n    /**\r\n     * @dev Delegate your vote to the voter 'to'.\r\n     * @param to address to which vote is delegated\r\n     */\r\n    function delegate(address to) public {\r\n        Voter storage sender = voters[msg.sender];\r\n        require(!sender.voted, \"You already voted.\");\r\n        require(to != msg.sender, \"Self-delegation is disallowed.\");\r\n\r\n        while (voters[to].delegate != address(0)) {\r\n            to = voters[to].delegate;\r\n\r\n            // We found a loop in the delegation, not allowed.\r\n            require(to != msg.sender, \"Found loop in delegation.\");\r\n        }\r\n        sender.voted = true;\r\n        sender.delegate = to;\r\n        Voter storage delegate_ = voters[to];\r\n        if (delegate_.voted) {\r\n            // If the delegate already voted,\r\n            // directly add to the number of votes\r\n            proposals[delegate_.vote].voteCount += sender.weight;\r\n        } else {\r\n            // If the delegate did not vote yet,\r\n            // add to her weight.\r\n            delegate_.weight += sender.weight;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @dev Give your vote (including votes delegated to you) to proposal 'proposals[proposal].name'.\r\n     * @param proposal index of proposal in the proposals array\r\n     */\r\n    function vote(uint proposal) public {\r\n        Voter storage sender = voters[msg.sender];\r\n        require(sender.weight != 0, \"Has no right to vote\");\r\n        require(!sender.voted, \"Already voted.\");\r\n        sender.voted = true;\r\n        sender.vote = proposal;\r\n\r\n        // If 'proposal' is out of the range of the array,\r\n        // this will throw automatically and revert all\r\n        // changes.\r\n        proposals[proposal].voteCount += sender.weight;\r\n    }\r\n\r\n    /** \r\n     * @dev Computes the winning proposal taking all previous votes into account.\r\n     * @return winningProposal_ index of winning proposal in the proposals array\r\n     */\r\n    function winningProposal() public view\r\n            returns (uint winningProposal_)\r\n    {\r\n        uint winningVoteCount = 0;\r\n        for (uint p = 0; p < proposals.length; p++) {\r\n            if (proposals[p].voteCount > winningVoteCount) {\r\n                winningVoteCount = proposals[p].voteCount;\r\n                winningProposal_ = p;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** \r\n     * @dev Calls winningProposal() function to get the index of the winner contained in the proposals array and then\r\n     * @return winnerName_ the name of the winner\r\n     */\r\n    function winnerName() public view\r\n            returns (bytes32 winnerName_)\r\n    {\r\n        winnerName_ = proposals[winningProposal()].name;\r\n    }\r\n}\r\n`\r\n\r\nconst ballotTest = `// SPDX-License-Identifier: GPL-3.0\r\n\r\npragma solidity >=0.7.0 <0.8.0;\r\nimport \"remix_tests.sol\"; // this import is automatically injected by Remix.\r\nimport \"../contracts/3_Ballot.sol\";\r\n\r\ncontract BallotTest {\r\n   \r\n    bytes32[] proposalNames;\r\n   \r\n    Ballot ballotToTest;\r\n    function beforeAll () public {\r\n        proposalNames.push(bytes32(\"candidate1\"));\r\n        ballotToTest = new Ballot(proposalNames);\r\n    }\r\n    \r\n    function checkWinningProposal () public {\r\n        ballotToTest.vote(0);\r\n        Assert.equal(ballotToTest.winningProposal(), uint(0), \"proposal at index 0 should be the winning proposal\");\r\n        Assert.equal(ballotToTest.winnerName(), bytes32(\"candidate1\"), \"candidate1 should be the winner name\");\r\n    }\r\n    \r\n    function checkWinninProposalWithReturnValue () public view returns (bool) {\r\n        return ballotToTest.winningProposal() == 0;\r\n    }\r\n}\r\n`\r\nconst deployWithWeb3 = `// Right click on the script name and hit \"Run\" to execute\r\n(async () => {\r\n    try {\r\n        console.log('Running deployWithWeb3 script...')\r\n        \r\n        const contractName = 'Storage' // Change this for other contract\r\n        const constructorArgs = []    // Put constructor args (if any) here for your contract\r\n    \r\n        // Note that the script needs the ABI which is generated from the compilation artifact.\r\n        // Make sure contract is compiled and artifacts are generated\r\n        const artifactsPath = \\`browser/contracts/artifacts/\\${contractName}.json\\` // Change this for different path\r\n\r\n        const metadata = JSON.parse(await remix.call('fileManager', 'getFile', artifactsPath))\r\n        const accounts = await web3.eth.getAccounts()\r\n    \r\n        let contract = new web3.eth.Contract(metadata.abi)\r\n    \r\n        contract = contract.deploy({\r\n            data: metadata.data.bytecode.object,\r\n            arguments: constructorArgs\r\n        })\r\n    \r\n        const newContractInstance = await contract.send({\r\n            from: accounts[0],\r\n            gas: 1500000,\r\n            gasPrice: '30000000000'\r\n        })\r\n        console.log('Contract deployed at address: ', newContractInstance.options.address)\r\n    } catch (e) {\r\n        console.log(e.message)\r\n    }\r\n  })()`\r\n\r\nconst deployWithEthers = `// Right click on the script name and hit \"Run\" to execute\r\n(async () => {\r\n    try {\r\n        console.log('Running deployWithEthers script...')\r\n    \r\n        const contractName = 'Storage' // Change this for other contract\r\n        const constructorArgs = []    // Put constructor args (if any) here for your contract\r\n\r\n        // Note that the script needs the ABI which is generated from the compilation artifact.\r\n        // Make sure contract is compiled and artifacts are generated\r\n        const artifactsPath = \\`browser/contracts/artifacts/\\${contractName}.json\\` // Change this for different path\r\n    \r\n        const metadata = JSON.parse(await remix.call('fileManager', 'getFile', artifactsPath))\r\n        // 'web3Provider' is a remix global variable object\r\n        const signer = (new ethers.providers.Web3Provider(web3Provider)).getSigner()\r\n    \r\n        let factory = new ethers.ContractFactory(metadata.abi, metadata.data.bytecode.object, signer);\r\n    \r\n        let contract = await factory.deploy(...constructorArgs);\r\n    \r\n        console.log('Contract Address: ', contract.address);\r\n    \r\n        // The contract is NOT deployed yet; we must wait until it is mined\r\n        await contract.deployed()\r\n        console.log('Deployment successful.')\r\n    } catch (e) {\r\n        console.log(e.message)\r\n    }\r\n})()`\r\n\r\nconst readme = `REMIX EXAMPLE PROJECT\r\n\r\nRemix example project is the project which is there at the time of very first loading of Remix. It contains mainly 3 directories:\r\n'contracts', 'scripts' & 'tests'.\r\n\r\n'contracts' directory holds 3 contracts with different complexity level.\r\n'scripts' directory holds the scripts to deploy a contract using web3.js or ethers.js libraries.\r\n'tests' directory contains a test file with unit tests for 'Ballot' contract.\r\n\r\nDEPLOY CONTRACT\r\n\r\nA contract can be deployed using the scripts in 'scripts' folder. Currently, they are configured to deploy the 'Storage' contract.\r\nFor deployment of any other contract, 'contractName' and 'constructorArgs' should be update (along with other code if required).\r\n\r\nTo run a script, just right click on file name and click 'Run'.\r\n\r\nConsoles from script will appear in remix terminal.\r\n`\r\n\r\nmodule.exports = {\r\n  storage: { name: 'contracts/1_Storage.sol', content: storage },\r\n  owner: { name: 'contracts/2_Owner.sol', content: owner },\r\n  ballot: { name: 'contracts/3_Ballot.sol', content: ballot },\r\n  deployWithWeb3: { name: 'scripts/deploy_web3.js', content: deployWithWeb3 },\r\n  deployWithEthers: { name: 'scripts/deploy_ethers.js', content: deployWithEthers },\r\n  ballot_test: { name: 'tests/4_Ballot_test.sol', content: ballotTest },\r\n  readme: { name: 'README.txt', content: readme }\r\n}\r\n","'use strict'\r\nconst csjs = require('csjs-inject')\r\nconst globlalRegistry = require('../../global/registry')\r\n\r\nclass SourceHighlighter {\r\n  constructor (localRegistry) {\r\n    this._components = {}\r\n    this._components.registry = localRegistry || globlalRegistry\r\n    // dependencies\r\n    this._deps = {\r\n      editor: this._components.registry.get('editor').api,\r\n      config: this._components.registry.get('config').api,\r\n      fileManager: this._components.registry.get('filemanager').api,\r\n      compilerArtefacts: this._components.registry.get('compilersartefacts').api\r\n    }\r\n    this.position = null\r\n    this.statementMarker = null\r\n    this.fullLineMarker = null\r\n    this.source = null\r\n  }\r\n\r\n  currentSourceLocation (lineColumnPos, location) {\r\n    if (this.statementMarker) this._deps.editor.removeMarker(this.statementMarker, this.source)\r\n    if (this.fullLineMarker) this._deps.editor.removeMarker(this.fullLineMarker, this.source)\r\n    const lastCompilationResult = this._deps.compilerArtefacts.__last\r\n    if (location && location.file !== undefined && lastCompilationResult) {\r\n      const path = lastCompilationResult.getSourceName(location.file)\r\n      if (path) {\r\n        this.currentSourceLocationFromfileName(lineColumnPos, path)\r\n      }\r\n    }\r\n  }\r\n\r\n  async currentSourceLocationFromfileName (lineColumnPos, filePath, style) {\r\n    if (this.statementMarker) this._deps.editor.removeMarker(this.statementMarker, this.source)\r\n    if (this.fullLineMarker) this._deps.editor.removeMarker(this.fullLineMarker, this.source)\r\n    this.statementMarker = null\r\n    this.fullLineMarker = null\r\n    this.source = null\r\n    if (lineColumnPos) {\r\n      this.source = filePath\r\n      this.style = style || 'var(--info)'\r\n      // if (!this.source) this.source = this._deps.fileManager.currentFile()\r\n      if (this._deps.fileManager.currentFile() !== this.source) {\r\n        await this._deps.fileManager.open(this.source)\r\n        this.source = this._deps.fileManager.currentFile()\r\n      }\r\n\r\n      const css = csjs`\r\n        .highlightcode {\r\n          position:absolute;\r\n          z-index:20;\r\n          opacity: 0.3;\r\n          background-color: ${this.style};\r\n        }\r\n        .highlightcode_fullLine {\r\n          position:absolute;\r\n          z-index:20;\r\n          opacity: 0.5;\r\n          background-color: ${this.style};\r\n        }\r\n        .customBackgroundColor {\r\n          background-color: ${this.style};\r\n        }\r\n        `\r\n\r\n      this.statementMarker = this._deps.editor.addMarker(lineColumnPos, this.source, css.highlightcode.className + ' ' + css.customBackgroundColor.className + ' ' + `highlightLine${lineColumnPos.start.line}`)\r\n      this._deps.editor.scrollToLine(lineColumnPos.start.line, true, true, function () {})\r\n      this.position = lineColumnPos\r\n      if (lineColumnPos.start.line === lineColumnPos.end.line) {\r\n        this.fullLineMarker = this._deps.editor.addMarker({\r\n          start: {\r\n            line: lineColumnPos.start.line,\r\n            column: 0\r\n          },\r\n          end: {\r\n            line: lineColumnPos.start.line + 1,\r\n            column: 0\r\n          }\r\n        }, this.source, css.highlightcode_fullLine.className)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = SourceHighlighter\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .contextview {\r\n    opacity             : 1;\r\n    position            : relative;\r\n    height              : 25px;\r\n  }\r\n  .container {\r\n    padding             : 1px 15px;\r\n  }\r\n  .line {\r\n    display             : flex;\r\n    justify-content     : flex-end;\r\n    align-items         : center;\r\n    text-overflow       : ellipsis;\r\n    overflow            : hidden;\r\n    white-space         : nowrap;\r\n    font-size           : 13px;\r\n  }\r\n  .type {\r\n    font-style        : italic;\r\n    margin-right      : 5px;\r\n  }\r\n  .name  {\r\n    font-weight       : bold;\r\n  }\r\n  .jump {\r\n    cursor            : pointer;\r\n    margin            : 0 5px;\r\n  }\r\n  .jump:hover              {\r\n    color             : var(--secondary);\r\n  }\r\n  .referencesnb {\r\n    float             : right;\r\n    margin-left       : 15px;\r\n  }\r\n  .gasEstimation {\r\n    margin-right      : 15px;\r\n    display           : flex;\r\n    align-items       : center;\r\n  }\r\n  .gasStationIcon {\r\n    margin-right      : 5px;\r\n  }\r\n  .contextviewcontainer {\r\n    z-index           : 50;\r\n    border-radius     : 1px;\r\n    border            : 2px solid var(--secondary);\r\n  }\r\n  .contextviewcontainer{\r\n    z-index           : 50;\r\n    border-radius     : 1px;\r\n    border            : 2px solid var(--secondary);\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","'use strict'\r\nimport { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\nvar CompilerAbstract = require('../compiler/compiler-abstract')\r\n\r\nconst profile = {\r\n  name: 'compilerMetadata',\r\n  methods: ['deployMetadataOf'],\r\n  events: [],\r\n  version: packageJson.version\r\n}\r\n\r\nclass CompilerMetadata extends Plugin {\r\n  constructor (blockchain, fileManager, config) {\r\n    super(profile)\r\n    this.blockchain = blockchain\r\n    this.fileManager = fileManager\r\n    this.config = config\r\n    this.networks = ['VM:-', 'main:1', 'ropsten:3', 'rinkeby:4', 'kovan:42', 'görli:5', 'Custom']\r\n    this.innerPath = 'artifacts'\r\n  }\r\n\r\n  _JSONFileName (path, contractName) {\r\n    return path + '/' + this.innerPath + '/' + contractName + '.json'\r\n  }\r\n\r\n  _MetadataFileName (path, contractName) {\r\n    return path + '/' + this.innerPath + '/' + contractName + '_metadata' + '.json'\r\n  }\r\n\r\n  onActivation () {\r\n    var self = this\r\n    this.on('solidity', 'compilationFinished', (file, source, languageVersion, data) => {\r\n      if (!self.config.get('settings/generate-contract-metadata')) return\r\n      const compiler = new CompilerAbstract(languageVersion, data, source)\r\n      var provider = self.fileManager.currentFileProvider()\r\n      var path = self.fileManager.currentPath()\r\n      if (provider && path) {\r\n        compiler.visitContracts((contract) => {\r\n          if (contract.file !== source.target) return\r\n\r\n          var fileName = self._JSONFileName(path, contract.name)\r\n          var metadataFileName = self._MetadataFileName(path, contract.name)\r\n          provider.get(fileName, (error, content) => {\r\n            if (!error) {\r\n              content = content || '{}'\r\n              var metadata\r\n              try {\r\n                metadata = JSON.parse(content)\r\n              } catch (e) {\r\n                console.log(e)\r\n              }\r\n\r\n              var deploy = metadata.deploy || {}\r\n              self.networks.forEach((network) => {\r\n                deploy[network] = self._syncContext(contract, deploy[network] || {})\r\n              })\r\n\r\n              let parsedMetadata\r\n              try {\r\n                parsedMetadata = JSON.parse(contract.object.metadata)\r\n              } catch (e) {\r\n                console.log(e)\r\n              }\r\n              if (parsedMetadata) provider.set(metadataFileName, JSON.stringify(parsedMetadata, null, '\\t'))\r\n\r\n              var data = {\r\n                deploy,\r\n                data: {\r\n                  bytecode: contract.object.evm.bytecode,\r\n                  deployedBytecode: contract.object.evm.deployedBytecode,\r\n                  gasEstimates: contract.object.evm.gasEstimates,\r\n                  methodIdentifiers: contract.object.evm.methodIdentifiers\r\n                },\r\n                abi: contract.object.abi\r\n              }\r\n\r\n              provider.set(fileName, JSON.stringify(data, null, '\\t'))\r\n            }\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  _syncContext (contract, metadata) {\r\n    var linkReferences = metadata.linkReferences\r\n    var autoDeployLib = metadata.autoDeployLib\r\n    if (!linkReferences) linkReferences = {}\r\n    if (autoDeployLib === undefined) autoDeployLib = true\r\n\r\n    for (var libFile in contract.object.evm.bytecode.linkReferences) {\r\n      if (!linkReferences[libFile]) linkReferences[libFile] = {}\r\n      for (var lib in contract.object.evm.bytecode.linkReferences[libFile]) {\r\n        if (!linkReferences[libFile][lib]) {\r\n          linkReferences[libFile][lib] = '<address>'\r\n        }\r\n      }\r\n    }\r\n    metadata.linkReferences = linkReferences\r\n    metadata.autoDeployLib = autoDeployLib\r\n    return metadata\r\n  }\r\n\r\n  // TODO: is only called by dropdownLogic and can be moved there\r\n  deployMetadataOf (contractName, fileLocation) {\r\n    return new Promise((resolve, reject) => {\r\n      var provider\r\n      let path\r\n      if (fileLocation) {\r\n        provider = this.fileManager.fileProviderOf(fileLocation)\r\n        path = fileLocation.split('/')\r\n        path.pop()\r\n        path = path.join('/')\r\n      } else {\r\n        provider = this.fileManager.currentFileProvider()\r\n        path = this.fileManager.currentPath()\r\n      }\r\n\r\n      if (provider && path) {\r\n        this.blockchain.detectNetwork((err, { id, name } = {}) => {\r\n          if (err) {\r\n            console.log(err)\r\n            reject(err)\r\n          } else {\r\n            var fileName = this._JSONFileName(path, contractName)\r\n            provider.get(fileName, (error, content) => {\r\n              if (error) return reject(error)\r\n              if (!content) return resolve()\r\n              try {\r\n                var metadata = JSON.parse(content)\r\n                metadata = metadata.deploy || {}\r\n                return resolve(metadata[name + ':' + id] || metadata[name] || metadata[id] || metadata[name.toLowerCase() + ':' + id] || metadata[name.toLowerCase()])\r\n              } catch (e) {\r\n                reject(e.message)\r\n              }\r\n            })\r\n          }\r\n        })\r\n      } else {\r\n        reject(new Error(`Please select the folder in the file explorer where the metadata of ${contractName} can be found`))\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = CompilerMetadata\r\n","/* global FileReader */\r\n/* global fetch */\r\nconst async = require('async')\r\nconst Gists = require('gists')\r\nconst modalDialogCustom = require('../ui/modal-dialog-custom')\r\nconst tooltip = require('../ui/tooltip')\r\nconst QueryParams = require('../../lib/query-params')\r\nconst helper = require('../../lib/helper')\r\nconst yo = require('yo-yo')\r\nconst Treeview = require('../ui/TreeView')\r\nconst modalDialog = require('../ui/modaldialog')\r\nconst EventManager = require('../../lib/events')\r\nconst contextMenu = require('../ui/contextMenu')\r\nconst css = require('./styles/file-explorer-styles')\r\nconst globalRegistry = require('../../global/registry')\r\nconst queryParams = new QueryParams()\r\nlet MENU_HANDLE\r\n\r\nfunction fileExplorer (localRegistry, files, menuItems, plugin) {\r\n  var self = this\r\n  this.events = new EventManager()\r\n  // file provider backend\r\n  this.files = files\r\n  // element currently focused on\r\n  this.focusElement = null\r\n  // path currently focused on\r\n  this.focusPath = null\r\n  const allItems =\r\n    [\r\n      {\r\n        action: 'createNewFile',\r\n        title: 'Create New File',\r\n        icon: 'fas fa-plus-circle'\r\n      },\r\n      {\r\n        action: 'publishToGist',\r\n        title: 'Publish all [browser] explorer files to a github gist',\r\n        icon: 'fab fa-github'\r\n      },\r\n      {\r\n        action: 'uploadFile',\r\n        title: 'Add Local file to the Browser Storage Explorer',\r\n        icon: 'far fa-folder-open'\r\n      },\r\n      {\r\n        action: 'updateGist',\r\n        title: 'Update the current [gist] explorer',\r\n        icon: 'fab fa-github'\r\n      }\r\n    ]\r\n  // menu items\r\n  this.menuItems = allItems.filter(\r\n    (item) => {\r\n      if (menuItems) return menuItems.find((name) => { return name === item.action })\r\n    }\r\n  )\r\n\r\n  self._components = {}\r\n  self._components.registry = localRegistry || globalRegistry\r\n  self._deps = {\r\n    config: self._components.registry.get('config').api,\r\n    editor: self._components.registry.get('editor').api,\r\n    fileManager: self._components.registry.get('filemanager').api\r\n  }\r\n\r\n  self.events.register('focus', function (path) {\r\n    self._deps.fileManager.open(path)\r\n  })\r\n\r\n  self._components.registry.put({ api: self, name: `fileexplorer/${self.files.type}` })\r\n\r\n  // warn if file changed outside of Remix\r\n  function remixdDialog () {\r\n    return yo`<div>This file has been changed outside of Remix IDE.</div>`\r\n  }\r\n\r\n  this.files.event.register('fileExternallyChanged', (path, file) => {\r\n    if (self._deps.config.get('currentFile') === path && self._deps.editor.currentContent() && self._deps.editor.currentContent() !== file.content) {\r\n      if (this.files.isReadOnly(path)) return self._deps.editor.setText(file.content)\r\n\r\n      modalDialog(path + ' changed', remixdDialog(),\r\n        {\r\n          label: 'Replace by the new content',\r\n          fn: () => {\r\n            self._deps.editor.setText(file.content)\r\n          }\r\n        },\r\n        {\r\n          label: 'Keep the content displayed in Remix',\r\n          fn: () => {}\r\n        }\r\n      )\r\n    }\r\n  })\r\n\r\n  // register to event of the file provider\r\n  files.event.register('fileRemoved', fileRemoved)\r\n  files.event.register('fileRenamed', fileRenamed)\r\n  files.event.register('fileRenamedError', fileRenamedError)\r\n  files.event.register('fileAdded', fileAdded)\r\n  files.event.register('folderAdded', folderAdded)\r\n\r\n  function fileRenamedError (error) {\r\n    modalDialogCustom.alert(error)\r\n  }\r\n\r\n  function fileAdded (filepath) {\r\n    self.ensureRoot(() => {\r\n      const folderpath = filepath.split('/').slice(0, -1).join('/')\r\n      const currentTree = self.treeView.nodeAt(folderpath)\r\n      if (!self.treeView.isExpanded(folderpath)) self.treeView.expand(folderpath)\r\n      if (currentTree) {\r\n        self.files.resolveDirectory(folderpath, (error, fileTree) => {\r\n          if (error) console.error(error)\r\n          if (!fileTree) return\r\n          fileTree = normalize(folderpath, fileTree)\r\n          self.treeView.updateNodeFromJSON(folderpath, fileTree, true)\r\n          self.focusElement = self.treeView.labelAt(self.focusPath)\r\n          // TODO: here we update the selected file (it applicable)\r\n          // cause we are refreshing the interface of the whole directory when there's a new file.\r\n          if (self.focusElement && !self.focusElement.classList.contains('bg-secondary')) {\r\n            self.focusElement.classList.add('bg-secondary')\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  function extractNameFromKey (key) {\r\n    const keyPath = key.split('/')\r\n\r\n    return keyPath[keyPath.length - 1]\r\n  }\r\n\r\n  function folderAdded (folderpath) {\r\n    self.ensureRoot(() => {\r\n      folderpath = folderpath.split('/').slice(0, -1).join('/')\r\n      self.files.resolveDirectory(folderpath, (error, fileTree) => {\r\n        if (error) console.error(error)\r\n        if (!fileTree) return\r\n        fileTree = normalize(folderpath, fileTree)\r\n        self.treeView.updateNodeFromJSON(folderpath, fileTree, true)\r\n        if (!self.treeView.isExpanded(folderpath)) self.treeView.expand(folderpath)\r\n      })\r\n    })\r\n  }\r\n\r\n  function fileRemoved (filepath) {\r\n    const label = self.treeView.labelAt(filepath)\r\n    filepath = filepath.split('/').slice(0, -1).join('/')\r\n\r\n    if (label && label.parentElement) {\r\n      label.parentElement.removeChild(label)\r\n    }\r\n\r\n    self.updatePath(filepath)\r\n  }\r\n\r\n  function fileRenamed (oldName, newName, isFolder) {\r\n    fileRemoved(oldName)\r\n    fileAdded(newName)\r\n  }\r\n\r\n  // make interface and register to nodeClick, leafClick\r\n  self.treeView = new Treeview({\r\n    extractData: function extractData (value, tree, key) {\r\n      var newValue = {}\r\n      // var isReadOnly = false\r\n      var isFile = false\r\n      Object.keys(value).filter(function keep (x) {\r\n        if (x === '/content') isFile = true\r\n        if (x[0] !== '/') return true\r\n      }).forEach(function (x) { newValue[x] = value[x] })\r\n      return {\r\n        path: (tree || {}).path ? tree.path + '/' + key : key,\r\n        children: isFile ? undefined\r\n          : value instanceof Array ? value.map((item, index) => ({\r\n            key: index, value: item\r\n          })) : value instanceof Object ? Object.keys(value).map(subkey => ({\r\n            key: subkey, value: value[subkey]\r\n          })) : undefined\r\n      }\r\n    },\r\n    formatSelf: function formatSelf (key, data, li) {\r\n      const isRoot = data.path === self.files.type\r\n      const isFolder = !!data.children\r\n      return yo`\r\n        <div class=\"${css.items}\">\r\n          <span\r\n            title=\"${data.path}\"\r\n            class=\"${css.label} ${!isRoot ? !isFolder ? css.leaf : css.folder : ''}\"\r\n            data-path=\"${data.path}\"\r\n            style=\"${isRoot ? 'font-weight:bold;' : ''}\"\r\n            onkeydown=${editModeOff}\r\n            onblur=${editModeOff}\r\n          >\r\n            ${key.split('/').pop()}\r\n          </span>\r\n          ${isRoot ? self.renderMenuItems() : ''}\r\n        </div>\r\n      `\r\n    }\r\n  })\r\n\r\n  /**\r\n   * Extracts first two folders as a subpath from the path.\r\n   **/\r\n  function extractExternalFolder (path) {\r\n    const firstSlIndex = path.indexOf('/', 1)\r\n    if (firstSlIndex === -1) return ''\r\n    const secondSlIndex = path.indexOf('/', firstSlIndex + 1)\r\n    if (secondSlIndex === -1) return ''\r\n    return path.substring(0, secondSlIndex)\r\n  }\r\n\r\n  self.treeView.event.register('nodeRightClick', function (key, data, label, event) {\r\n    if (self.files.readonly) return\r\n    if (key === self.files.type) return\r\n    MENU_HANDLE && MENU_HANDLE.hide(null, true)\r\n    const actions = {}\r\n    const provider = self._deps.fileManager.fileProviderOf(key)\r\n    actions['Create File'] = () => self.createNewFile(key)\r\n    actions['Create Folder'] = () => self.createNewFolder(key)\r\n    // @todo(#2386) not fully implemented. Readd later when fixed\r\n    if (provider.isExternalFolder(key)) {\r\n      /* actions['Discard changes'] = () => {\r\n        modalDialogCustom.confirm(\r\n          'Discard changes',\r\n          'Are you sure you want to discard all your changes?',\r\n          () => { self.files.discardChanges(key) },\r\n          () => {}\r\n        )\r\n      } */\r\n    } else {\r\n      const folderPath = extractExternalFolder(key)\r\n      actions.Rename = () => {\r\n        if (self.files.isReadOnly(key)) { return tooltip('cannot rename folder. ' + self.files.type + ' is a read only explorer') }\r\n        var name = label.querySelector('span[data-path=\"' + key + '\"]')\r\n        if (name) editModeOn(name)\r\n      }\r\n      actions.Delete = () => {\r\n        if (self.files.isReadOnly(key)) { return tooltip('cannot delete folder. ' + self.files.type + ' is a read only explorer') }\r\n        const currentFoldername = extractNameFromKey(key)\r\n\r\n        modalDialogCustom.confirm('Confirm to delete folder', `Are you sure you want to delete ${currentFoldername} folder?`,\r\n          async () => {\r\n            const fileManager = self._deps.fileManager\r\n            const removeFolder = await fileManager.remove(key)\r\n\r\n            if (!removeFolder) {\r\n              tooltip(`failed to remove ${key}. Make sure the directory is empty before removing it.`)\r\n            }\r\n          }, () => {})\r\n      }\r\n      if (folderPath === 'browser/gists') {\r\n        actions['Push changes to gist'] = () => {\r\n          const id = key.substr(key.lastIndexOf('/') + 1, key.length - 1)\r\n          modalDialogCustom.confirm(\r\n            'Push back to Gist',\r\n            'Are you sure you want to push all your changes back to Gist?',\r\n            () => { self.toGist(id) },\r\n            () => {}\r\n          )\r\n        }\r\n      }\r\n    }\r\n    MENU_HANDLE = contextMenu(event, actions)\r\n  })\r\n\r\n  self.treeView.event.register('leafRightClick', function (key, data, label, event) {\r\n    if (key === self.files.type) return\r\n    MENU_HANDLE && MENU_HANDLE.hide(null, true)\r\n    const actions = {}\r\n    const provider = self._deps.fileManager.fileProviderOf(key)\r\n    if (!provider.isExternalFolder(key)) {\r\n      actions['Create Folder'] = () => self.createNewFolder(self._deps.fileManager.extractPathOf(key))\r\n      actions.Rename = () => {\r\n        if (self.files.isReadOnly(key)) { return tooltip('cannot rename file. ' + self.files.type + ' is a read only explorer') }\r\n        var name = label.querySelector('span[data-path=\"' + key + '\"]')\r\n        if (name) editModeOn(name)\r\n      }\r\n      actions.Delete = () => {\r\n        if (self.files.isReadOnly(key)) { return tooltip('cannot delete file. ' + self.files.type + ' is a read only explorer') }\r\n        const currentFilename = extractNameFromKey(key)\r\n\r\n        modalDialogCustom.confirm(\r\n          'Delete file', `Are you sure you want to delete ${currentFilename} file?`,\r\n          async () => {\r\n            const fileManager = self._deps.fileManager\r\n            const removeFile = await fileManager.remove(key)\r\n\r\n            if (!removeFile) {\r\n              tooltip(`Failed to remove file ${key}.`)\r\n            }\r\n          },\r\n          () => {}\r\n        )\r\n      }\r\n      if (key.endsWith('.js')) {\r\n        actions.Run = async () => {\r\n          provider.get(key, (error, content) => {\r\n            if (error) return console.log(error)\r\n            plugin.call('scriptRunner', 'execute', content)\r\n          })\r\n        }\r\n      }\r\n    }\r\n    MENU_HANDLE = contextMenu(event, actions)\r\n  })\r\n\r\n  self.treeView.event.register('leafClick', function (key, data, label) {\r\n    self.events.trigger('focus', [key])\r\n  })\r\n\r\n  self.treeView.event.register('nodeClick', function (path, childrenContainer) {\r\n    if (!childrenContainer) return\r\n    if (childrenContainer.style.display === 'none') return\r\n    self.updatePath(path)\r\n  })\r\n\r\n  // register to main app, trigger when the current file in the editor changed\r\n  self._deps.fileManager.events.on('currentFileChanged', (newFile) => {\r\n    const provider = self._deps.fileManager.fileProviderOf(newFile)\r\n    if (self.focusElement && self.focusPath !== newFile) {\r\n      self.focusElement.classList.remove('bg-secondary')\r\n      self.focusElement = null\r\n      self.focusPath = null\r\n    }\r\n    if (provider && (provider.type === files.type)) {\r\n      self.focusElement = self.treeView.labelAt(newFile)\r\n      if (self.focusElement) {\r\n        self.focusElement.classList.add('bg-secondary')\r\n        self.focusPath = newFile\r\n      }\r\n    }\r\n  })\r\n\r\n  self._deps.fileManager.events.on('noFileSelected', () => {\r\n    if (self.focusElement) {\r\n      self.focusElement.classList.remove('bg-secondary')\r\n      self.focusElement = null\r\n      self.focusPath = null\r\n    }\r\n  })\r\n\r\n  var textUnderEdit = null\r\n\r\n  function selectElementContents (el) {\r\n    var range = document.createRange()\r\n    range.selectNodeContents(el)\r\n    var sel = window.getSelection()\r\n    sel.removeAllRanges()\r\n    sel.addRange(range)\r\n  }\r\n\r\n  function editModeOn (label) {\r\n    textUnderEdit = label.innerText\r\n    label.setAttribute('contenteditable', true)\r\n    label.classList.add('bg-light')\r\n    label.focus()\r\n    selectElementContents(label)\r\n  }\r\n\r\n  function editModeOff (event) {\r\n    const label = this\r\n\r\n    const isFolder = label.className.indexOf('folder') !== -1\r\n    function rename () {\r\n      var newPath = label.dataset.path\r\n      newPath = newPath.split('/')\r\n      newPath[newPath.length - 1] = label.innerText\r\n      newPath = newPath.join('/')\r\n      if (label.innerText === '') {\r\n        modalDialogCustom.alert('File name cannot be empty')\r\n        label.innerText = textUnderEdit\r\n      } else if (helper.checkSpecialChars(label.innerText)) {\r\n        modalDialogCustom.alert('Special characters are not allowed')\r\n        label.innerText = textUnderEdit\r\n      } else {\r\n        files.exists(newPath, (error, exist) => {\r\n          if (error) return modalDialogCustom.alert('Unexpected error while renaming: ' + error)\r\n          if (!exist) {\r\n            files.rename(label.dataset.path, newPath, isFolder)\r\n          } else {\r\n            modalDialogCustom.alert('File already exists.')\r\n            label.innerText = textUnderEdit\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    if (event.which === 13) event.preventDefault()\r\n    if ((event.type === 'blur' || event.which === 13) && label.getAttribute('contenteditable')) {\r\n      var save = textUnderEdit !== label.innerText\r\n      if (save) {\r\n        modalDialogCustom.confirm(\r\n          'Confirm to rename a ' + (isFolder ? 'folder' : 'file'),\r\n          'Are you sure you want to rename ' + textUnderEdit + '?',\r\n          () => { rename() },\r\n          () => { label.innerText = textUnderEdit }\r\n        )\r\n      }\r\n      label.removeAttribute('contenteditable')\r\n      label.classList.remove('bg-light')\r\n    }\r\n  }\r\n}\r\n\r\nfileExplorer.prototype.updatePath = function (path) {\r\n  this.files.resolveDirectory(path, (error, fileTree) => {\r\n    if (error) console.error(error)\r\n    if (!fileTree) return\r\n    var newTree = normalize(path, fileTree)\r\n    this.treeView.updateNodeFromJSON(path, newTree, true)\r\n  })\r\n}\r\n\r\nfileExplorer.prototype.hide = function () {\r\n  if (this.container) this.container.style.display = 'none'\r\n}\r\n\r\nfileExplorer.prototype.show = function () {\r\n  if (this.container) this.container.style.display = 'block'\r\n}\r\n\r\nfileExplorer.prototype.init = function () {\r\n  this.container = yo`<div></div>`\r\n  return this.container\r\n}\r\n\r\nfileExplorer.prototype.publishToGist = function () {\r\n  modalDialogCustom.confirm(\r\n    'Create a public gist',\r\n    'Are you sure you want to publish all your files in browser directory anonymously as a public gist on github.com? Note: this will not include directories.',\r\n    () => { this.toGist() }\r\n  )\r\n}\r\n\r\nfileExplorer.prototype.uploadFile = function (event) {\r\n  // TODO The file explorer is merely a view on the current state of\r\n  // the files module. Please ask the user here if they want to overwrite\r\n  // a file and then just use `files.add`. The file explorer will\r\n  // pick that up via the 'fileAdded' event from the files module.\r\n\r\n  const self = this\r\n\r\n  ;[...event.target.files].forEach((file) => {\r\n    const files = this.files\r\n    function loadFile () {\r\n      var fileReader = new FileReader()\r\n      fileReader.onload = async function (event) {\r\n        if (helper.checkSpecialChars(file.name)) {\r\n          modalDialogCustom.alert('Special characters are not allowed')\r\n          return\r\n        }\r\n        var success = await files.set(name, event.target.result)\r\n        if (!success) {\r\n          modalDialogCustom.alert('Failed to create file ' + name)\r\n        } else {\r\n          self.events.trigger('focus', [name])\r\n        }\r\n      }\r\n      fileReader.readAsText(file)\r\n    }\r\n    var name = files.type + '/' + file.name\r\n    files.exists(name, (error, exist) => {\r\n      if (error) console.log(error)\r\n      if (!exist) {\r\n        loadFile()\r\n      } else {\r\n        modalDialogCustom.confirm('Confirm overwrite', `The file ${name} already exists! Would you like to overwrite it?`, () => { loadFile() })\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nfileExplorer.prototype.toGist = function (id) {\r\n  const proccedResult = function (error, data) {\r\n    if (error) {\r\n      modalDialogCustom.alert('Failed to manage gist: ' + error)\r\n      console.log('Failed to manage gist: ' + error)\r\n    } else {\r\n      if (data.html_url) {\r\n        modalDialogCustom.confirm('Gist is ready', `The gist is at ${data.html_url}. Would you like to open it in a new window?`, () => {\r\n          window.open(data.html_url, '_blank')\r\n        })\r\n      } else {\r\n        modalDialogCustom.alert(data.message + ' ' + data.documentation_url + ' ' + JSON.stringify(data.errors, null, '\\t'))\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This function is to get the original content of given gist\r\n   * @params id is the gist id to fetch\r\n   */\r\n  async function getOriginalFiles (id) {\r\n    if (!id) {\r\n      return []\r\n    }\r\n\r\n    const url = `https://api.github.com/gists/${id}`\r\n    const res = await fetch(url)\r\n    const data = await res.json()\r\n    return data.files || []\r\n  }\r\n\r\n  // If 'id' is not defined, it is not a gist update but a creation so we have to take the files from the browser explorer.\r\n  const folder = id ? 'browser/gists/' + id : 'browser/'\r\n  this.packageFiles(this.files, folder, (error, packaged) => {\r\n    if (error) {\r\n      console.log(error)\r\n      modalDialogCustom.alert('Failed to create gist: ' + error.message)\r\n    } else {\r\n      // check for token\r\n      var tokenAccess = this._deps.config.get('settings/gist-access-token')\r\n      if (!tokenAccess) {\r\n        modalDialogCustom.alert(\r\n          'Remix requires an access token (which includes gists creation permission). Please go to the settings tab to create one.'\r\n        )\r\n      } else {\r\n        const description = 'Created using remix-ide: Realtime Ethereum Contract Compiler and Runtime. \\n Load this file by pasting this gists URL or ID at https://remix.ethereum.org/#version=' +\r\n          queryParams.get().version + '&optimize=' + queryParams.get().optimize + '&runs=' + queryParams.get().runs + '&gist='\r\n        const gists = new Gists({ token: tokenAccess })\r\n\r\n        if (id) {\r\n          const originalFileList = getOriginalFiles(id)\r\n          // Telling the GIST API to remove files\r\n          const updatedFileList = Object.keys(packaged)\r\n          const allItems = Object.keys(originalFileList)\r\n            .filter(fileName => updatedFileList.indexOf(fileName) === -1)\r\n            .reduce((acc, deleteFileName) => ({\r\n              ...acc,\r\n              [deleteFileName]: null\r\n            }), originalFileList)\r\n          // adding new files\r\n          updatedFileList.forEach((file) => {\r\n            const _items = file.split('/')\r\n            const _fileName = _items[_items.length - 1]\r\n            allItems[_fileName] = packaged[file]\r\n          })\r\n\r\n          tooltip('Saving gist (' + id + ') ...')\r\n          gists.edit({\r\n            description: description,\r\n            public: true,\r\n            files: allItems,\r\n            id: id\r\n          }, (error, result) => {\r\n            proccedResult(error, result)\r\n            if (!error) {\r\n              for (const key in allItems) {\r\n                if (allItems[key] === null) delete allItems[key]\r\n              }\r\n            }\r\n          })\r\n        } else {\r\n          // id is not existing, need to create a new gist\r\n          tooltip('Creating a new gist ...')\r\n          gists.create({\r\n            description: description,\r\n            public: true,\r\n            files: packaged\r\n          }, (error, result) => {\r\n            proccedResult(error, result)\r\n          })\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n// return all the files, except the temporary/readonly ones..\r\nfileExplorer.prototype.packageFiles = function (filesProvider, directory, callback) {\r\n  const ret = {}\r\n  filesProvider.resolveDirectory(directory, (error, files) => {\r\n    if (error) callback(error)\r\n    else {\r\n      async.eachSeries(Object.keys(files), (path, cb) => {\r\n        if (filesProvider.isDirectory(path)) {\r\n          cb()\r\n        } else {\r\n          filesProvider.get(path, (error, content) => {\r\n            if (error) return cb(error)\r\n            if (/^\\s+$/.test(content) || !content.length) {\r\n              content = '// this line is added to create a gist. Empty file is not allowed.'\r\n            }\r\n            ret[path] = { content }\r\n            cb()\r\n          })\r\n        }\r\n      }, (error) => {\r\n        callback(error, ret)\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfileExplorer.prototype.createNewFile = function (parentFolder = 'browser') {\r\n  const self = this\r\n  modalDialogCustom.prompt('Create new file', 'File Name (e.g Untitled.sol)', 'Untitled.sol', (input) => {\r\n    if (!input) input = 'New file'\r\n    helper.createNonClashingName(parentFolder + '/' + input, self.files, async (error, newName) => {\r\n      if (error) return tooltip('Failed to create file ' + newName + ' ' + error)\r\n      const fileManager = self._deps.fileManager\r\n      const createFile = await fileManager.writeFile(newName, '')\r\n\r\n      if (!createFile) {\r\n        tooltip('Failed to create file ' + newName)\r\n      } else {\r\n        await fileManager.open(newName)\r\n        if (newName.includes('_test.sol')) {\r\n          self.events.trigger('newTestFileCreated', [newName])\r\n        }\r\n      }\r\n    })\r\n  }, null, true)\r\n}\r\n\r\nfileExplorer.prototype.createNewFolder = function (parentFolder) {\r\n  const self = this\r\n  modalDialogCustom.prompt('Create new folder', '', 'New folder', (input) => {\r\n    if (!input) {\r\n      return tooltip('Failed to create folder. The name can not be empty')\r\n    }\r\n\r\n    const currentPath = !parentFolder ? self._deps.fileManager.currentPath() : parentFolder\r\n    let newName = currentPath ? currentPath + '/' + input : self.files.type + '/' + input\r\n\r\n    newName = newName + '/'\r\n    self.files.exists(newName, (error, exist) => {\r\n      if (error) return tooltip('Unexpected error while creating folder: ' + error)\r\n      if (!exist) {\r\n        self.files.set(newName, '')\r\n      } else {\r\n        tooltip('Folder already exists.', () => {})\r\n      }\r\n    })\r\n  }, null, true)\r\n}\r\n\r\nfileExplorer.prototype.renderMenuItems = function () {\r\n  let items = ''\r\n  if (this.menuItems) {\r\n    items = this.menuItems.map(({ action, title, icon }) => {\r\n      if (action === 'uploadFile') {\r\n        return yo`\r\n          <label\r\n            id=${action}\r\n            data-id=\"fileExplorerUploadFile${action}\"\r\n            class=\"${icon} mb-0 ${css.newFile}\"\r\n            title=\"${title}\"\r\n          >\r\n            <input id=\"fileUpload\" data-id=\"fileExplorerFileUpload\" type=\"file\" onchange=${(event) => {\r\n              event.stopPropagation()\r\n              this.uploadFile(event)\r\n            }} multiple />\r\n          </label>\r\n        `\r\n      } else {\r\n        return yo`\r\n          <span\r\n            id=${action}\r\n            data-id=\"fileExplorerNewFile${action}\"\r\n            onclick=${(event) => { event.stopPropagation(); this[action]() }}\r\n            class=\"newFile ${icon} ${css.newFile}\"\r\n            title=${title}\r\n          >\r\n          </span>\r\n        `\r\n      }\r\n    })\r\n  }\r\n  return yo`<span class=\" ${css.menu}\">${items}</span>`\r\n}\r\n\r\nfileExplorer.prototype.ensureRoot = function (cb) {\r\n  cb = cb || (() => {})\r\n  var self = this\r\n  if (self.element) return cb()\r\n  const root = {}\r\n  root[this.files.type] = {}\r\n  var element = self.treeView.render(root, false)\r\n  element.classList.add(css.fileexplorer)\r\n  element.events = self.events\r\n  element.api = self.api\r\n  self.container.appendChild(element)\r\n  self.element = element\r\n  if (cb) cb()\r\n  self.treeView.expand(self.files.type)\r\n}\r\n\r\nfunction normalize (path, filesList) {\r\n  var prefix = path.split('/')[0]\r\n  var newList = {}\r\n  Object.keys(filesList).forEach(key => {\r\n    newList[prefix + '/' + key] = filesList[key].isDirectory ? {} : { '/content': true }\r\n  })\r\n  return newList\r\n}\r\n\r\nmodule.exports = fileExplorer\r\n","'use strict'\r\n\r\nimport yo from 'yo-yo'\r\nimport async from 'async'\r\nimport { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\nconst EventEmitter = require('events')\r\nconst globalRegistry = require('../../global/registry')\r\nconst toaster = require('../ui/tooltip')\r\nconst modalDialogCustom = require('../ui/modal-dialog-custom')\r\nconst helper = require('../../lib/helper.js')\r\n\r\n/*\r\n  attach to files event (removed renamed)\r\n  trigger: currentFileChanged\r\n*/\r\n\r\nconst profile = {\r\n  name: 'fileManager',\r\n  displayName: 'File manager',\r\n  description: 'Service - read/write to any files or folders, require giving permissions',\r\n  icon: 'assets/img/fileManager.webp',\r\n  permission: true,\r\n  version: packageJson.version,\r\n  methods: ['file', 'exists', 'open', 'writeFile', 'readFile', 'copyFile', 'rename', 'mkdir', 'readdir', 'remove', 'getCurrentFile', 'getFile', 'getFolder', 'setFile', 'switchFile'],\r\n  kind: 'file-system'\r\n}\r\nconst errorMsg = {\r\n  ENOENT: 'No such file or directory',\r\n  EISDIR: 'Path is a directory',\r\n  ENOTDIR: 'Path is not on a directory',\r\n  EEXIST: 'File already exists',\r\n  EPERM: 'Permission denied'\r\n}\r\nconst createError = (err) => {\r\n  return new Error(`${errorMsg[err.code]} ${err.message || ''}`)\r\n}\r\n\r\nclass FileManager extends Plugin {\r\n  constructor (editor, appManager) {\r\n    super(profile)\r\n    this.openedFiles = {} // list all opened files\r\n    this.events = new EventEmitter()\r\n    this.editor = editor\r\n    this._components = {}\r\n    this._components.registry = globalRegistry\r\n    this.appManager = appManager\r\n    this.init()\r\n  }\r\n\r\n  /**\r\n   * Emit error if path doesn't exist\r\n   * @param {string} path path of the file/directory\r\n   * @param {string} message message to display if path doesn't exist.\r\n   */\r\n  async _handleExists (path, message) {\r\n    const exists = await this.exists(path)\r\n\r\n    if (!exists) {\r\n      throw createError({ code: 'ENOENT', message })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emit error if path is not a file\r\n   * @param {string} path path of the file/directory\r\n   * @param {string} message message to display if path is not a file.\r\n   */\r\n  async _handleIsFile (path, message) {\r\n    const isFile = await this.isFile(path)\r\n\r\n    if (!isFile) {\r\n      throw createError({ code: 'EISDIR', message })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emit error if path is not a directory\r\n   * @param {string} path path of the file/directory\r\n   * @param {string} message message to display if path is not a directory.\r\n   */\r\n  async _handleIsDir (path, message) {\r\n    const isDir = await this.isDirectory(path)\r\n\r\n    if (!isDir) {\r\n      throw createError({ code: 'ENOTDIR', message })\r\n    }\r\n  }\r\n\r\n  /** The current opened file */\r\n  file () {\r\n    const file = this.currentFile()\r\n\r\n    if (!file) throw createError({ code: 'ENOENT', message: 'No file selected' })\r\n    return file\r\n  }\r\n\r\n  /**\r\n   * Verify if the path exists (directory or file)\r\n   * @param {string} path path of the directory or file\r\n   * @returns {boolean} true if the path exists\r\n   */\r\n  exists (path) {\r\n    const provider = this.fileProviderOf(path)\r\n    const result = provider.exists(path, (err, result) => {\r\n      if (err) return false\r\n      return result\r\n    })\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Verify if the path provided is a file\r\n   * @param {string} path path of the directory or file\r\n   * @returns {boolean} true if path is a file.\r\n   */\r\n  isFile (path) {\r\n    const provider = this.fileProviderOf(path)\r\n    const result = provider.isFile(path)\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Verify if the path provided is a directory\r\n   * @param {string} path path of the directory\r\n   * @returns {boolean} true if path is a directory.\r\n   */\r\n  isDirectory (path) {\r\n    const provider = this.fileProviderOf(path)\r\n    const result = provider.isDirectory(path)\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Open the content of the file in the context (eg: Editor)\r\n   * @param {string} path path of the file\r\n   * @returns {void}\r\n   */\r\n  async open (path) {\r\n    await this._handleExists(path, `Cannot open file ${path}`)\r\n    await this._handleIsFile(path, `Cannot open file ${path}`)\r\n    return this.openFile(path)\r\n  }\r\n\r\n  /**\r\n   * Set the content of a specific file\r\n   * @param {string} path path of the file\r\n   * @param {string} data content to write on the file\r\n   * @returns {void}\r\n   */\r\n  async writeFile (path, data) {\r\n    if (await this.exists(path)) {\r\n      await this._handleIsFile(path, `Cannot write file ${path}`)\r\n      return await this.setFileContent(path, data)\r\n    } else {\r\n      const ret = await this.setFileContent(path, data)\r\n      this.emit('fileAdded', path)\r\n      return ret\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the content of a specific file\r\n   * @param {string} path path of the file\r\n   * @returns {string} content of the file\r\n   */\r\n  async readFile (path) {\r\n    await this._handleExists(path, `Cannot read file ${path}`)\r\n    await this._handleIsFile(path, `Cannot read file ${path}`)\r\n    return this.getFileContent(path)\r\n  }\r\n\r\n  /**\r\n   * Upsert a file with the content of the source file\r\n   * @param {string} src path of the source file\r\n   * @param {string} dest path of the destrination file\r\n   * @returns {void}\r\n   */\r\n  async copyFile (src, dest) {\r\n    await this._handleExists(src, `Cannot copy from ${src}`)\r\n    await this._handleIsFile(src, `Cannot copy from ${src}`)\r\n    await this._handleIsFile(dest, `Cannot paste content into ${dest}`)\r\n    const content = await this.readFile(src)\r\n\r\n    await this.writeFile(dest, content)\r\n  }\r\n\r\n  /**\r\n   * Change the path of a file/directory\r\n   * @param {string} oldPath current path of the file/directory\r\n   * @param {string} newPath new path of the file/directory\r\n   * @returns {void}\r\n   */\r\n  async rename (oldPath, newPath) {\r\n    await this._handleExists(oldPath, `Cannot rename ${oldPath}`)\r\n    const isFile = await this.isFile(oldPath)\r\n    const newPathExists = await this.exists(newPath)\r\n    const provider = this.fileProviderOf(oldPath)\r\n\r\n    if (isFile) {\r\n      if (newPathExists) {\r\n        modalDialogCustom.alert('File already exists.')\r\n        return\r\n      }\r\n      return provider.rename(oldPath, newPath, false)\r\n    } else {\r\n      if (newPathExists) {\r\n        modalDialogCustom.alert('Folder already exists.')\r\n        return\r\n      }\r\n      return provider.rename(oldPath, newPath, true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a directory\r\n   * @param {string} path path of the new directory\r\n   * @returns {void}\r\n   */\r\n  async mkdir (path) {\r\n    if (await this.exists(path)) {\r\n      throw createError({ code: 'EEXIST', message: `Cannot create directory ${path}` })\r\n    }\r\n    const provider = this.fileProviderOf(path)\r\n\r\n    provider.createDir(path)\r\n  }\r\n\r\n  /**\r\n   * Get the list of files in the directory\r\n   * @param {string} path path of the directory\r\n   * @returns {string[]} list of the file/directory name in this directory\r\n   */\r\n  async readdir (path) {\r\n    await this._handleExists(path)\r\n    await this._handleIsDir(path)\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const provider = this.fileProviderOf(path)\r\n\r\n      provider.resolveDirectory(path, (error, filesProvider) => {\r\n        if (error) reject(error)\r\n        resolve(filesProvider)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Removes a file or directory recursively\r\n   * @param {string} path path of the directory/file to remove\r\n   * @returns {void}\r\n   */\r\n  async remove (path) {\r\n    await this._handleExists(path, `Cannot remove file or directory ${path}`)\r\n    const provider = this.fileProviderOf(path)\r\n\r\n    return await provider.remove(path)\r\n  }\r\n\r\n  init () {\r\n    this._deps = {\r\n      config: this._components.registry.get('config').api,\r\n      browserExplorer: this._components.registry.get('fileproviders/browser').api,\r\n      localhostExplorer: this._components.registry.get('fileproviders/localhost').api,\r\n      filesProviders: this._components.registry.get('fileproviders').api\r\n    }\r\n    this._deps.browserExplorer.event.register('fileChanged', (path) => { this.fileChangedEvent(path) })\r\n    this._deps.browserExplorer.event.register('fileRenamed', (oldName, newName, isFolder) => { this.fileRenamedEvent(oldName, newName, isFolder) })\r\n    this._deps.localhostExplorer.event.register('fileRenamed', (oldName, newName, isFolder) => { this.fileRenamedEvent(oldName, newName, isFolder) })\r\n    this._deps.browserExplorer.event.register('fileRemoved', (path) => { this.fileRemovedEvent(path) })\r\n    this._deps.localhostExplorer.event.register('fileRemoved', (path) => { this.fileRemovedEvent(path) })\r\n    this._deps.localhostExplorer.event.register('errored', (event) => { this.removeTabsOf(this._deps.localhostExplorer) })\r\n    this._deps.localhostExplorer.event.register('closed', (event) => { this.removeTabsOf(this._deps.localhostExplorer) })\r\n    this.getCurrentFile = this.file\r\n    this.getFile = this.readFile\r\n    this.getFolder = this.readdir\r\n    this.setFile = this.writeFile\r\n    this.switchFile = this.open\r\n  }\r\n\r\n  fileChangedEvent (path) {\r\n    // @todo(#2386) use only for discard changes function.\r\n    // this.syncEditor(path)\r\n  }\r\n\r\n  fileRenamedEvent (oldName, newName, isFolder) {\r\n    if (!isFolder) {\r\n      this._deps.config.set('currentFile', '')\r\n      this.editor.discard(oldName)\r\n      if (this.openedFiles[oldName]) {\r\n        delete this.openedFiles[oldName]\r\n        this.openedFiles[newName] = newName\r\n      }\r\n      this.openFile(newName)\r\n    } else {\r\n      var newFocus\r\n      for (var k in this.openedFiles) {\r\n        if (k.indexOf(oldName + '/') === 0) {\r\n          var newAbsolutePath = k.replace(oldName, newName)\r\n          this.openedFiles[newAbsolutePath] = newAbsolutePath\r\n          delete this.openedFiles[k]\r\n          if (this._deps.config.get('currentFile') === k) {\r\n            newFocus = newAbsolutePath\r\n          }\r\n        }\r\n      }\r\n      if (newFocus) {\r\n        this.openFile(newFocus)\r\n      }\r\n    }\r\n    // TODO: Only keep `this.emit` (issue#2210)\r\n    this.emit('fileRenamed', oldName, newName, isFolder)\r\n    this.events.emit('fileRenamed', oldName, newName, isFolder)\r\n  }\r\n\r\n  currentFileProvider () {\r\n    var path = this.currentPath()\r\n    if (path) {\r\n      return this.fileProviderOf(path)\r\n    }\r\n    return null\r\n  }\r\n\r\n  currentFile () {\r\n    return this._deps.config.get('currentFile')\r\n  }\r\n\r\n  closeFile (name) {\r\n    delete this.openedFiles[name]\r\n    if (!Object.keys(this.openedFiles).length) {\r\n      this._deps.config.set('currentFile', '')\r\n      // TODO: Only keep `this.emit` (issue#2210)\r\n      this.emit('noFileSelected')\r\n      this.events.emit('noFileSelected')\r\n    }\r\n    // TODO: Only keep `this.emit` (issue#2210)\r\n    this.emit('fileClosed', name)\r\n    this.events.emit('fileClosed', name)\r\n  }\r\n\r\n  currentPath () {\r\n    var currentFile = this._deps.config.get('currentFile')\r\n    return this.extractPathOf(currentFile)\r\n  }\r\n\r\n  extractPathOf (file) {\r\n    var reg = /(.*)(\\/).*/\r\n    var path = reg.exec(file)\r\n    return path ? path[1] : null\r\n  }\r\n\r\n  getFileContent (path) {\r\n    const provider = this.fileProviderOf(path)\r\n\r\n    if (!provider) throw createError({ code: 'ENOENT', message: `${path} not available` })\r\n    // TODO: change provider to Promise\r\n    return new Promise((resolve, reject) => {\r\n      if (this.currentFile() === path) return resolve(this.editor.currentContent())\r\n      provider.get(path, (err, content) => {\r\n        if (err) reject(err)\r\n        resolve(content)\r\n      })\r\n    })\r\n  }\r\n\r\n  async setFileContent (path, content) {\r\n    if (this.currentRequest) {\r\n      const canCall = await this.askUserPermission('writeFile', '')\r\n      if (canCall) {\r\n        // inform the user about modification after permission is granted and even if permission was saved before\r\n        toaster(yo`\r\n          <div>\r\n            <i class=\"fas fa-exclamation-triangle text-danger mr-1\"></i>\r\n            <span>\r\n              ${this.currentRequest.from}\r\n              <span class=\"font-weight-bold text-warning\">\r\n                is modifying \r\n              </span>${path}\r\n            </span>\r\n          </div>\r\n        `, '', { time: 3000 })\r\n      }\r\n    }\r\n    return await this._setFileInternal(path, content)\r\n  }\r\n\r\n  _setFileInternal (path, content) {\r\n    const provider = this.fileProviderOf(path)\r\n    if (!provider) throw createError({ code: 'ENOENT', message: `${path} not available` })\r\n    // TODO : Add permission\r\n    // TODO : Change Provider to Promise\r\n    return new Promise((resolve, reject) => {\r\n      provider.set(path, content, (error) => {\r\n        if (error) reject(error)\r\n        this.syncEditor(path)\r\n        this.emit('fileSaved', path)\r\n        resolve(true)\r\n      })\r\n    })\r\n  }\r\n\r\n  _saveAsCopy (path, content) {\r\n    const fileProvider = this.fileProviderOf(path)\r\n    if (fileProvider) {\r\n      helper.createNonClashingNameWithPrefix(path, fileProvider, '', (error, copyName) => {\r\n        if (error) {\r\n          copyName = path + '.' + this.currentRequest.from\r\n        }\r\n        this._setFileInternal(copyName, content)\r\n        this.openFile(copyName)\r\n      })\r\n    }\r\n  }\r\n\r\n  removeTabsOf (provider) {\r\n    for (var tab in this.openedFiles) {\r\n      if (this.fileProviderOf(tab).type === provider.type) {\r\n        this.fileRemovedEvent(tab)\r\n      }\r\n    }\r\n  }\r\n\r\n  fileRemovedEvent (path) {\r\n    if (!this.openedFiles[path]) return\r\n    if (path === this._deps.config.get('currentFile')) {\r\n      this._deps.config.set('currentFile', '')\r\n    }\r\n    this.editor.discard(path)\r\n    delete this.openedFiles[path]\r\n    // TODO: Only keep `this.emit` (issue#2210)\r\n    this.emit('fileRemoved', path)\r\n    this.events.emit('fileRemoved', path)\r\n    this.openFile()\r\n  }\r\n\r\n  unselectCurrentFile () {\r\n    this.saveCurrentFile()\r\n    this._deps.config.set('currentFile', '')\r\n    // TODO: Only keep `this.emit` (issue#2210)\r\n    this.emit('noFileSelected')\r\n    this.events.emit('noFileSelected')\r\n  }\r\n\r\n  openFile (file) {\r\n    const _openFile = (file) => {\r\n      this.saveCurrentFile()\r\n      const provider = this.fileProviderOf(file)\r\n      if (!provider) return console.error(`no provider for ${file}`)\r\n      file = provider.getPathFromUrl(file) || file // in case an external URL is given as input, we resolve it to the right internal path\r\n      this._deps.config.set('currentFile', file)\r\n      this.openedFiles[file] = file\r\n      provider.get(file, (error, content) => {\r\n        if (error) {\r\n          console.log(error)\r\n        } else {\r\n          if (provider.isReadOnly(file)) {\r\n            this.editor.openReadOnly(file, content)\r\n          } else {\r\n            this.editor.open(file, content)\r\n          }\r\n          // TODO: Only keep `this.emit` (issue#2210)\r\n          this.emit('currentFileChanged', file)\r\n          this.events.emit('currentFileChanged', file)\r\n        }\r\n      })\r\n    }\r\n    if (file) return _openFile(file)\r\n    else {\r\n      var browserProvider = this._deps.filesProviders.browser\r\n      browserProvider.resolveDirectory('browser', (error, filesProvider) => {\r\n        if (error) console.error(error)\r\n        var fileList = Object.keys(filesProvider)\r\n        if (fileList.length) {\r\n          _openFile(browserProvider.type + '/' + fileList[0])\r\n        } else {\r\n          // TODO: Only keep `this.emit` (issue#2210)\r\n          this.emit('noFileSelected')\r\n          this.events.emit('noFileSelected')\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  getProvider (name) {\r\n    return this._deps.filesProviders[name]\r\n  }\r\n\r\n  fileProviderOf (file) {\r\n    if (file.indexOf('localhost') === 0) {\r\n      return this._deps.filesProviders.localhost\r\n    }\r\n    return this._deps.filesProviders.browser\r\n  }\r\n\r\n  // returns the list of directories inside path\r\n  dirList (path) {\r\n    const dirPaths = []\r\n    const collectList = (path) => {\r\n      return new Promise((resolve, reject) => {\r\n        this.readdir(path).then((ls) => {\r\n          const promises = Object.keys(ls).map((item, index) => {\r\n            const root = (path.indexOf('/') === -1) ? path : path.substr(0, path.indexOf('/'))\r\n            const curPath = `${root}/${item}` // adding 'browser' or 'localhost'\r\n            if (ls[item].isDirectory && !dirPaths.includes(curPath)) {\r\n              dirPaths.push(curPath)\r\n              resolve(dirPaths)\r\n            }\r\n            return new Promise((resolve, reject) => { resolve() })\r\n          })\r\n          Promise.all(promises).then(() => { resolve(dirPaths) })\r\n        })\r\n      })\r\n    }\r\n    return collectList(path)\r\n  }\r\n\r\n  isRemixDActive () {\r\n    return this.appManager.isActive('remixd')\r\n  }\r\n\r\n  saveCurrentFile () {\r\n    var currentFile = this._deps.config.get('currentFile')\r\n    if (currentFile && this.editor.current()) {\r\n      var input = this.editor.get(currentFile)\r\n      if (input) {\r\n        var provider = this.fileProviderOf(currentFile)\r\n        if (provider) {\r\n          provider.set(currentFile, input)\r\n          this.emit('fileSaved', currentFile)\r\n        } else {\r\n          console.log('cannot save ' + currentFile + '. Does not belong to any explorer')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  syncEditor (path) {\r\n    var currentFile = this._deps.config.get('currentFile')\r\n    if (path !== currentFile) return\r\n\r\n    var provider = this.fileProviderOf(currentFile)\r\n    if (provider) {\r\n      provider.get(currentFile, (error, content) => {\r\n        if (error) console.log(error)\r\n        this.editor.setText(content)\r\n      })\r\n    } else {\r\n      console.log('cannot save ' + currentFile + '. Does not belong to any explorer')\r\n    }\r\n  }\r\n\r\n  setBatchFiles (filesSet, fileProvider, override, callback) {\r\n    const self = this\r\n    if (!fileProvider) fileProvider = 'browser'\r\n    if (override === undefined) override = false\r\n\r\n    async.each(Object.keys(filesSet), (file, callback) => {\r\n      if (override) {\r\n        self._deps.filesProviders[fileProvider].set(file, filesSet[file].content)\r\n        self.syncEditor(fileProvider + file)\r\n        return callback()\r\n      }\r\n\r\n      helper.createNonClashingName(file, self._deps.filesProviders[fileProvider],\r\n        (error, name) => {\r\n          if (error) {\r\n            modalDialogCustom.alert('Unexpected error loading the file ' + error)\r\n          } else if (helper.checkSpecialChars(name)) {\r\n            modalDialogCustom.alert('Special characters are not allowed')\r\n          } else {\r\n            self._deps.filesProviders[fileProvider].set(name, filesSet[file].content)\r\n            self.syncEditor(fileProvider + name)\r\n          }\r\n          callback()\r\n        })\r\n    }, (error) => {\r\n      if (callback) callback(error)\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = FileManager\r\n","'use strict'\r\n\r\nconst CompilerImport = require('../compiler/compiler-imports')\r\nconst EventManager = require('../../lib/events')\r\nconst modalDialogCustom = require('../ui/modal-dialog-custom')\r\nconst tooltip = require('../ui/tooltip')\r\nconst remixLib = require('@remix-project/remix-lib')\r\nconst Storage = remixLib.Storage\r\n\r\nclass FileProvider {\r\n  constructor (name) {\r\n    this.event = new EventManager()\r\n    this.type = name\r\n    this.providerExternalsStorage = new Storage('providerExternals:')\r\n    this.externalFolders = [this.type + '/swarm', this.type + '/ipfs', this.type + '/github', this.type + '/gists', this.type + '/https']\r\n  }\r\n\r\n  addNormalizedName (path, url) {\r\n    this.providerExternalsStorage.set(this.type + '/' + path, url)\r\n    this.providerExternalsStorage.set('reverse-' + url, this.type + '/' + path)\r\n  }\r\n\r\n  removeNormalizedName (path) {\r\n    const value = this.providerExternalsStorage.get(path)\r\n    this.providerExternalsStorage.remove(path)\r\n    this.providerExternalsStorage.remove('reverse-' + value)\r\n  }\r\n\r\n  normalizedNameExists (path) {\r\n    return this.providerExternalsStorage.exists(path)\r\n  }\r\n\r\n  getNormalizedName (path) {\r\n    return this.providerExternalsStorage.get(path)\r\n  }\r\n\r\n  getPathFromUrl (url) {\r\n    return this.providerExternalsStorage.get('reverse-' + url)\r\n  }\r\n\r\n  isExternalFolder (path) {\r\n    return this.externalFolders.includes(path)\r\n  }\r\n\r\n  discardChanges (path) {\r\n    this.remove(path)\r\n    const compilerImport = new CompilerImport()\r\n    this.providerExternalsStorage.keys().map(value => {\r\n      if (value.indexOf(path) === 0) {\r\n        compilerImport.import(\r\n          this.getNormalizedName(value),\r\n          true,\r\n          (loadingMsg) => { tooltip(loadingMsg) },\r\n          (error, content, cleanUrl, type, url) => {\r\n            if (error) {\r\n              modalDialogCustom.alert(error)\r\n            } else {\r\n              this.addExternal(type + '/' + cleanUrl, content, url)\r\n            }\r\n          }\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n  exists (path, cb) {\r\n    // todo check the type (directory/file) as well #2386\r\n    // currently it is not possible to have a file and folder with same path\r\n    return cb(null, this._exists(path))\r\n  }\r\n\r\n  _exists (path) {\r\n    path = this.getPathFromUrl(path) || path // ensure we actually use the normalized path from here\r\n    var unprefixedpath = this.removePrefix(path)\r\n    return path === this.type ? true : window.remixFileSystem.existsSync(unprefixedpath)\r\n  }\r\n\r\n  init (cb) {\r\n    cb()\r\n  }\r\n\r\n  get (path, cb) {\r\n    cb = cb || function () {}\r\n    path = this.getPathFromUrl(path) || path // ensure we actually use the normalized path from here\r\n    var unprefixedpath = this.removePrefix(path)\r\n    var exists = window.remixFileSystem.existsSync(unprefixedpath)\r\n    if (!exists) return cb(null, null)\r\n    window.remixFileSystem.readFile(unprefixedpath, 'utf8', (err, content) => {\r\n      cb(err, content)\r\n    })\r\n  }\r\n\r\n  set (path, content, cb) {\r\n    cb = cb || function () {}\r\n    var unprefixedpath = this.removePrefix(path)\r\n    var exists = window.remixFileSystem.existsSync(unprefixedpath)\r\n    if (exists && window.remixFileSystem.readFileSync(unprefixedpath, 'utf8') === content) {\r\n      cb()\r\n      return true\r\n    }\r\n    if (!exists && unprefixedpath.indexOf('/') !== -1) {\r\n      // the last element is the filename and we should remove it\r\n      this.createDir(path.substr(0, path.lastIndexOf('/')))\r\n    }\r\n    try {\r\n      window.remixFileSystem.writeFileSync(unprefixedpath, content)\r\n    } catch (e) {\r\n      cb(e)\r\n      return false\r\n    }\r\n    if (!exists) {\r\n      this.event.trigger('fileAdded', [this._normalizePath(unprefixedpath), false])\r\n    } else {\r\n      this.event.trigger('fileChanged', [this._normalizePath(unprefixedpath)])\r\n    }\r\n    cb()\r\n    return true\r\n  }\r\n\r\n  createDir (path, cb) {\r\n    const unprefixedpath = this.removePrefix(path)\r\n    const paths = unprefixedpath.split('/')\r\n    if (paths.length && paths[0] === '') paths.shift()\r\n    let currentCheck = ''\r\n    paths.forEach((value) => {\r\n      currentCheck = currentCheck + '/' + value\r\n      if (!window.remixFileSystem.existsSync(currentCheck)) {\r\n        window.remixFileSystem.mkdirSync(currentCheck)\r\n        this.event.trigger('folderAdded', [this._normalizePath(currentCheck)])\r\n      }\r\n    })\r\n    if (cb) cb()\r\n  }\r\n\r\n  // this will not add a folder as readonly but keep the original url to be able to restore it later\r\n  addExternal (path, content, url) {\r\n    if (url) this.addNormalizedName(path, url)\r\n    return this.set(path, content)\r\n  }\r\n\r\n  isReadOnly (path) {\r\n    return false\r\n  }\r\n\r\n  isDirectory (path) {\r\n    const unprefixedpath = this.removePrefix(path)\r\n\r\n    return path === this.type ? true : window.remixFileSystem.statSync(unprefixedpath).isDirectory()\r\n  }\r\n\r\n  isFile (path) {\r\n    path = this.getPathFromUrl(path) || path // ensure we actually use the normalized path from here\r\n    path = this.removePrefix(path)\r\n    return window.remixFileSystem.statSync(path).isFile()\r\n  }\r\n\r\n  /**\r\n   * Removes the folder recursively\r\n   * @param {*} path is the folder to be removed\r\n   */\r\n  remove (path) {\r\n    return new Promise((resolve, reject) => {\r\n      path = this.removePrefix(path)\r\n      if (window.remixFileSystem.existsSync(path)) {\r\n        const stat = window.remixFileSystem.statSync(path)\r\n        try {\r\n          if (!stat.isDirectory()) {\r\n            resolve(this.removeFile(path))\r\n          } else {\r\n            const items = window.remixFileSystem.readdirSync(path)\r\n            if (items.length !== 0) {\r\n              items.forEach((item, index) => {\r\n                const curPath = `${path}${path.endsWith('/') ? '' : '/'}${item}`\r\n                if (window.remixFileSystem.statSync(curPath).isDirectory()) { // delete folder\r\n                  this.remove(curPath)\r\n                } else { // delete file\r\n                  this.removeFile(curPath)\r\n                }\r\n              })\r\n              if (window.remixFileSystem.readdirSync(path).length === 0) window.remixFileSystem.rmdirSync(path, console.log)\r\n            } else {\r\n              // folder is empty\r\n              window.remixFileSystem.rmdirSync(path, console.log)\r\n            }\r\n            this.event.trigger('fileRemoved', [this._normalizePath(path)])\r\n          }\r\n        } catch (e) {\r\n          console.log(e)\r\n          return resolve(false)\r\n        }\r\n      }\r\n      return resolve(true)\r\n    })\r\n  }\r\n\r\n  removeFile (path) {\r\n    path = this.removePrefix(path)\r\n    if (window.remixFileSystem.existsSync(path) && !window.remixFileSystem.statSync(path).isDirectory()) {\r\n      window.remixFileSystem.unlinkSync(path, console.log)\r\n      this.event.trigger('fileRemoved', [this._normalizePath(path)])\r\n      return true\r\n    } else return false\r\n  }\r\n\r\n  rename (oldPath, newPath, isFolder) {\r\n    var unprefixedoldPath = this.removePrefix(oldPath)\r\n    var unprefixednewPath = this.removePrefix(newPath)\r\n    if (this._exists(unprefixedoldPath)) {\r\n      window.remixFileSystem.renameSync(unprefixedoldPath, unprefixednewPath)\r\n      this.event.trigger('fileRenamed', [\r\n        this._normalizePath(unprefixedoldPath),\r\n        this._normalizePath(unprefixednewPath),\r\n        isFolder\r\n      ])\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  resolveDirectory (path, callback) {\r\n    if (!path) return callback(null, { [this.type]: {} })\r\n    path = this.removePrefix(path)\r\n    if (path.indexOf('/') !== 0) path = '/' + path\r\n\r\n    window.remixFileSystem.readdir(path, (error, files) => {\r\n      var ret = {}\r\n\r\n      if (files) {\r\n        files.forEach(element => {\r\n          const absPath = (path === '/' ? '' : path) + '/' + element\r\n          ret[absPath.indexOf('/') === 0 ? absPath.substr(1, absPath.length) : absPath] = { isDirectory: window.remixFileSystem.statSync(absPath).isDirectory() }\r\n          // ^ ret does not accept path starting with '/'\r\n        })\r\n      }\r\n      callback(error, ret)\r\n    })\r\n  }\r\n\r\n  removePrefix (path) {\r\n    path = path.indexOf(this.type) === 0 ? path.replace(this.type, '') : path\r\n    if (path === '') return '/'\r\n    return path\r\n  }\r\n\r\n  _normalizePath (path) {\r\n    if (path.indexOf('/') !== 0) path = '/' + path\r\n    return this.type + path\r\n  }\r\n}\r\n\r\nmodule.exports = FileProvider\r\n","import { WebsocketPlugin } from '@remixproject/engine-web'\r\nimport * as packageJson from '../../../../../package.json'\r\n\r\nconst profile = {\r\n  name: 'git',\r\n  displayName: 'Git',\r\n  url: 'ws://127.0.0.1:65521',\r\n  methods: ['execute'],\r\n  description: 'Using Remixd daemon, allow to access git API',\r\n  kind: 'other',\r\n  version: packageJson.version\r\n}\r\n\r\nexport class GitHandle extends WebsocketPlugin {\r\n  constructor () {\r\n    super(profile)\r\n  }\r\n}\r\n","'use strict'\r\nvar EventManager = require('../../lib/events')\r\n\r\nmodule.exports = class RemixDProvider {\r\n  constructor (appManager) {\r\n    this.event = new EventManager()\r\n    this._appManager = appManager\r\n    this.type = 'localhost'\r\n    this.error = { EEXIST: 'File already exists' }\r\n    this._isReady = false\r\n    this._readOnlyFiles = {}\r\n    this._readOnlyMode = false\r\n    this.filesContent = {}\r\n    this.files = {}\r\n  }\r\n\r\n  _registerEvent () {\r\n    var remixdEvents = ['connecting', 'connected', 'errored', 'closed']\r\n    remixdEvents.forEach((value) => {\r\n      this._appManager.on('remixd', value, (event) => {\r\n        this.event.trigger(value, [event])\r\n      })\r\n    })\r\n\r\n    this._appManager.on('remixd', 'folderAdded', (path) => {\r\n      this.event.trigger('folderAdded', [this.addPrefix(path)])\r\n    })\r\n\r\n    this._appManager.on('remixd', 'fileAdded', (path) => {\r\n      this.event.trigger('fileAdded', [this.addPrefix(path)])\r\n    })\r\n\r\n    this._appManager.on('remixd', 'fileChanged', (path) => {\r\n      this.event.trigger('fileChanged', [this.addPrefix(path)])\r\n    })\r\n\r\n    this._appManager.on('remixd', 'fileRemoved', (path) => {\r\n      this.event.trigger('fileRemoved', [this.addPrefix(path)])\r\n    })\r\n\r\n    this._appManager.on('remixd', 'fileRenamed', (oldPath, newPath) => {\r\n      this.event.trigger('fileRemoved', [this.addPrefix(oldPath), this.addPrefix(newPath)])\r\n    })\r\n  }\r\n\r\n  isConnected () {\r\n    return this._isReady\r\n  }\r\n\r\n  close (cb) {\r\n    this._isReady = false\r\n    cb()\r\n  }\r\n\r\n  init (cb) {\r\n    if (this._isReady) return cb && cb()\r\n    this._appManager.call('remixd', 'folderIsReadOnly', {})\r\n      .then((result) => {\r\n        this._isReady = true\r\n        this._readOnlyMode = result\r\n        this._registerEvent()\r\n        cb && cb()\r\n      }).catch((error) => {\r\n        cb && cb(error)\r\n      })\r\n  }\r\n\r\n  exists (path, cb) {\r\n    if (!this._isReady) return cb && cb('provider not ready')\r\n    const unprefixedpath = this.removePrefix(path)\r\n\r\n    return this._appManager.call('remixd', 'exists', { path: unprefixedpath })\r\n      .then((result) => {\r\n        if (cb) return cb(null, result)\r\n        return result\r\n      }).catch((error) => {\r\n        if (cb) return cb(error)\r\n        throw new Error(error)\r\n      })\r\n  }\r\n\r\n  getNormalizedName (path) {\r\n    return path\r\n  }\r\n\r\n  getPathFromUrl (path) {\r\n    return path\r\n  }\r\n\r\n  get (path, cb) {\r\n    if (!this._isReady) return cb && cb('provider not ready')\r\n    var unprefixedpath = this.removePrefix(path)\r\n    this._appManager.call('remixd', 'get', { path: unprefixedpath })\r\n      .then((file) => {\r\n        this.filesContent[path] = file.content\r\n        if (file.readonly) { this._readOnlyFiles[path] = 1 }\r\n        cb(null, file.content)\r\n      }).catch((error) => {\r\n        if (error) console.log(error)\r\n        // display the last known content.\r\n        // TODO should perhaps better warn the user that the file is not synced.\r\n        return cb(null, this.filesContent[path])\r\n      })\r\n  }\r\n\r\n  async set (path, content, cb) {\r\n    if (!this._isReady) return cb && cb('provider not ready')\r\n    const unprefixedpath = this.removePrefix(path)\r\n\r\n    return this._appManager.call('remixd', 'set', { path: unprefixedpath, content: content }).then(async (result) => {\r\n      if (cb) return cb(null, result)\r\n    }).catch((error) => {\r\n      if (cb) return cb(error)\r\n      throw new Error(error)\r\n    })\r\n  }\r\n\r\n  isReadOnly (path) {\r\n    return this._readOnlyMode || this._readOnlyFiles[path] === 1\r\n  }\r\n\r\n  remove (path) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this._isReady) return reject(new Error('provider not ready'))\r\n      const unprefixedpath = this.removePrefix(path)\r\n      this._appManager.call('remixd', 'remove', { path: unprefixedpath })\r\n        .then(result => {\r\n          const path = this.type + '/' + unprefixedpath\r\n\r\n          delete this.filesContent[path]\r\n          resolve(true)\r\n          this.init()\r\n        }).catch(error => {\r\n          if (error) console.log(error)\r\n          resolve(false)\r\n        })\r\n    })\r\n  }\r\n\r\n  rename (oldPath, newPath, isFolder) {\r\n    const unprefixedoldPath = this.removePrefix(oldPath)\r\n    const unprefixednewPath = this.removePrefix(newPath)\r\n    if (!this._isReady) return new Promise((resolve, reject) => reject(new Error('provider not ready')))\r\n    return this._appManager.call('remixd', 'rename', { oldPath: unprefixedoldPath, newPath: unprefixednewPath })\r\n      .then(result => {\r\n        const newPath = this.type + '/' + unprefixednewPath\r\n        const oldPath = this.type + '/' + unprefixedoldPath\r\n\r\n        this.filesContent[newPath] = this.filesContent[oldPath]\r\n        delete this.filesContent[oldPath]\r\n        this.init(() => {\r\n          this.event.trigger('fileRenamed', [oldPath, newPath, isFolder])\r\n        })\r\n        return result\r\n      }).catch(error => {\r\n        console.log(error)\r\n        if (this.error[error.code]) error = this.error[error.code]\r\n        this.event.trigger('fileRenamedError', [this.error[error.code]])\r\n      })\r\n  }\r\n\r\n  isExternalFolder (path) {\r\n    return false\r\n  }\r\n\r\n  removePrefix (path) {\r\n    path = path.indexOf(this.type) === 0 ? path.replace(this.type, '') : path\r\n    if (path[0] === '/') return path.substring(1)\r\n    if (path === '') return '/'\r\n    return path\r\n  }\r\n\r\n  addPrefix (path) {\r\n    if (path.indexOf(this.type + '/') === 0) return path\r\n    if (path[0] === '/') return 'localhost' + path\r\n    return 'localhost/' + path\r\n  }\r\n\r\n  resolveDirectory (path, callback) {\r\n    var self = this\r\n    if (path[0] === '/') path = path.substring(1)\r\n    if (!path) return callback(null, { [self.type]: { } })\r\n    const unprefixedpath = this.removePrefix(path)\r\n\r\n    if (!this._isReady) return callback && callback('provider not ready')\r\n    this._appManager.call('remixd', 'resolveDirectory', { path: unprefixedpath }).then((result) => {\r\n      callback(null, result)\r\n    }).catch(callback)\r\n  }\r\n\r\n  async isDirectory (path) {\r\n    const unprefixedpath = this.removePrefix(path)\r\n    if (!this._isReady) throw new Error('provider not ready')\r\n    return await this._appManager.call('remixd', 'isDirectory', { path: unprefixedpath })\r\n  }\r\n\r\n  async isFile (path) {\r\n    const unprefixedpath = this.removePrefix(path)\r\n    if (!this._isReady) throw new Error('provider not ready')\r\n    return await this._appManager.call('remixd', 'isFile', { path: unprefixedpath })\r\n  }\r\n}\r\n","import isElectron from 'is-electron'\r\nimport { WebsocketPlugin } from '@remixproject/engine-web'\r\nimport * as packageJson from '../../../../../package.json'\r\nvar yo = require('yo-yo')\r\nvar modalDialog = require('../ui/modaldialog')\r\nvar modalDialogCustom = require('../ui/modal-dialog-custom')\r\n\r\nvar csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .dialog {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .dialogParagraph {\r\n    margin-bottom: 2em;\r\n    word-break: break-word;\r\n  }\r\n`\r\n\r\nconst profile = {\r\n  name: 'remixd',\r\n  displayName: 'RemixD',\r\n  url: 'ws://127.0.0.1:65520',\r\n  methods: ['folderIsReadOnly', 'resolveDirectory', 'get', 'exists', 'isFile', 'set', 'rename', 'remove', 'isDirectory', 'list'],\r\n  events: [],\r\n  description: 'Using Remixd daemon, allow to access file system',\r\n  kind: 'other',\r\n  version: packageJson.version\r\n}\r\n\r\nexport class RemixdHandle extends WebsocketPlugin {\r\n  constructor (fileSystemExplorer, locahostProvider, appManager) {\r\n    super(profile)\r\n    this.fileSystemExplorer = fileSystemExplorer\r\n    this.locahostProvider = locahostProvider\r\n    this.appManager = appManager\r\n  }\r\n\r\n  deactivate () {\r\n    this.fileSystemExplorer.hide()\r\n    if (super.socket) super.deactivate()\r\n    this.call('manager', 'deactivatePlugin', 'git')\r\n    this.locahostProvider.close((error) => {\r\n      if (error) console.log(error)\r\n    })\r\n  }\r\n\r\n  activate () {\r\n    this.fileSystemExplorer.show()\r\n    this.connectToLocalhost()\r\n  }\r\n\r\n  async canceled () {\r\n    this.call('manager', 'deactivatePlugin', 'remixd')\r\n    this.call('manager', 'deactivatePlugin', 'git')\r\n  }\r\n\r\n  /**\r\n    * connect to localhost if no connection and render the explorer\r\n    * disconnect from localhost if connected and remove the explorer\r\n    *\r\n    * @param {String} txHash - hash of the transaction\r\n    */\r\n  async connectToLocalhost () {\r\n    const connection = (error) => {\r\n      if (error) {\r\n        console.log(error)\r\n        modalDialogCustom.alert(\r\n          'Cannot connect to the remixd daemon.' +\r\n          'Please make sure you have the remixd running in the background.'\r\n        )\r\n        this.canceled()\r\n      } else {\r\n        const intervalId = setInterval(() => {\r\n          if (!this.socket || (this.socket && this.socket.readyState === 3)) { // 3 means connection closed\r\n            clearInterval(intervalId)\r\n            console.log(error)\r\n            modalDialogCustom.alert(\r\n              'Connection to remixd terminated' +\r\n              'Please make sure remixd is still running in the background.'\r\n            )\r\n            this.canceled()\r\n          }\r\n        }, 3000)\r\n        this.locahostProvider.init(_ => this.fileSystemExplorer.ensureRoot())\r\n        this.call('manager', 'activatePlugin', 'git')\r\n      }\r\n    }\r\n    if (this.locahostProvider.isConnected()) {\r\n      this.deactivate()\r\n    } else if (!isElectron()) {\r\n      // warn the user only if he/she is in the browser context\r\n      modalDialog(\r\n        'Connect to localhost',\r\n        remixdDialog(),\r\n        {\r\n          label: 'Connect',\r\n          fn: () => {\r\n            try {\r\n              super.activate()\r\n              setTimeout(() => {\r\n                if (!this.socket || (this.socket && this.socket.readyState === 3)) { // 3 means connection closed\r\n                  connection(new Error('Connection with daemon failed.'))\r\n                } else {\r\n                  connection()\r\n                }\r\n              }, 3000)\r\n            } catch (error) {\r\n              connection(error)\r\n            }\r\n          }\r\n        },\r\n        {\r\n          label: 'Cancel',\r\n          fn: () => {\r\n            this.canceled()\r\n          }\r\n        }\r\n      )\r\n    } else {\r\n      try {\r\n        super.activate()\r\n        setTimeout(() => { connection() }, 2000)\r\n      } catch (error) {\r\n        connection(error)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction remixdDialog () {\r\n  return yo`\r\n    <div class=${css.dialog}>\r\n      <div class=${css.dialogParagraph}>Interact with your file system from Remix. Click connect and find shared folder in the Remix file explorer (under localhost).\r\n        Before you get started, check out the <a target=\"_blank\" href=\"https://remix-ide.readthedocs.io/en/latest/remixd.html\">Remixd tutorial</a>.\r\n        to find out how to run Remixd.\r\n      </div>\r\n      <div class=${css.dialogParagraph}>If you have looked at that tutorial and are just looking for the remixd command, <br> here it is:\r\n        <br><b>remixd -s absolute-path-to-the-shared-folder --remix-ide your-remix-ide-URL-instance</b>\r\n      </div>\r\n      <div class=${css.dialogParagraph}>Connection will start a session between <em>${window.location.href}</em> and your local file system <i>ws://127.0.0.1:65520</i>\r\n        so please make sure your system is secured enough (port 65520 neither opened nor forwarded).\r\n        <i class=\"fas fa-link\"></i> will show you current connection status.\r\n      </div>\r\n      <div class=${css.dialogParagraph}>This feature is still in Alpha, so we recommend you to keep a copy of the shared folder.</div>\r\n    </div>\r\n  `\r\n}\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .label {\r\n    margin-top        : 4px;\r\n  }\r\n  .leaf {\r\n    overflow          : hidden;\r\n    text-overflow     : ellipsis;\r\n    width             : 90%;\r\n    margin-bottom     : 0px;\r\n  }\r\n  .fileexplorer       {\r\n    box-sizing        : border-box;\r\n  }\r\n  input[type=\"file\"] {\r\n      display: none;\r\n  }\r\n  .folder,\r\n  .file               {\r\n    font-size         : 14px;\r\n    cursor            : pointer;\r\n  }\r\n  .file               {\r\n    padding           : 4px;\r\n  }\r\n  .newFile            {\r\n    padding-right     : 10px;\r\n  }\r\n  .newFile i          {\r\n    cursor            : pointer;\r\n  }\r\n  .newFile:hover    {\r\n    transform         : scale(1.3);\r\n  }\r\n  .menu               {\r\n    margin-left       : 20px;\r\n  }\r\n  .items              {\r\n    display           : inline\r\n  }\r\n  .hasFocus           {\r\n  }\r\n  .rename             {\r\n  }\r\n  .remove             {\r\n    margin-left       : auto;\r\n    padding-left      : 5px;\r\n    padding-right     : 5px;\r\n  }\r\n  .activeMode         {\r\n    display           : flex;\r\n    width             : 100%;\r\n    margin-right      : 10px;\r\n    padding-right     : 19px;\r\n  }\r\n  .activeMode > div   {\r\n    min-width         : 10px;\r\n  }\r\n  ul                  {\r\n    padding           : 0;\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","import { ViewPlugin } from '@remixproject/engine-web'\r\n\r\nimport * as packageJson from '../../../../../package.json'\r\nvar yo = require('yo-yo')\r\nvar EventManager = require('../../lib/events')\r\nvar FileExplorer = require('../files/file-explorer')\r\nvar { RemixdHandle } = require('../files/remixd-handle.js')\r\nvar { GitHandle } = require('../files/git-handle.js')\r\nvar globalRegistry = require('../../global/registry')\r\nvar css = require('./styles/file-panel-styles')\r\n\r\nvar canUpload = window.File || window.FileReader || window.FileList || window.Blob\r\n\r\n/*\r\n  Overview of APIs:\r\n   * fileManager: @args fileProviders (browser, shared-folder, swarm, github, etc ...) & config & editor\r\n      - listen on browser & localhost file provider (`fileRenamed` & `fileRemoved`)\r\n      - update the tabs, switchFile\r\n      - trigger `currentFileChanged`\r\n      - set the current file in the config\r\n   * fileProvider: currently browser, swarm, localhost, github, gist\r\n      - link to backend\r\n      - provide properties `type`, `readonly`\r\n      - provide API `resolveDirectory`, `remove`, `exists`, `rename`, `get`, `set`\r\n      - trigger `fileExternallyChanged`, `fileRemoved`, `fileRenamed`, `fileRenamedError`, `fileAdded`\r\n   * file-explorer: treeview @args fileProvider\r\n      - listen on events triggered by fileProvider\r\n      - call fileProvider API\r\n*/\r\n\r\nconst profile = {\r\n  name: 'fileExplorers',\r\n  displayName: 'File explorers',\r\n  methods: [],\r\n  events: [],\r\n  icon: 'assets/img/fileManager.webp',\r\n  description: ' - ',\r\n  kind: 'fileexplorer',\r\n  location: 'sidePanel',\r\n  documentation: 'https://remix-ide.readthedocs.io/en/latest/file_explorer.html',\r\n  version: packageJson.version\r\n}\r\n\r\nmodule.exports = class Filepanel extends ViewPlugin {\r\n  constructor (appManager) {\r\n    super(profile)\r\n    var self = this\r\n    self._components = {}\r\n    self._components.registry = globalRegistry\r\n    self._deps = {\r\n      fileProviders: self._components.registry.get('fileproviders').api,\r\n      fileManager: self._components.registry.get('filemanager').api,\r\n      config: self._components.registry.get('config').api\r\n    }\r\n\r\n    function createProvider (key, menuItems) {\r\n      return new FileExplorer(self._components.registry, self._deps.fileProviders[key], menuItems, self)\r\n    }\r\n\r\n    var fileExplorer = createProvider('browser', ['createNewFile', 'publishToGist', canUpload ? 'uploadFile' : ''])\r\n    var fileSystemExplorer = createProvider('localhost')\r\n\r\n    self.remixdHandle = new RemixdHandle(fileSystemExplorer, self._deps.fileProviders.localhost, appManager)\r\n    self.gitHandle = new GitHandle()\r\n\r\n    const explorers = yo`\r\n      <div>\r\n        <div class=\"pl-2 ${css.treeview}\" data-id=\"filePanelFileExplorerTree\">${fileExplorer.init()}</div>\r\n        <div class=\"pl-2 filesystemexplorer ${css.treeview}\">${fileSystemExplorer.init()}</div>\r\n      </div>\r\n    `\r\n\r\n    function template () {\r\n      return yo`\r\n        <div class=${css.container}>\r\n          <div class=\"${css.fileexplorer}\">           \r\n            <div class=\"${css.fileExplorerTree}\">\r\n              ${explorers}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `\r\n    }\r\n\r\n    var event = new EventManager()\r\n    self.event = event\r\n    var element = template()\r\n    fileExplorer.ensureRoot()\r\n    self._deps.fileProviders.localhost.event.register('connecting', (event) => {\r\n    })\r\n\r\n    self._deps.fileProviders.localhost.event.register('connected', (event) => {\r\n      fileSystemExplorer.show()\r\n    })\r\n\r\n    self._deps.fileProviders.localhost.event.register('errored', (event) => {\r\n      fileSystemExplorer.hide()\r\n    })\r\n\r\n    self._deps.fileProviders.localhost.event.register('closed', (event) => {\r\n      fileSystemExplorer.hide()\r\n    })\r\n\r\n    self.render = function render () { return element }\r\n  }\r\n}\r\n","var yo = require('yo-yo')\r\nvar EventManager = require('../../lib/events')\r\n\r\nvar globalRegistry = require('../../global/registry')\r\nvar { TabProxy } = require('./tab-proxy.js')\r\n\r\nvar ContextView = require('../editor/contextView')\r\n\r\nvar csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .mainview            {\r\n    display           : flex;\r\n    flex-direction    : column;\r\n    height            : 100%;\r\n    width             : 100%;\r\n  }\r\n`\r\n\r\n// @todo(#650) Extract this into two classes: MainPanel (TabsProxy + Iframe/Editor) & BottomPanel (Terminal)\r\nexport class MainView {\r\n  constructor (contextualListener, editor, mainPanel, fileManager, appManager, terminal) {\r\n    var self = this\r\n    self.event = new EventManager()\r\n    self._view = {}\r\n    self._components = {}\r\n    self._components.registry = globalRegistry\r\n    self.editor = editor\r\n    self.fileManager = fileManager\r\n    self.mainPanel = mainPanel\r\n    self.txListener = globalRegistry.get('txlistener').api\r\n    self._components.terminal = terminal\r\n    self._components.contextualListener = contextualListener\r\n    this.appManager = appManager\r\n    this.init()\r\n  }\r\n\r\n  showApp (name) {\r\n    this.fileManager.unselectCurrentFile()\r\n    this.mainPanel.showContent(name)\r\n    this._view.editor.style.display = 'none'\r\n    this._components.contextView.hide()\r\n    this._view.mainPanel.style.display = 'block'\r\n  }\r\n\r\n  getAppPanel () {\r\n    return this.mainPanel\r\n  }\r\n\r\n  init () {\r\n    var self = this\r\n    self._deps = {\r\n      config: self._components.registry.get('config').api,\r\n      fileManager: self._components.registry.get('filemanager').api\r\n    }\r\n\r\n    self.tabProxy = new TabProxy(self.fileManager, self.editor, self.appManager)\r\n    /*\r\n      We listen here on event from the tab component to display / hide the editor and mainpanel\r\n      depending on the content that should be displayed\r\n    */\r\n    self.fileManager.events.on('currentFileChanged', (file) => {\r\n      // we check upstream for \"fileChanged\"\r\n      self._view.editor.style.display = 'block'\r\n      self._view.mainPanel.style.display = 'none'\r\n      self._components.contextView.show()\r\n    })\r\n    self.tabProxy.event.on('openFile', (file) => {\r\n      self._view.editor.style.display = 'block'\r\n      self._view.mainPanel.style.display = 'none'\r\n      self._components.contextView.show()\r\n    })\r\n    self.tabProxy.event.on('closeFile', (file) => {\r\n    })\r\n    self.tabProxy.event.on('switchApp', self.showApp.bind(self))\r\n    self.tabProxy.event.on('closeApp', (name) => {\r\n      self._view.editor.style.display = 'block'\r\n      self._components.contextView.show()\r\n      self._view.mainPanel.style.display = 'none'\r\n    })\r\n    self.tabProxy.event.on('tabCountChanged', (count) => {\r\n      if (!count) this.editor.displayEmptyReadOnlySession()\r\n    })\r\n    self.data = {\r\n      _layout: {\r\n        top: {\r\n          offset: self._terminalTopOffset(),\r\n          show: true\r\n        }\r\n      }\r\n    }\r\n\r\n    const contextView = new ContextView({ contextualListener: self._components.contextualListener, editor: self.editor })\r\n\r\n    self._components.contextView = contextView\r\n\r\n    self._components.terminal.event.register('resize', delta => self._adjustLayout('top', delta))\r\n    if (self.txListener) {\r\n      self._components.terminal.event.register('listenOnNetWork', (listenOnNetWork) => {\r\n        self.txListener.setListenOnNetwork(listenOnNetWork)\r\n      })\r\n    }\r\n  }\r\n\r\n  _terminalTopOffset () {\r\n    return this._deps.config.get('terminal-top-offset') || 150\r\n  }\r\n\r\n  _adjustLayout (direction, delta) {\r\n    var limitUp = 0\r\n    var limitDown = 32\r\n    var containerHeight = window.innerHeight - limitUp // - menu bar containerHeight\r\n    var self = this\r\n    var layout = self.data._layout[direction]\r\n    if (layout) {\r\n      if (delta === undefined) {\r\n        layout.show = !layout.show\r\n        if (layout.show) delta = layout.offset\r\n        else delta = 0\r\n      } else {\r\n        layout.show = true\r\n        self._deps.config.set(`terminal-${direction}-offset`, delta)\r\n        layout.offset = delta\r\n      }\r\n    }\r\n    var tmp = delta - limitDown\r\n    delta = tmp > 0 ? tmp : 0\r\n    if (direction === 'top') {\r\n      var mainPanelHeight = containerHeight - delta\r\n      mainPanelHeight = mainPanelHeight < 0 ? 0 : mainPanelHeight\r\n      self._view.editor.style.height = `${mainPanelHeight}px`\r\n      self._view.mainPanel.style.height = `${mainPanelHeight}px`\r\n      self._view.terminal.style.height = `${delta}px` // - menu bar height\r\n      self.editor.resize((document.querySelector('#editorWrap') || {}).checked)\r\n      self._components.terminal.scroll2bottom()\r\n    }\r\n  }\r\n\r\n  minimizeTerminal () {\r\n    this._adjustLayout('top')\r\n  }\r\n\r\n  showTerminal (offset) {\r\n    this._adjustLayout('top', offset || this._terminalTopOffset())\r\n  }\r\n\r\n  getTerminal () {\r\n    return this._components.terminal\r\n  }\r\n\r\n  getEditor () {\r\n    var self = this\r\n    return self.editor\r\n  }\r\n\r\n  refresh () {\r\n    var self = this\r\n    self._view.tabs.onmouseenter()\r\n  }\r\n\r\n  log (data = {}) {\r\n    var self = this\r\n    var command = self._components.terminal.commands[data.type]\r\n    if (typeof command === 'function') command(data.value)\r\n  }\r\n\r\n  logMessage (msg) {\r\n    var self = this\r\n    self.log({ type: 'log', value: msg })\r\n  }\r\n\r\n  logHtmlMessage (msg) {\r\n    var self = this\r\n    self.log({ type: 'html', value: msg })\r\n  }\r\n\r\n  render () {\r\n    var self = this\r\n    if (self._view.mainview) return self._view.mainview\r\n    self._view.editor = self.editor.render()\r\n    self._view.editor.style.display = 'none'\r\n    self._view.mainPanel = self.mainPanel.render()\r\n    self._view.terminal = self._components.terminal.render()\r\n    self._view.mainview = yo`\r\n      <div class=${css.mainview}>\r\n        ${self.tabProxy.renderTabsbar()}\r\n        ${self._view.editor}\r\n        ${self._view.mainPanel}\r\n        ${self._components.contextView.render()}\r\n        ${self._view.terminal}\r\n      </div>\r\n    `\r\n    // INIT\r\n    self._adjustLayout('top', self.data._layout.top.offset)\r\n\r\n    document.addEventListener('keydown', (e) => {\r\n      if (e.altKey && e.keyCode === 84) self.tabProxy.switchNextTab() // alt + t\r\n    })\r\n\r\n    return self._view.mainview\r\n  }\r\n\r\n  registerCommand (name, command, opts) {\r\n    var self = this\r\n    return self._components.terminal.registerCommand(name, command, opts)\r\n  }\r\n\r\n  updateTerminalFilter (filter) {\r\n    this._components.terminal.updateJournal(filter)\r\n  }\r\n}\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .container {\r\n    display           : flex;\r\n    flex-direction    : row;\r\n    width             : 100%;\r\n    height            : 100%;\r\n    box-sizing        : border-box;\r\n  }\r\n  .fileexplorer       {\r\n    display           : flex;\r\n    flex-direction    : column;\r\n    position          : relative;\r\n    width             : 100%;\r\n    padding-left      : 6px;\r\n    padding-top       : 6px;\r\n  }\r\n  .fileExplorerTree   {\r\n    cursor            : default;\r\n  }\r\n  .gist            {\r\n    padding           : 10px;\r\n  }\r\n  .gist i          {\r\n    cursor            : pointer;\r\n  }\r\n  .gist i:hover    {\r\n    color             : orange;\r\n  }\r\n  .connectToLocalhost {\r\n    padding           : 10px;\r\n  }\r\n  .connectToLocalhost i {\r\n    cursor            : pointer;\r\n  }\r\n  .connectToLocalhost i:hover   {\r\n    color             : var(--secondary)\r\n  }\r\n  .uploadFile         {\r\n    padding           : 10px;\r\n  }\r\n  .uploadFile label:hover   {\r\n    color             : var(--secondary)\r\n  }\r\n  .uploadFile label   {\r\n    cursor            : pointer;\r\n  }\r\n  .treeview {\r\n    overflow-y        : auto;\r\n  }  \r\n  .dialog {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .dialogParagraph {\r\n    margin-bottom: 2em;\r\n    word-break: break-word;\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .panel              {\r\n    position          : relative;\r\n    display           : flex;\r\n    flex-direction    : column;\r\n    font-size         : 12px;\r\n    min-height        : 3em;\r\n  }\r\n  .bar                {\r\n    display           : flex;\r\n    z-index           : 2;\r\n  }\r\n  .menu               {\r\n    position             : relative;\r\n    display              : flex;\r\n    align-items          : center;\r\n    width                : 100%;\r\n    max-height           : 35px;\r\n    min-height           : 35px;\r\n  }\r\n  .toggleTerminal              {\r\n    cursor            : pointer;\r\n  }\r\n  .toggleTerminal:hover              {\r\n    color             : var(--secondary);\r\n  }\r\n  .terminal_container   {\r\n    display             : flex;\r\n    flex-direction      : column;\r\n    height              : 100%;\r\n    overflow-y          : auto;\r\n    font-family         : monospace;\r\n    margin              : 0px;\r\n    background-repeat   : no-repeat;\r\n    background-position : center 15%;\r\n    background-size     : auto calc(75% -  1.7em);\r\n  }\r\n  .terminal    {\r\n    position          : relative;\r\n    display           : flex;\r\n    flex-direction    : column;\r\n    height            : 100%;\r\n  }\r\n  .journal            {\r\n    margin-top        : auto;\r\n    font-family       : monospace;\r\n  }\r\n  .block              {\r\n    word-break        : break-word;\r\n    white-space       : pre-wrap;\r\n    line-height       : 2ch;\r\n    padding           : 1ch;\r\n    margin-top        : 2ch;\r\n  }\r\n  .block > pre        {\r\n    max-height        : 200px;\r\n  }\r\n  .cli                {\r\n    line-height       : 1.7em;\r\n    font-family       : monospace;\r\n    padding           : .4em;\r\n    color             : var(--primary)\r\n    border-top        : solid 2px var(--secondary);\r\n  }\r\n  .prompt             {\r\n    margin-right      : 0.5em;\r\n    font-family       : monospace;\r\n    font-weight       : bold;\r\n    font-size         : 14px;\r\n  }\r\n  .input              {\r\n    word-break        : break-word;\r\n    outline           : none;\r\n    font-family       : monospace;\r\n  }\r\n  .search {\r\n    display           : flex;\r\n    align-items       : center;\r\n    width             : 330px;\r\n    padding-left      : 20px;\r\n    height            : 100%;\r\n    padding-top       : 1px;\r\n    padding-bottom    : 1px;\r\n  }\r\n  .filter                       {\r\n    height                      : 80%;\r\n    white-space                 : nowrap;\r\n    overflow                    : hidden;\r\n    text-overflow               : ellipsis;\r\n  }\r\n  .searchIcon                   {\r\n    height                      : 100%;\r\n    width                       : 25px;\r\n    border-top-left-radius      : 3px;\r\n    border-bottom-left-radius   : 3px;\r\n    display                     : flex;\r\n    align-items                 : center;\r\n    justify-content             : center;\r\n    margin-right                : 5px;\r\n  }\r\n  .listen         {\r\n    margin-right  : 30px;\r\n    min-width     : 40px;\r\n    height        : 13px;\r\n    display       : flex;\r\n    align-items   : center;\r\n  }\r\n  .listenLabel {\r\n    min-width: 50px;\r\n  }\r\n  .verticalLine {\r\n    border-left       : 1px solid var(--secondary)\r\n    height            : 65%;\r\n  }\r\n  .dragbarHorizontal  {\r\n    position          : absolute;\r\n    top               : 0;\r\n    height            : 0.5em;\r\n    right             : 0;\r\n    left              : 0;\r\n    cursor            : ns-resize;\r\n    z-index           : 999;\r\n  }\r\n  .listenOnNetwork {\r\n    min-height: auto;\r\n  }\r\n  .ghostbar           {\r\n    position          : absolute;\r\n    height            : 6px;\r\n    opacity           : 0.5;\r\n    cursor            : row-resize;\r\n    z-index           : 9999;\r\n    left              : 0;\r\n    right             : 0;\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","import { Plugin } from '@remixproject/engine'\r\nconst yo = require('yo-yo')\r\nconst $ = require('jquery')\r\nconst EventEmitter = require('events')\r\nconst globalRegistry = require('../../global/registry')\r\nconst csjs = require('csjs-inject')\r\nrequire('remix-tabs')\r\n\r\nconst css = csjs`\r\n  .remix_tabs div[title]{\r\n    display: flex;\r\n  }\r\n`\r\n\r\nconst profile = {\r\n  name: 'tabs',\r\n  methods: ['focus'],\r\n  kind: 'other'\r\n}\r\n\r\n// @todo(#650) Merge this with MainPanel into one plugin\r\nexport class TabProxy extends Plugin {\r\n  constructor (fileManager, editor, appManager) {\r\n    super(profile)\r\n    this.event = new EventEmitter()\r\n    this.fileManager = fileManager\r\n    this.appManager = appManager\r\n    this.editor = editor\r\n    this.data = {}\r\n    this._view = {}\r\n    this._handlers = {}\r\n    this.loadedTabs = []\r\n\r\n    globalRegistry.get('themeModule').api.events.on('themeChanged', (theme) => {\r\n    // update invert for all icons\r\n      this.updateImgStyles()\r\n    })\r\n\r\n    fileManager.events.on('fileRemoved', (name) => {\r\n      this.removeTab(name)\r\n    })\r\n\r\n    fileManager.events.on('fileClosed', (name) => {\r\n      this.removeTab(name)\r\n    })\r\n\r\n    fileManager.events.on('currentFileChanged', (file) => {\r\n      if (this._handlers[file]) {\r\n        this._view.filetabs.activateTab(file)\r\n        return\r\n      }\r\n      this.addTab(file, '', () => {\r\n        this.fileManager.open(file)\r\n        this.event.emit('openFile', file)\r\n      },\r\n      () => {\r\n        this.fileManager.closeFile(file)\r\n        this.event.emit('closeFile', file)\r\n      })\r\n    })\r\n\r\n    fileManager.events.on('fileRenamed', (oldName, newName, isFolder) => {\r\n      if (isFolder) return\r\n      // should change the tab title too\r\n      this.addTab(newName, '', () => {\r\n        this.fileManager.open(newName)\r\n        this.event.emit('openFile', newName)\r\n      },\r\n      () => {\r\n        this.fileManager.closeFile(newName)\r\n        this.event.emit('closeFile', newName)\r\n      })\r\n      this.removeTab(oldName)\r\n    })\r\n\r\n    appManager.event.on('activate', ({ name, location, displayName, icon }) => {\r\n      if (location === 'mainPanel') {\r\n        this.addTab(\r\n          name,\r\n          displayName,\r\n          () => this.event.emit('switchApp', name),\r\n          () => {\r\n            this.event.emit('closeApp', name)\r\n            this.appManager.deactivatePlugin(name)\r\n          },\r\n          icon\r\n        )\r\n        this.switchTab(name)\r\n      }\r\n    })\r\n\r\n    appManager.event.on('deactivate', (profile) => {\r\n      this.removeTab(profile.name)\r\n    })\r\n  }\r\n\r\n  focus (name) {\r\n    this.event.emit('switchApp', name)\r\n    this._view.filetabs.activateTab(name)\r\n  }\r\n\r\n  updateImgStyles () {\r\n    const images = this._view.filetabs.getElementsByClassName('iconImage')\r\n    for (const element of images) {\r\n      globalRegistry.get('themeModule').api.fixInvert(element)\r\n    };\r\n  }\r\n\r\n  switchTab (tabName) {\r\n    if (this._handlers[tabName]) {\r\n      this._handlers[tabName].switchTo()\r\n      this._view.filetabs.activateTab(tabName)\r\n    }\r\n  }\r\n\r\n  switchNextTab () {\r\n    const active = this._view.filetabs.active\r\n    if (active && this._handlers[active]) {\r\n      const handlers = Object.keys(this._handlers)\r\n      let i = handlers.indexOf(active)\r\n      if (i >= 0) {\r\n        i = handlers[i + 1] ? i + 1 : 0\r\n        this.switchTab(handlers[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  switchPreviousTab () {\r\n    const active = this._view.filetabs.active\r\n    if (active && this._handlers[active]) {\r\n      const handlers = Object.keys(this._handlers)\r\n      let i = handlers.indexOf(active)\r\n      if (i >= 0) {\r\n        i = handlers[i - 1] ? i - 1 : handlers.length - 1\r\n        this.switchTab(handlers[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  switchToActiveTab () {\r\n    const active = this._view.filetabs.active\r\n    if (active && this._handlers[active]) {\r\n      this.switchTab(active)\r\n    }\r\n  }\r\n\r\n  addTab (name, title, switchTo, close, icon) {\r\n    if (this._handlers[name]) return\r\n\r\n    var slash = name.split('/')\r\n    const tabPath = slash.reverse()\r\n    const tempTitle = []\r\n\r\n    if (!title) {\r\n      for (let i = 0; i < tabPath.length; i++) {\r\n        tempTitle.push(tabPath[i])\r\n        const formatPath = [...tempTitle].reverse()\r\n        const index = this.loadedTabs.findIndex(({ title }) => title === formatPath.join('/'))\r\n\r\n        if (index === -1) {\r\n          title = formatPath.join('/')\r\n          const titleLength = formatPath.length\r\n          this.loadedTabs.push({\r\n            name,\r\n            title\r\n          })\r\n          formatPath.shift()\r\n          if (formatPath.length > 0) {\r\n            const duplicateTabName = this.loadedTabs.find(({ title }) => title === formatPath.join('/')).name\r\n            const duplicateTabPath = duplicateTabName.split('/')\r\n            const duplicateTabFormatPath = [...duplicateTabPath].reverse()\r\n            const duplicateTabTitle = duplicateTabFormatPath.slice(0, titleLength).reverse().join('/')\r\n\r\n            this.loadedTabs.push({\r\n              name: duplicateTabName,\r\n              title: duplicateTabTitle\r\n            })\r\n            this._view.filetabs.removeTab(duplicateTabName)\r\n            this._view.filetabs.addTab({\r\n              id: duplicateTabName,\r\n              title: duplicateTabTitle,\r\n              icon,\r\n              tooltip: duplicateTabName\r\n            })\r\n          }\r\n          break\r\n        }\r\n      }\r\n    } else {\r\n      this.loadedTabs.push({\r\n        name,\r\n        title\r\n      })\r\n    }\r\n\r\n    this._view.filetabs.addTab({\r\n      id: name,\r\n      title,\r\n      icon,\r\n      tooltip: name\r\n    })\r\n    this.updateImgStyles()\r\n    this._handlers[name] = { switchTo, close }\r\n  }\r\n\r\n  removeTab (name) {\r\n    this._view.filetabs.removeTab(name)\r\n    delete this._handlers[name]\r\n    this.switchToActiveTab()\r\n    this.loadedTabs = this.loadedTabs.filter(tab => tab.name !== name)\r\n    this.updateImgStyles()\r\n  }\r\n\r\n  addHandler (type, fn) {\r\n    this.handlers[type] = fn\r\n  }\r\n\r\n  onZoomOut () {\r\n    this.editor.editorFontSize(-1)\r\n  }\r\n\r\n  onZoomIn () {\r\n    this.editor.editorFontSize(1)\r\n  }\r\n\r\n  renderTabsbar () {\r\n    this._view.filetabs = yo`<remix-tabs class=${css.remix_tabs}></remix-tabs>`\r\n    this._view.filetabs.addEventListener('tabClosed', (event) => {\r\n      if (this._handlers[event.detail]) this._handlers[event.detail].close()\r\n      this.event.emit('tabCountChanged', this._view.filetabs.tabs.length)\r\n    })\r\n    this._view.filetabs.addEventListener('tabActivated', (event) => {\r\n      if (this._handlers[event.detail]) this._handlers[event.detail].switchTo()\r\n      this.event.emit('tabCountChanged', this._view.filetabs.tabs.length)\r\n    })\r\n\r\n    this._view.filetabs.canAdd = false\r\n\r\n    const zoomBtns = yo`\r\n      <div class=\"d-flex flex-row justify-content-center align-items-center\">\r\n        <span data-id=\"tabProxyZoomOut\" class=\"btn btn-sm px-1 fas fa-search-minus text-dark\" onclick=${() => this.onZoomOut()}></span>\r\n        <span data-id=\"tabProxyZoomIn\" class=\"btn btn-sm px-1 fas fa-search-plus text-dark\" onclick=${() => this.onZoomIn()}></span>\r\n      </div>\r\n    `\r\n\r\n    // @todo(#2492) remove style after the mainPanel layout fix.\r\n    this._view.tabs = yo`\r\n      <div  style=\"display: -webkit-box; max-height: 32px\">\r\n        ${zoomBtns}\r\n        ${this._view.filetabs}\r\n      </div>\r\n    `\r\n\r\n    // tabs\r\n    var $filesEl = $(this._view.filetabs)\r\n\r\n    // Switch tab\r\n    var self = this\r\n    $filesEl.on('click', '.file:not(.active)', function (ev) {\r\n      ev.preventDefault()\r\n      var name = $(this).find('.name').text()\r\n      self._handlers[name].switchTo()\r\n      return false\r\n    })\r\n\r\n    // Remove current tab\r\n    $filesEl.on('click', '.file .remove', function (ev) {\r\n      ev.preventDefault()\r\n      var name = $(this).parent().find('.name').text()\r\n      self._handlers[name].close()\r\n      return false\r\n    })\r\n\r\n    return this._view.tabs\r\n  }\r\n}\r\n","/* global Node, requestAnimationFrame */\r\nimport { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\n\r\nvar yo = require('yo-yo')\r\nvar javascriptserialize = require('javascript-serialize')\r\nvar jsbeautify = require('js-beautify')\r\nvar type = require('component-type')\r\nvar vm = require('vm')\r\nvar EventManager = require('../../lib/events')\r\n\r\nvar CommandInterpreterAPI = require('../../lib/cmdInterpreterAPI')\r\nvar AutoCompletePopup = require('../ui/auto-complete-popup')\r\nvar TxLogger = require('../../app/ui/txLogger')\r\n\r\nvar csjs = require('csjs-inject')\r\n\r\nvar css = require('./styles/terminal-styles')\r\n\r\nvar KONSOLES = []\r\n\r\nfunction register (api) { KONSOLES.push(api) }\r\n\r\nvar ghostbar = yo`<div class=${css.ghostbar} bg-secondary></div>`\r\n\r\nconst profile = {\r\n  displayName: 'Terminal',\r\n  name: 'terminal',\r\n  methods: [],\r\n  events: [],\r\n  description: ' - ',\r\n  version: packageJson.version\r\n}\r\n\r\nclass Terminal extends Plugin {\r\n  constructor (opts, api) {\r\n    super(profile)\r\n    var self = this\r\n    self.event = new EventManager()\r\n    self.blockchain = opts.blockchain\r\n    self._api = api\r\n    self._opts = opts\r\n    self.data = {\r\n      lineLength: opts.lineLength || 80, // ????\r\n      session: [],\r\n      activeFilters: { commands: {}, input: '' },\r\n      filterFns: {}\r\n    }\r\n    self._view = { el: null, bar: null, input: null, term: null, journal: null, cli: null }\r\n    self._components = {}\r\n    self._components.cmdInterpreter = new CommandInterpreterAPI(this, null, self.blockchain)\r\n    self._components.autoCompletePopup = new AutoCompletePopup(self._opts)\r\n    self._components.autoCompletePopup.event.register('handleSelect', function (input) {\r\n      const textList = self._view.input.innerText.split(' ')\r\n      textList.pop()\r\n      textList.push(input)\r\n      self._view.input.innerText = textList\r\n      self._view.input.focus()\r\n      self.putCursor2End(self._view.input)\r\n    })\r\n    self._commands = {}\r\n    self.commands = {}\r\n    self._JOURNAL = []\r\n    self._jobs = []\r\n    self._INDEX = {}\r\n    self._INDEX.all = []\r\n    self._INDEX.allMain = []\r\n    self._INDEX.commands = {}\r\n    self._INDEX.commandsMain = {}\r\n    self.registerCommand('html', self._blocksRenderer('html'), { activate: true })\r\n    self.registerCommand('log', self._blocksRenderer('log'), { activate: true })\r\n    self.registerCommand('info', self._blocksRenderer('info'), { activate: true })\r\n    self.registerCommand('warn', self._blocksRenderer('warn'), { activate: true })\r\n    self.registerCommand('error', self._blocksRenderer('error'), { activate: true })\r\n    self.registerCommand('script', function execute (args, scopedCommands, append) {\r\n      var script = String(args[0])\r\n      self._shell(script, scopedCommands, function (error, output) {\r\n        if (error) scopedCommands.error(error)\r\n        else if (output) scopedCommands.log(output)\r\n      })\r\n    }, { activate: true })\r\n    function basicFilter (value, query) { try { return value.indexOf(query) !== -1 } catch (e) { return false } }\r\n\r\n    self.registerFilter('log', basicFilter)\r\n    self.registerFilter('info', basicFilter)\r\n    self.registerFilter('warn', basicFilter)\r\n    self.registerFilter('error', basicFilter)\r\n    self.registerFilter('script', basicFilter)\r\n\r\n    if (opts.shell) self._shell = opts.shell // ???\r\n    register(self)\r\n  }\r\n\r\n  onActivation () {\r\n    this.on('scriptRunner', 'log', (msg) => {\r\n      this.commands.log.apply(this.commands, msg.data)\r\n    })\r\n    this.on('scriptRunner', 'info', (msg) => {\r\n      this.commands.info.apply(this.commands, msg.data)\r\n    })\r\n    this.on('scriptRunner', 'warn', (msg) => {\r\n      this.commands.warn.apply(this.commands, msg.data)\r\n    })\r\n    this.on('scriptRunner', 'error', (msg) => {\r\n      this.commands.error.apply(this.commands, msg.data)\r\n    })\r\n  }\r\n\r\n  onDeactivation () {\r\n    this.off('scriptRunner', 'log')\r\n    this.off('scriptRunner', 'info')\r\n    this.off('scriptRunner', 'warn')\r\n    this.off('scriptRunner', 'error')\r\n  }\r\n\r\n  logHtml (html) {\r\n    var command = this.commands.html\r\n    if (typeof command === 'function') command(html)\r\n  }\r\n\r\n  focus () {\r\n    if (this._view.input) this._view.input.focus()\r\n  }\r\n\r\n  render () {\r\n    var self = this\r\n    if (self._view.el) return self._view.el\r\n    self._view.journal = yo`<div id=\"journal\" class=${css.journal} data-id=\"terminalJournal\"></div>`\r\n    self._view.input = yo`\r\n      <span class=${css.input} onload=${() => { this.focus() }} onpaste=${paste} onkeydown=${change}></span>\r\n    `\r\n    self._view.input.setAttribute('spellcheck', 'false')\r\n    self._view.input.setAttribute('contenteditable', 'true')\r\n    self._view.input.setAttribute('id', 'terminalCliInput')\r\n    self._view.input.setAttribute('data-id', 'terminalCliInput')\r\n\r\n    self._view.input.innerText = '\\n'\r\n    self._view.cli = yo`\r\n      <div id=\"terminalCli\" data-id=\"terminalCli\" class=\"${css.cli}\" onclick=${focusinput}>\r\n        <span class=${css.prompt}>${'>'}</span>\r\n        ${self._view.input}\r\n      </div>\r\n    `\r\n\r\n    self._view.icon = yo`\r\n      <i onmouseenter=${hover} onmouseleave=${hover} onmousedown=${minimize}\r\n      class=\"mx-2 ${css.toggleTerminal} fas fa-angle-double-down\" data-id=\"terminalToggleIcon\"></i>`\r\n    self._view.dragbar = yo`\r\n      <div onmousedown=${mousedown} class=${css.dragbarHorizontal}></div>`\r\n\r\n    self._view.pendingTxCount = yo`<div class=\"mx-2\" title='Pending Transactions'>0</div>`\r\n    self._view.inputSearch = yo`<input\r\n      spellcheck=\"false\"\r\n      type=\"text\"\r\n      class=\"border ${css.filter} form-control\"\r\n      id=\"searchInput\"\r\n      onkeydown=${filter}\r\n      placeholder=\"Search with transaction hash or address\"\r\n      data-id=\"terminalInputSearch\">\r\n    </input>`\r\n    self._view.bar = yo`\r\n      <div class=\"${css.bar}\">\r\n        ${self._view.dragbar}\r\n        <div class=\"${css.menu} border-top border-dark bg-light\" data-id=\"terminalToggleMenu\">\r\n          ${self._view.icon}\r\n          <div class=\"mx-2\" id=\"clearConsole\" data-id=\"terminalClearConsole\" onclick=${clear}>\r\n            <i class=\"fas fa-ban\" aria-hidden=\"true\" title=\"Clear console\"\r\n            onmouseenter=${hover} onmouseleave=${hover}></i>\r\n          </div>\r\n          ${self._view.pendingTxCount}\r\n          <div class=${css.verticalLine}></div>\r\n          <div class=\"pt-1 h-80 mx-3 align-items-center ${css.listenOnNetwork} custom-control custom-checkbox\">\r\n            <input\r\n              class=\"custom-control-input\"\r\n              id=\"listenNetworkCheck\"\r\n              onchange=${listenOnNetwork}\r\n              type=\"checkbox\"\r\n              title=\"If checked Remix will listen on all transactions mined in the current environment and not only transactions created by you\"\r\n            >\r\n            <label\r\n              class=\"pt-1 form-check-label custom-control-label text-nowrap\"\"\r\n              title=\"If checked Remix will listen on all transactions mined in the current environment and not only transactions created by you\"\r\n              for=\"listenNetworkCheck\"\r\n            >\r\n              listen on network\r\n            </label>\r\n          </div>\r\n          <div class=${css.search}>\r\n            <i class=\"fas fa-search ${css.searchIcon} bg-light\" aria-hidden=\"true\"></i>\r\n            ${self._view.inputSearch}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `\r\n    self._view.term = yo`\r\n      <div class=\"${css.terminal_container}\" tabindex=\"-1\" data-id=\"terminalContainer\" onscroll=${throttle(reattach, 10)} onkeydown=${focusinput}>\r\n        ${self._components.autoCompletePopup.render()}\r\n        <div data-id=\"terminalContainerDisplay\" style=\"\r\n          position: absolute;\r\n          height: 100%;\r\n          width: 100%;\r\n          opacity: 0.1;\r\n          z-index: -1;\r\n        \"></div>\r\n        <div class=${css.terminal}>\r\n            ${self._view.journal}\r\n            ${self._view.cli}\r\n        </div>\r\n      </div>\r\n    `\r\n    self._view.el = yo`\r\n      <div class=\"${css.panel}\" style=\"height: 180px;\">\r\n        ${self._view.bar}\r\n        ${self._view.term}\r\n      </div>\r\n    `\r\n    setInterval(async () => {\r\n      try {\r\n        self._view.pendingTxCount.innerHTML = await self.call('udapp', 'pendingTransactionsCount')\r\n      } catch (err) {}\r\n    }, 1000)\r\n\r\n    function listenOnNetwork (ev) {\r\n      self.event.trigger('listenOnNetWork', [ev.currentTarget.checked])\r\n    }\r\n    function paste (event) {\r\n      const selection = window.getSelection()\r\n      if (!selection.rangeCount) return false\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n      var clipboard = (event.clipboardData || window.clipboardData)\r\n      var text = clipboard.getData('text/plain')\r\n      text = text.replace(/[^\\x20-\\xFF]/gi, '') // remove non-UTF-8 characters\r\n      var temp = document.createElement('div')\r\n      temp.innerHTML = text\r\n      var textnode = document.createTextNode(temp.textContent)\r\n      selection.getRangeAt(0).insertNode(textnode)\r\n      selection.empty()\r\n      self.scroll2bottom()\r\n      placeCaretAtEnd(event.currentTarget)\r\n    }\r\n    function placeCaretAtEnd (el) {\r\n      el.focus()\r\n      var range = document.createRange()\r\n      range.selectNodeContents(el)\r\n      range.collapse(false)\r\n      var sel = window.getSelection()\r\n      sel.removeAllRanges()\r\n      sel.addRange(range)\r\n    }\r\n    function throttle (fn, wait) {\r\n      var time = Date.now()\r\n      return function debounce () {\r\n        if ((time + wait - Date.now()) < 0) {\r\n          fn.apply(this, arguments)\r\n          time = Date.now()\r\n        }\r\n      }\r\n    }\r\n    var css2 = csjs`\r\n      .anchor            {\r\n        position         : static;\r\n        border-top       : 2px dotted blue;\r\n        height           : 10px;\r\n      }\r\n      .overlay           {\r\n        position         : absolute;\r\n        width            : 100%;\r\n        display          : flex;\r\n        align-items      : center;\r\n        justify-content  : center;\r\n        bottom           : 0;\r\n        right            : 15px;\r\n        min-height       : 20px;\r\n      }\r\n      .text              {\r\n        z-index          : 2;\r\n        color            : black;\r\n        font-weight      : bold;\r\n        pointer-events   : none;\r\n      }\r\n      .background        {\r\n        z-index          : 1;\r\n        opacity          : 0.8;\r\n        background-color : #a6aeba;\r\n        cursor           : pointer;\r\n      }\r\n      .ul                 {\r\n        padding-left     : 20px;\r\n        padding-bottom   : 5px;\r\n      }\r\n    `\r\n    var text = yo`<div class=\"${css2.overlay} ${css2.text}\"></div>`\r\n    var background = yo`<div class=\"${css2.overlay} ${css2.background}\"></div>`\r\n    var placeholder = yo`<div class=${css2.anchor}>${background}${text}</div>`\r\n    var inserted = false\r\n\r\n    window.addEventListener('resize', function (event) {\r\n      self.event.trigger('resize', [])\r\n      self.event.trigger('resize', [])\r\n    })\r\n\r\n    function focusinput (event) {\r\n      if (\r\n        event.altKey ||\r\n        event.ctrlKey ||\r\n        event.metaKey ||\r\n        event.shiftKey ||\r\n        event.key === 'Down' ||\r\n        event.key === 'ArrowDown' ||\r\n        event.key === 'Up' ||\r\n        event.key === 'ArrowUp' ||\r\n        event.key === 'Left' ||\r\n        event.key === 'ArrowLeft' ||\r\n        event.key === 'Right' ||\r\n        event.key === 'ArrowRight' ||\r\n        event.key === 'Esc' ||\r\n        event.key === 'Escape'\r\n      ) return\r\n\r\n      refocus()\r\n    }\r\n\r\n    function refocus () {\r\n      self._view.input.focus()\r\n      reattach({ currentTarget: self._view.term })\r\n      delete self.scroll2bottom\r\n      self.scroll2bottom()\r\n    }\r\n    function reattach (event) {\r\n      var el = event.currentTarget\r\n      var isBottomed = el.scrollHeight - el.scrollTop - el.clientHeight < 30\r\n      if (isBottomed) {\r\n        if (inserted) {\r\n          text.innerText = ''\r\n          background.onclick = undefined\r\n          if (placeholder.parentElement) self._view.journal.removeChild(placeholder)\r\n        }\r\n        inserted = false\r\n        delete self.scroll2bottom\r\n      } else {\r\n        if (!inserted) self._view.journal.appendChild(placeholder)\r\n        inserted = true\r\n        check()\r\n        if (!placeholder.nextElementSibling) {\r\n          placeholder.style.display = 'none'\r\n        } else {\r\n          placeholder.style = ''\r\n        }\r\n        self.scroll2bottom = function () {\r\n          var next = placeholder.nextElementSibling\r\n          if (next) {\r\n            placeholder.style = ''\r\n            check()\r\n            var messages = 1\r\n            while ((next = next.nextElementSibling)) messages += 1\r\n            text.innerText = `${messages} new unread log entries`\r\n          } else {\r\n            placeholder.style.display = 'none'\r\n          }\r\n        }\r\n      }\r\n    }\r\n    function check () {\r\n      var pos1 = self._view.term.offsetHeight + self._view.term.scrollTop - (self._view.el.offsetHeight * 0.15)\r\n      var pos2 = placeholder.offsetTop\r\n      if ((pos1 - pos2) > 0) {\r\n        text.style.display = 'none'\r\n        background.style.position = 'relative'\r\n        background.style.opacity = 0.3\r\n        background.style.right = 0\r\n        background.style.borderBox = 'content-box'\r\n        background.style.padding = '2px'\r\n        background.style.height = (self._view.journal.offsetHeight - (placeholder.offsetTop + placeholder.offsetHeight)) + 'px'\r\n        background.onclick = undefined\r\n        background.style.cursor = 'default'\r\n        background.style.pointerEvents = 'none'\r\n      } else {\r\n        background.style = ''\r\n        text.style = ''\r\n        background.onclick = function (event) {\r\n          placeholder.scrollIntoView()\r\n          check()\r\n        }\r\n      }\r\n    }\r\n    function hover (event) { event.currentTarget.classList.toggle(css.hover) }\r\n    function minimize (event) {\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n      if (event.button === 0) {\r\n        var classList = self._view.icon.classList\r\n        classList.toggle('fa-angle-double-down')\r\n        classList.toggle('fa-angle-double-up')\r\n        self.event.trigger('resize', [])\r\n      }\r\n    }\r\n    var filtertimeout = null\r\n    function filter (event) {\r\n      if (filtertimeout) {\r\n        clearTimeout(filtertimeout)\r\n      }\r\n      filtertimeout = setTimeout(() => {\r\n        self.updateJournal({ type: 'search', value: self._view.inputSearch.value })\r\n        self.scroll2bottom()\r\n      }, 500)\r\n    }\r\n    function clear (event) {\r\n      refocus()\r\n      self._view.journal.innerHTML = ''\r\n    }\r\n    // ----------------- resizeable ui ---------------\r\n    function mousedown (event) {\r\n      event.preventDefault()\r\n      if (event.which === 1) {\r\n        moveGhostbar(event)\r\n        document.body.appendChild(ghostbar)\r\n        document.addEventListener('mousemove', moveGhostbar)\r\n        document.addEventListener('mouseup', removeGhostbar)\r\n        document.addEventListener('keydown', cancelGhostbar)\r\n      }\r\n    }\r\n    function cancelGhostbar (event) {\r\n      if (event.keyCode === 27) {\r\n        document.body.removeChild(ghostbar)\r\n        document.removeEventListener('mousemove', moveGhostbar)\r\n        document.removeEventListener('mouseup', removeGhostbar)\r\n        document.removeEventListener('keydown', cancelGhostbar)\r\n      }\r\n    }\r\n    function moveGhostbar (event) { // @NOTE HORIZONTAL ghostbar\r\n      ghostbar.style.top = self._api.getPosition(event) + 'px'\r\n    }\r\n    function removeGhostbar (event) {\r\n      if (self._view.icon.classList.contains('fa-angle-double-up')) {\r\n        self._view.icon.classList.toggle('fa-angle-double-down')\r\n        self._view.icon.classList.toggle('fa-angle-double-up')\r\n      }\r\n      document.body.removeChild(ghostbar)\r\n      document.removeEventListener('mousemove', moveGhostbar)\r\n      document.removeEventListener('mouseup', removeGhostbar)\r\n      document.removeEventListener('keydown', cancelGhostbar)\r\n      self.event.trigger('resize', [self._api.getPosition(event)])\r\n    }\r\n\r\n    self._cmdHistory = []\r\n    self._cmdIndex = -1\r\n    self._cmdTemp = ''\r\n\r\n    var intro = yo`\r\n      <div><div> - Welcome to Remix ${packageJson.version} - </div><br>\r\n      <div>You can use this terminal to: </div>\r\n      <ul class=${css2.ul}>\r\n        <li>Check transactions details and start debugging.</li>\r\n        <li>Execute JavaScript scripts:\r\n          <br />\r\n          <i> - Input a script directly in the command line interface </i>\r\n          <br />\r\n          <i> - Select a Javascript file in the file explorer and then run \\`remix.execute()\\` or \\`remix.exeCurrent()\\`  in the command line interface  </i>\r\n          <br />\r\n          <i> - Right click on a JavaScript file in the file explorer and then click \\`Run\\` </i>\r\n        </li>\r\n      </ul>\r\n      <div>The following libraries are accessible:</div>\r\n      <ul class=${css2.ul}>\r\n        <li><a target=\"_blank\" href=\"https://web3js.readthedocs.io/en/1.0/\">web3 version 1.0.0</a></li>\r\n        <li><a target=\"_blank\" href=\"https://docs.ethers.io\">ethers.js</a> </li>\r\n        <li><a target=\"_blank\" href=\"https://www.npmjs.com/package/swarmgw\">swarmgw</a> </li>\r\n        <li>remix (run remix.help() for more info)</li>\r\n      </ul>\r\n      </div>\r\n    `\r\n\r\n    self._shell('remix.help()', self.commands, () => {})\r\n    self.commands.html(intro)\r\n\r\n    self._components.txLogger = new TxLogger(this, self.blockchain)\r\n    self._components.txLogger.event.register('debuggingRequested', async (hash) => {\r\n      // TODO should probably be in the run module\r\n      if (!await self._opts.appManager.isActive('debugger')) await self._opts.appManager.activatePlugin('debugger')\r\n      this.call('debugger', 'debug', hash)\r\n      this.call('menuicons', 'select', 'debugger')\r\n    })\r\n\r\n    return self._view.el\r\n\r\n    function wrapScript (script) {\r\n      const isKnownScript = ['remix.', 'git'].some(prefix => script.trim().startsWith(prefix))\r\n      if (isKnownScript) return script\r\n      return `\r\n        try {\r\n          const ret = ${script};\r\n          if (ret instanceof Promise) {\r\n            ret.then((result) => { console.log(result) }).catch((error) => { console.log(error) })\r\n          } else {\r\n            console.log(ret)\r\n          }   \r\n        } catch (e) {\r\n          console.log(e.message)\r\n        }\r\n        `\r\n    }\r\n    function change (event) {\r\n      if (self._components.autoCompletePopup.handleAutoComplete(\r\n        event,\r\n        self._view.input.innerText)) return\r\n      if (self._view.input.innerText.length === 0) self._view.input.innerText += '\\n'\r\n      if (event.which === 13) {\r\n        if (event.ctrlKey) { // <ctrl+enter>\r\n          self._view.input.innerText += '\\n'\r\n          self.putCursor2End(self._view.input)\r\n          self.scroll2bottom()\r\n          self._components.autoCompletePopup.removeAutoComplete()\r\n        } else { // <enter>\r\n          self._cmdIndex = -1\r\n          self._cmdTemp = ''\r\n          event.preventDefault()\r\n          var script = self._view.input.innerText.trim()\r\n          self._view.input.innerText = '\\n'\r\n          if (script.length) {\r\n            self._cmdHistory.unshift(script)\r\n            self.commands.script(wrapScript(script))\r\n          }\r\n          self._components.autoCompletePopup.removeAutoComplete()\r\n        }\r\n      } else if (event.which === 38) { // <arrowUp>\r\n        var len = self._cmdHistory.length\r\n        if (len === 0) return event.preventDefault()\r\n        if (self._cmdHistory.length - 1 > self._cmdIndex) {\r\n          self._cmdIndex++\r\n        }\r\n        self._view.input.innerText = self._cmdHistory[self._cmdIndex]\r\n        self.putCursor2End(self._view.input)\r\n        self.scroll2bottom()\r\n      } else if (event.which === 40) { // <arrowDown>\r\n        if (self._cmdIndex > -1) {\r\n          self._cmdIndex--\r\n        }\r\n        self._view.input.innerText = self._cmdIndex >= 0 ? self._cmdHistory[self._cmdIndex] : self._cmdTemp\r\n        self.putCursor2End(self._view.input)\r\n        self.scroll2bottom()\r\n      } else {\r\n        self._cmdTemp = self._view.input.innerText\r\n      }\r\n    }\r\n  }\r\n\r\n  putCursor2End (editable) {\r\n    var range = document.createRange()\r\n    range.selectNode(editable)\r\n    var child = editable\r\n    var chars\r\n\r\n    while (child) {\r\n      if (child.lastChild) child = child.lastChild\r\n      else break\r\n      if (child.nodeType === Node.TEXT_NODE) {\r\n        chars = child.textContent.length\r\n      } else {\r\n        chars = child.innerHTML.length\r\n      }\r\n    }\r\n\r\n    range.setEnd(child, chars)\r\n    var toStart = true\r\n    var toEnd = !toStart\r\n    range.collapse(toEnd)\r\n\r\n    var sel = window.getSelection()\r\n    sel.removeAllRanges()\r\n    sel.addRange(range)\r\n\r\n    editable.focus()\r\n  }\r\n\r\n  updateJournal (filterEvent) {\r\n    var self = this\r\n    var commands = self.data.activeFilters.commands\r\n    var value = filterEvent.value\r\n    if (filterEvent.type === 'select') {\r\n      commands[value] = true\r\n      if (!self._INDEX.commandsMain[value]) return\r\n      self._INDEX.commandsMain[value].forEach(item => {\r\n        item.root.steps.forEach(item => { self._JOURNAL[item.gidx] = item })\r\n        self._JOURNAL[item.gidx] = item\r\n      })\r\n    } else if (filterEvent.type === 'deselect') {\r\n      commands[value] = false\r\n      if (!self._INDEX.commandsMain[value]) return\r\n      self._INDEX.commandsMain[value].forEach(item => {\r\n        item.root.steps.forEach(item => { self._JOURNAL[item.gidx].hide = true })\r\n        self._JOURNAL[item.gidx].hide = true\r\n      })\r\n    } else if (filterEvent.type === 'search') {\r\n      if (value !== self.data.activeFilters.input) {\r\n        var query = self.data.activeFilters.input = value\r\n        var items = self._JOURNAL\r\n        for (var gidx = 0, len = items.length; gidx < len; gidx++) {\r\n          var item = items[gidx]\r\n          if (item && self.data.filterFns[item.cmd]) {\r\n            var show = query.length ? self.data.filterFns[item.cmd](item.args, query) : true\r\n            item.hide = !show\r\n          }\r\n        }\r\n      }\r\n    }\r\n    var df = document.createDocumentFragment()\r\n    self._JOURNAL.forEach(item => {\r\n      if (item && item.el && !item.hide) df.appendChild(item.el)\r\n    })\r\n    self._view.journal.innerHTML = ''\r\n    requestAnimationFrame(function updateDOM () {\r\n      self._view.journal.appendChild(df)\r\n    })\r\n  }\r\n\r\n  _appendItem (item) {\r\n    var self = this\r\n    var { el, gidx } = item\r\n    self._JOURNAL[gidx] = item\r\n    if (!self._jobs.length) {\r\n      requestAnimationFrame(function updateTerminal () {\r\n        self._jobs.forEach(el => self._view.journal.appendChild(el))\r\n        self.scroll2bottom()\r\n        self._jobs = []\r\n      })\r\n    }\r\n    if (self.data.activeFilters.commands[item.cmd]) self._jobs.push(el)\r\n  }\r\n\r\n  scroll2bottom () {\r\n    var self = this\r\n    setTimeout(function () {\r\n      self._view.term.scrollTop = self._view.term.scrollHeight\r\n    }, 0)\r\n  }\r\n\r\n  _blocksRenderer (mode) {\r\n    if (mode === 'html') {\r\n      return function logger (args, scopedCommands, append) {\r\n        if (args.length) append(args[0])\r\n      }\r\n    }\r\n    mode = {\r\n      log: 'text-info',\r\n      info: 'text-info',\r\n      warn: 'text-warning',\r\n      error: 'text-danger'\r\n    }[mode] // defaults\r\n\r\n    if (mode) {\r\n      const filterUndefined = (el) => el !== undefined && el !== null\r\n      return function logger (args, scopedCommands, append) {\r\n        var types = args.filter(filterUndefined).map(type)\r\n        var values = javascriptserialize.apply(null, args.filter(filterUndefined)).map(function (val, idx) {\r\n          if (typeof args[idx] === 'string') val = args[idx]\r\n          if (types[idx] === 'element') val = jsbeautify.html(val)\r\n          return val\r\n        })\r\n        if (values.length) {\r\n          append(yo`<span class=\"${mode}\" >${values}</span>`)\r\n        }\r\n      }\r\n    } else {\r\n      throw new Error('mode is not supported')\r\n    }\r\n  }\r\n\r\n  _scopeCommands (append) {\r\n    var self = this\r\n    var scopedCommands = {}\r\n    Object.keys(self.commands).forEach(function makeScopedCommand (cmd) {\r\n      var command = self._commands[cmd]\r\n      scopedCommands[cmd] = function _command () {\r\n        var args = [...arguments]\r\n        command(args, scopedCommands, el => append(cmd, args, blockify(el)))\r\n      }\r\n    })\r\n    return scopedCommands\r\n  }\r\n\r\n  registerFilter (commandName, filterFn) {\r\n    this.data.filterFns[commandName] = filterFn\r\n  }\r\n\r\n  registerCommand (name, command, opts) {\r\n    var self = this\r\n    name = String(name)\r\n    if (self._commands[name]) throw new Error(`command \"${name}\" exists already`)\r\n    if (typeof command !== 'function') throw new Error(`invalid command: ${command}`)\r\n    self._commands[name] = command\r\n    self._INDEX.commands[name] = []\r\n    self._INDEX.commandsMain[name] = []\r\n    self.commands[name] = function _command () {\r\n      var args = [...arguments]\r\n      var steps = []\r\n      var root = { steps, cmd: name }\r\n      var ITEM = { root, cmd: name }\r\n      root.gidx = self._INDEX.allMain.push(ITEM) - 1\r\n      root.idx = self._INDEX.commandsMain[name].push(ITEM) - 1\r\n      function append (cmd, params, el) {\r\n        var item\r\n        if (cmd) { // subcommand\r\n          item = { el, cmd, root }\r\n        } else { // command\r\n          item = ITEM\r\n          item.el = el\r\n          cmd = name\r\n        }\r\n        item.gidx = self._INDEX.all.push(item) - 1\r\n        item.idx = self._INDEX.commands[cmd].push(item) - 1\r\n        item.step = steps.push(item) - 1\r\n        item.args = params\r\n        self._appendItem(item)\r\n      }\r\n      var scopedCommands = self._scopeCommands(append)\r\n      command(args, scopedCommands, el => append(null, args, blockify(el)))\r\n    }\r\n    var help = typeof command.help === 'string' ? command.help : [\r\n      '// no help available for:',\r\n      `terminal.commands.${name}(...)`\r\n    ].join('\\n')\r\n    self.commands[name].toString = _ => { return help }\r\n    self.commands[name].help = help\r\n    self.data.activeFilters.commands[name] = opts && opts.activate\r\n    if (opts.filterFn) {\r\n      self.registerFilter(name, opts.filterFn)\r\n    }\r\n    return self.commands[name]\r\n  }\r\n\r\n  async _shell (script, scopedCommands, done) { // default shell\r\n    if (script.indexOf('remix:') === 0) {\r\n      return done(null, 'This type of command has been deprecated and is not functionning anymore. Please run remix.help() to list available commands.')\r\n    }\r\n    var self = this\r\n    if (script.indexOf('remix.') === 0) {\r\n      // we keep the old feature. This will basically only be called when the command is querying the \"remix\" object.\r\n      // for all the other case, we use the Code Executor plugin\r\n      var context = domTerminalFeatures(self, scopedCommands, self.blockchain)\r\n      try {\r\n        var cmds = vm.createContext(context)\r\n        var result = vm.runInContext(script, cmds)\r\n        return done(null, result)\r\n      } catch (error) {\r\n        return done(error.message)\r\n      }\r\n    }\r\n    try {\r\n      let result\r\n      if (script.trim().startsWith('git')) {\r\n        result = await this.call('git', 'execute', script)\r\n      } else {\r\n        result = await this.call('scriptRunner', 'execute', script)\r\n      }\r\n      if (result) self.commands.html(yo`<pre>${result}</pre>`)\r\n      done()\r\n    } catch (error) {\r\n      done(error.message || error)\r\n    }\r\n  }\r\n}\r\n\r\nfunction domTerminalFeatures (self, scopedCommands, blockchain) {\r\n  return {\r\n    remix: self._components.cmdInterpreter\r\n  }\r\n}\r\n\r\nfunction blockify (el) { return yo`<div class=\"px-4 ${css.block}\" data-id=\"block_${el.getAttribute ? el.getAttribute('id') : ''}\">${el}</div>` }\r\n\r\nmodule.exports = Terminal\r\n","import { ViewPlugin } from '@remixproject/engine-web'\r\nimport { EventEmitter } from 'events'\r\nimport * as packageJson from '../../../../../package.json'\r\n\r\nvar yo = require('yo-yo')\r\nvar StaticAnalysis = require('./staticanalysis/staticAnalysisView')\r\nvar EventManager = require('../../lib/events')\r\n\r\nconst profile = {\r\n  name: 'solidityStaticAnalysis',\r\n  displayName: 'Solidity static analysis',\r\n  methods: [],\r\n  events: [],\r\n  icon: 'assets/img/staticAnalysis.webp',\r\n  description: 'Checks the contract code for security vulnerabilities and bad practices.',\r\n  kind: 'analysis',\r\n  location: 'sidePanel',\r\n  documentation: 'https://remix-ide.readthedocs.io/en/latest/static_analysis.html',\r\n  version: packageJson.version\r\n}\r\n\r\nclass AnalysisTab extends ViewPlugin {\r\n  constructor (registry) {\r\n    super(profile)\r\n    this.event = new EventManager()\r\n    this.events = new EventEmitter()\r\n    this.registry = registry\r\n  }\r\n\r\n  render () {\r\n    if (!this.staticanalysis) this.staticanalysis = new StaticAnalysis(this.registry, this)\r\n    this.staticanalysis.event.register('staticAnaysisWarning', (count) => {\r\n      if (count > 0) {\r\n        this.emit('statusChanged', { key: count, title: `${count} warning${count === 1 ? '' : 's'}`, type: 'warning' })\r\n      } else if (count === 0) {\r\n        this.emit('statusChanged', { key: 'succeed', title: 'no warning', type: 'success' })\r\n      } else {\r\n        // count ==-1 no compilation result\r\n        this.emit('statusChanged', { key: 'none' })\r\n      }\r\n    })\r\n    this.registry.put({ api: this.staticanalysis, name: 'staticanalysis' })\r\n\r\n    return yo`<div class=\"px-3 pb-1\" id=\"staticanalysisView\">${this.staticanalysis.render()}</div>`\r\n  }\r\n}\r\n\r\nmodule.exports = AnalysisTab\r\n","/* global */\r\nimport { ViewPlugin } from '@remixproject/engine-web'\r\nimport * as packageJson from '../../../../../package.json'\r\nimport publishToStorage from '../../publishToStorage'\r\nimport { compile } from '../compiler/compiler-helpers'\r\n\r\nconst EventEmitter = require('events')\r\nconst $ = require('jquery')\r\nconst yo = require('yo-yo')\r\nconst copy = require('copy-text-to-clipboard')\r\nvar QueryParams = require('../../lib/query-params')\r\nconst TreeView = require('../ui/TreeView')\r\nconst modalDialog = require('../ui/modaldialog')\r\nconst copyToClipboard = require('../ui/copy-to-clipboard')\r\nconst modalDialogCustom = require('../ui/modal-dialog-custom')\r\nconst parseContracts = require('./compileTab/contractParser')\r\nconst addTooltip = require('../ui/tooltip')\r\nconst globalRegistry = require('../../global/registry')\r\n\r\nvar css = require('./styles/compile-tab-styles')\r\n\r\nconst CompileTabLogic = require('./compileTab/compileTab.js')\r\nconst CompilerContainer = require('./compileTab/compilerContainer.js')\r\n\r\nconst profile = {\r\n  name: 'solidity',\r\n  displayName: 'Solidity compiler',\r\n  icon: 'assets/img/solidity.webp',\r\n  description: 'Compile solidity contracts',\r\n  kind: 'compiler',\r\n  permission: true,\r\n  location: 'sidePanel',\r\n  documentation: 'https://remix-ide.readthedocs.io/en/latest/solidity_editor.html',\r\n  version: packageJson.version,\r\n  methods: ['getCompilationResult', 'compile', 'compileWithParameters', 'setCompilerConfig']\r\n\r\n}\r\n\r\n// EditorApi:\r\n// - events: ['compilationFinished'],\r\n// - methods: ['getCompilationResult']\r\n\r\nclass CompileTab extends ViewPlugin {\r\n  constructor (editor, config, renderer, fileProvider, fileManager, contentImport) {\r\n    super(profile)\r\n    this.events = new EventEmitter()\r\n    this._view = {\r\n      el: null,\r\n      warnCompilationSlow: null,\r\n      errorContainer: null,\r\n      contractEl: null\r\n    }\r\n    this.contentImport = contentImport\r\n    this.queryParams = new QueryParams()\r\n    this.fileProvider = fileProvider\r\n    // dependencies\r\n    this.editor = editor\r\n    this.config = config\r\n    this.renderer = renderer\r\n    this.fileManager = fileManager\r\n\r\n    this.data = {\r\n      contractsDetails: {},\r\n      eventHandlers: {},\r\n      loading: false\r\n    }\r\n  }\r\n\r\n  onActivationInternal () {\r\n    this.compileTabLogic = new CompileTabLogic(this.queryParams, this.fileManager, this.editor, this.config, this.fileProvider, this.contentImport)\r\n    this.compiler = this.compileTabLogic.compiler\r\n    this.compileTabLogic.init()\r\n\r\n    this.compilerContainer = new CompilerContainer(\r\n      this.compileTabLogic,\r\n      this.editor,\r\n      this.config,\r\n      this.queryParams\r\n    )\r\n  }\r\n\r\n  /************\r\n   * EVENTS\r\n   */\r\n\r\n  listenToEvents () {\r\n    this.data.eventHandlers.onContentChanged = () => {\r\n      this.emit('statusChanged', { key: 'edited', title: 'the content has changed, needs recompilation', type: 'info' })\r\n    }\r\n    this.editor.event.register('contentChanged', this.data.eventHandlers.onContentChanged)\r\n\r\n    this.data.eventHandlers.onLoadingCompiler = () => {\r\n      this.data.loading = true\r\n      this.emit('statusChanged', { key: 'loading', title: 'loading compiler...', type: 'info' })\r\n    }\r\n    this.compiler.event.register('loadingCompiler', this.data.eventHandlers.onLoadingCompiler)\r\n\r\n    this.data.eventHandlers.onCompilerLoaded = () => {\r\n      this.data.loading = false\r\n      this.emit('statusChanged', { key: 'none' })\r\n    }\r\n    this.compiler.event.register('compilerLoaded', this.data.eventHandlers.onCompilerLoaded)\r\n\r\n    this.data.eventHandlers.onStartingCompilation = () => {\r\n      if (this._view.errorContainer) {\r\n        this._view.errorContainer.innerHTML = ''\r\n      }\r\n      this.emit('statusChanged', { key: 'loading', title: 'compiling...', type: 'info' })\r\n    }\r\n    this.compileTabLogic.event.on('startingCompilation', this.data.eventHandlers.onStartingCompilation)\r\n\r\n    this.data.eventHandlers.onCurrentFileChanged = (name) => {\r\n      this.compilerContainer.currentFile = name\r\n    }\r\n    this.fileManager.events.on('currentFileChanged', this.data.eventHandlers.onCurrentFileChanged)\r\n\r\n    this.data.eventHandlers.onNoFileSelected = () => {\r\n      this.compilerContainer.currentFile = ''\r\n    }\r\n    this.fileManager.events.on('noFileSelected', this.data.eventHandlers.onNoFileSelected)\r\n\r\n    this.data.eventHandlers.onCompilationFinished = (success, data, source) => {\r\n      this._view.errorContainer.appendChild(yo`<span data-id=\"compilationFinishedWith_${this.getCurrentVersion()}\"></span>`)\r\n      if (success) {\r\n        // forwarding the event to the appManager infra\r\n        this.emit('compilationFinished', source.target, source, 'soljson', data)\r\n        if (data.errors && data.errors.length > 0) {\r\n          this.emit('statusChanged', {\r\n            key: data.errors.length,\r\n            title: `compilation finished successful with warning${data.errors.length > 1 ? 's' : ''}`,\r\n            type: 'warning'\r\n          })\r\n        } else this.emit('statusChanged', { key: 'succeed', title: 'compilation successful', type: 'success' })\r\n        // Store the contracts\r\n        this.data.contractsDetails = {}\r\n        this.compiler.visitContracts((contract) => {\r\n          this.data.contractsDetails[contract.name] = parseContracts(\r\n            contract.name,\r\n            contract.object,\r\n            this.compiler.getSource(contract.file)\r\n          )\r\n        })\r\n      } else {\r\n        const count = (data.errors ? data.errors.filter(error => error.severity === 'error').length : 0 + data.error ? 1 : 0)\r\n        this.emit('statusChanged', { key: count, title: `compilation failed with ${count} error${count.length > 1 ? 's' : ''}`, type: 'error' })\r\n      }\r\n      // Update contract Selection\r\n      const contractMap = {}\r\n      if (success) this.compiler.visitContracts((contract) => { contractMap[contract.name] = contract })\r\n      const contractSelection = this.contractSelection(contractMap)\r\n      yo.update(this._view.contractSelection, contractSelection)\r\n\r\n      if (data.error) {\r\n        this.renderer.error(\r\n          data.error.formattedMessage || data.error,\r\n          this._view.errorContainer,\r\n          { type: data.error.severity || 'error' }\r\n        )\r\n        if (data.error.mode === 'panic') {\r\n          return modalDialogCustom.alert(yo`\r\n            <div><i class=\"fas fa-exclamation-circle ${css.panicError}\" aria-hidden=\"true\"></i>\r\n            The compiler returned with the following internal error: <br> <b>${data.error.formattedMessage}.<br>\r\n            The compiler might be in a non-sane state, please be careful and do not use further compilation data to deploy to mainnet.\r\n            It is heavily recommended to use another browser not affected by this issue (Firefox is known to not be affected).</b><br>\r\n            Please join <a href=\"https://gitter.im/ethereum/remix\" target=\"blank\" >remix gitter channel</a> for more information.</div>`)\r\n        }\r\n      }\r\n      if (data.errors && data.errors.length) {\r\n        data.errors.forEach((err) => {\r\n          if (this.config.get('hideWarnings')) {\r\n            if (err.severity !== 'warning') {\r\n              this.renderer.error(err.formattedMessage, this._view.errorContainer, { type: err.severity })\r\n            }\r\n          } else {\r\n            this.renderer.error(err.formattedMessage, this._view.errorContainer, { type: err.severity })\r\n          }\r\n        })\r\n      }\r\n    }\r\n    this.compiler.event.register('compilationFinished', this.data.eventHandlers.onCompilationFinished)\r\n\r\n    this.data.eventHandlers.onThemeChanged = (theme) => {\r\n      const invert = theme.quality === 'dark' ? 1 : 0\r\n      const img = document.getElementById('swarmLogo')\r\n      if (img) {\r\n        img.style.filter = `invert(${invert})`\r\n      }\r\n    }\r\n    globalRegistry.get('themeModule').api.events.on('themeChanged', this.data.eventHandlers.onThemeChanged)\r\n\r\n    // Run the compiler instead of trying to save the website\r\n    $(window).keydown((e) => {\r\n      // ctrl+s or command+s\r\n      if ((e.metaKey || e.ctrlKey) && e.keyCode === 83) {\r\n        e.preventDefault()\r\n        this.compileTabLogic.runCompiler()\r\n      }\r\n    })\r\n  }\r\n\r\n  getCompilationResult () {\r\n    return this.compileTabLogic.compiler.state.lastCompilationResult\r\n  }\r\n\r\n  /**\r\n   * compile using @arg fileName.\r\n   * The module UI will be updated accordingly to the new compilation result.\r\n   * This function is used by remix-plugin compiler API.\r\n   * @param {string} fileName to compile\r\n   */\r\n  compile (fileName) {\r\n    addTooltip(yo`<div><b>${this.currentRequest.from}</b> is requiring to compile <b>${fileName}</b></div>`)\r\n    return this.compileTabLogic.compileFile(fileName)\r\n  }\r\n\r\n  /**\r\n   * compile using @arg compilationTargets and @arg settings\r\n   * The module UI will *not* be updated, the compilation result is returned\r\n   * This function is used by remix-plugin compiler API.\r\n   * @param {object} map of source files.\r\n   * @param {object} settings {evmVersion, optimize, runs, version, language}\r\n   */\r\n  async compileWithParameters (compilationTargets, settings) {\r\n    const res = await compile(compilationTargets, settings)\r\n    return res\r\n  }\r\n\r\n  // This function is used for passing the compiler remix-tests\r\n  getCurrentVersion () {\r\n    return this.compilerContainer.data.selectedVersion\r\n  }\r\n\r\n  // This function is used for passing the compiler configuration to 'remix-tests'\r\n  getCurrentCompilerConfig () {\r\n    return {\r\n      currentVersion: this.compilerContainer.data.selectedVersion,\r\n      evmVersion: this.compileTabLogic.evmVersion,\r\n      optimize: this.compileTabLogic.optimize,\r\n      runs: this.compileTabLogic.runs\r\n    }\r\n  }\r\n\r\n  /**\r\n   * set the compiler configuration\r\n   * This function is used by remix-plugin compiler API.\r\n   * @param {object} settings {evmVersion, optimize, runs, version, language}\r\n   */\r\n  setCompilerConfig (settings) {\r\n    return new Promise((resolve, reject) => {\r\n      addTooltip(yo`<div><b>${this.currentRequest.from}</b> is updating the <b>Solidity compiler configuration</b>.<pre class=\"text-left\">${JSON.stringify(settings, null, '\\t')}</pre></div>`)\r\n      this.compilerContainer.setConfiguration(settings)\r\n      // @todo(#2875) should use loading compiler return value to check whether the compiler is loaded instead of \"setInterval\"\r\n      let timeout = 0\r\n      const id = setInterval(() => {\r\n        timeout++\r\n        console.log(this.data.loading)\r\n        if (!this.data.loading || timeout > 10) {\r\n          resolve()\r\n          clearInterval(id)\r\n        }\r\n      }, 200)\r\n    })\r\n  }\r\n\r\n  /*********\r\n   * SUB-COMPONENTS\r\n   */\r\n\r\n  /**\r\n   * Section to select the compiled contract\r\n   * @param {string[]} contractList Names of the compiled contracts\r\n   */\r\n  contractSelection (contractMap) {\r\n    // Return the file name of a path: ex \"browser/ballot.sol\" -> \"ballot.sol\"\r\n    const getFileName = (path) => {\r\n      const part = path.split('/')\r\n      return part[part.length - 1]\r\n    }\r\n    const contractList = contractMap ? Object.keys(contractMap).map((key) => ({\r\n      name: key,\r\n      file: getFileName(contractMap[key].file)\r\n    })) : []\r\n    const selectEl = yo`\r\n      <select\r\n        onchange=\"${e => this.selectContract(e.target.value)}\"\r\n        data-id=\"compiledContracts\" id=\"compiledContracts\" class=\"custom-select\"\r\n      >\r\n        ${contractList.map(({ name, file }) => yo`<option value=\"${name}\">${name} (${file})</option>`)}\r\n      </select>\r\n    `\r\n    // define swarm logo\r\n\r\n    const result = contractList.length\r\n      ? yo`<section class=\"${css.compilerSection} pt-3\">\r\n      <!-- Select Compiler Version -->\r\n      <div class=\"mb-3\">\r\n        <label class=\"${css.compilerLabel} form-check-label\" for=\"compiledContracts\">Contract</label>\r\n        ${selectEl}\r\n      </div>\r\n      <article class=\"mt-2 pb-0\">\r\n        <button id=\"publishOnSwarm\" class=\"btn btn-secondary btn-block\" title=\"Publish on Swarm\" onclick=\"${() => { publishToStorage('swarm', this.fileProvider, this.fileManager, this.data.contractsDetails[this.selectedContract]) }}\">\r\n          <span>Publish on Swarm</span>\r\n          <img id=\"swarmLogo\" class=\"${css.storageLogo} ml-2\" src=\"assets/img/swarm.webp\">\r\n        </button>\r\n        <button id=\"publishOnIpfs\" class=\"btn btn-secondary btn-block\" title=\"Publish on Ipfs\" onclick=\"${() => { publishToStorage('ipfs', this.fileProvider, this.fileManager, this.data.contractsDetails[this.selectedContract]) }}\">\r\n        <span>Publish on Ipfs</span>\r\n        <img id=\"ipfsLogo\" class=\"${css.storageLogo} ml-2\" src=\"assets/img/ipfs.webp\">\r\n      </button>\r\n        <button data-id=\"compilation-details\" class=\"btn btn-secondary btn-block\" title=\"Display Contract Details\" onclick=\"${() => { this.details() }}\">\r\n          Compilation Details\r\n        </button>\r\n        <!-- Copy to Clipboard -->\r\n        <div class=\"${css.contractHelperButtons}\">\r\n          <div class=\"input-group\">\r\n            <div class=\"btn-group\" role=\"group\" aria-label=\"Copy to Clipboard\">\r\n              <button class=\"btn ${css.copyButton}\" title=\"Copy ABI to clipboard\" onclick=\"${() => { this.copyABI() }}\">\r\n                <i class=\"${css.copyIcon} far fa-copy\" aria-hidden=\"true\"></i>\r\n                <span>ABI</span>\r\n              </button>\r\n              <button class=\"btn ${css.copyButton}\" title=\"Copy Bytecode to clipboard\" onclick=\"${() => { this.copyBytecode() }}\">\r\n                <i class=\"${css.copyIcon} far fa-copy\" aria-hidden=\"true\"></i>\r\n                <span>Bytecode</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>`\r\n      : yo`<section class=\"${css.container} clearfix\"><article class=\"px-2 mt-2 pb-0 d-flex\">\r\n      <span class=\"mt-2 mx-3 w-100 alert alert-warning\" role=\"alert\">No Contract Compiled Yet</span>\r\n    </article></section>`\r\n\r\n    if (contractList.length) {\r\n      this.selectedContract = selectEl.value\r\n    } else {\r\n      delete this.selectedContract\r\n    }\r\n    return result\r\n  }\r\n\r\n  // TODO : Add success alert when compilation succeed\r\n  contractCompiledSuccess () {\r\n    return yo`<div></div>`\r\n  }\r\n\r\n  // TODO : Add error alert when compilation failed\r\n  contractCompiledError () {\r\n    return yo`<div></div>`\r\n  }\r\n\r\n  /************\r\n   * METHODS\r\n   */\r\n\r\n  selectContract (contractName) {\r\n    this.selectedContract = contractName\r\n  }\r\n\r\n  details () {\r\n    const help = {\r\n      Assembly: 'Assembly opcodes describing the contract including corresponding solidity source code',\r\n      Opcodes: 'Assembly opcodes describing the contract',\r\n      'Runtime Bytecode': 'Bytecode storing the state and being executed during normal contract call',\r\n      bytecode: 'Bytecode being executed during contract creation',\r\n      functionHashes: 'List of declared function and their corresponding hash',\r\n      gasEstimates: 'Gas estimation for each function call',\r\n      metadata: 'Contains all informations related to the compilation',\r\n      metadataHash: 'Hash representing all metadata information',\r\n      abi: 'ABI: describing all the functions (input/output params, scope, ...)',\r\n      name: 'Name of the compiled contract',\r\n      swarmLocation: 'Swarm url where all metadata information can be found (contract needs to be published first)',\r\n      web3Deploy: 'Copy/paste this code to any JavaScript/Web3 console to deploy this contract'\r\n    }\r\n    if (!this.selectedContract) throw new Error('No contract compiled yet')\r\n    const contractProperties = this.data.contractsDetails[this.selectedContract]\r\n    const log = yo`<div class=\"${css.detailsJSON}\"></div>`\r\n    Object.keys(contractProperties).map(propertyName => {\r\n      const copyDetails = yo`<span class=\"${css.copyDetails}\">${copyToClipboard(() => contractProperties[propertyName])}</span>`\r\n      const questionMark = yo`<span class=\"${css.questionMark}\"><i title=\"${help[propertyName]}\" class=\"fas fa-question-circle\" aria-hidden=\"true\"></i></span>`\r\n      log.appendChild(yo`<div class=${css.log}>\r\n        <div class=\"${css.key}\">${propertyName} ${copyDetails} ${questionMark}</div>\r\n        ${this.insertValue(contractProperties, propertyName)}\r\n      </div>`)\r\n    })\r\n    modalDialog(this.selectedContract, log, { label: '' }, { label: 'Close' })\r\n  }\r\n\r\n  insertValue (details, propertyName) {\r\n    var node\r\n    if (propertyName === 'web3Deploy' || propertyName === 'name' || propertyName === 'Assembly') {\r\n      node = yo`<pre>${details[propertyName]}</pre>`\r\n    } else if (propertyName === 'abi' || propertyName === 'metadata') {\r\n      const treeView = new TreeView({\r\n        extractData: function (item, parent, key) {\r\n          var ret = {}\r\n          if (item instanceof Array) {\r\n            ret.children = item.map((item, index) => ({ key: index, value: item }))\r\n            ret.self = ''\r\n          } else if (item instanceof Object) {\r\n            ret.children = Object.keys(item).map((key) => ({ key: key, value: item[key] }))\r\n            ret.self = ''\r\n          } else {\r\n            ret.self = item\r\n            ret.children = []\r\n          }\r\n          return ret\r\n        }\r\n      })\r\n      if (details[propertyName] !== '') {\r\n        try {\r\n          node = yo`\r\n          <div>\r\n            ${treeView.render(typeof details[propertyName] === 'object' ? details[propertyName] : JSON.parse(details[propertyName]))}\r\n          </div>` // catch in case the parsing fails.\r\n        } catch (e) {\r\n          node = yo`<div>Unable to display \"${propertyName}\": ${e.message}</div>`\r\n        }\r\n      } else {\r\n        node = yo`<div> - </div>`\r\n      }\r\n    } else {\r\n      node = yo`<div>${JSON.stringify(details[propertyName], null, 4)}</div>`\r\n    }\r\n    return yo`<pre class=\"${css.value}\">${node || ''}</pre>`\r\n  }\r\n\r\n  getContractProperty (property) {\r\n    if (!this.selectedContract) throw new Error('No contract compiled yet')\r\n    const contractProperties = this.data.contractsDetails[this.selectedContract]\r\n    return contractProperties[property] || null\r\n  }\r\n\r\n  copyContractProperty (property) {\r\n    let content = this.getContractProperty(property)\r\n    if (!content) {\r\n      addTooltip('No content available for ' + property)\r\n      return\r\n    }\r\n\r\n    try {\r\n      if (typeof content !== 'string') {\r\n        content = JSON.stringify(content, null, '\\t')\r\n      }\r\n    } catch (e) {}\r\n\r\n    copy(content)\r\n    addTooltip('Copied value to clipboard')\r\n  }\r\n\r\n  copyABI () {\r\n    this.copyContractProperty('abi')\r\n  }\r\n\r\n  copyBytecode () {\r\n    this.copyContractProperty('bytecode')\r\n  }\r\n\r\n  render () {\r\n    if (this._view.el) return this._view.el\r\n    this.onActivationInternal()\r\n    this._view.errorContainer = yo`<div class=\"${css.errorBlobs} p-4\" data-id=\"compiledErrors\" ></div>`\r\n    this._view.contractSelection = this.contractSelection()\r\n    this._view.compilerContainer = this.compilerContainer.render()\r\n    this.compilerContainer.activate()\r\n    this._view.el = yo`\r\n      <div id=\"compileTabView\">\r\n        ${this._view.compilerContainer}\r\n        ${this._view.contractSelection}\r\n        ${this._view.errorContainer}\r\n      </div>`\r\n    return this._view.el\r\n  }\r\n\r\n  onActivation () {\r\n    this.listenToEvents()\r\n  }\r\n\r\n  onDeactivation () {\r\n    this.compilerContainer.deactivate()\r\n    this.editor.event.unregister('contentChanged', this.data.eventHandlers.onContentChanged)\r\n    this.compiler.event.unregister('loadingCompiler', this.data.eventHandlers.onLoadingCompiler)\r\n    this.compiler.event.unregister('compilerLoaded', this.data.eventHandlers.onCompilerLoaded)\r\n    this.compileTabLogic.event.removeListener('startingCompilation', this.data.eventHandlers.onStartingCompilation)\r\n    this.fileManager.events.removeListener('currentFileChanged', this.data.eventHandlers.onCurrentFileChanged)\r\n    this.fileManager.events.removeListener('noFileSelected', this.data.eventHandlers.onNoFileSelected)\r\n    this.compiler.event.unregister('compilationFinished', this.data.eventHandlers.onCompilationFinished)\r\n    globalRegistry.get('themeModule').api.events.removeListener('themeChanged', this.data.eventHandlers.onThemeChanged)\r\n  }\r\n}\r\n\r\nmodule.exports = CompileTab\r\n","const EventEmitter = require('events')\r\nvar Compiler = require('@remix-project/remix-solidity').Compiler\r\n\r\nclass CompileTab {\r\n  constructor (queryParams, fileManager, editor, config, fileProvider, contentImport) {\r\n    this.event = new EventEmitter()\r\n    this.queryParams = queryParams\r\n    this.compilerImport = contentImport\r\n    this.compiler = new Compiler((url, cb) => this.compilerImport.resolveAndSave(url).then((result) => cb(null, result)).catch((error) => cb(error.message)))\r\n    this.fileManager = fileManager\r\n    this.editor = editor\r\n    this.config = config\r\n    this.fileProvider = fileProvider\r\n  }\r\n\r\n  init () {\r\n    this.optimize = this.queryParams.get().optimize\r\n    this.optimize = this.optimize === 'true'\r\n    this.queryParams.update({ optimize: this.optimize })\r\n    this.compiler.set('optimize', this.optimize)\r\n\r\n    this.runs = this.queryParams.get().runs\r\n    this.runs = this.runs || 200\r\n    this.queryParams.update({ runs: this.runs })\r\n    this.compiler.set('runs', this.runs)\r\n\r\n    this.evmVersion = this.queryParams.get().evmVersion\r\n    if (this.evmVersion === 'undefined' || this.evmVersion === 'null' || !this.evmVersion) {\r\n      this.evmVersion = null\r\n    }\r\n    this.queryParams.update({ evmVersion: this.evmVersion })\r\n    this.compiler.set('evmVersion', this.evmVersion)\r\n  }\r\n\r\n  setOptimize (newOptimizeValue) {\r\n    this.optimize = newOptimizeValue\r\n    this.queryParams.update({ optimize: this.optimize })\r\n    this.compiler.set('optimize', this.optimize)\r\n  }\r\n\r\n  setRuns (runs) {\r\n    this.runs = runs\r\n    this.queryParams.update({ runs: this.runs })\r\n    this.compiler.set('runs', this.runs)\r\n  }\r\n\r\n  setEvmVersion (newEvmVersion) {\r\n    this.evmVersion = newEvmVersion\r\n    this.queryParams.update({ evmVersion: this.evmVersion })\r\n    this.compiler.set('evmVersion', this.evmVersion)\r\n  }\r\n\r\n  /**\r\n   * Set the compiler to using Solidity or Yul (default to Solidity)\r\n   * @params lang {'Solidity' | 'Yul'} ...\r\n   */\r\n  setLanguage (lang) {\r\n    this.compiler.set('language', lang)\r\n  }\r\n\r\n  /**\r\n   * Compile a specific file of the file manager\r\n   * @param {string} target the path to the file to compile\r\n   */\r\n  compileFile (target) {\r\n    if (!target) throw new Error('No target provided for compiliation')\r\n    const provider = this.fileManager.fileProviderOf(target)\r\n    if (!provider) throw new Error(`cannot compile ${target}. Does not belong to any explorer`)\r\n    return new Promise((resolve, reject) => {\r\n      provider.get(target, (error, content) => {\r\n        if (error) return reject(error)\r\n        const sources = { [target]: { content } }\r\n        this.event.emit('startingCompilation')\r\n        // setTimeout fix the animation on chrome... (animation triggered by 'staringCompilation')\r\n        setTimeout(() => { this.compiler.compile(sources, target); resolve() }, 100)\r\n      })\r\n    })\r\n  }\r\n\r\n  runCompiler () {\r\n    try {\r\n      this.fileManager.saveCurrentFile()\r\n      this.editor.clearAnnotations()\r\n      var currentFile = this.config.get('currentFile')\r\n      return this.compileFile(currentFile)\r\n    } catch (err) {\r\n      console.error(err)\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = CompileTab\r\n","\r\nimport { canUseWorker, baseURLBin, baseURLWasm, urlFromVersion, pathToURL, promisedMiniXhr } from '../../compiler/compiler-utils'\r\nconst yo = require('yo-yo')\r\nconst helper = require('../../../lib/helper')\r\nconst addTooltip = require('../../ui/tooltip')\r\nconst semver = require('semver')\r\nconst modalDialogCustom = require('../../ui/modal-dialog-custom')\r\nconst css = require('../styles/compile-tab-styles')\r\n\r\nclass CompilerContainer {\r\n  constructor (compileTabLogic, editor, config, queryParams) {\r\n    this._view = {}\r\n    this.compileTabLogic = compileTabLogic\r\n    this.editor = editor\r\n    this.config = config\r\n    this.queryParams = queryParams\r\n\r\n    this.data = {\r\n      hideWarnings: config.get('hideWarnings') || false,\r\n      autoCompile: config.get('autoCompile'),\r\n      compileTimeout: null,\r\n      timeout: 300,\r\n      allversions: null,\r\n      selectedVersion: null,\r\n      defaultVersion: 'soljson-v0.7.4+commit.3f05b770.js' // this default version is defined: in makeMockCompiler (for browser test)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update the compilation button with the name of the current file\r\n   */\r\n  set currentFile (name = '') {\r\n    if (name && name !== '') {\r\n      this._setCompilerVersionFromPragma(name)\r\n    }\r\n    if (!this._view.compilationButton) return\r\n    const button = this.compilationButton(name.split('/').pop())\r\n    this._disableCompileBtn(!name || (name && !this.isSolFileSelected(name)))\r\n    yo.update(this._view.compilationButton, button)\r\n  }\r\n\r\n  isSolFileSelected (currentFile = '') {\r\n    if (!currentFile) currentFile = this.config.get('currentFile')\r\n    if (!currentFile) return false\r\n    const extention = currentFile.substr(currentFile.length - 3, currentFile.length)\r\n    return extention.toLowerCase() === 'sol' || extention.toLowerCase() === 'yul'\r\n  }\r\n\r\n  deactivate () {\r\n    // deactivate editor listeners\r\n    this.editor.event.unregister('contentChanged')\r\n    this.editor.event.unregister('sessionSwitched')\r\n  }\r\n\r\n  activate () {\r\n    this.currentFile = this.config.get('currentFile')\r\n    this.listenToEvents()\r\n  }\r\n\r\n  listenToEvents () {\r\n    this.editor.event.register('sessionSwitched', () => {\r\n      if (!this._view.compileIcon) return\r\n      this.scheduleCompilation()\r\n    })\r\n\r\n    this.compileTabLogic.event.on('startingCompilation', () => {\r\n      if (!this._view.compileIcon) return\r\n      this._view.compileIcon.setAttribute('title', 'compiling...')\r\n      this._view.compileIcon.classList.remove(`${css.bouncingIcon}`)\r\n      this._view.compileIcon.classList.add(`${css.spinningIcon}`)\r\n    })\r\n\r\n    this.compileTabLogic.compiler.event.register('compilationDuration', (speed) => {\r\n      if (!this._view.warnCompilationSlow) return\r\n      if (speed > 1000) {\r\n        const msg = `Last compilation took ${speed}ms. We suggest to turn off autocompilation.`\r\n        this._view.warnCompilationSlow.setAttribute('title', msg)\r\n        this._view.warnCompilationSlow.style.visibility = 'visible'\r\n      } else {\r\n        this._view.warnCompilationSlow.style.visibility = 'hidden'\r\n      }\r\n    })\r\n\r\n    this.editor.event.register('contentChanged', () => {\r\n      if (!this._view.compileIcon) return\r\n      this.scheduleCompilation()\r\n      this._view.compileIcon.classList.add(`${css.bouncingIcon}`) // @TODO: compileView tab\r\n    })\r\n\r\n    this.compileTabLogic.compiler.event.register('loadingCompiler', () => {\r\n      if (!this._view.compileIcon) return\r\n      this._disableCompileBtn(true)\r\n      this._view.compileIcon.setAttribute('title', 'compiler is loading, please wait a few moments.')\r\n      this._view.compileIcon.classList.add(`${css.spinningIcon}`)\r\n      this._view.warnCompilationSlow.style.visibility = 'hidden'\r\n      this._updateLanguageSelector()\r\n    })\r\n\r\n    this.compileTabLogic.compiler.event.register('compilerLoaded', () => {\r\n      if (!this._view.compileIcon) return\r\n      this._disableCompileBtn(false)\r\n      this._view.compileIcon.setAttribute('title', '')\r\n      this._view.compileIcon.classList.remove(`${css.spinningIcon}`)\r\n      if (this.data.autoCompile) this.compileIfAutoCompileOn()\r\n    })\r\n\r\n    this.compileTabLogic.compiler.event.register('compilationFinished', (success, data, source) => {\r\n      if (!this._view.compileIcon) return\r\n      this._view.compileIcon.setAttribute('title', 'idle')\r\n      this._view.compileIcon.classList.remove(`${css.spinningIcon}`)\r\n      this._view.compileIcon.classList.remove(`${css.bouncingIcon}`)\r\n    })\r\n  }\r\n\r\n  /**************\r\n   * SUBCOMPONENT\r\n   */\r\n  compilationButton (name = '') {\r\n    const displayed = name || '<no file selected>'\r\n    const disabled = name && this.isSolFileSelected() ? '' : 'disabled'\r\n    return yo`\r\n      <button id=\"compileBtn\" data-id=\"compilerContainerCompileBtn\" class=\"btn btn-primary btn-block ${disabled} mt-3\" title=\"Compile\" onclick=\"${this.compile.bind(this)}\">\r\n        <span>${this._view.compileIcon} Compile ${displayed}</span>\r\n      </button>\r\n    `\r\n  }\r\n\r\n  _disableCompileBtn (shouldDisable) {\r\n    const btn = document.getElementById('compileBtn')\r\n    if (!btn) return\r\n    if (shouldDisable) {\r\n      btn.classList.add('disabled')\r\n    } else if (this.isSolFileSelected()) {\r\n      btn.classList.remove('disabled')\r\n    }\r\n  }\r\n\r\n  // Load solc compiler version according to pragma in contract file\r\n  _setCompilerVersionFromPragma (filename) {\r\n    if (!this.data.allversions) return\r\n    this.compileTabLogic.fileManager.readFile(filename).then(data => {\r\n      const pragmaArr = data.match(/(pragma solidity (.+?);)/g)\r\n      if (pragmaArr && pragmaArr.length === 1) {\r\n        const pragmaStr = pragmaArr[0].replace('pragma solidity', '').trim()\r\n        const pragma = pragmaStr.substring(0, pragmaStr.length - 1)\r\n        const releasedVersions = this.data.allversions.filter(obj => !obj.prerelease).map(obj => obj.version)\r\n        const allVersions = this.data.allversions.map(obj => this._retrieveVersion(obj.version))\r\n        const currentCompilerName = this._retrieveVersion(this._view.versionSelector.selectedOptions[0].label)\r\n        // contains only numbers part, for example '0.4.22'\r\n        const pureVersion = this._retrieveVersion()\r\n        // is nightly build newer than the last release\r\n        const isNewestNightly = currentCompilerName.includes('nightly') && semver.gt(pureVersion, releasedVersions[0])\r\n        // checking if the selected version is in the pragma range\r\n        const isInRange = semver.satisfies(pureVersion, pragma)\r\n        // checking if the selected version is from official compilers list(excluding custom versions) and in range or greater\r\n        const isOfficial = allVersions.includes(currentCompilerName)\r\n        if (isOfficial && (!isInRange && !isNewestNightly)) {\r\n          const compilerToLoad = semver.maxSatisfying(releasedVersions, pragma)\r\n          const compilerPath = this.data.allversions.filter(obj => !obj.prerelease && obj.version === compilerToLoad)[0].path\r\n          if (this.data.selectedVersion !== compilerPath) {\r\n            this.data.selectedVersion = compilerPath\r\n            this._updateVersionSelector()\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  _retrieveVersion (version) {\r\n    if (!version) version = this._view.versionSelector.value\r\n    return semver.coerce(version) ? semver.coerce(version).version : ''\r\n  }\r\n\r\n  render () {\r\n    this.compileTabLogic.compiler.event.register('compilerLoaded', (version) => this.setVersionText(version))\r\n    this.fetchAllVersion((allversions, selectedVersion, isURL) => {\r\n      this.data.allversions = allversions\r\n      if (isURL) this._updateVersionSelector(selectedVersion)\r\n      else {\r\n        this.data.selectedVersion = selectedVersion\r\n        if (this._view.versionSelector) this._updateVersionSelector()\r\n      }\r\n    })\r\n\r\n    this._view.warnCompilationSlow = yo`<i title=\"Compilation Slow\" style=\"visibility:hidden\" class=\"${css.warnCompilationSlow} fas fa-exclamation-triangle\" aria-hidden=\"true\"></i>`\r\n    this._view.compileIcon = yo`<i class=\"fas fa-sync ${css.icon}\" aria-hidden=\"true\"></i>`\r\n    this._view.autoCompile = yo`<input class=\"${css.autocompile} custom-control-input\" onchange=${() => this.updateAutoCompile()} data-id=\"compilerContainerAutoCompile\" id=\"autoCompile\" type=\"checkbox\" title=\"Auto compile\">`\r\n    this._view.hideWarningsBox = yo`<input class=\"${css.autocompile} custom-control-input\" onchange=${() => this.hideWarnings()} id=\"hideWarningsBox\" type=\"checkbox\" title=\"Hide warnings\">`\r\n    if (this.data.autoCompile) this._view.autoCompile.setAttribute('checked', '')\r\n    if (this.data.hideWarnings) this._view.hideWarningsBox.setAttribute('checked', '')\r\n\r\n    this._view.optimize = yo`<input onchange=${() => this.onchangeOptimize()} class=\"custom-control-input\" id=\"optimize\" type=\"checkbox\">`\r\n    if (this.compileTabLogic.optimize) this._view.optimize.setAttribute('checked', '')\r\n\r\n    this._view.runs = yo`<input\r\n      min=\"1\"\r\n      class=\"custom-select ml-2 ${css.runs}\"\r\n      id=\"runs\"\r\n      placeholder=\"200\"\r\n      value=\"200\"\r\n      type=\"number\"\r\n      title=\"Estimated number of times each opcode of the deployed code will be executed across the life-time of the contract.\"\r\n      onchange=${() => this.onchangeRuns()}\r\n    >`\r\n    if (this.compileTabLogic.optimize) {\r\n      this._view.runs.removeAttribute('disabled')\r\n      this._view.runs.value = this.compileTabLogic.runs\r\n    } else {\r\n      this._view.runs.setAttribute('disabled', '')\r\n    }\r\n\r\n    this._view.versionSelector = yo`\r\n      <select onchange=\"${this.onchangeLoadVersion.bind(this)}\" class=\"custom-select\" id=\"versionSelector\" disabled>\r\n        <option disabled selected>${this.data.defaultVersion}</option>\r\n        <option disabled>builtin</option>\r\n      </select>`\r\n    this._view.languageSelector = yo`\r\n      <select onchange=\"${this.onchangeLanguage.bind(this)}\" class=\"custom-select\" id=\"compilierLanguageSelector\" title=\"Available since v0.5.7\">\r\n        <option>Solidity</option>\r\n        <option>Yul</option>\r\n      </select>`\r\n    this._view.version = yo`<span id=\"version\"></span>`\r\n\r\n    this._view.evmVersionSelector = yo`\r\n      <select onchange=\"${this.onchangeEvmVersion.bind(this)}\" class=\"custom-select\" id=\"evmVersionSelector\">\r\n        <option value=\"default\" selected=\"selected\">compiler default</option>\r\n        <option>istanbul</option>\r\n        <option>petersburg</option>\r\n        <option>constantinople</option>\r\n        <option>byzantium</option>\r\n        <option>spuriousDragon</option>\r\n        <option>tangerineWhistle</option>\r\n        <option>homestead</option>\r\n      </select>`\r\n    if (this.compileTabLogic.evmVersion) {\r\n      const s = this._view.evmVersionSelector\r\n      let i\r\n      for (i = 0; i < s.options.length; i++) {\r\n        if (s.options[i].value === this.compileTabLogic.evmVersion) {\r\n          break\r\n        }\r\n      }\r\n      if (i === s.options.length) { // invalid evmVersion from queryParams\r\n        s.selectedIndex = 0 // compiler default\r\n        this.onchangeEvmVersion()\r\n      } else {\r\n        s.selectedIndex = i\r\n        this.onchangeEvmVersion()\r\n      }\r\n    }\r\n\r\n    this._view.compilationButton = this.compilationButton()\r\n\r\n    this._view.includeNightlies = yo`\r\n      <input class=\"mr-2 custom-control-input\" id=\"nightlies\" type=\"checkbox\" onchange=${() => this._updateVersionSelector()}>\r\n    `\r\n    this._view.compileContainer = yo`\r\n      <section>\r\n        <!-- Select Compiler Version -->\r\n        <article>\r\n          <header class=\"${css.compilerSection} border-bottom\">\r\n            <div class=\"mb-2\">\r\n              <label class=\"${css.compilerLabel} form-check-label\" for=\"versionSelector\">\r\n                Compiler\r\n                <button class=\"far fa-plus-square border-0 p-0 mx-2 btn-sm\" onclick=\"${(e) => this.promtCompiler(e)}\" title=\"Add a custom compiler with URL\"></button>\r\n              </label>\r\n              ${this._view.versionSelector}\r\n            </div>\r\n            <div class=\"mb-2 ${css.nightlyBuilds} custom-control custom-checkbox\">\r\n              ${this._view.includeNightlies}\r\n              <label for=\"nightlies\" class=\"form-check-label custom-control-label\">Include nightly builds</label>\r\n            </div>\r\n            <div class=\"mb-2\">\r\n              <label class=\"${css.compilerLabel} form-check-label\" for=\"compilierLanguageSelector\">Language</label>\r\n              ${this._view.languageSelector}\r\n            </div>\r\n            <div class=\"mb-2\">\r\n              <label class=\"${css.compilerLabel} form-check-label\" for=\"evmVersionSelector\">EVM Version</label>\r\n              ${this._view.evmVersionSelector}\r\n            </div>\r\n            <div class=\"mt-3\">\r\n              <p class=\"mt-2 ${css.compilerLabel}\">Compiler Configuration</p>\r\n              <div class=\"mt-2 ${css.compilerConfig} custom-control custom-checkbox\">\r\n                ${this._view.autoCompile}\r\n                <label class=\"form-check-label custom-control-label\" for=\"autoCompile\">Auto compile</label>\r\n              </div>\r\n              <div class=\"mt-2 ${css.compilerConfig} custom-control custom-checkbox\">\r\n                <div class=\"justify-content-between align-items-center d-flex\">\r\n                  ${this._view.optimize}\r\n                  <label class=\"form-check-label custom-control-label\" for=\"optimize\">Enable optimization</label>\r\n                  ${this._view.runs}\r\n                </div>\r\n              </div>\r\n              <div class=\"mt-2 ${css.compilerConfig} custom-control custom-checkbox\">\r\n                ${this._view.hideWarningsBox}\r\n                <label class=\"form-check-label custom-control-label\" for=\"hideWarningsBox\">Hide warnings</label>\r\n              </div>\r\n            </div>\r\n            ${this._view.compilationButton}\r\n          </header>\r\n        </article>\r\n        <!-- Config -->\r\n      </section>`\r\n\r\n    return this._view.compileContainer\r\n  }\r\n\r\n  promtCompiler () {\r\n    modalDialogCustom.prompt(\r\n      'Add a custom compiler',\r\n      'URL',\r\n      '',\r\n      (url) => this.addCustomCompiler(url)\r\n    )\r\n  }\r\n\r\n  addCustomCompiler (url) {\r\n    this.data.selectedVersion = this._view.versionSelector.value\r\n    this._updateVersionSelector(url)\r\n  }\r\n\r\n  updateAutoCompile (event) {\r\n    this.config.set('autoCompile', this._view.autoCompile.checked)\r\n  }\r\n\r\n  compile (event) {\r\n    const currentFile = this.config.get('currentFile')\r\n    if (!this.isSolFileSelected()) return\r\n\r\n    this._setCompilerVersionFromPragma(currentFile)\r\n    this.compileTabLogic.runCompiler()\r\n  }\r\n\r\n  compileIfAutoCompileOn () {\r\n    if (this.config.get('autoCompile')) {\r\n      this.compile()\r\n    }\r\n  }\r\n\r\n  hideWarnings (event) {\r\n    this.config.set('hideWarnings', this._view.hideWarningsBox.checked)\r\n    this.compileIfAutoCompileOn()\r\n  }\r\n\r\n  /*\r\n    The following functions are handlers for internal events.\r\n  */\r\n\r\n  onchangeOptimize () {\r\n    this.compileTabLogic.setOptimize(!!this._view.optimize.checked)\r\n    if (this.compileTabLogic.optimize) {\r\n      this._view.runs.removeAttribute('disabled')\r\n      this.compileTabLogic.setRuns(parseInt(this._view.runs.value))\r\n    } else {\r\n      this.compileTabLogic.setRuns(200)\r\n      this._view.runs.setAttribute('disabled', '')\r\n    }\r\n    this.compileIfAutoCompileOn()\r\n  }\r\n\r\n  onchangeRuns () {\r\n    this.compileTabLogic.setRuns(parseInt(this._view.runs.value))\r\n    this.compileIfAutoCompileOn()\r\n  }\r\n\r\n  onchangeLanguage () {\r\n    this.compileTabLogic.setLanguage(this._view.languageSelector.value)\r\n    this.compileIfAutoCompileOn()\r\n  }\r\n\r\n  onchangeEvmVersion () {\r\n    const s = this._view.evmVersionSelector\r\n    let v = s.value\r\n    if (v === 'default') {\r\n      v = null\r\n    }\r\n    this.compileTabLogic.setEvmVersion(v)\r\n    for (let i = 0; i < s.options.length; i++) {\r\n      if (i === s.selectedIndex) {\r\n        s.options[s.selectedIndex].setAttribute('selected', 'selected')\r\n      } else {\r\n        s.options[i].removeAttribute('selected')\r\n      }\r\n    }\r\n\r\n    this.compileIfAutoCompileOn()\r\n  }\r\n\r\n  onchangeLoadVersion () {\r\n    this.data.selectedVersion = this._view.versionSelector.value\r\n    this._updateVersionSelector()\r\n    this._updateLanguageSelector()\r\n  }\r\n\r\n  /*\r\n    The following functions map with the above event handlers.\r\n    They are an external API for modifying the compiler configuration.\r\n  */\r\n\r\n  setConfiguration (settings) {\r\n    this.setLanguage(settings.language)\r\n    this.setEvmVersion(settings.evmVersion)\r\n    this.setOptimize(settings.optimize)\r\n    this.setRuns(settings.runs)\r\n    this.setVersion(settings.version)\r\n  }\r\n\r\n  setOptimize (enabled) {\r\n    this._view.optimize.checked = enabled\r\n    this.onchangeOptimize()\r\n  }\r\n\r\n  setRuns (value) {\r\n    if (value) {\r\n      this._view.runs.value = value\r\n      this.onchangeRuns()\r\n    }\r\n  }\r\n\r\n  setLanguage (lang) {\r\n    this._view.languageSelector.value = lang\r\n    this.onchangeLanguage()\r\n  }\r\n\r\n  setEvmVersion (version) {\r\n    this._view.evmVersionSelector.value = version || 'default'\r\n    this.onchangeEvmVersion()\r\n  }\r\n\r\n  setVersion (version) {\r\n    this._view.versionSelector.value = `soljson-v${version}.js`\r\n    this.onchangeLoadVersion()\r\n  }\r\n\r\n  _shouldBeAdded (version) {\r\n    return !version.includes('nightly') ||\r\n           (version.includes('nightly') && this._view.includeNightlies.checked)\r\n  }\r\n\r\n  _updateVersionSelector (customUrl = '') {\r\n    // update selectedversion of previous one got filtered out\r\n    if (!this.data.selectedVersion || !this._shouldBeAdded(this.data.selectedVersion)) {\r\n      this.data.selectedVersion = this.data.defaultVersion\r\n    }\r\n    this._view.versionSelector.innerHTML = ''\r\n    this._view.versionSelector.removeAttribute('disabled')\r\n    this.queryParams.update({ version: this.data.selectedVersion })\r\n    let url\r\n    if (customUrl !== '') {\r\n      this.data.selectedVersion = customUrl\r\n      this._view.versionSelector.appendChild(yo`<option value=\"${customUrl}\" selected>custom</option>`)\r\n      url = customUrl\r\n      this.queryParams.update({ version: this.data.selectedVersion })\r\n    } else if (this.data.selectedVersion === 'builtin') {\r\n      let location = window.document.location\r\n      let path = location.pathname\r\n      if (!path.startsWith('/')) path = '/' + path\r\n      location = `${location.protocol}//${location.host}${path}assets/js`\r\n      if (location.endsWith('index.html')) location = location.substring(0, location.length - 10)\r\n      if (!location.endsWith('/')) location += '/'\r\n      url = location + 'soljson.js'\r\n    } else {\r\n      if (this.data.selectedVersion.indexOf('soljson') !== 0 || helper.checkSpecialChars(this.data.selectedVersion)) {\r\n        return console.log('loading ' + this.data.selectedVersion + ' not allowed')\r\n      }\r\n      url = `${urlFromVersion(this.data.selectedVersion)}`\r\n    }\r\n\r\n    this.data.allversions.forEach(build => {\r\n      const option = build.path === this.data.selectedVersion\r\n        ? yo`<option value=\"${build.path}\" selected>${build.longVersion}</option>`\r\n        : yo`<option value=\"${build.path}\">${build.longVersion}</option>`\r\n\r\n      if (this._shouldBeAdded(option.innerText)) {\r\n        this._view.versionSelector.appendChild(option)\r\n      }\r\n    })\r\n\r\n    // Workers cannot load js on \"file:\"-URLs and we get a\r\n    // \"Uncaught RangeError: Maximum call stack size exceeded\" error on Chromium,\r\n    // resort to non-worker version in that case.\r\n    if (this.data.selectedVersion !== 'builtin' && canUseWorker(this.data.selectedVersion)) {\r\n      this.compileTabLogic.compiler.loadVersion(true, url)\r\n      this.setVersionText('(loading using worker)')\r\n    } else {\r\n      this.compileTabLogic.compiler.loadVersion(false, url)\r\n      this.setVersionText('(loading)')\r\n    }\r\n  }\r\n\r\n  _updateLanguageSelector () {\r\n    // This is the first version when Yul is available\r\n    if (!semver.valid(this._retrieveVersion()) || semver.lt(this._retrieveVersion(), 'v0.5.7+commit.6da8b019.js')) {\r\n      this._view.languageSelector.setAttribute('disabled', '')\r\n      this._view.languageSelector.value = 'Solidity'\r\n      this.compileTabLogic.setLanguage('Solidity')\r\n    } else {\r\n      this._view.languageSelector.removeAttribute('disabled')\r\n    }\r\n  }\r\n\r\n  setVersionText (text) {\r\n    if (this._view.version) this._view.version.innerText = text\r\n  }\r\n\r\n  // fetching both normal and wasm builds and creating a [version, baseUrl] map\r\n  async fetchAllVersion (callback) {\r\n    let selectedVersion, allVersionsWasm, isURL\r\n    let allVersions = [{ path: 'builtin', longVersion: 'latest local version - 0.7.4' }]\r\n    // fetch normal builds\r\n    const binRes = await promisedMiniXhr(`${baseURLBin}/list.json`)\r\n    // fetch wasm builds\r\n    const wasmRes = await promisedMiniXhr(`${baseURLWasm}/list.json`)\r\n    if (binRes.event.type === 'error' && wasmRes.event.type === 'error') {\r\n      selectedVersion = 'builtin'\r\n      return callback(allVersions, selectedVersion)\r\n    }\r\n    try {\r\n      const versions = JSON.parse(binRes.json).builds.slice().reverse()\r\n      allVersions = [...allVersions, ...versions]\r\n      selectedVersion = this.data.defaultVersion\r\n      if (this.queryParams.get().version) selectedVersion = this.queryParams.get().version\r\n      // Check if version is a URL and corresponding filename starts with 'soljson'\r\n      if (selectedVersion.startsWith('https://')) {\r\n        const urlArr = selectedVersion.split('/')\r\n        if (urlArr[urlArr.length - 1].startsWith('soljson')) isURL = true\r\n      }\r\n      if (wasmRes.event.type !== 'error') {\r\n        allVersionsWasm = JSON.parse(wasmRes.json).builds.slice().reverse()\r\n      }\r\n    } catch (e) {\r\n      addTooltip('Cannot load compiler version list. It might have been blocked by an advertisement blocker. Please try deactivating any of them from this page and reload. Error: ' + e)\r\n    }\r\n    // replace in allVersions those compiler builds which exist in allVersionsWasm with new once\r\n    if (allVersionsWasm && allVersions) {\r\n      allVersions.forEach((compiler, index) => {\r\n        const wasmIndex = allVersionsWasm.findIndex(wasmCompiler => { return wasmCompiler.longVersion === compiler.longVersion })\r\n        if (wasmIndex !== -1) {\r\n          allVersions[index] = allVersionsWasm[wasmIndex]\r\n          pathToURL[compiler.path] = baseURLWasm\r\n        } else {\r\n          pathToURL[compiler.path] = baseURLBin\r\n        }\r\n      })\r\n    }\r\n    callback(allVersions, selectedVersion, isURL)\r\n  }\r\n\r\n  scheduleCompilation () {\r\n    if (!this.config.get('autoCompile')) return\r\n    if (this.data.compileTimeout) window.clearTimeout(this.data.compileTimeout)\r\n    this.data.compileTimeout = window.setTimeout(() => this.compileIfAutoCompileOn(), this.data.timeout)\r\n  }\r\n}\r\n\r\nmodule.exports = CompilerContainer\r\n","'use strict'\r\n\r\nvar solcTranslate = require('solc/translate')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar txHelper = remixLib.execution.txHelper\r\n\r\nmodule.exports = (contractName, contract, compiledSource) => {\r\n  return getDetails(contractName, contract, compiledSource)\r\n}\r\n\r\nvar getDetails = function (contractName, contract, source) {\r\n  var detail = {}\r\n  detail.name = contractName\r\n  detail.metadata = contract.metadata\r\n  if (contract.evm.bytecode.object) {\r\n    detail.bytecode = contract.evm.bytecode.object\r\n  }\r\n\r\n  detail.abi = contract.abi\r\n\r\n  if (contract.evm.bytecode.object) {\r\n    detail.bytecode = contract.evm.bytecode\r\n    detail.web3Deploy = gethDeploy(contractName.toLowerCase(), contract.abi, contract.evm.bytecode.object)\r\n\r\n    detail.metadataHash = retrieveMetadataHash(contract.evm.bytecode.object)\r\n    if (detail.metadataHash) {\r\n      detail.swarmLocation = 'bzzr://' + detail.metadataHash\r\n    }\r\n  }\r\n\r\n  detail.functionHashes = {}\r\n  for (var fun in contract.evm.methodIdentifiers) {\r\n    detail.functionHashes[contract.evm.methodIdentifiers[fun]] = fun\r\n  }\r\n\r\n  detail.gasEstimates = formatGasEstimates(contract.evm.gasEstimates)\r\n\r\n  detail.devdoc = contract.devdoc\r\n  detail.userdoc = contract.userdoc\r\n\r\n  if (contract.evm.deployedBytecode && contract.evm.deployedBytecode.object.length > 0) {\r\n    detail['Runtime Bytecode'] = contract.evm.deployedBytecode\r\n  }\r\n\r\n  if (source && contract.assembly !== null) {\r\n    detail.Assembly = solcTranslate.prettyPrintLegacyAssemblyJSON(contract.evm.legacyAssembly, source.content)\r\n  }\r\n\r\n  return detail\r\n}\r\n\r\nvar retrieveMetadataHash = function (bytecode) {\r\n  var match = /a165627a7a72305820([0-9a-f]{64})0029$/.exec(bytecode)\r\n  if (!match) {\r\n    match = /a265627a7a72305820([0-9a-f]{64})6c6578706572696d656e74616cf50037$/.exec(bytecode)\r\n  }\r\n  if (match) {\r\n    return match[1]\r\n  }\r\n}\r\n\r\nvar gethDeploy = function (contractName, jsonInterface, bytecode) {\r\n  var code = ''\r\n  var funABI = txHelper.getConstructorInterface(jsonInterface)\r\n\r\n  funABI.inputs.forEach(function (inp) {\r\n    code += 'var ' + inp.name + ' = /* var of type ' + inp.type + ' here */ ;\\n'\r\n  })\r\n\r\n  contractName = contractName.replace(/[:./]/g, '_')\r\n  code += 'var ' + contractName + 'Contract = new web3.eth.Contract(' + JSON.stringify(jsonInterface).replace('\\n', '') + ');' +\r\n    '\\nvar ' + contractName + ' = ' + contractName + 'Contract.deploy({' +\r\n  \"\\n     data: '0x\" + bytecode + \"', \" +\r\n    '\\n     arguments: ['\r\n\r\n  funABI.inputs.forEach(function (inp) {\r\n    code += '\\n          ' + inp.name + ','\r\n  })\r\n\r\n  code += '\\n     ]' +\r\n    '\\n}).send({' +\r\n    '\\n     from: web3.eth.accounts[0], ' +\r\n    \"\\n     gas: '4700000'\" +\r\n    '\\n   }, function (e, contract){' +\r\n    '\\n    console.log(e, contract);' +\r\n    \"\\n    if (typeof contract.address !== 'undefined') {\" +\r\n    \"\\n         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);\" +\r\n    '\\n    }' +\r\n    '\\n })'\r\n\r\n  return code\r\n}\r\n\r\nvar formatGasEstimates = function (data) {\r\n  if (!data) return {}\r\n  if (data.creation === undefined && data.external === undefined && data.internal === undefined) return {}\r\n\r\n  var gasToText = function (g) {\r\n    return g === null ? 'unknown' : g\r\n  }\r\n\r\n  var ret = {}\r\n  var fun\r\n  if ('creation' in data) {\r\n    ret.Creation = data.creation\r\n  }\r\n\r\n  if ('external' in data) {\r\n    ret.External = {}\r\n    for (fun in data.external) {\r\n      ret.External[fun] = gasToText(data.external[fun])\r\n    }\r\n  }\r\n\r\n  if ('internal' in data) {\r\n    ret.Internal = {}\r\n    for (fun in data.internal) {\r\n      ret.Internal[fun] = gasToText(data.internal[fun])\r\n    }\r\n  }\r\n  return ret\r\n}\r\n","import toaster from '../ui/tooltip'\r\nimport { DebuggerUI } from '@remix-ui/debugger-ui' // eslint-disable-line\r\nimport { ViewPlugin } from '@remixproject/engine-web'\r\nimport remixDebug, { TransactionDebugger as Debugger } from '@remix-project/remix-debug'\r\nimport * as packageJson from '../../../../../package.json'\r\nimport React from 'react' // eslint-disable-line\r\nimport ReactDOM from 'react-dom'\r\nconst yo = require('yo-yo')\r\nconst css = require('./styles/debugger-tab-styles')\r\n\r\nconst profile = {\r\n  name: 'debugger',\r\n  displayName: 'Debugger',\r\n  methods: ['debug', 'getTrace'],\r\n  events: [],\r\n  icon: 'assets/img/debuggerLogo.webp',\r\n  description: 'Debug transactions',\r\n  kind: 'debugging',\r\n  location: 'sidePanel',\r\n  documentation: 'https://remix-ide.readthedocs.io/en/latest/debugger.html',\r\n  version: packageJson.version\r\n}\r\n\r\nclass DebuggerTab extends ViewPlugin {\r\n  constructor (blockchain, editor, offsetToLineColumnConverter) {\r\n    super(profile)\r\n    this.el = null\r\n    this.editor = editor\r\n    this.offsetToLineColumnConverter = offsetToLineColumnConverter\r\n    this.blockchain = blockchain\r\n    this.debugHash = null\r\n    this.removeHighlights = false\r\n    this.debugHashRequest = 0\r\n  }\r\n\r\n  render () {\r\n    if (this.el) return this.el\r\n\r\n    this.el = yo`\r\n      <div class=\"${css.debuggerTabView}\" id=\"debugView\">\r\n        <div id=\"debugger\" class=\"${css.debugger}\"></div>\r\n      </div>`\r\n\r\n    this.on('fetchAndCompile', 'compiling', (settings) => {\r\n      toaster(yo`<div><b>Recompiling and debugging with params</b><pre class=\"text-left\">${JSON.stringify(settings, null, '\\t')}</pre></div>`)\r\n    })\r\n\r\n    this.on('fetchAndCompile', 'compilationFailed', (data) => {\r\n      toaster(yo`<div><b>Compilation failed...</b> continuing <i>without</i> source code debugging.</div>`)\r\n    })\r\n\r\n    this.on('fetchAndCompile', 'notFound', (contractAddress) => {\r\n      toaster(yo`<div><b>Contract ${contractAddress} not found in source code repository</b> continuing <i>without</i> source code debugging.</div>`)\r\n    })\r\n\r\n    this.on('fetchAndCompile', 'usingLocalCompilation', (contractAddress) => {\r\n      toaster(yo`<div><b>Using compilation result from Solidity module</b></div>`)\r\n    })\r\n\r\n    this.on('fetchAndCompile', 'sourceVerificationNotAvailable', () => {\r\n      toaster(yo`<div><b>Source verification plugin not activated or not available.</b> continuing <i>without</i> source code debugging.</div>`)\r\n    })\r\n\r\n    this.renderComponent()\r\n\r\n    // this.call('manager', 'activatePlugin', 'udapp')\r\n\r\n    return this.el\r\n  }\r\n\r\n  async discardHighlight () {\r\n    await this.call('editor', 'discardHighlight')\r\n  }\r\n\r\n  async highlight (lineColumnPos, path) {\r\n    await this.call('editor', 'highlight', lineColumnPos, path)\r\n  }\r\n\r\n  async getFile (path) {\r\n    await this.call('fileManager', 'getFile', path)\r\n  }\r\n\r\n  async setFile (path, content) {\r\n    await this.call('fileManager', 'setFile', path, content)\r\n  }\r\n\r\n  renderComponent () {\r\n    ReactDOM.render(\r\n      <DebuggerUI debuggerAPI={this} />\r\n      , this.el)\r\n  }\r\n\r\n  deactivate () {\r\n    this.removeHighlights = true\r\n    this.renderComponent()\r\n    super.deactivate()\r\n  }\r\n\r\n  debug (hash) {\r\n    this.debugHash = hash\r\n    this.debugHashRequest++ // so we can trigger a debug using the same hash 2 times in a row. that's needs to be improved\r\n    this.renderComponent()\r\n  }\r\n\r\n  getDebugWeb3 () {\r\n    return new Promise((resolve, reject) => {\r\n      this.blockchain.detectNetwork((error, network) => {\r\n        let web3\r\n        if (error || !network) {\r\n          web3 = remixDebug.init.web3DebugNode(this.blockchain.web3())\r\n        } else {\r\n          const webDebugNode = remixDebug.init.web3DebugNode(network.name)\r\n          web3 = !webDebugNode ? this.blockchain.web3() : webDebugNode\r\n        }\r\n        remixDebug.init.extendWeb3(web3)\r\n        resolve(web3)\r\n      })\r\n    })\r\n  }\r\n\r\n  async getTrace (hash) {\r\n    if (!hash) return\r\n    const web3 = await this.getDebugWeb3()\r\n    const currentReceipt = await web3.eth.getTransactionReceipt(hash)\r\n    const debug = new Debugger({\r\n      web3,\r\n      offsetToLineColumnConverter: this.offsetToLineColumnConverter,\r\n      compilationResult: async (address) => {\r\n        try {\r\n          return await this.fetchContractAndCompile(address, currentReceipt)\r\n        } catch (e) {\r\n          console.error(e)\r\n        }\r\n        return null\r\n      },\r\n      debugWithGeneratedSources: false\r\n    })\r\n    return await debug.debugger.traceManager.getTrace(hash)\r\n  }\r\n\r\n  fetchContractAndCompile (address, receipt) {\r\n    const target = (address && remixDebug.traceHelper.isContractCreation(address)) ? receipt.contractAddress : address\r\n    const targetAddress = target || receipt.contractAddress || receipt.to\r\n    return this.call('fetchAndCompile', 'resolve', targetAddress, 'browser/.debug', this.blockchain.web3())\r\n  }\r\n\r\n  // debugger () {\r\n  //   return this.debuggerUI\r\n  // }\r\n}\r\n\r\nmodule.exports = DebuggerTab\r\n","import { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\nimport { Web3 } from 'web3'\r\n\r\nexport const profile = {\r\n  name: 'network',\r\n  description: 'Manage the network (mainnet, ropsten, goerli...) and the provider (web3, vm, injected)',\r\n  methods: ['getNetworkProvider', 'getEndpoint', 'detectNetwork', 'addNetwork', 'removeNetwork'],\r\n  version: packageJson.version,\r\n  kind: 'network'\r\n}\r\n\r\n// Network API has :\r\n// - events: ['providerChanged']\r\n// - methods: ['getNetworkProvider', 'getEndpoint', 'detectNetwork', 'addNetwork', 'removeNetwork']\r\n\r\nexport class NetworkModule extends Plugin {\r\n  constructor (blockchain) {\r\n    super(profile)\r\n    this.blockchain = blockchain\r\n    // TODO: See with remix-lib to make sementic coherent\r\n    this.blockchain.event.register('contextChanged', (provider) => {\r\n      this.emit('providerChanged', provider)\r\n    })\r\n    /*\r\n    // Events that could be implemented later\r\n    executionContext.event.register('removeProvider', (provider) => {\r\n      this.events.emit('networkRemoved', provider)\r\n    })\r\n    executionContext.event.register('addProvider', (provider) => {\r\n      this.events.emit('networkAdded', provider)\r\n    })\r\n    executionContext.event.register('web3EndpointChanged', (provider) => {\r\n      this.events.emit('web3EndpointChanged', provider)\r\n    })\r\n    */\r\n  }\r\n\r\n  /** Return the current network provider (web3, vm, injected) */\r\n  getNetworkProvider () {\r\n    return this.blockchain.getProvider()\r\n  }\r\n\r\n  /** Return the current network */\r\n  detectNetwork () {\r\n    return new Promise((resolve, reject) => {\r\n      this.blockchain.detectNetwork((error, network) => {\r\n        error ? reject(error) : resolve(network)\r\n      })\r\n    })\r\n  }\r\n\r\n  /** Return the url only if network provider is 'web3' */\r\n  getEndpoint () {\r\n    const provider = this.blockchain.getProvider()\r\n    if (provider !== 'web3') {\r\n      throw new Error('no endpoint: current provider is either injected or vm')\r\n    }\r\n    return this.blockchain.web3().currentProvider.host\r\n  }\r\n\r\n  /** Add a custom network to the list of available networks */\r\n  addNetwork (network) { // { name, url }\r\n    const provider = network.url === 'ipc' ? new Web3.providers.IpcProvider() : new Web3.providers.HttpProvider(network.url)\r\n    this.blockchain.addProvider({ name: network.name, provider })\r\n  }\r\n\r\n  /** Remove a network to the list of availble networks */\r\n  removeNetwork (name) {\r\n    this.blockchain.removeProvider(name)\r\n  }\r\n}\r\n","import publishToStorage from '../../../publishToStorage'\r\n\r\nvar yo = require('yo-yo')\r\nvar css = require('../styles/run-tab-styles')\r\nvar modalDialogCustom = require('../../ui/modal-dialog-custom')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar EventManager = remixLib.EventManager\r\nvar confirmDialog = require('../../ui/confirmDialog')\r\nvar modalDialog = require('../../ui/modaldialog')\r\nvar MultiParamManager = require('../../ui/multiParamManager')\r\n\r\nclass ContractDropdownUI {\r\n  constructor (blockchain, dropdownLogic, logCallback, runView) {\r\n    this.blockchain = blockchain\r\n    this.dropdownLogic = dropdownLogic\r\n    this.logCallback = logCallback\r\n    this.runView = runView\r\n    this.event = new EventManager()\r\n\r\n    this.listenToEvents()\r\n    this.ipfsCheckedState = false\r\n    this.exEnvironment = blockchain.getProvider()\r\n    this.listenToContextChange()\r\n    this.loadType = 'other'\r\n  }\r\n\r\n  listenToEvents () {\r\n    this.dropdownLogic.event.register('newlyCompiled', (success, data, source, compiler, compilerFullName, file) => {\r\n      if (!this.selectContractNames) return\r\n      this.selectContractNames.innerHTML = ''\r\n      if (success) {\r\n        this.dropdownLogic.getCompiledContracts(compiler, compilerFullName).forEach((contract) => {\r\n          this.selectContractNames.appendChild(yo`<option value=\"${contract.name}\" compiler=\"${compilerFullName}\">${contract.name} - ${contract.file}</option>`)\r\n        })\r\n      }\r\n      this.enableAtAddress(success)\r\n      this.enableContractNames(success)\r\n      this.setInputParamsPlaceHolder()\r\n\r\n      if (success) {\r\n        this.compFails.style.display = 'none'\r\n      } else {\r\n        this.compFails.style.display = 'block'\r\n      }\r\n    })\r\n  }\r\n\r\n  listenToContextChange () {\r\n    this.blockchain.event.register('contextChanged', () => {\r\n      this.blockchain.updateNetwork((err, { name } = {}) => {\r\n        if (err) {\r\n          console.log('can\\'t detect network')\r\n          return\r\n        }\r\n        this.exEnvironment = this.blockchain.getProvider()\r\n        this.networkName = name\r\n\r\n        const savedConfig = window.localStorage.getItem(`ipfs/${this.exEnvironment}/${this.networkName}`)\r\n\r\n        // check if an already selected option exist else use default workflow\r\n        if (savedConfig !== null) {\r\n          this.setCheckedState(savedConfig)\r\n        } else {\r\n          this.setCheckedState(this.networkName === 'Main')\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  setCheckedState (value) {\r\n    value = value === 'true' ? true : value === 'false' ? false : value\r\n    this.ipfsCheckedState = value\r\n    if (this.ipfsCheckbox) this.ipfsCheckbox.checked = value\r\n  }\r\n\r\n  toggleCheckedState () {\r\n    if (this.exEnvironment === 'vm') this.networkName = 'VM'\r\n    this.ipfsCheckedState = !this.ipfsCheckedState\r\n    window.localStorage.setItem(`ipfs/${this.exEnvironment}/${this.networkName}`, this.ipfsCheckedState)\r\n  }\r\n\r\n  enableContractNames (enable) {\r\n    if (enable) {\r\n      if (this.selectContractNames.value === '') return\r\n      this.selectContractNames.removeAttribute('disabled')\r\n      this.selectContractNames.setAttribute('title', 'Select contract for Deploy or At Address.')\r\n    } else {\r\n      this.selectContractNames.setAttribute('disabled', true)\r\n      if (this.loadType === 'sol') {\r\n        this.selectContractNames.setAttribute('title', '⚠ Select and compile *.sol file to deploy or access a contract.')\r\n      } else {\r\n        this.selectContractNames.setAttribute('title', '⚠ Selected *.abi file allows accessing contracts, select and compile *.sol file to deploy and access one.')\r\n      }\r\n    }\r\n  }\r\n\r\n  enableAtAddress (enable) {\r\n    if (enable) {\r\n      if (this.atAddressButtonInput.value === '') return\r\n      this.atAddress.removeAttribute('disabled')\r\n      this.atAddress.setAttribute('title', 'Interact with the given contract.')\r\n    } else {\r\n      this.atAddress.setAttribute('disabled', true)\r\n      if (this.atAddressButtonInput.value === '') {\r\n        this.atAddress.setAttribute('title', '⚠ Compile *.sol file or select *.abi file & then enter the address of deployed contract.')\r\n      } else {\r\n        this.atAddress.setAttribute('title', '⚠ Compile *.sol file or select *.abi file.')\r\n      }\r\n    }\r\n  }\r\n\r\n  render () {\r\n    this.compFails = yo`<i title=\"No contract compiled yet or compilation failed. Please check the compile tab for more information.\" class=\"m-2 ml-3 fas fa-times-circle ${css.errorIcon}\" ></i>`\r\n    this.atAddress = yo`<button class=\"${css.atAddress} btn btn-sm btn-info\" id=\"runAndDeployAtAdressButton\" onclick=${this.loadFromAddress.bind(this)}>At Address</button>`\r\n    this.atAddressButtonInput = yo`<input class=\"${css.input} ${css.ataddressinput} ataddressinput form-control\" placeholder=\"Load contract from Address\" title=\"address of contract\" oninput=${this.atAddressChanged.bind(this)} />`\r\n    this.selectContractNames = yo`<select class=\"${css.contractNames} custom-select\" disabled title=\"Please compile *.sol file to deploy or access a contract\"></select>`\r\n    this.abiLabel = yo`<span class=\"py-1\">ABI file selected</span>`\r\n    if (this.exEnvironment === 'vm') this.networkName = 'VM'\r\n    this.enableAtAddress(false)\r\n    this.abiLabel.style.display = 'none'\r\n\r\n    const savedConfig = window.localStorage.getItem(`ipfs/${this.exEnvironment}/${this.networkName}`)\r\n    this.ipfsCheckedState = savedConfig === 'true' ? true : false // eslint-disable-line\r\n\r\n    this.ipfsCheckbox = yo`\r\n      <input\r\n        id=\"deployAndRunPublishToIPFS\"\r\n        data-id=\"contractDropdownIpfsCheckbox\"\r\n        class=\"form-check-input custom-control-input\"\r\n        type=\"checkbox\"\r\n        onchange=${() => this.toggleCheckedState()}\r\n      >\r\n    `\r\n    if (this.ipfsCheckedState) this.ipfsCheckbox.checked = true\r\n\r\n    this.deployCheckBox = yo`\r\n      <div class=\"d-flex py-1 align-items-center custom-control custom-checkbox\">\r\n        ${this.ipfsCheckbox}\r\n        <label\r\n          for=\"deployAndRunPublishToIPFS\"\r\n          data-id=\"contractDropdownIpfsCheckboxLabel\"\r\n          class=\"m-0 form-check-label custom-control-label ${css.checkboxAlign}\"\r\n          title=\"Publishing the source code and ABI to IPFS facilitates source code verification and will greatly foster contract adoption (auditing, debugging, calling it, etc...)\"\r\n        >\r\n          Publish to IPFS\r\n        </label>\r\n      </div>\r\n      `\r\n    this.createPanel = yo`<div class=\"${css.deployDropdown}\"></div>`\r\n    this.orLabel = yo`<div class=\"${css.orLabel} mt-2\">or</div>`\r\n\r\n    const contractNamesContainer = yo`\r\n      <div class=\"${css.container}\" data-id=\"contractDropdownContainer\">\r\n        <label class=\"${css.settingsLabel}\">Contract</label>\r\n        <div class=\"${css.subcontainer}\">\r\n          ${this.selectContractNames} ${this.compFails}\r\n          ${this.abiLabel}\r\n        </div>\r\n        <div>\r\n          ${this.createPanel}\r\n          ${this.orLabel}\r\n          <div class=\"${css.button} ${css.atAddressSect}\">\r\n            ${this.atAddress}\r\n            ${this.atAddressButtonInput}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `\r\n    this.selectContractNames.addEventListener('change', this.setInputParamsPlaceHolder.bind(this))\r\n    this.setInputParamsPlaceHolder()\r\n    if (!this.contractNamesContainer) {\r\n      this.contractNamesContainer = contractNamesContainer\r\n    }\r\n    return contractNamesContainer\r\n  }\r\n\r\n  atAddressChanged (event) {\r\n    if (!this.atAddressButtonInput.value) {\r\n      this.enableAtAddress(false)\r\n    } else {\r\n      if ((this.selectContractNames && !this.selectContractNames.getAttribute('disabled') && this.loadType === 'sol') ||\r\n        this.loadType === 'abi') {\r\n        this.enableAtAddress(true)\r\n      } else {\r\n        this.enableAtAddress(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  changeCurrentFile (currentFile) {\r\n    if (!this.selectContractNames) return\r\n    if (/.(.abi)$/.exec(currentFile)) {\r\n      this.createPanel.style.display = 'none'\r\n      this.orLabel.style.display = 'none'\r\n      this.compFails.style.display = 'none'\r\n      this.loadType = 'abi'\r\n      this.contractNamesContainer.style.display = 'block'\r\n      this.abiLabel.style.display = 'block'\r\n      this.abiLabel.innerHTML = currentFile\r\n      this.selectContractNames.style.display = 'none'\r\n      this.enableContractNames(true)\r\n      this.enableAtAddress(true)\r\n    } else if (/.(.sol)$/.exec(currentFile)) {\r\n      this.createPanel.style.display = 'block'\r\n      this.orLabel.style.display = 'block'\r\n      this.contractNamesContainer.style.display = 'block'\r\n      this.loadType = 'sol'\r\n      this.selectContractNames.style.display = 'block'\r\n      this.abiLabel.style.display = 'none'\r\n      if (this.selectContractNames.value === '') this.enableAtAddress(false)\r\n    } else {\r\n      this.loadType = 'other'\r\n      this.createPanel.style.display = 'none'\r\n      this.orLabel.style.display = 'none'\r\n      this.compFails.style.display = 'none'\r\n      this.contractNamesContainer.style.display = 'none'\r\n      this.abiLabel.style.display = 'none'\r\n    }\r\n  }\r\n\r\n  setInputParamsPlaceHolder () {\r\n    this.createPanel.innerHTML = ''\r\n    if (this.selectContractNames.selectedIndex < 0 || this.selectContractNames.children.length <= 0) {\r\n      this.createPanel.innerHTML = 'No compiled contracts'\r\n      return\r\n    }\r\n\r\n    const selectedContract = this.getSelectedContract()\r\n    const clickCallback = async (valArray, inputsValues) => {\r\n      var selectedContract = this.getSelectedContract()\r\n      this.createInstance(selectedContract, inputsValues)\r\n    }\r\n    const createConstructorInstance = new MultiParamManager(\r\n      0,\r\n      selectedContract.getConstructorInterface(),\r\n      clickCallback,\r\n      selectedContract.getConstructorInputs(),\r\n      'Deploy',\r\n      selectedContract.bytecodeObject,\r\n      true\r\n    )\r\n    this.createPanel.appendChild(createConstructorInstance.render())\r\n    this.createPanel.appendChild(this.deployCheckBox)\r\n  }\r\n\r\n  getSelectedContract () {\r\n    var contract = this.selectContractNames.children[this.selectContractNames.selectedIndex]\r\n    var contractName = contract.getAttribute('value')\r\n    var compilerAtributeName = contract.getAttribute('compiler')\r\n\r\n    return this.dropdownLogic.getSelectedContract(contractName, compilerAtributeName)\r\n  }\r\n\r\n  async createInstance (selectedContract, args) {\r\n    if (selectedContract.bytecodeObject.length === 0) {\r\n      return modalDialogCustom.alert('This contract may be abstract, not implement an abstract parent\\'s methods completely or not invoke an inherited contract\\'s constructor correctly.')\r\n    }\r\n\r\n    var continueCb = (error, continueTxExecution, cancelCb) => {\r\n      if (error) {\r\n        var msg = typeof error !== 'string' ? error.message : error\r\n        modalDialog('Gas estimation failed', yo`<div>Gas estimation errored with the following message (see below).\r\n        The transaction execution will likely fail. Do you want to force sending? <br>\r\n        ${msg}\r\n        </div>`,\r\n        {\r\n          label: 'Send Transaction',\r\n          fn: () => {\r\n            continueTxExecution()\r\n          }\r\n        }, {\r\n          label: 'Cancel Transaction',\r\n          fn: () => {\r\n            cancelCb()\r\n          }\r\n        })\r\n      } else {\r\n        continueTxExecution()\r\n      }\r\n    }\r\n\r\n    var promptCb = (okCb, cancelCb) => {\r\n      modalDialogCustom.promptPassphrase('Passphrase requested', 'Personal mode is enabled. Please provide passphrase of account', '', okCb, cancelCb)\r\n    }\r\n\r\n    var statusCb = (msg) => {\r\n      return this.logCallback(msg)\r\n    }\r\n\r\n    var finalCb = (error, contractObject, address) => {\r\n      this.event.trigger('clearInstance')\r\n\r\n      if (error) {\r\n        return this.logCallback(error)\r\n      }\r\n\r\n      this.event.trigger('newContractInstanceAdded', [contractObject, address, contractObject.name])\r\n      if (this.ipfsCheckedState) {\r\n        publishToStorage('ipfs', this.runView.fileProvider, this.runView.fileManager, selectedContract)\r\n      }\r\n    }\r\n\r\n    let contractMetadata\r\n    try {\r\n      contractMetadata = await this.runView.call('compilerMetadata', 'deployMetadataOf', selectedContract.name, selectedContract.contract.file)\r\n    } catch (error) {\r\n      return statusCb(`creation of ${selectedContract.name} errored: ` + (error.message ? error.message : error))\r\n    }\r\n\r\n    const compilerContracts = this.dropdownLogic.getCompilerContracts()\r\n    const confirmationCb = this.getConfirmationCb(modalDialog, confirmDialog)\r\n\r\n    if (selectedContract.isOverSizeLimit()) {\r\n      return modalDialog('Contract code size over limit', yo`<div>Contract creation initialization returns data with length of more than 24576 bytes. The deployment will likely fails. <br>\r\n      More info: <a href=\"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-170.md\" target=\"_blank\">eip-170</a>\r\n      </div>`,\r\n      {\r\n        label: 'Force Send',\r\n        fn: () => {\r\n          this.deployContract(selectedContract, args, contractMetadata, compilerContracts, { continueCb, promptCb, statusCb, finalCb }, confirmationCb)\r\n        }\r\n      }, {\r\n        label: 'Cancel',\r\n        fn: () => {\r\n          this.logCallback(`creation of ${selectedContract.name} canceled by user.`)\r\n        }\r\n      })\r\n    }\r\n    this.deployContract(selectedContract, args, contractMetadata, compilerContracts, { continueCb, promptCb, statusCb, finalCb }, confirmationCb)\r\n  }\r\n\r\n  deployContract (selectedContract, args, contractMetadata, compilerContracts, callbacks, confirmationCb) {\r\n    const { statusCb } = callbacks\r\n    if (!contractMetadata || (contractMetadata && contractMetadata.autoDeployLib)) {\r\n      return this.blockchain.deployContractAndLibraries(selectedContract, args, contractMetadata, compilerContracts, callbacks, confirmationCb)\r\n    }\r\n    if (Object.keys(selectedContract.bytecodeLinkReferences).length) statusCb(`linking ${JSON.stringify(selectedContract.bytecodeLinkReferences, null, '\\t')} using ${JSON.stringify(contractMetadata.linkReferences, null, '\\t')}`)\r\n    this.blockchain.deployContractWithLibrary(selectedContract, args, contractMetadata, compilerContracts, callbacks, confirmationCb)\r\n  }\r\n\r\n  getConfirmationCb (modalDialog, confirmDialog) {\r\n    // this code is the same as in recorder.js. TODO need to be refactored out\r\n    const confirmationCb = (network, tx, gasEstimation, continueTxExecution, cancelCb) => {\r\n      if (network.name !== 'Main') {\r\n        return continueTxExecution(null)\r\n      }\r\n      const amount = this.blockchain.fromWei(tx.value, true, 'ether')\r\n      const content = confirmDialog(tx, amount, gasEstimation, null, this.blockchain.determineGasFees(tx), this.blockchain.determineGasPrice.bind(this.blockchain))\r\n\r\n      modalDialog('Confirm transaction', content,\r\n        {\r\n          label: 'Confirm',\r\n          fn: () => {\r\n            this.blockchain.config.setUnpersistedProperty('doNotShowTransactionConfirmationAgain', content.querySelector('input#confirmsetting').checked)\r\n            // TODO: check if this is check is still valid given the refactor\r\n            if (!content.gasPriceStatus) {\r\n              cancelCb('Given gas price is not correct')\r\n            } else {\r\n              var gasPrice = this.blockchain.toWei(content.querySelector('#gasprice').value, 'gwei')\r\n              continueTxExecution(gasPrice)\r\n            }\r\n          }\r\n        }, {\r\n          label: 'Cancel',\r\n          fn: () => {\r\n            return cancelCb('Transaction canceled by user.')\r\n          }\r\n        }\r\n      )\r\n    }\r\n\r\n    return confirmationCb\r\n  }\r\n\r\n  loadFromAddress () {\r\n    this.event.trigger('clearInstance')\r\n\r\n    var address = this.atAddressButtonInput.value\r\n    this.dropdownLogic.loadContractFromAddress(address,\r\n      (cb) => {\r\n        modalDialogCustom.confirm(null, 'Do you really want to interact with ' + address + ' using the current ABI definition?', cb)\r\n      },\r\n      (error, loadType, abi) => {\r\n        if (error) {\r\n          return modalDialogCustom.alert(error)\r\n        }\r\n        if (loadType === 'abi') {\r\n          return this.event.trigger('newContractABIAdded', [abi, address])\r\n        }\r\n        var selectedContract = this.getSelectedContract()\r\n        this.event.trigger('newContractInstanceAdded', [selectedContract.object, address, this.selectContractNames.value])\r\n      }\r\n    )\r\n  }\r\n}\r\n\r\nmodule.exports = ContractDropdownUI\r\n","var ethJSUtil = require('ethereumjs-util')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar txHelper = remixLib.execution.txHelper\r\nvar CompilerAbstract = require('../../../compiler/compiler-abstract')\r\nvar EventManager = remixLib.EventManager\r\n\r\nclass DropdownLogic {\r\n  constructor (compilersArtefacts, config, editor, runView) {\r\n    this.compilersArtefacts = compilersArtefacts\r\n    this.config = config\r\n    this.editor = editor\r\n    this.runView = runView\r\n\r\n    this.event = new EventManager()\r\n\r\n    this.listenToCompilationEvents()\r\n  }\r\n\r\n  // TODO: can be moved up; the event in contractDropdown will have to refactored a method instead\r\n  listenToCompilationEvents () {\r\n    const broadcastCompilationResult = (file, source, languageVersion, data) => {\r\n      // TODO check whether the tab is configured\r\n      const compiler = new CompilerAbstract(languageVersion, data, source)\r\n      this.compilersArtefacts[languageVersion] = compiler\r\n      this.compilersArtefacts.__last = compiler\r\n      this.event.trigger('newlyCompiled', [true, data, source, compiler, languageVersion, file])\r\n    }\r\n    this.runView.on('solidity', 'compilationFinished', (file, source, languageVersion, data) =>\r\n      broadcastCompilationResult(file, source, languageVersion, data)\r\n    )\r\n    this.runView.on('vyper', 'compilationFinished', (file, source, languageVersion, data) =>\r\n      broadcastCompilationResult(file, source, languageVersion, data)\r\n    )\r\n    this.runView.on('lexon', 'compilationFinished', (file, source, languageVersion, data) =>\r\n      broadcastCompilationResult(file, source, languageVersion, data)\r\n    )\r\n    this.runView.on('yulp', 'compilationFinished', (file, source, languageVersion, data) =>\r\n      broadcastCompilationResult(file, source, languageVersion, data)\r\n    )\r\n    this.runView.on('optimism-compiler', 'compilationFinished', (file, source, languageVersion, data) =>\r\n      broadcastCompilationResult(file, source, languageVersion, data)\r\n    )\r\n  }\r\n\r\n  loadContractFromAddress (address, confirmCb, cb) {\r\n    if (!ethJSUtil.isValidAddress(address)) {\r\n      return cb('Invalid address.')\r\n    }\r\n    if (/[a-f]/.test(address) && /[A-F]/.test(address) && !ethJSUtil.isValidChecksumAddress(address)) {\r\n      return cb('Invalid checksum address.')\r\n    }\r\n    if (/.(.abi)$/.exec(this.config.get('currentFile'))) {\r\n      confirmCb(() => {\r\n        var abi\r\n        try {\r\n          abi = JSON.parse(this.editor.currentContent())\r\n        } catch (e) {\r\n          return cb('Failed to parse the current file as JSON ABI.')\r\n        }\r\n        cb(null, 'abi', abi)\r\n      })\r\n    } else {\r\n      cb(null, 'instance')\r\n    }\r\n  }\r\n\r\n  getCompiledContracts (compiler, compilerFullName) {\r\n    var contracts = []\r\n    compiler.visitContracts((contract) => {\r\n      contracts.push(contract)\r\n    })\r\n    return contracts\r\n  }\r\n\r\n  getSelectedContract (contractName, compilerAtributeName) {\r\n    if (!contractName) return null\r\n\r\n    var compiler = this.compilersArtefacts[compilerAtributeName]\r\n    if (!compiler) return null\r\n\r\n    var contract = compiler.getContract(contractName)\r\n\r\n    return {\r\n      name: contractName,\r\n      contract: contract,\r\n      compiler: compiler,\r\n      abi: contract.object.abi,\r\n      bytecodeObject: contract.object.evm.bytecode.object,\r\n      bytecodeLinkReferences: contract.object.evm.bytecode.linkReferences,\r\n      object: contract.object,\r\n      deployedBytecode: contract.object.evm.deployedBytecode,\r\n      getConstructorInterface: () => {\r\n        return txHelper.getConstructorInterface(contract.object.abi)\r\n      },\r\n      getConstructorInputs: () => {\r\n        var constructorInteface = txHelper.getConstructorInterface(contract.object.abi)\r\n        return txHelper.inputParametersDeclarationToString(constructorInteface.inputs)\r\n      },\r\n      isOverSizeLimit: () => {\r\n        var deployedBytecode = contract.object.evm.deployedBytecode\r\n        return (deployedBytecode && deployedBytecode.object.length / 2 > 24576)\r\n      },\r\n      metadata: contract.object.metadata\r\n    }\r\n  }\r\n\r\n  getCompilerContracts () {\r\n    return this.compilersArtefacts.__last.getData().contracts\r\n  }\r\n}\r\n\r\nmodule.exports = DropdownLogic\r\n","var async = require('async')\r\nvar ethutil = require('ethereumjs-util')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar EventManager = remixLib.EventManager\r\nvar format = remixLib.execution.txFormat\r\nvar txHelper = remixLib.execution.txHelper\r\n\r\n/**\r\n  * Record transaction as long as the user create them.\r\n  *\r\n  *\r\n  */\r\nclass Recorder {\r\n  constructor (blockchain) {\r\n    var self = this\r\n    self.event = new EventManager()\r\n    self.blockchain = blockchain\r\n    self.data = { _listen: true, _replay: false, journal: [], _createdContracts: {}, _createdContractsReverse: {}, _usedAccounts: {}, _abis: {}, _contractABIReferences: {}, _linkReferences: {} }\r\n\r\n    this.blockchain.event.register('initiatingTransaction', (timestamp, tx, payLoad) => {\r\n      if (tx.useCall) return\r\n      var { from, to, value } = tx\r\n\r\n      // convert to and from to tokens\r\n      if (this.data._listen) {\r\n        var record = { value, parameters: payLoad.funArgs }\r\n        if (!to) {\r\n          var abi = payLoad.contractABI\r\n          var keccak = ethutil.bufferToHex(ethutil.keccak(JSON.stringify(abi)))\r\n          record.abi = keccak\r\n          record.contractName = payLoad.contractName\r\n          record.bytecode = payLoad.contractBytecode\r\n          record.linkReferences = payLoad.linkReferences\r\n          if (record.linkReferences && Object.keys(record.linkReferences).length) {\r\n            for (var file in record.linkReferences) {\r\n              for (var lib in record.linkReferences[file]) {\r\n                self.data._linkReferences[lib] = '<address>'\r\n              }\r\n            }\r\n          }\r\n          self.data._abis[keccak] = abi\r\n\r\n          this.data._contractABIReferences[timestamp] = keccak\r\n        } else {\r\n          var creationTimestamp = this.data._createdContracts[to]\r\n          record.to = `created{${creationTimestamp}}`\r\n          record.abi = this.data._contractABIReferences[creationTimestamp]\r\n        }\r\n        record.name = payLoad.funAbi.name\r\n        record.inputs = txHelper.serializeInputs(payLoad.funAbi)\r\n        record.type = payLoad.funAbi.type\r\n        for (var p in record.parameters) {\r\n          var thisarg = record.parameters[p]\r\n          var thistimestamp = this.data._createdContracts[thisarg]\r\n          if (thistimestamp) record.parameters[p] = `created{${thistimestamp}}`\r\n        }\r\n\r\n        this.blockchain.getAccounts((error, accounts) => {\r\n          if (error) return console.log(error)\r\n          record.from = `account{${accounts.indexOf(from)}}`\r\n          self.data._usedAccounts[record.from] = from\r\n          self.append(timestamp, record)\r\n        })\r\n      }\r\n    })\r\n\r\n    this.blockchain.event.register('transactionExecuted', (error, from, to, data, call, txResult, timestamp, _payload, rawAddress) => {\r\n      if (error) return console.log(error)\r\n      if (call) return\r\n\r\n      if (!rawAddress) return // not a contract creation\r\n      const stringAddress = this.addressToString(rawAddress)\r\n      const address = ethutil.toChecksumAddress(stringAddress)\r\n      // save back created addresses for the convertion from tokens to real adresses\r\n      this.data._createdContracts[address] = timestamp\r\n      this.data._createdContractsReverse[timestamp] = address\r\n    })\r\n    this.blockchain.event.register('contextChanged', this.clearAll.bind(this))\r\n    this.event.register('newTxRecorded', (count) => {\r\n      this.event.trigger('recorderCountChange', [count])\r\n    })\r\n    this.event.register('cleared', () => {\r\n      this.event.trigger('recorderCountChange', [0])\r\n    })\r\n  }\r\n\r\n  /**\r\n    * stop/start saving txs. If not listenning, is basically in replay mode\r\n    *\r\n    * @param {Bool} listen\r\n    */\r\n  setListen (listen) {\r\n    this.data._listen = listen\r\n    this.data._replay = !listen\r\n  }\r\n\r\n  extractTimestamp (value) {\r\n    var stamp = /created{(.*)}/g.exec(value)\r\n    if (stamp) {\r\n      return stamp[1]\r\n    }\r\n    return null\r\n  }\r\n\r\n  /**\r\n    * convert back from/to from tokens to real addresses\r\n    *\r\n    * @param {Object} record\r\n    * @param {Object} accounts\r\n    * @param {Object} options\r\n    *\r\n    */\r\n  resolveAddress (record, accounts, options) {\r\n    if (record.to) {\r\n      var stamp = this.extractTimestamp(record.to)\r\n      if (stamp) {\r\n        record.to = this.data._createdContractsReverse[stamp]\r\n      }\r\n    }\r\n    record.from = accounts[record.from]\r\n    // @TODO: writing browser test\r\n    return record\r\n  }\r\n\r\n  /**\r\n    * save the given @arg record\r\n    *\r\n    * @param {Number/String} timestamp\r\n    * @param {Object} record\r\n    *\r\n    */\r\n  append (timestamp, record) {\r\n    var self = this\r\n    self.data.journal.push({ timestamp, record })\r\n    self.event.trigger('newTxRecorded', [self.data.journal.length])\r\n  }\r\n\r\n  /**\r\n    * basically return the records + associate values (like abis / accounts)\r\n    *\r\n    */\r\n  getAll () {\r\n    var self = this\r\n    var records = [].concat(self.data.journal)\r\n    return {\r\n      accounts: self.data._usedAccounts,\r\n      linkReferences: self.data._linkReferences,\r\n      transactions: records.sort((A, B) => {\r\n        var stampA = A.timestamp\r\n        var stampB = B.timestamp\r\n        return stampA - stampB\r\n      }),\r\n      abis: self.data._abis\r\n    }\r\n  }\r\n\r\n  /**\r\n    * delete the seen transactions\r\n    *\r\n    */\r\n  clearAll () {\r\n    var self = this\r\n    self.data._listen = true\r\n    self.data._replay = false\r\n    self.data.journal = []\r\n    self.data._createdContracts = {}\r\n    self.data._createdContractsReverse = {}\r\n    self.data._usedAccounts = {}\r\n    self.data._abis = {}\r\n    self.data._contractABIReferences = {}\r\n    self.data._linkReferences = {}\r\n    self.event.trigger('cleared', [])\r\n  }\r\n\r\n  /**\r\n    * run the list of records\r\n    *\r\n    * @param {Object} accounts\r\n    * @param {Object} options\r\n    * @param {Object} abis\r\n    * @param {Function} newContractFn\r\n    *\r\n    */\r\n  run (records, accounts, options, abis, linkReferences, confirmationCb, continueCb, promptCb, alertCb, logCallBack, newContractFn) {\r\n    var self = this\r\n    self.setListen(false)\r\n    logCallBack(`Running ${records.length} transaction(s) ...`)\r\n    async.eachOfSeries(records, function (tx, index, cb) {\r\n      var record = self.resolveAddress(tx.record, accounts, options)\r\n      var abi = abis[tx.record.abi]\r\n      if (!abi) {\r\n        return alertCb('cannot find ABI for ' + tx.record.abi + '.  Execution stopped at ' + index)\r\n      }\r\n      /* Resolve Library */\r\n      if (record.linkReferences && Object.keys(record.linkReferences).length) {\r\n        for (var k in linkReferences) {\r\n          var link = linkReferences[k]\r\n          var timestamp = self.extractTimestamp(link)\r\n          if (timestamp && self.data._createdContractsReverse[timestamp]) {\r\n            link = self.data._createdContractsReverse[timestamp]\r\n          }\r\n          tx.record.bytecode = format.linkLibraryStandardFromlinkReferences(k, link.replace('0x', ''), tx.record.bytecode, tx.record.linkReferences)\r\n        }\r\n      }\r\n      /* Encode params */\r\n      var fnABI\r\n      if (tx.record.type === 'constructor') {\r\n        fnABI = txHelper.getConstructorInterface(abi)\r\n      } else if (tx.record.type === 'fallback') {\r\n        fnABI = txHelper.getFallbackInterface(abi)\r\n      } else if (tx.record.type === 'receive') {\r\n        fnABI = txHelper.getReceiveInterface(abi)\r\n      } else {\r\n        fnABI = txHelper.getFunction(abi, record.name + record.inputs)\r\n      }\r\n      if (!fnABI) {\r\n        alertCb('cannot resolve abi of ' + JSON.stringify(record, null, '\\t') + '. Execution stopped at ' + index)\r\n        return cb('cannot resolve abi')\r\n      }\r\n      if (tx.record.parameters) {\r\n        /* check if we have some params to resolve */\r\n        try {\r\n          tx.record.parameters.forEach((value, index) => {\r\n            var isString = true\r\n            if (typeof value !== 'string') {\r\n              isString = false\r\n              value = JSON.stringify(value)\r\n            }\r\n            for (var timestamp in self.data._createdContractsReverse) {\r\n              value = value.replace(new RegExp('created\\\\{' + timestamp + '\\\\}', 'g'), self.data._createdContractsReverse[timestamp])\r\n            }\r\n            if (!isString) value = JSON.parse(value)\r\n            tx.record.parameters[index] = value\r\n          })\r\n        } catch (e) {\r\n          return alertCb('cannot resolve input parameters ' + JSON.stringify(tx.record.parameters) + '. Execution stopped at ' + index)\r\n        }\r\n      }\r\n      var data = format.encodeData(fnABI, tx.record.parameters, tx.record.bytecode)\r\n      if (data.error) {\r\n        alertCb(data.error + '. Record:' + JSON.stringify(record, null, '\\t') + '. Execution stopped at ' + index)\r\n        return cb(data.error)\r\n      }\r\n      logCallBack(`(${index}) ${JSON.stringify(record, null, '\\t')}`)\r\n      logCallBack(`(${index}) data: ${data.data}`)\r\n      record.data = { dataHex: data.data, funArgs: tx.record.parameters, funAbi: fnABI, contractBytecode: tx.record.bytecode, contractName: tx.record.contractName, timestamp: tx.timestamp }\r\n\r\n      self.blockchain.runTx(record, confirmationCb, continueCb, promptCb,\r\n        function (err, txResult, rawAddress) {\r\n          if (err) {\r\n            console.error(err)\r\n            return logCallBack(err + '. Execution failed at ' + index)\r\n          }\r\n          if (rawAddress) {\r\n            const stringAddress = self.addressToString(rawAddress)\r\n            const address = ethutil.toChecksumAddress(stringAddress)\r\n            // save back created addresses for the convertion from tokens to real adresses\r\n            self.data._createdContracts[address] = tx.timestamp\r\n            self.data._createdContractsReverse[tx.timestamp] = address\r\n            newContractFn(abi, address, record.contractName)\r\n          }\r\n          cb(err)\r\n        }\r\n      )\r\n    }, () => { self.setListen(true); self.clearAll() })\r\n  }\r\n\r\n  addressToString (address) {\r\n    if (!address) return null\r\n    if (typeof address !== 'string') {\r\n      address = address.toString('hex')\r\n    }\r\n    if (address.indexOf('0x') === -1) {\r\n      address = '0x' + address\r\n    }\r\n    return address\r\n  }\r\n\r\n  runScenario (json, continueCb, promptCb, alertCb, confirmationCb, logCallBack, cb) {\r\n    if (!json) {\r\n      return cb('a json content must be provided')\r\n    }\r\n    if (typeof json === 'string') {\r\n      try {\r\n        json = JSON.parse(json)\r\n      } catch (e) {\r\n        return cb('A scenario file is required. It must be json formatted')\r\n      }\r\n    }\r\n\r\n    try {\r\n      var txArray = json.transactions || []\r\n      var accounts = json.accounts || []\r\n      var options = json.options || {}\r\n      var abis = json.abis || {}\r\n      var linkReferences = json.linkReferences || {}\r\n    } catch (e) {\r\n      return cb('Invalid Scenario File. Please try again')\r\n    }\r\n\r\n    if (!txArray.length) {\r\n      return\r\n    }\r\n\r\n    this.run(txArray, accounts, options, abis, linkReferences, confirmationCb, continueCb, promptCb, alertCb, logCallBack, (abi, address, contractName) => {\r\n      cb(null, abi, address, contractName)\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = Recorder\r\n","import { Plugin } from '@remixproject/engine'\r\n\r\nimport * as packageJson from '../../../../../../package.json'\r\nvar yo = require('yo-yo')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar EventManager = remixLib.EventManager\r\nvar csjs = require('csjs-inject')\r\nvar css = require('../styles/run-tab-styles')\r\n\r\nvar modalDialogCustom = require('../../ui/modal-dialog-custom')\r\nvar modalDialog = require('../../ui/modaldialog')\r\nvar confirmDialog = require('../../ui/confirmDialog')\r\n\r\nvar helper = require('../../../lib/helper.js')\r\n\r\nconst profile = {\r\n  name: 'recorder',\r\n  methods: ['runScenario'],\r\n  version: packageJson.version\r\n}\r\n\r\nclass RecorderUI extends Plugin {\r\n  constructor (blockchain, fileManager, recorder, logCallBack, config) {\r\n    super(profile)\r\n    this.fileManager = fileManager\r\n    this.blockchain = blockchain\r\n    this.recorder = recorder\r\n    this.logCallBack = logCallBack\r\n    this.config = config\r\n    this.event = new EventManager()\r\n  }\r\n\r\n  render () {\r\n    var css2 = csjs`\r\n      .container {}\r\n      .runTxs {}\r\n      .recorder {}\r\n    `\r\n\r\n    this.runButton = yo`<i class=\"fas fa-play runtransaction ${css2.runTxs} ${css.icon}\"  title=\"Run Transactions\" aria-hidden=\"true\"></i>`\r\n    this.recordButton = yo`\r\n      <i class=\"fas fa-save savetransaction ${css2.recorder} ${css.icon}\"\r\n        onclick=${this.triggerRecordButton.bind(this)} title=\"Save Transactions\" aria-hidden=\"true\">\r\n      </i>`\r\n\r\n    this.runButton.onclick = () => {\r\n      const file = this.config.get('currentFile')\r\n      if (!file) return modalDialogCustom.alert('A scenario file has to be selected')\r\n      this.runScenario(file)\r\n    }\r\n  }\r\n\r\n  runScenario (file) {\r\n    if (!file) return modalDialogCustom.alert('Unable to run scenerio, no specified scenario file')\r\n    var continueCb = (error, continueTxExecution, cancelCb) => {\r\n      if (error) {\r\n        var msg = typeof error !== 'string' ? error.message : error\r\n        modalDialog('Gas estimation failed', yo`<div>Gas estimation errored with the following message (see below).\r\n        The transaction execution will likely fail. Do you want to force sending? <br>\r\n        ${msg}\r\n        </div>`,\r\n        {\r\n          label: 'Send Transaction',\r\n          fn: () => {\r\n            continueTxExecution()\r\n          }\r\n        }, {\r\n          label: 'Cancel Transaction',\r\n          fn: () => {\r\n            cancelCb()\r\n          }\r\n        })\r\n      } else {\r\n        continueTxExecution()\r\n      }\r\n    }\r\n\r\n    var promptCb = (okCb, cancelCb) => {\r\n      modalDialogCustom.promptPassphrase('Passphrase requested', 'Personal mode is enabled. Please provide passphrase of account', '', okCb, cancelCb)\r\n    }\r\n\r\n    var alertCb = (msg) => {\r\n      modalDialogCustom.alert(msg)\r\n    }\r\n\r\n    const confirmationCb = this.getConfirmationCb(modalDialog, confirmDialog)\r\n\r\n    this.fileManager.readFile(file).then((json) => {\r\n      // TODO: there is still a UI dependency to remove here, it's still too coupled at this point to remove easily\r\n      this.recorder.runScenario(json, continueCb, promptCb, alertCb, confirmationCb, this.logCallBack, (error, abi, address, contractName) => {\r\n        if (error) {\r\n          return modalDialogCustom.alert(error)\r\n        }\r\n\r\n        this.event.trigger('newScenario', [abi, address, contractName])\r\n      })\r\n    }).catch((error) => modalDialogCustom.alert(error))\r\n  }\r\n\r\n  getConfirmationCb (modalDialog, confirmDialog) {\r\n    // this code is the same as in contractDropdown.js. TODO need to be refactored out\r\n    const confirmationCb = (network, tx, gasEstimation, continueTxExecution, cancelCb) => {\r\n      if (network.name !== 'Main') {\r\n        return continueTxExecution(null)\r\n      }\r\n      const amount = this.blockchain.fromWei(tx.value, true, 'ether')\r\n      const content = confirmDialog(tx, amount, gasEstimation, null, this.blockchain.determineGasFees(tx), this.blockchain.determineGasPrice.bind(this.blockchain))\r\n\r\n      modalDialog('Confirm transaction', content,\r\n        {\r\n          label: 'Confirm',\r\n          fn: () => {\r\n            this.config.setUnpersistedProperty('doNotShowTransactionConfirmationAgain', content.querySelector('input#confirmsetting').checked)\r\n            // TODO: check if this is check is still valid given the refactor\r\n            if (!content.gasPriceStatus) {\r\n              cancelCb('Given gas price is not correct')\r\n            } else {\r\n              var gasPrice = this.blockchain.toWei(content.querySelector('#gasprice').value, 'gwei')\r\n              continueTxExecution(gasPrice)\r\n            }\r\n          }\r\n        }, {\r\n          label: 'Cancel',\r\n          fn: () => {\r\n            return cancelCb('Transaction canceled by user.')\r\n          }\r\n        }\r\n      )\r\n    }\r\n\r\n    return confirmationCb\r\n  }\r\n\r\n  triggerRecordButton () {\r\n    this.saveScenario(\r\n      (path, cb) => {\r\n        modalDialogCustom.prompt('Save transactions as scenario', 'Transactions will be saved in a file under ' + path, 'scenario.json', cb)\r\n      },\r\n      (error) => {\r\n        if (error) return modalDialogCustom.alert(error)\r\n      }\r\n    )\r\n  }\r\n\r\n  saveScenario (promptCb, cb) {\r\n    var txJSON = JSON.stringify(this.recorder.getAll(), null, 2)\r\n    var path = this.fileManager.currentPath()\r\n    promptCb(path, input => {\r\n      var fileProvider = this.fileManager.fileProviderOf(path)\r\n      if (!fileProvider) return\r\n      var newFile = path + '/' + input\r\n      helper.createNonClashingName(newFile, fileProvider, (error, newFile) => {\r\n        if (error) return cb('Failed to create file. ' + newFile + ' ' + error)\r\n        if (!fileProvider.set(newFile, txJSON)) return cb('Failed to create file ' + newFile)\r\n        this.fileManager.open(newFile)\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = RecorderUI\r\n","const $ = require('jquery')\r\nconst yo = require('yo-yo')\r\nconst remixLib = require('@remix-project/remix-lib')\r\nconst EventManager = remixLib.EventManager\r\nconst css = require('../styles/run-tab-styles')\r\nconst copyToClipboard = require('../../ui/copy-to-clipboard')\r\nconst modalDialogCustom = require('../../ui/modal-dialog-custom')\r\nconst addTooltip = require('../../ui/tooltip')\r\nconst helper = require('../../../lib/helper.js')\r\nconst globalRegistry = require('../../../global/registry')\r\n\r\nclass SettingsUI {\r\n  constructor (blockchain, networkModule) {\r\n    this.blockchain = blockchain\r\n    this.event = new EventManager()\r\n    this._components = {}\r\n\r\n    this.blockchain.event.register('transactionExecuted', (error, from, to, data, lookupOnly, txResult) => {\r\n      if (error) return\r\n      if (!lookupOnly) this.el.querySelector('#value').value = '0'\r\n      this.updateAccountBalances()\r\n    })\r\n    this._components = {\r\n      registry: globalRegistry,\r\n      networkModule: networkModule\r\n    }\r\n    this._components.registry = globalRegistry\r\n    this._deps = {\r\n      config: this._components.registry.get('config').api\r\n    }\r\n\r\n    this._deps.config.events.on('settings/personal-mode_changed', this.onPersonalChange.bind(this))\r\n\r\n    setInterval(() => {\r\n      this.updateAccountBalances()\r\n    }, 1000)\r\n\r\n    this.accountListCallId = 0\r\n    this.loadedAccounts = {}\r\n  }\r\n\r\n  updateAccountBalances () {\r\n    if (!this.el) return\r\n    var accounts = $(this.el.querySelector('#txorigin')).children('option')\r\n    accounts.each((index, account) => {\r\n      this.blockchain.getBalanceInEther(account.value, (err, balance) => {\r\n        if (err) return\r\n        const updated = helper.shortenAddress(account.value, balance)\r\n        if (updated !== account.innerText) { // check if the balance has been updated and update UI accordingly.\r\n          account.innerText = updated\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  render () {\r\n    this.netUI = yo`<span class=\"${css.network} badge badge-secondary\"></span>`\r\n\r\n    var environmentEl = yo`\r\n      <div class=\"${css.crow}\">\r\n        <label id=\"selectExEnv\" class=\"${css.settingsLabel}\">\r\n          Environment\r\n        </label>\r\n        <div class=\"${css.environment}\">\r\n          <select id=\"selectExEnvOptions\" data-id=\"settingsSelectEnvOptions\" onchange=${() => { this.updateNetwork() }} class=\"form-control ${css.select} custom-select\">\r\n            <option id=\"vm-mode\"\r\n              title=\"Execution environment does not connect to any node, everything is local and in memory only.\"\r\n              value=\"vm\" name=\"executionContext\"> JavaScript VM\r\n            </option>\r\n            <option id=\"injected-mode\"\r\n              title=\"Execution environment has been provided by Metamask or similar provider.\"\r\n              value=\"injected\" name=\"executionContext\"> Injected Web3\r\n            </option>\r\n            <option id=\"web3-mode\" data-id=\"settingsWeb3Mode\"\r\n              title=\"Execution environment connects to node at localhost (or via IPC if available), transactions will be sent to the network and can cause loss of money or worse!\r\n              If this page is served via https and you access your node via http, it might not work. In this case, try cloning the repository and serving it via http.\"\r\n              value=\"web3\" name=\"executionContext\"> Web3 Provider\r\n            </option>\r\n          </select>\r\n          <a href=\"https://remix-ide.readthedocs.io/en/latest/run.html#run-setup\" target=\"_blank\"><i class=\"${css.infoDeployAction} ml-2 fas fa-info\" title=\"check out docs to setup Environment\"></i></a>\r\n        </div>\r\n      </div>\r\n    `\r\n    const networkEl = yo`\r\n    <div class=\"${css.crow}\">\r\n        <div class=\"${css.settingsLabel}\">\r\n        </div>\r\n        <div class=\"${css.environment}\" data-id=\"settingsNetworkEnv\">\r\n          ${this.netUI}\r\n        </div>\r\n      </div>\r\n    `\r\n    const accountEl = yo`\r\n      <div class=\"${css.crow}\">\r\n        <label class=\"${css.settingsLabel}\">\r\n          Account\r\n          <span id=\"remixRunPlusWraper\" title=\"Create a new account\" onload=${this.updatePlusButton.bind(this)}>\r\n            <i id=\"remixRunPlus\" class=\"fas fa-plus-circle ${css.icon}\" aria-hidden=\"true\" onclick=${this.newAccount.bind(this)}\"></i>\r\n          </span>\r\n        </label>\r\n        <div class=\"${css.account}\">\r\n          <select data-id=\"runTabSelectAccount\" name=\"txorigin\" class=\"form-control ${css.select} custom-select pr-4\" id=\"txorigin\"></select>\r\n          <div style=\"margin-left: -5px;\">${copyToClipboard(() => document.querySelector('#runTabView #txorigin').value)}</div>\r\n          <i id=\"remixRunSignMsg\" data-id=\"settingsRemixRunSignMsg\" class=\"mx-1 fas fa-edit ${css.icon}\" aria-hidden=\"true\" onclick=${this.signMessage.bind(this)} title=\"Sign a message using this account key\"></i>\r\n        </div>\r\n      </div>\r\n    `\r\n\r\n    const gasPriceEl = yo`\r\n      <div class=\"${css.crow}\">\r\n        <label class=\"${css.settingsLabel}\">Gas limit</label>\r\n        <input type=\"number\" class=\"form-control ${css.gasNval} ${css.col2}\" id=\"gasLimit\" value=\"3000000\">\r\n      </div>\r\n    `\r\n\r\n    const valueEl = yo`\r\n      <div class=\"${css.crow}\">\r\n        <label class=\"${css.settingsLabel}\">Value</label>\r\n        <div class=\"${css.gasValueContainer}\">\r\n          <input type=\"text\" class=\"form-control ${css.gasNval} ${css.col2}\" id=\"value\" value=\"0\" title=\"Enter the value and choose the unit\">\r\n          <select name=\"unit\" class=\"form-control p-1 ${css.gasNvalUnit} ${css.col2_2} custom-select\" id=\"unit\">\r\n            <option data-unit=\"wei\">wei</option>\r\n            <option data-unit=\"gwei\">gwei</option>\r\n            <option data-unit=\"finney\">finney</option>\r\n            <option data-unit=\"ether\">ether</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n    `\r\n\r\n    const el = yo`\r\n      <div class=\"${css.settings}\">\r\n        ${environmentEl}\r\n        ${networkEl}\r\n        ${accountEl}\r\n        ${gasPriceEl}\r\n        ${valueEl}\r\n      </div>\r\n    `\r\n\r\n    var selectExEnv = environmentEl.querySelector('#selectExEnvOptions')\r\n    this.setDropdown(selectExEnv)\r\n\r\n    this.blockchain.event.register('contextChanged', (context, silent) => {\r\n      this.setFinalContext()\r\n    })\r\n\r\n    setInterval(() => {\r\n      this.updateNetwork()\r\n    }, 1000)\r\n\r\n    this.el = el\r\n\r\n    this.fillAccountsList()\r\n    return el\r\n  }\r\n\r\n  setDropdown (selectExEnv) {\r\n    this.selectExEnv = selectExEnv\r\n\r\n    const addProvider = (network) => {\r\n      selectExEnv.appendChild(yo`<option\r\n        title=\"provider name: ${network.name}\"\r\n        value=\"${network.name}\"\r\n        name=\"executionContext\"\r\n      >\r\n        ${network.name}\r\n      </option>`)\r\n      addTooltip(yo`<span><b>${network.name}</b> provider added</span>`)\r\n    }\r\n\r\n    const removeProvider = (name) => {\r\n      var env = selectExEnv.querySelector(`option[value=\"${name}\"]`)\r\n      if (env) {\r\n        selectExEnv.removeChild(env)\r\n        addTooltip(yo`<span><b>${name}</b> provider removed</span>`)\r\n      }\r\n    }\r\n    this.blockchain.event.register('addProvider', provider => addProvider(provider))\r\n    this.blockchain.event.register('removeProvider', name => removeProvider(name))\r\n\r\n    selectExEnv.addEventListener('change', (event) => {\r\n      const context = selectExEnv.options[selectExEnv.selectedIndex].value\r\n      this.blockchain.changeExecutionContext(context, () => {\r\n        modalDialogCustom.prompt('External node request', this.web3ProviderDialogBody(), 'http://127.0.0.1:8545', (target) => {\r\n          this.blockchain.setProviderFromEndpoint(target, context, (alertMsg) => {\r\n            if (alertMsg) addTooltip(alertMsg)\r\n            this.setFinalContext()\r\n          })\r\n        }, this.setFinalContext.bind(this))\r\n      }, (alertMsg) => {\r\n        addTooltip(alertMsg)\r\n      }, this.setFinalContext.bind(this))\r\n    })\r\n\r\n    selectExEnv.value = this.blockchain.getProvider()\r\n  }\r\n\r\n  web3ProviderDialogBody () {\r\n    const thePath = '<path/to/local/folder/for/test/chain>'\r\n\r\n    return yo`\r\n      <div class=\"\">\r\n        Note: To use Geth & https://remix.ethereum.org, configure it to allow requests from Remix:(see <a href=\"https://geth.ethereum.org/docs/rpc/server\" target=\"_blank\">Geth Docs on rpc server</a>)\r\n        <div class=\"border p-1\">geth --rpc --rpccorsdomain https://remix.ethereum.org</div>\r\n        <br>\r\n        To run Remix & a local Geth test node, use this command: (see <a href=\"https://geth.ethereum.org/getting-started/dev-mode\" target=\"_blank\">Geth Docs on Dev mode</a>)\r\n        <div class=\"border p-1\">geth --rpc --rpccorsdomain=\"${window.origin}\" --rpcapi web3,eth,debug,personal,net --vmdebug --datadir ${thePath} --dev console</div>\r\n        <br>\r\n        <br> \r\n        <b>WARNING:</b> It is not safe to use the --rpccorsdomain flag with a wildcard: <b>--rpccorsdomain *</b>\r\n        <br>\r\n        <br>For more info: <a href=\"https://remix-ide.readthedocs.io/en/latest/run.html#more-about-web3-provider\" target=\"_blank\">Remix Docs on Web3 Provider</a>\r\n        <br>\r\n        <br> \r\n        Web3 Provider Endpoint\r\n      </div>\r\n    `\r\n  }\r\n\r\n  setFinalContext () {\r\n    // set the final context. Cause it is possible that this is not the one we've originaly selected\r\n    this.selectExEnv.value = this.blockchain.getProvider()\r\n    this.event.trigger('clearInstance', [])\r\n    this.updateNetwork()\r\n    this.updatePlusButton()\r\n  }\r\n\r\n  updatePlusButton () {\r\n    // enable/disable + button\r\n    const plusBtn = document.getElementById('remixRunPlus')\r\n    const plusTitle = document.getElementById('remixRunPlusWraper')\r\n    switch (this.selectExEnv.value) {\r\n      case 'injected':\r\n        plusBtn.classList.add(css.disableMouseEvents)\r\n        plusTitle.title = \"Unfortunately it's not possible to create an account using injected web3. Please create the account directly from your provider (i.e metamask or other of the same type).\"\r\n\r\n        break\r\n      case 'vm':\r\n        plusBtn.classList.remove(css.disableMouseEvents)\r\n        plusTitle.title = 'Create a new account'\r\n\r\n        break\r\n\r\n      case 'web3':\r\n        this.onPersonalChange()\r\n\r\n        break\r\n      default: {\r\n        plusBtn.classList.add(css.disableMouseEvents)\r\n        plusTitle.title = `Unfortunately it's not possible to create an account using an external wallet (${this.selectExEnv.value}).`\r\n      }\r\n    }\r\n  }\r\n\r\n  onPersonalChange () {\r\n    const plusBtn = document.getElementById('remixRunPlus')\r\n    const plusTitle = document.getElementById('remixRunPlusWraper')\r\n    if (!this._deps.config.get('settings/personal-mode')) {\r\n      plusBtn.classList.add(css.disableMouseEvents)\r\n      plusTitle.title = 'Creating an account is possible only in Personal mode. Please go to Settings to enable it.'\r\n    } else {\r\n      plusBtn.classList.remove(css.disableMouseEvents)\r\n      plusTitle.title = 'Create a new account'\r\n    }\r\n  }\r\n\r\n  newAccount () {\r\n    this.blockchain.newAccount(\r\n      '',\r\n      (cb) => {\r\n        modalDialogCustom.promptPassphraseCreation((error, passphrase) => {\r\n          if (error) {\r\n            return modalDialogCustom.alert(error)\r\n          }\r\n          cb(passphrase)\r\n        }, () => {})\r\n      },\r\n      (error, address) => {\r\n        if (error) {\r\n          return addTooltip('Cannot create an account: ' + error)\r\n        }\r\n        addTooltip(`account ${address} created`)\r\n      }\r\n    )\r\n  }\r\n\r\n  signMessage () {\r\n    this.blockchain.getAccounts((err, accounts) => {\r\n      if (err) {\r\n        return addTooltip(`Cannot get account list: ${err}`)\r\n      }\r\n\r\n      var signMessageDialog = { title: 'Sign a message', text: 'Enter a message to sign', inputvalue: 'Message to sign' }\r\n      var $txOrigin = this.el.querySelector('#txorigin')\r\n      if (!$txOrigin.selectedOptions[0] && (this.blockchain.isInjectedWeb3() || this.blockchain.isWeb3Provider())) {\r\n        return addTooltip('Account list is empty, please make sure the current provider is properly connected to remix')\r\n      }\r\n\r\n      var account = $txOrigin.selectedOptions[0].value\r\n\r\n      var promptCb = (passphrase) => {\r\n        const modal = modalDialogCustom.promptMulti(signMessageDialog, (message) => {\r\n          this.blockchain.signMessage(message, account, passphrase, (err, msgHash, signedData) => {\r\n            if (err) {\r\n              return addTooltip(err)\r\n            }\r\n            modal.hide()\r\n            modalDialogCustom.alert(yo`\r\n              <div>\r\n                <b>hash:</b><br>\r\n                <span id=\"remixRunSignMsgHash\" data-id=\"settingsRemixRunSignMsgHash\">${msgHash}</span>\r\n                <br><b>signature:</b><br>\r\n                <span id=\"remixRunSignMsgSignature\" data-id=\"settingsRemixRunSignMsgSignature\">${signedData}</span>\r\n              </div>\r\n            `)\r\n          })\r\n        }, false)\r\n      }\r\n\r\n      if (this.blockchain.isWeb3Provider()) {\r\n        return modalDialogCustom.promptPassphrase(\r\n          'Passphrase to sign a message',\r\n          'Enter your passphrase for this account to sign the message',\r\n          '',\r\n          promptCb,\r\n          false\r\n        )\r\n      }\r\n      promptCb()\r\n    })\r\n  }\r\n\r\n  updateNetwork () {\r\n    this.blockchain.updateNetwork((err, { id, name } = {}) => {\r\n      if (err) {\r\n        this.netUI.innerHTML = 'can\\'t detect network '\r\n        return\r\n      }\r\n      const network = this._components.networkModule.getNetworkProvider.bind(this._components.networkModule)\r\n      this.netUI.innerHTML = (network() !== 'vm') ? `${name} (${id || '-'}) network` : ''\r\n    })\r\n    this.fillAccountsList()\r\n  }\r\n\r\n  // TODO: unclear what's the goal of accountListCallId, feels like it can be simplified\r\n  fillAccountsList () {\r\n    this.accountListCallId++\r\n    var callid = this.accountListCallId\r\n    var txOrigin = this.el.querySelector('#txorigin')\r\n    this.blockchain.getAccounts((err, accounts) => {\r\n      if (this.accountListCallId > callid) return\r\n      this.accountListCallId++\r\n      if (err) { addTooltip(`Cannot get account list: ${err}`) }\r\n      for (var loadedaddress in this.loadedAccounts) {\r\n        if (accounts.indexOf(loadedaddress) === -1) {\r\n          txOrigin.removeChild(txOrigin.querySelector('option[value=\"' + loadedaddress + '\"]'))\r\n          delete this.loadedAccounts[loadedaddress]\r\n        }\r\n      }\r\n      for (var i in accounts) {\r\n        var address = accounts[i]\r\n        if (!this.loadedAccounts[address]) {\r\n          txOrigin.appendChild(yo`<option value=\"${address}\" >${address}</option>`)\r\n          this.loadedAccounts[address] = 1\r\n        }\r\n      }\r\n      txOrigin.setAttribute('value', accounts[0])\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = SettingsUI\r\n","import { ViewPlugin } from '@remixproject/engine-web'\r\nimport * as packageJson from '../../../../../package.json'\r\nconst yo = require('yo-yo')\r\nconst globalRegistry = require('../../global/registry')\r\nconst tooltip = require('../ui/tooltip')\r\nconst copyToClipboard = require('../ui/copy-to-clipboard')\r\nconst EventManager = require('../../lib/events')\r\nconst css = require('./styles/settings-tab-styles')\r\n\r\nconst profile = {\r\n  name: 'settings',\r\n  displayName: 'Settings',\r\n  methods: ['getGithubAccessToken'],\r\n  events: [],\r\n  icon: 'assets/img/settings.webp',\r\n  description: 'Remix-IDE settings',\r\n  kind: 'settings',\r\n  location: 'sidePanel',\r\n  documentation: 'https://remix-ide.readthedocs.io/en/latest/settings.html',\r\n  version: packageJson.version,\r\n  permission: true\r\n}\r\n\r\nmodule.exports = class SettingsTab extends ViewPlugin {\r\n  constructor (config, editor, appManager) {\r\n    super(profile)\r\n    this.config = config\r\n    this.editor = editor\r\n    this.appManager = appManager\r\n    this._components = {}\r\n    this._deps = {\r\n      themeModule: globalRegistry.get('themeModule').api\r\n    }\r\n    this._view = { /* eslint-disable */\r\n      el: null,\r\n      optionVM: null,\r\n      optionVMLabel: null,\r\n      personal: null,\r\n      personalLabel: null,\r\n      warnPersonalMode: null,\r\n      generateContractMetadata: null,\r\n      generateContractMetadataLabel: null,\r\n      config: {\r\n        general: null, themes: null\r\n      },\r\n      textWrap: null,\r\n      textWrapLabel: null\r\n    } /* eslint-enable */\r\n    this.event = new EventManager()\r\n  }\r\n\r\n  createThemeCheckies () {\r\n    const themes = this._deps.themeModule.getThemes()\r\n    const onswitchTheme = (event, name) => {\r\n      this._deps.themeModule.switchTheme(name)\r\n    }\r\n    if (themes) {\r\n      return yo`<div class=\"card-text themes-container\">\r\n        ${themes.map((aTheme) => {\r\n          const el = yo`<div class=\"radio custom-control custom-radio mb-1 form-check ${css.crow}\">\r\n          <input type=\"radio\" onchange=${event => { onswitchTheme(event, aTheme.name) }} class=\"align-middle custom-control-input\" name=\"theme\" id=\"${aTheme.name}\" data-id=\"settingsTabTheme${aTheme.name}\">\r\n          <label class=\"form-check-label custom-control-label\" data-id=\"settingsTabThemeLabel${aTheme.name}\" for=\"${aTheme.name}\">${aTheme.name} (${aTheme.quality})</label>\r\n        </div>`\r\n          if (this._deps.themeModule.active === aTheme.name) el.querySelector('input').setAttribute('checked', 'checked')\r\n          return el\r\n        })}\r\n      </div>`\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const self = this\r\n    if (self._view.el) return self._view.el\r\n\r\n    // Gist settings\r\n    const token = this.config.get('settings/gist-access-token')\r\n    const gistAccessToken = yo`<input id=\"gistaccesstoken\" data-id=\"settingsTabGistAccessToken\" type=\"password\" class=\"form-control\">`\r\n    if (token) gistAccessToken.value = token\r\n    const removeToken = () => { self.config.set('settings/gist-access-token', ''); gistAccessToken.value = ''; tooltip('Access token removed') }\r\n    const saveToken = () => { this.config.set('settings/gist-access-token', gistAccessToken.value); tooltip('Access token saved') }\r\n    const gistAddToken = yo`<input class=\"btn btn-sm btn-primary ml-2\" id=\"savegisttoken\" data-id=\"settingsTabSaveGistToken\" onclick=${() => saveToken()} value=\"Save\" type=\"button\">`\r\n    const gistRemoveToken = yo`<button class=\"btn btn-sm btn-secondary ml-2\" id=\"removegisttoken\" data-id=\"settingsTabRemoveGistToken\" title=\"Delete Github access token\" onclick=${() => removeToken()}>Remove</button>`\r\n    this._view.gistToken = yo`<div class=\"text-secondary mb-0 h6\">${gistAccessToken}<div class=\"d-flex justify-content-end pt-2\">${copyToClipboard(() => gistAccessToken.value)}${gistAddToken}${gistRemoveToken}</div></div>`\r\n    this._view.optionVM = yo`<input onchange=${onchangeOption} class=\"custom-control-input\" id=\"alwaysUseVM\" data-id=\"settingsTabAlwaysUseVM\" type=\"checkbox\">`\r\n    this._view.optionVMLabel = yo`<label class=\"form-check-label custom-control-label align-middle\" for=\"alwaysUseVM\">Always use Ethereum VM at Load</label>`\r\n    if (this.config.get('settings/always-use-vm') === undefined) this.config.set('settings/always-use-vm', true)\r\n    if (this.config.get('settings/always-use-vm')) this._view.optionVM.setAttribute('checked', '')\r\n    elementStateChanged(self._view.optionVMLabel, !this.config.get('settings/always-use-vm'))\r\n\r\n    this._view.textWrap = yo`<input id=\"editorWrap\" class=\"custom-control-input\" type=\"checkbox\" onchange=${textWrapEvent}>`\r\n    this._view.textWrapLabel = yo`<label class=\"form-check-label custom-control-label align-middle\" for=\"editorWrap\">Text Wrap</label>`\r\n    if (this.config.get('settings/text-wrap')) this._view.textWrap.setAttribute('checked', '')\r\n    elementStateChanged(self._view.textWrapLabel, !this.config.get('settings/text-wrap'))\r\n\r\n    const warnText = `Transaction sent over Web3 will use the web3.personal API - be sure the endpoint is opened before enabling it.\r\n    This mode allows to provide the passphrase in the Remix interface without having to unlock the account.\r\n    Although this is very convenient, you should completely trust the backend you are connected to (Geth, Parity, ...).\r\n    Remix never persist any passphrase.`.split('\\n').map(s => s.trim()).join(' ')\r\n\r\n    this._view.personal = yo`<input onchange=${onchangePersonal} id=\"personal\" type=\"checkbox\" class=\"custom-control-input\">`\r\n    this._view.warnPersonalMode = yo`<i class=\"${css.icon} fas fa-exclamation-triangle text-warning\" aria-hidden=\"true\"></i>`\r\n    this._view.personalLabel = yo`<label class=\"form-check-label custom-control-label align-middle\" for=\"personal\"> ${this._view.warnPersonalMode} Enable Personal Mode for web3 provider. ${warnText}></label>`\r\n    if (this.config.get('settings/personal-mode')) this._view.personal.setAttribute('checked', '')\r\n    elementStateChanged(self._view.personalLabel, !this.config.get('settings/personal-mode'))\r\n\r\n    this._view.generateContractMetadata = yo`<input onchange=${onchangeGenerateContractMetadata} id=\"generatecontractmetadata\" data-id=\"settingsTabGenerateContractMetadata\" type=\"checkbox\" class=\"custom-control-input\">`\r\n    this._view.generateContractMetadataLabel = yo`<label class=\"form-check-label custom-control-label align-middle\" data-id=\"settingsTabGenerateContractMetadataLabel\" for=\"generatecontractmetadata\">Generate contract metadata. Generate a JSON file in the contract folder. Allows to specify library addresses the contract depends on. If nothing is specified, Remix deploys libraries automatically.</label>`\r\n    if (this.config.get('settings/generate-contract-metadata') === undefined) this.config.set('settings/generate-contract-metadata', true)\r\n    if (this.config.get('settings/generate-contract-metadata')) this._view.generateContractMetadata.setAttribute('checked', '')\r\n    elementStateChanged(self._view.generateContractMetadataLabel, !this.config.get('settings/generate-contract-metadata'))\r\n\r\n    this._view.pluginInput = yo`<textarea rows=\"4\" cols=\"70\" id=\"plugininput\" type=\"text\" class=\"${css.pluginTextArea}\" ></textarea>`\r\n\r\n    this._view.themes = this._deps.themeModule.getThemes()\r\n    this._view.themesCheckBoxes = this.createThemeCheckies()\r\n\r\n    this._view.config.general = yo`\r\n      <div class=\"${css.info} border-top\">\r\n        <div class=\"card-body pt-3 pb-2\">\r\n          <h6 class=\"${css.title} card-title\">General settings</h6>\r\n          <div class=\"mt-2 custom-control custom-checkbox mb-1\">\r\n            ${this._view.generateContractMetadata}\r\n            ${this._view.generateContractMetadataLabel}\r\n          </div>\r\n          <div class=\"fmt-2 custom-control custom-checkbox mb-1\">\r\n            ${this._view.optionVM}\r\n            ${this._view.optionVMLabel}\r\n          </div>\r\n          <div class=\"mt-2 custom-control custom-checkbox mb-1\">\r\n            ${this._view.textWrap}\r\n            ${this._view.textWrapLabel}\r\n          </div>\r\n          <div class=\"custom-control custom-checkbox mb-1\">\r\n            ${this._view.personal}>\r\n            ${this._view.personalLabel}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      `\r\n    this._view.gistToken = yo`\r\n      <div class=\"${css.info} border-top\">\r\n        <div class=\"card-body pt-3 pb-2\">\r\n          <h6 class=\"${css.title} card-title\">Github Access Token</h6>\r\n          <p class=\"mb-1\">Manage the access token used to publish to Gist and retrieve Github contents.</p>\r\n          <p class=\"\">Go to github token page (link below) to create a new token and save it in Remix. Make sure this token has only 'create gist' permission.</p>\r\n          <p class=\"${css.crowNoFlex} mb-1\"><a class=\"text-primary ${css.text}\" target=\"_blank\" href=\"https://github.com/settings/tokens\">https://github.com/settings/tokens</a></p>\r\n          <div class=\"${css.crowNoFlex}\"><label>TOKEN:</label>${this._view.gistToken}</div>\r\n        </div>\r\n      </div>`\r\n    this._view.config.themes = yo`\r\n      <div class=\"${css.info} border-top\">\r\n        <div class=\"card-body pt-3 pb-2\">\r\n          <h6 class=\"${css.title} card-title\">Themes</h6>\r\n            ${this._view.themesCheckBoxes}\r\n        </div>\r\n      </div>`\r\n    this._view.el = yo`\r\n      <div id=\"settingsView\" data-id=\"settingsTabSettingsView\">\r\n        ${this._view.config.general}\r\n        ${this._view.gistToken}\r\n        ${this._view.config.themes}\r\n      </div>`\r\n\r\n    function onchangeGenerateContractMetadata (event) {\r\n      const isChecked = self.config.get('settings/generate-contract-metadata')\r\n\r\n      self.config.set('settings/generate-contract-metadata', !isChecked)\r\n      elementStateChanged(self._view.generateContractMetadataLabel, isChecked)\r\n    }\r\n    function onchangeOption (event) {\r\n      const isChecked = self.config.get('settings/always-use-vm')\r\n\r\n      self.config.set('settings/always-use-vm', !isChecked)\r\n      elementStateChanged(self._view.optionVMLabel, isChecked)\r\n    }\r\n    function textWrapEvent (event) {\r\n      const isChecked = self.config.get('settings/text-wrap')\r\n\r\n      self.config.set('settings/text-wrap', !isChecked)\r\n      elementStateChanged(self._view.textWrapLabel, isChecked)\r\n      self.editor.resize(!isChecked)\r\n    }\r\n    function onchangePersonal (event) {\r\n      const isChecked = self.config.get('settings/personal-mode')\r\n\r\n      self.config.set('settings/personal-mode', !isChecked)\r\n      elementStateChanged(self._view.personalLabel, isChecked)\r\n    }\r\n    function elementStateChanged (el, isChanged) {\r\n      if (isChanged) {\r\n        el.classList.remove('text-dark')\r\n        el.classList.add('text-secondary')\r\n      } else {\r\n        el.classList.add('text-dark')\r\n        el.classList.remove('text-secondary')\r\n      }\r\n    }\r\n\r\n    this._deps.themeModule.switchTheme()\r\n    return this._view.el\r\n  }\r\n\r\n  getGithubAccessToken () {\r\n    return this.config.get('settings/gist-access-token')\r\n  }\r\n}\r\n","'use strict'\r\nvar StaticAnalysisRunner = require('@remix-project/remix-analyzer').CodeAnalysis\r\nvar yo = require('yo-yo')\r\nvar $ = require('jquery')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar utils = remixLib.util\r\nvar css = require('./styles/staticAnalysisView-styles')\r\nvar Renderer = require('../../ui/renderer')\r\nconst SourceHighlighter = require('../../editor/sourceHighlighter')\r\n\r\nvar EventManager = require('../../../lib/events')\r\n\r\nfunction staticAnalysisView (localRegistry, analysisModule) {\r\n  var self = this\r\n  this.event = new EventManager()\r\n  this.view = null\r\n  this.runner = new StaticAnalysisRunner()\r\n  this.modulesView = this.renderModules()\r\n  this.lastCompilationResult = null\r\n  this.lastCompilationSource = null\r\n  this.currentFile = 'No file compiled'\r\n  this.sourceHighlighter = new SourceHighlighter()\r\n  this.analysisModule = analysisModule\r\n  self._components = {\r\n    renderer: new Renderer()\r\n  }\r\n  self._components.registry = localRegistry\r\n  // dependencies\r\n  self._deps = {\r\n    offsetToLineColumnConverter: self._components.registry.get('offsettolinecolumnconverter').api\r\n  }\r\n\r\n  analysisModule.on('solidity', 'compilationFinished', (file, source, languageVersion, data) => {\r\n    self.lastCompilationResult = null\r\n    self.lastCompilationSource = null\r\n    if (languageVersion.indexOf('soljson') !== 0) return\r\n    self.lastCompilationResult = data\r\n    self.lastCompilationSource = source\r\n    self.currentFile = file\r\n    self.correctRunBtnDisabled()\r\n    if (self.view && self.view.querySelector('#autorunstaticanalysis').checked) {\r\n      self.run()\r\n    }\r\n  })\r\n}\r\n\r\nstaticAnalysisView.prototype.render = function () {\r\n  this.runBtn = yo`<button class=\"btn btn-sm w-25 btn-primary\" onclick=\"${() => { this.run() }}\" >Run</button>`\r\n  const view = yo`\r\n    <div class=\"${css.analysis}\">\r\n      <div class=\"my-2 d-flex flex-column align-items-left\">\r\n        <div class=\"${css.top} d-flex justify-content-between\">\r\n          <div class=\"pl-2 ${css.label}\" for=\"checkAllEntries\">\r\n            <input id=\"checkAllEntries\"\r\n              type=\"checkbox\"\r\n              onclick=\"${(event) => { this.checkAll(event) }}\"\r\n              style=\"vertical-align:bottom\"\r\n              checked=\"true\"\r\n            >\r\n            <label class=\"text-nowrap pl-2 mb-0\" for=\"checkAllEntries\">\r\n              Select all\r\n            </label>\r\n          </div>\r\n          <div class=\"${css.label}\" for=\"autorunstaticanalysis\">\r\n            <input id=\"autorunstaticanalysis\"\r\n              type=\"checkbox\"\r\n              style=\"vertical-align:bottom\"\r\n              checked=\"true\"\r\n            >\r\n            <label class=\"text-nowrap pl-2 mb-0\" for=\"autorunstaticanalysis\">\r\n              Autorun\r\n            </label>\r\n          </div>\r\n          ${this.runBtn}\r\n        </div>\r\n      </div>\r\n      <div id=\"staticanalysismodules\" class=\"list-group list-group-flush\">\r\n        ${this.modulesView}\r\n      </div>\r\n      <div class=\"mt-2 p-2 d-flex border-top flex-column\">\r\n        <span>last results for:</span>\r\n        <span class=\"text-break break-word word-break font-weight-bold\" id=\"staticAnalysisCurrentFile\">${this.currentFile}</span>\r\n      </div>\r\n      <div class=\"${css.result} my-1\" id='staticanalysisresult'></div>\r\n    </div>\r\n  `\r\n\r\n  if (!this.view) {\r\n    this.view = view\r\n  }\r\n  this.correctRunBtnDisabled()\r\n  return view\r\n}\r\n\r\nstaticAnalysisView.prototype.selectedModules = function () {\r\n  if (!this.view) {\r\n    return []\r\n  }\r\n  const selected = this.view.querySelectorAll('[name=\"staticanalysismodule\"]:checked')\r\n  var toRun = []\r\n  for (var i = 0; i < selected.length; i++) {\r\n    toRun.push(selected[i].attributes.index.value)\r\n  }\r\n  return toRun\r\n}\r\n\r\nstaticAnalysisView.prototype.run = function () {\r\n  if (!this.view) {\r\n    return\r\n  }\r\n  const highlightLocation = async (location, fileName) => {\r\n    await this.analysisModule.call('editor', 'discardHighlight')\r\n    await this.analysisModule.call('editor', 'highlight', location, fileName)\r\n  }\r\n  const selected = this.selectedModules()\r\n  const warningContainer = $('#staticanalysisresult')\r\n  warningContainer.empty()\r\n  this.view.querySelector('#staticAnalysisCurrentFile').innerText = this.currentFile\r\n  var self = this\r\n  if (this.lastCompilationResult && selected.length) {\r\n    this.runBtn.removeAttribute('disabled')\r\n    let warningCount = 0\r\n    this.runner.run(this.lastCompilationResult, selected, (results) => {\r\n      const groupedModules = utils.groupBy(preProcessModules(this.runner.modules()), 'categoryId')\r\n      results.map((result, j) => {\r\n        let moduleName\r\n        Object.keys(groupedModules).map((key) => {\r\n          groupedModules[key].forEach((el) => {\r\n            if (el.name === result.name) {\r\n              moduleName = groupedModules[key][0].categoryDisplayName\r\n            }\r\n          })\r\n        })\r\n        const alreadyExistedEl = this.view.querySelector(`[id=\"staticAnalysisModule${moduleName}\"]`)\r\n        if (!alreadyExistedEl) {\r\n          warningContainer.append(`\r\n            <div class=\"mb-4\" name=\"staticAnalysisModules\" id=\"staticAnalysisModule${moduleName}\">\r\n              <span class=\"text-dark h6\">${moduleName}</span>\r\n            </div>\r\n          `)\r\n        }\r\n\r\n        result.report.map((item, i) => {\r\n          let location = ''\r\n          let locationString = 'not available'\r\n          let column = 0\r\n          let row = 0\r\n          let fileName = this.currentFile\r\n          if (item.location) {\r\n            var split = item.location.split(':')\r\n            var file = split[2]\r\n            location = {\r\n              start: parseInt(split[0]),\r\n              length: parseInt(split[1])\r\n            }\r\n            location = self._deps.offsetToLineColumnConverter.offsetToLineColumn(\r\n              location,\r\n              parseInt(file),\r\n              self.lastCompilationSource.sources,\r\n              self.lastCompilationResult.sources\r\n            )\r\n            row = location.start.line\r\n            column = location.start.column\r\n            locationString = (row + 1) + ':' + column + ':'\r\n            fileName = Object.keys(self.lastCompilationResult.contracts)[file]\r\n          }\r\n          warningCount++\r\n          const msg = yo`\r\n            <span class=\"d-flex flex-column\">\r\n              <span class=\"h6 font-weight-bold\">${result.name}</span>\r\n              ${item.warning}\r\n              ${item.more ? yo`<span><a href=\"${item.more}\" target=\"_blank\">more</a></span>` : yo`<span></span>`}\r\n              <span class=\"\" title=\"Position in ${fileName}\">Pos: ${locationString}</span>\r\n            </span>`\r\n          self._components.renderer.error(\r\n            msg,\r\n            this.view.querySelector(`[id=\"staticAnalysisModule${moduleName}\"]`),\r\n            {\r\n              click: () => highlightLocation(location, fileName),\r\n              type: 'warning',\r\n              useSpan: true,\r\n              errFile: fileName,\r\n              errLine: row,\r\n              errCol: column\r\n            }\r\n          )\r\n        })\r\n      })\r\n      // hide empty staticAnalysisModules sections\r\n      this.view.querySelectorAll('[name=\"staticAnalysisModules\"]').forEach((section) => {\r\n        if (!section.getElementsByClassName('alert-warning').length) section.hidden = true\r\n      })\r\n      self.event.trigger('staticAnaysisWarning', [warningCount])\r\n    })\r\n  } else {\r\n    this.runBtn.setAttribute('disabled', 'disabled')\r\n    if (selected.length) {\r\n      warningContainer.html('No compiled AST available')\r\n    }\r\n    self.event.trigger('staticAnaysisWarning', [-1])\r\n  }\r\n}\r\nstaticAnalysisView.prototype.checkModule = function (event) {\r\n  const selected = this.view.querySelectorAll('[name=\"staticanalysismodule\"]:checked')\r\n  const checkAll = this.view.querySelector('[id=\"checkAllEntries\"]')\r\n  this.correctRunBtnDisabled()\r\n  if (event.target.checked) {\r\n    checkAll.checked = true\r\n  } else if (!selected.length) {\r\n    checkAll.checked = false\r\n  }\r\n}\r\nstaticAnalysisView.prototype.correctRunBtnDisabled = function () {\r\n  const selected = this.view.querySelectorAll('[name=\"staticanalysismodule\"]:checked')\r\n  if (this.lastCompilationResult && selected.length !== 0) {\r\n    this.runBtn.removeAttribute('disabled')\r\n  } else {\r\n    this.runBtn.setAttribute('disabled', 'disabled')\r\n  }\r\n}\r\nstaticAnalysisView.prototype.checkAll = function (event) {\r\n  if (!this.view) {\r\n    return\r\n  }\r\n  // checks/unchecks all\r\n  const checkBoxes = this.view.querySelectorAll('[name=\"staticanalysismodule\"]')\r\n  checkBoxes.forEach((checkbox) => { checkbox.checked = event.target.checked })\r\n  this.correctRunBtnDisabled()\r\n}\r\n\r\nstaticAnalysisView.prototype.handleCollapse = function (e) {\r\n  const downs = e.toElement.parentElement.getElementsByClassName('fas fa-angle-double-right')\r\n  const iEls = document.getElementsByTagName('i')\r\n  for (var i = 0; i < iEls.length; i++) { iEls[i].hidden = false }\r\n  downs[0].hidden = true\r\n}\r\n\r\nstaticAnalysisView.prototype.renderModules = function () {\r\n  const groupedModules = utils.groupBy(preProcessModules(this.runner.modules()), 'categoryId')\r\n  const moduleEntries = Object.keys(groupedModules).map((categoryId, i) => {\r\n    const category = groupedModules[categoryId]\r\n    const entriesDom = category.map((item, i) => {\r\n      return yo`\r\n        <div class=\"form-check\">\r\n          <input id=\"staticanalysismodule_${categoryId}_${i}\"\r\n            type=\"checkbox\"\r\n            class=\"form-check-input staticAnalysisItem\"\r\n            name=\"staticanalysismodule\"\r\n            index=${item._index}\r\n            checked=\"true\"\r\n            style=\"vertical-align:bottom\"\r\n            onclick=\"${(event) => this.checkModule(event)}\"\r\n          >\r\n          <label for=\"staticanalysismodule_${categoryId}_${i}\" class=\"form-check-label mb-1\">\r\n            <p class=\"mb-0 font-weight-bold text-capitalize\">${item.name}</p>\r\n            ${item.description}\r\n          </label>\r\n        </div>\r\n      `\r\n    })\r\n    return yo`\r\n      <div class=\"${css.block}\">\r\n        <input type=\"radio\" name=\"accordion\" class=\"w-100 d-none card\" id=\"heading${categoryId}\" onclick=${(e) => this.handleCollapse(e)}\"/>\r\n        <label for=\"heading${categoryId}\" style=\"cursor: pointer;\" class=\"pl-3 card-header h6 d-flex justify-content-between font-weight-bold border-left px-1 py-2 w-100\">\r\n          ${category[0].categoryDisplayName}\r\n          <div>\r\n            <i class=\"fas fa-angle-double-right\"></i>\r\n          </div>\r\n        </label>\r\n        <div class=\"w-100 d-block px-2 my-1 ${css.entries}\">\r\n          ${entriesDom}\r\n        </div>\r\n      </div>\r\n    `\r\n  })\r\n  // collaps first module\r\n  moduleEntries[0].getElementsByTagName('input')[0].checked = true\r\n  moduleEntries[0].getElementsByTagName('i')[0].hidden = true\r\n  return yo`\r\n    <div class=\"accordion\" id=\"accordionModules\">\r\n      ${moduleEntries}\r\n    </div>`\r\n}\r\n\r\nmodule.exports = staticAnalysisView\r\n\r\n/**\r\n * @dev Process & categorize static analysis modules to show them on UI\r\n * @param arr list of static analysis modules received from remix-analyzer module\r\n */\r\nfunction preProcessModules (arr) {\r\n  return arr.map((Item, i) => {\r\n    const itemObj = new Item()\r\n    itemObj._index = i\r\n    itemObj.categoryDisplayName = itemObj.category.displayName\r\n    itemObj.categoryId = itemObj.category.id\r\n    return itemObj\r\n  })\r\n}\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .analysis {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .result {\r\n    margin-top: 1%;\r\n    max-height: 300px;\r\n    word-break: break-word;\r\n  }\r\n  .buttons  {\r\n    margin: 1rem 0;\r\n  }\r\n  .label {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .label {\r\n    display: flex;\r\n    align-items: center;\r\n    user-select: none;\r\n  }\r\n  .block input[type='radio']:checked ~ .entries{\r\n    height: auto;\r\n    transition: .5s ease-in;\r\n  }\r\n  .entries{\r\n    height: 0;\r\n    overflow: hidden;\r\n    transition: .5s ease-out;\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","const csjs = require('csjs-inject')\r\n\r\nconst css = csjs`\r\n  .title {\r\n    font-size: 1.1em;\r\n    font-weight: bold;\r\n    margin-bottom: 1em;\r\n  }\r\n  .panicError {\r\n    color: red;\r\n    font-size: 20px;\r\n  }\r\n  .crow {\r\n    display: flex;\r\n    overflow: auto;\r\n    clear: both;\r\n    padding: .2em;\r\n  }\r\n  .checkboxText {\r\n    font-weight: normal;\r\n  }\r\n  .crow label {\r\n    cursor:pointer;\r\n  }\r\n  .crowNoFlex {\r\n    overflow: auto;\r\n    clear: both;\r\n  }\r\n  .info {\r\n    padding: 10px;\r\n    word-break: break-word;\r\n  }\r\n  .contract {\r\n    display: block;\r\n    margin: 3% 0;\r\n  }\r\n  .nightlyBuilds {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n  }\r\n  .autocompileContainer {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .runs {\r\n    width: 40%;\r\n  }\r\n  .hideWarningsContainer {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .autocompile {}\r\n  .autocompileTitle {\r\n    font-weight: bold;\r\n    margin: 1% 0;\r\n  }\r\n  .autocompileText {\r\n    margin: 1% 0;\r\n    font-size: 12px;\r\n    overflow: hidden;\r\n    word-break: normal;\r\n    line-height: initial;\r\n  }\r\n  .warnCompilationSlow {\r\n    margin-left: 1%;\r\n  }\r\n  .compilerConfig {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .compilerConfig label {\r\n    margin: 0;\r\n  }\r\n  .compilerSection {\r\n    padding: 12px 24px 16px;\r\n  }\r\n  .compilerLabel {\r\n    margin-bottom: 2px;\r\n    font-size: 11px;\r\n    line-height: 12px;\r\n    text-transform: uppercase;\r\n  }\r\n  .copyButton {\r\n    padding: 6px;\r\n    font-weight: bold;\r\n    font-size: 11px;\r\n    line-height: 15px;\r\n  }\r\n  .name {\r\n    display: flex;\r\n  }\r\n  .size {\r\n    display: flex;\r\n  }\r\n  .checkboxes {\r\n    display: flex;\r\n    width: 100%;\r\n    justify-content: space-between;\r\n    flex-wrap: wrap;\r\n  }\r\n  .compileButton {\r\n    width: 100%;\r\n    margin: 15px 0 10px 0;\r\n    font-size: 12px;\r\n  }\r\n  .container {\r\n    margin: 0;\r\n    margin-bottom: 2%;\r\n  }\r\n  .optimizeContainer {\r\n    display: flex;\r\n  }\r\n  .noContractAlert {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .contractHelperButtons {\r\n    margin-top: 6px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    float: right;\r\n  }\r\n  .copyToClipboard {\r\n    font-size: 1rem;\r\n  }\r\n  .copyIcon {\r\n    margin-right: 5px;\r\n  }\r\n  .log {\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-bottom: 5%;\r\n    overflow: visible;\r\n  }\r\n  .key {\r\n    margin-right: 5px;\r\n    text-transform: uppercase;\r\n    width: 100%;\r\n  }\r\n  .value {\r\n    display: flex;\r\n    width: 100%;\r\n    margin-top: 1.5%;\r\n  }\r\n  .questionMark {\r\n    margin-left: 2%;\r\n    cursor: pointer;\r\n  }\r\n  .questionMark:hover {\r\n  }\r\n  .detailsJSON {\r\n    padding: 8px 0;\r\n    border: none;\r\n  }\r\n  .icon {\r\n    margin-right: 0.3em;\r\n  }\r\n  .errorBlobs {\r\n    padding-left: 5px;\r\n    padding-right: 5px;\r\n    word-break: break-word;\r\n  }\r\n  .storageLogo {\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n  .spinningIcon {\r\n    display: inline-block;\r\n    position: relative;\r\n    animation: spin 2s infinite linear;\r\n    -moz-animation: spin 2s infinite linear;\r\n    -o-animation: spin 2s infinite linear;\r\n    -webkit-animation: spin 2s infinite linear;\r\n  }\r\n  @keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n  @-webkit-keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n  @-moz-keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n  @-o-keyframes spin {\r\n     0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n  @-ms-keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n\r\n  .bouncingIcon {\r\n    display: inline-block;\r\n    position: relative;\r\n    -moz-animation: bounce 2s infinite linear;\r\n    -o-animation: bounce 2s infinite linear;\r\n    -webkit-animation: bounce 2s infinite linear;\r\n    animation: bounce 2s infinite linear;\r\n  } \r\n\r\n  @-webkit-keyframes bounce {\r\n      0% { top: 0; }\r\n      50% { top: -0.2em; }\r\n      70% { top: -0.3em; }\r\n      100% { top: 0; }\r\n  }\r\n  @-moz-keyframes bounce {\r\n      0% { top: 0; }\r\n      50% { top: -0.2em; }\r\n      70% { top: -0.3em; }\r\n      100% { top: 0; }\r\n  }\r\n  @-o-keyframes bounce {\r\n      0% { top: 0; }\r\n      50% { top: -0.2em; }\r\n      70% { top: -0.3em; }\r\n      100% { top: 0; }\r\n  }\r\n  @-ms-keyframes bounce {\r\n      0% { top: 0; }\r\n      50% { top: -0.2em; }\r\n      70% { top: -0.3em; }\r\n      100% { top: 0; }\r\n  }\r\n  @keyframes bounce {\r\n      0% { top: 0; }\r\n      50% { top: -0.2em; }\r\n      70% { top: -0.3em; }\r\n      100% { top: 0; }\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","var csjs = require('csjs-inject')\r\n\r\nconst css = csjs`\r\n  .debuggerTabView {\r\n    padding: 2%;\r\n  }\r\n  .debugger {\r\n    margin-bottom: 1%;\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .runTabView {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .runTabView::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n  .settings {\r\n    padding: 0 24px 16px;\r\n  }\r\n  .crow {\r\n    display: block;\r\n    margin-top: 8px;\r\n  }\r\n  .col1 {\r\n    width: 30%;\r\n    float: left;\r\n    align-self: center;\r\n  }\r\n  .settingsLabel {\r\n    font-size: 11px;\r\n    margin-bottom: 4px;\r\n    text-transform: uppercase;\r\n  }\r\n  .environment {\r\n    display: flex;\r\n    align-items: center;\r\n    position: relative;\r\n    width: 100%;\r\n  }\r\n  .environment a {\r\n    margin-left: 7px;\r\n  }\r\n  .account {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .account i {\r\n    margin-left: 12px;\r\n  }\r\n  .col2 {\r\n    border-radius: 3px;\r\n  }\r\n  .col2_1 {\r\n    width: 164px;\r\n    min-width: 164px;\r\n  }\r\n  .col2_2 {\r\n  }\r\n  .select {\r\n    font-weight: normal;\r\n    width: 100%;\r\n    overflow: hidden;\r\n  }\r\n  .instanceContainer {\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-bottom: 2%;\r\n    border: none;\r\n    text-align: center;\r\n    padding: 0 14px 16px;\r\n  }\r\n  .pendingTxsContainer  {\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-top: 2%;\r\n    border: none;\r\n    text-align: center;\r\n  }\r\n  .container {\r\n    padding: 0 24px 16px;\r\n  }\r\n  .recorderDescription {\r\n    margin: 0 15px 15px 0;\r\n   }\r\n  .contractNames {\r\n    width: 100%;\r\n    border: 1px solid\r\n  }\r\n  .subcontainer {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    margin-bottom: 8px;\r\n  }\r\n  .subcontainer i {\r\n    width: 16px;\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-left: 1px;\r\n  }\r\n  .button button{\r\n    flex: none;\r\n  }\r\n  .button {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 13px;\r\n  }\r\n  .transaction {\r\n  }\r\n  .atAddress {\r\n    margin: 0;\r\n    min-width: 100px;\r\n    width: 100px;\r\n    height: 100%;\r\n    word-break: inherit;\r\n    border-top-right-radius: 0;\r\n    border-bottom-right-radius: 0;\r\n    border-right: 0;\r\n  }\r\n  .atAddressSect {\r\n    margin-top: 8px;\r\n    height: 32px;\r\n  }\r\n  .atAddressSect input {\r\n    height: 32px;\r\n    border-top-left-radius: 0 !important;\r\n    border-bottom-left-radius: 0 !important;\r\n  }\r\n  .ataddressinput {\r\n    padding: .25rem;\r\n  }\r\n  .create {\r\n  }\r\n  .input {\r\n    font-size: 10px !important;\r\n  }\r\n  .noInstancesText {\r\n    font-style: italic;\r\n    text-align: left;\r\n    padding-left: 15px;\r\n  }\r\n  .pendingTxsText {\r\n    font-style: italic;\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n  }\r\n  .item {\r\n    margin-right: 1em;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .pendingContainer {\r\n    display: flex;\r\n    align-items: baseline;\r\n  }\r\n  .pending {\r\n    height: 25px;\r\n    text-align: center;\r\n    padding-left: 10px;\r\n    border-radius: 3px;\r\n    margin-left: 5px;\r\n  }\r\n  .disableMouseEvents {\r\n    pointer-events: none;\r\n  }\r\n  .icon {\r\n    cursor: pointer;\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n    margin-left: 5px;\r\n  }\r\n  .icon:hover {\r\n    font-size: 12px;\r\n    color: var(--warning);\r\n  }\r\n  .errorIcon {\r\n    color: var(--warning);\r\n    margin-left: 15px;\r\n  }\r\n  .failDesc {\r\n    color: var(--warning);\r\n    padding-left: 10px;\r\n    display: inline;\r\n  }\r\n  .network {\r\n    margin-left: 8px;\r\n    pointer-events: none;\r\n  }\r\n  .networkItem {\r\n    margin-right: 5px;\r\n  }\r\n  .transactionActions {\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    width: 145px;\r\n  }\r\n  .orLabel {\r\n    text-align: center;\r\n    text-transform: uppercase;\r\n  }\r\n  .infoDeployAction {\r\n    margin-left: 1px;\r\n    font-size: 13px;\r\n    color: var(--info);\r\n  }\r\n  .gasValueContainer {\r\n    flex-direction: row;\r\n    display: flex;\r\n  }\r\n  .gasNval {\r\n    width: 55%;\r\n    font-size: 0.8rem;\r\n  }\r\n  .gasNvalUnit {\r\n    width: 41%;\r\n    margin-left: 10px;\r\n    font-size: 0.8rem;\r\n  }\r\n  .deployDropdown {\r\n    text-align: center;\r\n    text-transform: uppercase;\r\n  }\r\n  .checkboxAlign {\r\n    padding-top: 2px;\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","var csjs = require('csjs-inject')\r\n\r\nconst css = csjs`\r\n  .settingsTabView {\r\n    padding: 2%;\r\n  }\r\n  .info {\r\n    word-break: break-word;\r\n    font-size: .8rem;\r\n  }\r\n  .info h7 {\r\n    margin-bottom: .5rem;\r\n  }\r\n  .frow {\r\n    margin-bottom: .5rem;\r\n  }\r\n  .crow label {\r\n    cursor:pointer;\r\n  }\r\n  .crowNoFlex {\r\n    overflow: auto;\r\n    clear: both;\r\n  }\r\n  .attention {\r\n    margin-bottom: 1em;\r\n    padding: .5em;\r\n    font-weight: bold;\r\n  }\r\n  .heading {\r\n    margin-bottom: 0;\r\n  }\r\n  .explaination {\r\n    margin-top: 3px;\r\n    margin-bottom: 3px;\r\n  }\r\n  input {\r\n    width: inherit;\r\n  }\r\n  input[type=radio] {\r\n    margin-top: 2px;\r\n  }\r\n  .pluginTextArea {\r\n    font-family: unset;\r\n  }\r\n\r\n  .removePlugin {\r\n    cursor: pointer;\r\n  }\r\n  .icon {\r\n    margin-right: .5em;\r\n  }\r\n  .aPlugin {\r\n    display: inline-block;\r\n    padding-left: 10px;\r\n    padding-top: 4px;\r\n    padding-bottom: 6px;\r\n    max-width: 100px;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    vertical-align: middle;\r\n  }\r\n  .removePlugin{\r\n    padding-left: 7px;\r\n    padding-right: 7px;\r\n    margin-left: 10px;\r\n  }\r\n  .inline {\r\n    display: inline;\r\n    width: 32%;\r\n  }\r\n  .text, .text:hover {\r\n    text-decoration: none;\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .testTabView {}\r\n  .infoBox  {\r\n    margin: 5%;\r\n  }\r\n  .tests {}\r\n  .testList {\r\n    line-height: 2em;\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin: 5%;\r\n    max-height: 300px;\r\n    overflow-y: auto;\r\n\r\n  }\r\n  .container {\r\n    margin: 2%;\r\n    padding-bottom: 5%;\r\n    max-height: 300px;\r\n    overflow-y: auto;\r\n  }\r\n  .summaryTitle {\r\n    font-weight: bold;\r\n  }\r\n  .testPass {\r\n  }\r\n  .testLog {\r\n    margin-bottom: 1%;\r\n    border-radius: 4px;\r\n    padding: 1% 1% 1% 5%;\r\n  }\r\n  .testFailure {\r\n  }\r\n  .testFailureSummary {\r\n  }\r\n  .title {\r\n    font-size: 1.1em;\r\n    font-weight: bold;\r\n    margin-bottom: 1em;\r\n  }\r\n  .label {\r\n    display: flex;\r\n    align-items: center;\r\n    white-space: nowrap;\r\n  }\r\n  .labelOnBtn {\r\n    border: hidden;\r\n  }\r\n`\r\nmodule.exports = css\r\n","import { ViewPlugin } from '@remixproject/engine-web'\r\nimport { canUseWorker, urlFromVersion } from '../compiler/compiler-utils'\r\nvar yo = require('yo-yo')\r\nvar async = require('async')\r\nvar tooltip = require('../ui/tooltip')\r\nvar css = require('./styles/test-tab-styles')\r\nvar remixTests = require('@remix-project/remix-tests')\r\n\r\nconst TestTabLogic = require('./testTab/testTab')\r\n\r\nconst profile = {\r\n  name: 'solidityUnitTesting',\r\n  displayName: 'Solidity unit testing',\r\n  methods: ['testFromPath', 'testFromSource'],\r\n  events: [],\r\n  icon: 'assets/img/unitTesting.webp',\r\n  description: 'Fast tool to generate unit tests for your contracts',\r\n  location: 'sidePanel',\r\n  documentation: 'https://remix-ide.readthedocs.io/en/latest/unittesting.html'\r\n}\r\n\r\nmodule.exports = class TestTab extends ViewPlugin {\r\n  constructor (fileManager, offsetToLineColumnConverter, filePanel, compileTab, appManager, renderer, contentImport) {\r\n    super(profile)\r\n    this.compileTab = compileTab\r\n    this.contentImport = contentImport\r\n    this._view = { el: null }\r\n    this.fileManager = fileManager\r\n    this.filePanel = filePanel\r\n    this.data = {}\r\n    this.appManager = appManager\r\n    this.renderer = renderer\r\n    this.hasBeenStopped = false\r\n    this.runningTestsNumber = 0\r\n    this.readyTestsNumber = 0\r\n    this.areTestsRunning = false\r\n    this.defaultPath = 'browser/tests'\r\n    this.offsetToLineColumnConverter = offsetToLineColumnConverter\r\n\r\n    appManager.event.on('activate', (name) => {\r\n      if (name === 'solidity') this.updateRunAction()\r\n    })\r\n    appManager.event.on('deactivate', (name) => {\r\n      if (name === 'solidity') this.updateRunAction()\r\n    })\r\n  }\r\n\r\n  onActivationInternal () {\r\n    this.testTabLogic = new TestTabLogic(this.fileManager)\r\n    this.listenToEvents()\r\n  }\r\n\r\n  listenToEvents () {\r\n    this.filePanel.event.register('newTestFileCreated', file => {\r\n      var testList = this.view.querySelector(\"[class^='testList']\")\r\n      var test = this.createSingleTest(file)\r\n      testList.appendChild(test)\r\n      this.data.allTests.push(file)\r\n      this.data.selectedTests.push(file)\r\n    })\r\n\r\n    this.fileManager.events.on('noFileSelected', () => {\r\n    })\r\n\r\n    this.fileManager.events.on('currentFileChanged', (file, provider) => this.updateForNewCurrent(file))\r\n  }\r\n\r\n  updateForNewCurrent (file) {\r\n    this.updateGenerateFileAction(file)\r\n    if (!this.areTestsRunning) this.updateRunAction(file)\r\n    this.testTabLogic.getTests((error, tests) => {\r\n      if (error) return tooltip(error)\r\n      this.data.allTests = tests\r\n      this.data.selectedTests = [...this.data.allTests]\r\n      this.updateTestFileList(tests)\r\n      if (!this.testsOutput) return // eslint-disable-line\r\n    })\r\n  }\r\n\r\n  createSingleTest (testFile) {\r\n    return yo`\r\n      <div class=\"d-flex align-items-center py-1\">\r\n        <input class=\"singleTest\" id=\"singleTest${testFile}\" onchange=${(e) => this.toggleCheckbox(e.target.checked, testFile)} type=\"checkbox\" checked=\"true\">\r\n        <label class=\"singleTestLabel text-nowrap pl-2 mb-0\" for=\"singleTest${testFile}\">${testFile}</label>\r\n      </div>\r\n    `\r\n  }\r\n\r\n  listTests () {\r\n    if (!this.data.allTests) return []\r\n    return this.data.allTests.map(\r\n      testFile => this.createSingleTest(testFile)\r\n    )\r\n  }\r\n\r\n  toggleCheckbox (eChecked, test) {\r\n    if (!this.data.selectedTests) {\r\n      this.data.selectedTests = this._view.el.querySelectorAll('.singleTest:checked')\r\n    }\r\n    let selectedTests = this.data.selectedTests\r\n    selectedTests = eChecked ? [...selectedTests, test] : selectedTests.filter(el => el !== test)\r\n    this.data.selectedTests = selectedTests\r\n    const checkAll = this._view.el.querySelector('[id=\"checkAllTests\"]')\r\n    const runBtn = document.getElementById('runTestsTabRunAction')\r\n\r\n    if (eChecked) {\r\n      checkAll.checked = true\r\n      const stopBtnInnerText = document.getElementById('runTestsTabStopAction').innerText\r\n      if ((this.readyTestsNumber === this.runningTestsNumber || this.hasBeenStopped) && stopBtnInnerText.trim() === 'Stop') {\r\n        runBtn.removeAttribute('disabled')\r\n        runBtn.setAttribute('title', 'Run tests')\r\n      }\r\n    } else if (!selectedTests.length) {\r\n      checkAll.checked = false\r\n      runBtn.setAttribute('disabled', 'disabled')\r\n      runBtn.setAttribute('title', 'No test file selected')\r\n    }\r\n  }\r\n\r\n  checkAll (event) {\r\n    const checkBoxes = this._view.el.querySelectorAll('.singleTest')\r\n    const checkboxesLabels = this._view.el.querySelectorAll('.singleTestLabel')\r\n    // checks/unchecks all\r\n    for (let i = 0; i < checkBoxes.length; i++) {\r\n      checkBoxes[i].checked = event.target.checked\r\n      this.toggleCheckbox(event.target.checked, checkboxesLabels[i].innerText)\r\n    }\r\n  }\r\n\r\n  async discardHighlight () {\r\n    await this.call('editor', 'discardHighlight')\r\n  }\r\n\r\n  async highlightLocation (location, runningTests, fileName) {\r\n    if (location) {\r\n      var split = location.split(':')\r\n      var file = split[2]\r\n      location = {\r\n        start: parseInt(split[0]),\r\n        length: parseInt(split[1])\r\n      }\r\n      location = this.offsetToLineColumnConverter.offsetToLineColumnWithContent(\r\n        location,\r\n        parseInt(file),\r\n        runningTests[fileName].content\r\n      )\r\n      await this.call('editor', 'discardHighlight')\r\n      await this.call('editor', 'highlight', location, fileName)\r\n    }\r\n  }\r\n\r\n  testCallback (result, runningTests) {\r\n    this.testsOutput.hidden = false\r\n    if (result.type === 'contract') {\r\n      this.testSuite = result.value\r\n      if (this.testSuites) {\r\n        this.testSuites.push(this.testSuite)\r\n      } else {\r\n        this.testSuites = [this.testSuite]\r\n      }\r\n      this.rawFileName = result.filename\r\n      this.runningTestFileName = this.cleanFileName(this.rawFileName, this.testSuite)\r\n      this.outputHeader = yo`\r\n        <div id=\"${this.runningTestFileName}\" data-id=\"testTabSolidityUnitTestsOutputheader\" class=\"pt-1\">\r\n          <span class=\"font-weight-bold\">${this.testSuite} (${this.rawFileName})</span>\r\n        </div>\r\n      `\r\n      this.testsOutput.appendChild(this.outputHeader)\r\n    } else if (result.type === 'testPass') {\r\n      this.testsOutput.appendChild(yo`\r\n        <div\r\n          id=\"${this.runningTestFileName}\"\r\n          data-id=\"testTabSolidityUnitTestsOutputheader\"\r\n          class=\"${css.testPass} ${css.testLog} bg-light mb-2 text-success border-0\"\r\n          onclick=${() => this.discardHighlight()}\r\n        >\r\n          ✓ ${result.value}\r\n        </div>\r\n      `)\r\n    } else if (result.type === 'testFailure') {\r\n      if (!result.assertMethod) {\r\n        this.testsOutput.appendChild(yo`\r\n        <div\r\n          class=\"bg-light mb-2 ${css.testFailure} ${css.testLog} d-flex flex-column text-danger border-0\"\r\n          id=\"UTContext${result.context}\"\r\n          onclick=${() => this.highlightLocation(result.location, runningTests, result.filename)}\r\n        >\r\n          <span> ✘ ${result.value}</span>\r\n          <span class=\"text-dark\">Error Message:</span>\r\n          <span class=\"pb-2 text-break\">\"${result.errMsg}\"</span>\r\n        </div>\r\n      `)\r\n      } else {\r\n        const preposition = result.assertMethod === 'equal' || result.assertMethod === 'notEqual' ? 'to' : ''\r\n        const method = result.assertMethod === 'ok' ? '' : result.assertMethod\r\n        const expected = result.assertMethod === 'ok' ? '\\'true\\'' : result.expected\r\n        this.testsOutput.appendChild(yo`\r\n          <div\r\n            class=\"bg-light mb-2 ${css.testFailure} ${css.testLog} d-flex flex-column text-danger border-0\"\r\n            id=\"UTContext${result.context}\"\r\n            onclick=${() => this.highlightLocation(result.location, runningTests, result.filename)}\r\n          >\r\n            <span> ✘ ${result.value}</span>\r\n            <span class=\"text-dark\">Error Message:</span>\r\n            <span class=\"pb-2 text-break\">\"${result.errMsg}\"</span>\r\n            <span class=\"text-dark\">Assertion:</span>\r\n            <div class=\"d-flex flex-wrap\">\r\n              <span>Expected value should be</span>\r\n              <div class=\"mx-1 font-weight-bold\">${method}</div>\r\n              <div>${preposition} ${expected}</div>\r\n            </div>\r\n            <span class=\"text-dark\">Received value:</span>\r\n            <span>${result.returned}</span>\r\n            <span class=\"text-dark text-sm pb-2\">Skipping the remaining tests of the function.</span>\r\n          </div>\r\n        `)\r\n      }\r\n    }\r\n  }\r\n\r\n  resultsCallback (_err, result, cb) {\r\n    // total stats for the test\r\n    // result.passingNum\r\n    // result.failureNum\r\n    // result.timePassed\r\n    cb()\r\n  }\r\n\r\n  cleanFileName (fileName, testSuite) {\r\n    return fileName ? fileName.replace(/\\//g, '_').replace(/\\./g, '_') + testSuite : fileName\r\n  }\r\n\r\n  setHeader (status) {\r\n    if (status) {\r\n      const label = yo`\r\n        <div\r\n          class=\"alert-success d-inline-block mb-1 mr-1 p-1 passed_${this.runningTestFileName}\"\r\n          title=\"All contract tests passed\"\r\n        >\r\n          PASS\r\n        </div>\r\n      `\r\n\r\n      this.outputHeader && yo.update(this.outputHeader, yo`\r\n        <div id=\"${this.runningTestFileName}\" data-id=\"testTabSolidityUnitTestsOutputheader\" class=\"pt-1\">\r\n          ${label} <span class=\"font-weight-bold\">${this.testSuite} (${this.rawFileName})</span>\r\n        </div>\r\n      `)\r\n    } else {\r\n      const label = yo`\r\n        <div\r\n          class=\"alert-danger d-inline-block mb-1 mr-1 p-1 failed_${this.runningTestFileName}\"\r\n          title=\"At least one contract test failed\"\r\n        >\r\n          FAIL\r\n        </div>\r\n      `\r\n\r\n      this.outputHeader && yo.update(this.outputHeader, yo`\r\n        <div id=\"${this.runningTestFileName}\"  data-id=\"testTabSolidityUnitTestsOutputheader\" class=\"pt-1\">\r\n          ${label} <span class=\"font-weight-bold\">${this.testSuite} (${this.rawFileName})</span>\r\n        </div>\r\n      `)\r\n    }\r\n  }\r\n\r\n  updateFinalResult (_errors, result, filename) {\r\n    ++this.readyTestsNumber\r\n    this.testsOutput.hidden = false\r\n    if (!result && (_errors && (_errors.errors || (Array.isArray(_errors) && (_errors[0].message || _errors[0].formattedMessage))))) {\r\n      this.testCallback({ type: 'contract', filename })\r\n      this.setHeader(false)\r\n    }\r\n    if (_errors && _errors.errors) {\r\n      _errors.errors.forEach((err) => this.renderer.error(err.formattedMessage || err.message, this.testsOutput, { type: err.severity }))\r\n    } else if (_errors && Array.isArray(_errors) && (_errors[0].message || _errors[0].formattedMessage)) {\r\n      _errors.forEach((err) => this.renderer.error(err.formattedMessage || err.message, this.testsOutput, { type: err.severity }))\r\n    } else if (_errors && !_errors.errors && !Array.isArray(_errors)) {\r\n      // To track error like this: https://github.com/ethereum/remix/pull/1438\r\n      this.renderer.error(_errors.formattedMessage || _errors.message, this.testsOutput, { type: 'error' })\r\n    }\r\n    yo.update(this.resultStatistics, this.createResultLabel())\r\n    if (result) {\r\n      const totalTime = parseFloat(result.totalTime).toFixed(2)\r\n\r\n      if (result.totalPassing > 0 && result.totalFailing > 0) {\r\n        this.testsOutput.appendChild(yo`\r\n          <div class=\"d-flex alert-secondary mb-3 p-3 flex-column\">\r\n            <span class=\"font-weight-bold\">Result for ${filename}</span>\r\n            <span class=\"text-success\">Passing: ${result.totalPassing}</span>\r\n            <span class=\"text-danger\">Failing: ${result.totalFailing}</span>\r\n            <span>Total time: ${totalTime}s</span>\r\n          </div>\r\n        `)\r\n      } else if (result.totalPassing > 0 && result.totalFailing <= 0) {\r\n        this.testsOutput.appendChild(yo`\r\n          <div class=\"d-flex alert-secondary mb-3 p-3 flex-column\">\r\n            <span class=\"font-weight-bold\">Result for ${filename}</span>\r\n            <span class=\"text-success\">Passing: ${result.totalPassing}</span>\r\n            <span>Total time: ${totalTime}s</span>\r\n          </div>\r\n        `)\r\n      } else if (result.totalPassing <= 0 && result.totalFailing > 0) {\r\n        this.testsOutput.appendChild(yo`\r\n          <div class=\"d-flex alert-secondary mb-3 p-3 flex-column\">\r\n            <span class=\"font-weight-bold\">Result for ${filename}</span>\r\n            <span class=\"text-danger\">Failing: ${result.totalFailing}</span>\r\n            <span>Total time: ${totalTime}s</span>\r\n          </div>\r\n        `)\r\n      }\r\n      // fix for displaying right label for multiple tests (testsuites) in a single file\r\n      this.testSuites.forEach(testSuite => {\r\n        this.testSuite = testSuite\r\n        this.runningTestFileName = this.cleanFileName(filename, this.testSuite)\r\n        this.outputHeader = document.querySelector(`#${this.runningTestFileName}`)\r\n        this.setHeader(true)\r\n      })\r\n\r\n      result.errors.forEach((error, index) => {\r\n        this.testSuite = error.context\r\n        this.runningTestFileName = this.cleanFileName(filename, error.context)\r\n        this.outputHeader = document.querySelector(`#${this.runningTestFileName}`)\r\n        const isFailingLabel = document.querySelector(`.failed_${this.runningTestFileName}`)\r\n        if (!isFailingLabel) this.setHeader(false)\r\n      })\r\n      this.testsOutput.appendChild(yo`\r\n        <div>\r\n          <p class=\"text-info mb-2 border-top m-0\"></p>\r\n        </div>\r\n      `)\r\n    }\r\n    if (this.hasBeenStopped && (this.readyTestsNumber !== this.runningTestsNumber)) {\r\n      // if all tests has been through before stopping no need to print this.\r\n      this.testsExecutionStopped.hidden = false\r\n    }\r\n    if (_errors) this.testsExecutionStoppedError.hidden = false\r\n    if (_errors || this.hasBeenStopped || this.readyTestsNumber === this.runningTestsNumber) {\r\n      // All tests are ready or the operation has been canceled or there was a compilation error in one of the test files.\r\n      const stopBtn = document.getElementById('runTestsTabStopAction')\r\n      stopBtn.setAttribute('disabled', 'disabled')\r\n      const stopBtnLabel = document.getElementById('runTestsTabStopActionLabel')\r\n      stopBtnLabel.innerText = 'Stop'\r\n      if (this.data.selectedTests.length !== 0) {\r\n        const runBtn = document.getElementById('runTestsTabRunAction')\r\n        runBtn.removeAttribute('disabled')\r\n      }\r\n      this.areTestsRunning = false\r\n    }\r\n  }\r\n\r\n  async testFromPath (path) {\r\n    const fileContent = await this.fileManager.readFile(path)\r\n    return this.testFromSource(fileContent, path)\r\n  }\r\n\r\n  /*\r\n    Test is not associated with the UI\r\n  */\r\n  testFromSource (content, path = 'browser/unit_test.sol') {\r\n    return new Promise((resolve, reject) => {\r\n      const runningTest = {}\r\n      runningTest[path] = { content }\r\n      const { currentVersion, evmVersion, optimize, runs } = this.compileTab.getCurrentCompilerConfig()\r\n      const currentCompilerUrl = urlFromVersion(currentVersion)\r\n      const compilerConfig = {\r\n        currentCompilerUrl,\r\n        evmVersion,\r\n        optimize,\r\n        usingWorker: canUseWorker(currentVersion),\r\n        runs\r\n      }\r\n      remixTests.runTestSources(runningTest, compilerConfig, () => {}, () => {}, (error, result) => {\r\n        if (error) return reject(error)\r\n        resolve(result)\r\n      }, (url, cb) => {\r\n        return this.contentImport.resolveAndSave(url).then((result) => cb(null, result)).catch((error) => cb(error.message))\r\n      })\r\n    })\r\n  }\r\n\r\n  runTest (testFilePath, callback) {\r\n    if (this.hasBeenStopped) {\r\n      this.updateFinalResult()\r\n      return\r\n    }\r\n    this.resultStatistics.hidden = false\r\n    this.fileManager.readFile(testFilePath).then((content) => {\r\n      const runningTests = {}\r\n      runningTests[testFilePath] = { content }\r\n      const { currentVersion, evmVersion, optimize, runs } = this.compileTab.getCurrentCompilerConfig()\r\n      const currentCompilerUrl = urlFromVersion(currentVersion)\r\n      const compilerConfig = {\r\n        currentCompilerUrl,\r\n        evmVersion,\r\n        optimize,\r\n        usingWorker: canUseWorker(currentVersion),\r\n        runs\r\n      }\r\n      remixTests.runTestSources(\r\n        runningTests,\r\n        compilerConfig,\r\n        (result) => this.testCallback(result, runningTests),\r\n        (_err, result, cb) => this.resultsCallback(_err, result, cb),\r\n        (error, result) => {\r\n          this.updateFinalResult(error, result, testFilePath)\r\n          callback(error)\r\n        }, (url, cb) => {\r\n          return this.contentImport.resolveAndSave(url).then((result) => cb(null, result)).catch((error) => cb(error.message))\r\n        }\r\n      )\r\n    }).catch((error) => {\r\n      if (error) return // eslint-disable-line\r\n    })\r\n  }\r\n\r\n  updateCurrentPath (e) {\r\n    const newValue = e.target.value === '' ? this.defaultPath : e.target.value\r\n    this.testTabLogic.setCurrentPath(newValue)\r\n    this.updateRunAction()\r\n    this.updateForNewCurrent()\r\n  }\r\n\r\n  runTests () {\r\n    this.areTestsRunning = true\r\n    this.hasBeenStopped = false\r\n    this.readyTestsNumber = 0\r\n    this.runningTestsNumber = this.data.selectedTests.length\r\n    yo.update(this.resultStatistics, this.createResultLabel())\r\n    const stopBtn = document.getElementById('runTestsTabStopAction')\r\n    stopBtn.removeAttribute('disabled')\r\n    const runBtn = document.getElementById('runTestsTabRunAction')\r\n    runBtn.setAttribute('disabled', 'disabled')\r\n    this.call('editor', 'clearAnnotations')\r\n    this.testsOutput.innerHTML = ''\r\n    this.testsOutput.hidden = true\r\n    this.testsExecutionStopped.hidden = true\r\n    this.testsExecutionStoppedError.hidden = true\r\n    const tests = this.data.selectedTests\r\n    if (!tests) return\r\n    this.resultStatistics.hidden = tests.length === 0\r\n    async.eachOfSeries(tests, (value, key, callback) => {\r\n      if (this.hasBeenStopped) return\r\n      this.runTest(value, callback)\r\n    })\r\n  }\r\n\r\n  stopTests () {\r\n    this.hasBeenStopped = true\r\n    const stopBtnLabel = document.getElementById('runTestsTabStopActionLabel')\r\n    stopBtnLabel.innerText = 'Stopping'\r\n    const stopBtn = document.getElementById('runTestsTabStopAction')\r\n    stopBtn.setAttribute('disabled', 'disabled')\r\n    const runBtn = document.getElementById('runTestsTabRunAction')\r\n    runBtn.setAttribute('disabled', 'disabled')\r\n  }\r\n\r\n  updateGenerateFileAction (currentFile) {\r\n    const el = yo`\r\n      <button\r\n        class=\"btn border w-50\"\r\n        data-id=\"testTabGenerateTestFile\"\r\n        title=\"Generate sample test file.\"\r\n        onclick=\"${this.testTabLogic.generateTestFile.bind(this.testTabLogic)}\"\r\n      >\r\n        Generate\r\n      </button>\r\n    `\r\n    if (!this.generateFileActionElement) {\r\n      this.generateFileActionElement = el\r\n    } else {\r\n      yo.update(this.generateFileActionElement, el)\r\n    }\r\n    return this.generateFileActionElement\r\n  }\r\n\r\n  updateRunAction (currentFile) {\r\n    const el = yo`\r\n      <button id=\"runTestsTabRunAction\" title=\"Run tests\" data-id=\"testTabRunTestsTabRunAction\" class=\"w-50 btn btn-primary\" onclick=\"${() => this.runTests()}\">\r\n        <span class=\"fas fa-play ml-2\"></span>\r\n        <label class=\"${css.labelOnBtn} btn btn-primary p-1 ml-2 m-0\">Run</label>\r\n      </button>\r\n    `\r\n    const isSolidityActive = this.appManager.isActive('solidity')\r\n    if (!isSolidityActive || !this.listTests().length) {\r\n      el.setAttribute('disabled', 'disabled')\r\n      if (!currentFile || (currentFile && currentFile.split('.').pop().toLowerCase() !== 'sol')) {\r\n        el.setAttribute('title', 'No solidity file selected')\r\n      } else {\r\n        el.setAttribute('title', 'The \"Solidity Plugin\" should be activated')\r\n        // @todo(#2747)  we can activate the plugin here\r\n      }\r\n    }\r\n    if (!this.runActionElement) {\r\n      this.runActionElement = el\r\n    } else {\r\n      yo.update(this.runActionElement, el)\r\n    }\r\n    return this.runActionElement\r\n  }\r\n\r\n  updateStopAction () {\r\n    return yo`\r\n      <button id=\"runTestsTabStopAction\" data-id=\"testTabRunTestsTabStopAction\" class=\"w-50 pl-2 ml-2 btn btn-secondary\" disabled=\"disabled\" title=\"Stop running tests\" onclick=${() => this.stopTests()}\">\r\n        <span class=\"fas fa-stop ml-2\"></span>\r\n        <label class=\"${css.labelOnBtn} btn btn-secondary p-1 ml-2 m-0\" id=\"runTestsTabStopActionLabel\">Stop</label>\r\n      </button>\r\n    `\r\n  }\r\n\r\n  updateTestFileList (tests) {\r\n    const testsMessage = (tests && tests.length ? this.listTests() : 'No test file available')\r\n    const el = yo`<div class=\"${css.testList} py-2 mt-0 border-bottom\">${testsMessage}</div>`\r\n    if (!this.testFilesListElement) {\r\n      this.testFilesListElement = el\r\n    } else {\r\n      yo.update(this.testFilesListElement, el)\r\n    }\r\n    this.updateRunAction()\r\n    return this.testFilesListElement\r\n  }\r\n\r\n  selectAll () {\r\n    return yo`\r\n      <div class=\"d-flex align-items-center mx-3 pb-2 mt-2 border-bottom\">\r\n        <input id=\"checkAllTests\"\r\n          type=\"checkbox\"\r\n          data-id=\"testTabCheckAllTests\"\r\n          onclick=\"${(event) => { this.checkAll(event) }}\"\r\n          checked=\"true\"\r\n        >\r\n        <label class=\"text-nowrap pl-2 mb-0\" for=\"checkAllTests\"> Select all </label>\r\n      </div>\r\n    `\r\n  }\r\n\r\n  infoButton () {\r\n    return yo`\r\n      <a class=\"btn border text-decoration-none pr-0 d-flex w-50 ml-2\" title=\"Check out documentation.\" target=\"__blank\" href=\"https://remix-ide.readthedocs.io/en/latest/unittesting.html#generate-test-file\">\r\n        <label class=\"btn p-1 ml-2 m-0\">How to use...</label>\r\n      </a>\r\n    `\r\n  }\r\n\r\n  createResultLabel () {\r\n    if (!this.data.selectedTests) return yo`<span></span>`\r\n    const ready = this.readyTestsNumber ? `${this.readyTestsNumber}` : '0'\r\n    return yo`<span class='text-info h6'>Progress: ${ready} finished (of ${this.runningTestsNumber})</span>`\r\n  }\r\n\r\n  updateDirList () {\r\n    for (var o of this.uiPathList.querySelectorAll('option')) o.remove()\r\n    this.uiPathList.appendChild(yo`<option>browser</option>`)\r\n    if (this.testTabLogic.isRemixDActive()) this.uiPathList.appendChild(yo`<option>localhost</option>`)\r\n    if (!this._view.el) return\r\n    this.testTabLogic.dirList(this.inputPath.value).then((options) => {\r\n      options.forEach((path) => this.uiPathList.appendChild(yo`<option>${path}</option>`))\r\n    })\r\n  }\r\n\r\n  render () {\r\n    this.onActivationInternal()\r\n    this.testsOutput = yo`<div class=\"mx-3 mb-2 pb-4 border-top border-primary\" hidden='true' id=\"solidityUnittestsOutput\" data-id=\"testTabSolidityUnitTestsOutput\"></a>`\r\n    this.testsExecutionStopped = yo`<label class=\"text-warning h6\" data-id=\"testTabTestsExecutionStopped\">The test execution has been stopped</label>`\r\n    this.testsExecutionStoppedError = yo`<label class=\"text-danger h6\" data-id=\"testTabTestsExecutionStoppedError\">The test execution has been stopped because of error(s) in your test file</label>`\r\n    this.uiPathList = yo`<datalist id=\"utPathList\"></datalist>`\r\n    this.inputPath = yo`<input\r\n      placeholder=${this.defaultPath}\r\n      list=\"utPathList\"\r\n      class=\"custom-select\"\r\n      id=\"utPath\"\r\n      data-id=\"uiPathInput\"\r\n      name=\"utPath\"\r\n      style=\"background-image: var(--primary);\"\r\n      onkeydown=${(e) => { if (e.keyCode === 191) this.updateDirList() }}\r\n      onchange=${(e) => this.updateCurrentPath(e)}/>`\r\n\r\n    const availablePaths = yo`\r\n      <div>\r\n          ${this.inputPath}\r\n          ${this.uiPathList}\r\n      </div>\r\n    `\r\n    this.updateDirList()\r\n    this.testsExecutionStopped.hidden = true\r\n    this.testsExecutionStoppedError.hidden = true\r\n    this.resultStatistics = this.createResultLabel()\r\n    this.resultStatistics.hidden = true\r\n    const el = yo`\r\n      <div class=\"${css.testTabView} px-2\" id=\"testView\">\r\n        <div class=\"${css.infoBox}\">\r\n          <p class=\"text-lg\"> Test your smart contract in Solidity.</p>\r\n          <p> Select directory to load and generate test files.</p>\r\n          <label>Test directory:</label>\r\n          ${availablePaths}\r\n        </div>\r\n        <div class=\"${css.tests}\">          \r\n          <div class=\"d-flex p-2\">\r\n           ${this.updateGenerateFileAction()}\r\n           ${this.infoButton()}\r\n          </div>\r\n          <div class=\"d-flex p-2\">\r\n            ${this.updateRunAction()}\r\n            ${this.updateStopAction()}\r\n          </div>\r\n          ${this.selectAll()}\r\n          ${this.updateTestFileList()}\r\n          <div class=\"align-items-start flex-column mt-2 mx-3 mb-0\">\r\n            ${this.resultStatistics}\r\n            ${this.testsExecutionStopped}\r\n            ${this.testsExecutionStoppedError}\r\n          </div>\r\n          ${this.testsOutput}\r\n        </div>\r\n      </div>\r\n    `\r\n    this._view.el = el\r\n    this.testTabLogic.setCurrentPath(this.defaultPath)\r\n    this.updateForNewCurrent(this.fileManager.currentFile())\r\n    return el\r\n  }\r\n}\r\n","const helper = require('../../../lib/helper.js')\r\nconst modalDialogCustom = require('../../ui/modal-dialog-custom')\r\nconst remixPath = require('path')\r\n\r\nclass TestTabLogic {\r\n  constructor (fileManager) {\r\n    this.fileManager = fileManager\r\n    this.currentPath = 'browser/tests'\r\n  }\r\n\r\n  setCurrentPath (path) {\r\n    if (path.indexOf('/') === 0) return\r\n    this.currentPath = path\r\n    const fileProvider = this.fileManager.fileProviderOf(path.split('/')[0])\r\n    fileProvider.exists(path, (e, res) => { if (!res) fileProvider.createDir(path) })\r\n  }\r\n\r\n  generateTestFile () {\r\n    let fileName = this.fileManager.currentFile()\r\n    const hasCurrent = !!fileName && this.fileManager.currentFile().split('.').pop().toLowerCase() === 'sol'\r\n    if (!hasCurrent) fileName = this.currentPath + '/newFile.sol'\r\n    const fileProvider = this.fileManager.fileProviderOf(this.currentPath)\r\n    if (!fileProvider) return\r\n    const splittedFileName = fileName.split('/')\r\n    const fileNameToImport = (!hasCurrent) ? fileName : this.currentPath + '/' + splittedFileName[splittedFileName.length - 1]\r\n    helper.createNonClashingNameWithPrefix(fileNameToImport, fileProvider, '_test', (error, newFile) => {\r\n      if (error) return modalDialogCustom.alert('Failed to create file. ' + newFile + ' ' + error)\r\n      if (!fileProvider.set(newFile, this.generateTestContractSample(hasCurrent, fileName))) return modalDialogCustom.alert('Failed to create test file ' + newFile)\r\n      this.fileManager.open(newFile)\r\n      this.fileManager.syncEditor(newFile)\r\n    })\r\n  }\r\n\r\n  dirList (path) {\r\n    return this.fileManager.dirList(path)\r\n  }\r\n\r\n  isRemixDActive () {\r\n    return this.fileManager.isRemixDActive()\r\n  }\r\n\r\n  async getTests (cb) {\r\n    if (!this.currentPath) return cb(null, [])\r\n    const provider = this.fileManager.fileProviderOf(this.currentPath)\r\n    if (!provider) return cb(null, [])\r\n    const tests = []\r\n    let files\r\n    try {\r\n      files = await this.fileManager.readdir(this.currentPath)\r\n    } catch (e) {\r\n      cb(e.message)\r\n    }\r\n    for (var file in files) {\r\n      if (/.(_test.sol)$/.exec(file)) tests.push(provider.type + '/' + file)\r\n    }\r\n    cb(null, tests, this.currentPath)\r\n  }\r\n\r\n  // @todo(#2758): If currently selected file is compiled and compilation result is available,\r\n  // 'contractName' should be <compiledContractName> + '_testSuite'\r\n  generateTestContractSample (hasCurrent, fileToImport, contractName = 'testSuite') {\r\n    let relative = remixPath.relative(this.currentPath, remixPath.dirname(fileToImport))\r\n    if (relative === '') relative = '.'\r\n    const comment = hasCurrent ? `import \"${relative}/${remixPath.basename(fileToImport)}\";` : '// Import here the file to test.'\r\n    return `// SPDX-License-Identifier: GPL-3.0\r\n    \r\npragma solidity >=0.4.22 <0.8.0;\r\nimport \"remix_tests.sol\"; // this import is automatically injected by Remix.\r\nimport \"remix_accounts.sol\";\r\n${comment}\r\n\r\n// File name has to end with '_test.sol', this file can contain more than one testSuite contracts\r\ncontract ${contractName} {\r\n\r\n    /// 'beforeAll' runs before all other tests\r\n    /// More special functions are: 'beforeEach', 'beforeAll', 'afterEach' & 'afterAll'\r\n    function beforeAll() public {\r\n        // Here should instantiate tested contract\r\n        Assert.equal(uint(1), uint(1), \"1 should be equal to 1\");\r\n    }\r\n\r\n    function checkSuccess() public {\r\n        // Use 'Assert' to test the contract, \r\n        // See documentation: https://remix-ide.readthedocs.io/en/latest/assert_library.html\r\n        Assert.equal(uint(2), uint(2), \"2 should be equal to 2\");\r\n        Assert.notEqual(uint(2), uint(3), \"2 should not be equal to 3\");\r\n    }\r\n\r\n    function checkSuccess2() public pure returns (bool) {\r\n        // Use the return value (true or false) to test the contract\r\n        return true;\r\n    }\r\n    \r\n    function checkFailure() public {\r\n        Assert.equal(uint(1), uint(2), \"1 is not equal to 2\");\r\n    }\r\n\r\n    /// Custom Transaction Context\r\n    /// See more: https://remix-ide.readthedocs.io/en/latest/unittesting.html#customization\r\n    /// #sender: account-1\r\n    /// #value: 100\r\n    function checkSenderAndValue() public payable {\r\n        // account index varies 0-9, value is in wei\r\n        Assert.equal(msg.sender, TestsAccounts.getAccount(1), \"Invalid sender\");\r\n        Assert.equal(msg.value, 100, \"Invalid value\");\r\n    }\r\n}\r\n`\r\n  }\r\n}\r\n\r\nmodule.exports = TestTabLogic\r\n","import { Plugin } from '@remixproject/engine'\r\nimport { EventEmitter } from 'events'\r\nimport QueryParams from '../../lib/query-params'\r\nimport * as packageJson from '../../../../../package.json'\r\nimport yo from 'yo-yo'\r\n\r\nconst themes = [\r\n  { name: 'Dark', quality: 'dark', url: 'assets/css/themes/remix-dark_tvx1s2.css' },\r\n  { name: 'Light', quality: 'light', url: 'assets/css/themes/remix-light_powaqg.css' },\r\n  { name: 'Midcentury', quality: 'light', url: 'assets/css/themes/remix-midcentury_hrzph3.css' },\r\n  { name: 'Black', quality: 'dark', url: 'assets/css/themes/remix-black_undtds.css' },\r\n  { name: 'Candy', quality: 'light', url: 'assets/css/themes/remix-candy_ikhg4m.css' },\r\n\r\n  { name: 'Cerulean', quality: 'light', url: 'assets/css/themes/bootstrap-cerulean.min.css' },\r\n  { name: 'Flatly', quality: 'light', url: 'assets/css/themes/bootstrap-flatly.min.css' },\r\n  { name: 'Spacelab', quality: 'light', url: 'assets/css/themes/bootstrap-spacelab.min.css' },\r\n  { name: 'Cyborg', quality: 'dark', url: 'assets/css/themes/bootstrap-cyborg.min.css' }\r\n]\r\n\r\nconst profile = {\r\n  name: 'theme',\r\n  events: ['themeChanged'],\r\n  methods: ['switchTheme', 'getThemes', 'currentTheme'],\r\n  version: packageJson.version,\r\n  kind: 'theme'\r\n}\r\n\r\nexport class ThemeModule extends Plugin {\r\n  constructor (registry) {\r\n    super(profile)\r\n    this.events = new EventEmitter()\r\n    this._deps = {\r\n      config: registry.get('config').api\r\n    }\r\n    this.themes = themes.reduce((acc, theme) => {\r\n      theme.url = window.location.origin + window.location.pathname + theme.url\r\n      return { ...acc, [theme.name]: theme }\r\n    }, {})\r\n    let queryTheme = (new QueryParams()).get().theme\r\n    queryTheme = this.themes[queryTheme] ? queryTheme : null\r\n    let currentTheme = this._deps.config.get('settings/theme')\r\n    currentTheme = this.themes[currentTheme] ? currentTheme : null\r\n    this.active = queryTheme || currentTheme || 'Dark'\r\n    this.forced = !!queryTheme\r\n  }\r\n\r\n  /** Return the active theme */\r\n  currentTheme () {\r\n    return this.themes[this.active]\r\n  }\r\n\r\n  /** Returns all themes as an array */\r\n  getThemes () {\r\n    return Object.keys(this.themes).map(key => this.themes[key])\r\n  }\r\n\r\n  /**\r\n   * Init the theme\r\n   */\r\n  initTheme (callback) {\r\n    if (this.active) {\r\n      const nextTheme = this.themes[this.active] // Theme\r\n      document.documentElement.style.setProperty('--theme', nextTheme.quality)\r\n      const theme = yo`<link rel=\"stylesheet\" href=\"${nextTheme.url}\" id=\"theme-link\"/>`\r\n      theme.addEventListener('load', () => {\r\n        if (callback) callback()\r\n      })\r\n      document.head.insertBefore(theme, document.head.firstChild)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Change the current theme\r\n   * @param {string} [themeName] - The name of the theme\r\n   */\r\n  switchTheme (themeName) {\r\n    if (themeName && !Object.keys(this.themes).includes(themeName)) {\r\n      throw new Error(`Theme ${themeName} doesn't exist`)\r\n    }\r\n    const next = themeName || this.active // Name\r\n    const nextTheme = this.themes[next] // Theme\r\n    if (!this.forced) this._deps.config.set('settings/theme', next)\r\n    document.getElementById('theme-link').setAttribute('href', nextTheme.url)\r\n    document.documentElement.style.setProperty('--theme', nextTheme.quality)\r\n    if (themeName) this.active = themeName\r\n    // TODO: Only keep `this.emit` (issue#2210)\r\n    this.emit('themeChanged', nextTheme)\r\n    this.events.emit('themeChanged', nextTheme)\r\n  }\r\n\r\n  /**\r\n   * fixes the invertion for images since this should be adjusted when we switch between dark/light qualified themes\r\n   * @param {element} [image] - the dom element which invert should be fixed to increase visibility\r\n   */\r\n  fixInvert (image) {\r\n    const invert = this.currentTheme().quality === 'dark' ? 1 : 0\r\n    if (image) {\r\n      image.style.filter = `invert(${invert})`\r\n    }\r\n  }\r\n}\r\n","import { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\n\r\nexport const profile = {\r\n  name: 'web3Provider',\r\n  displayName: 'Global Web3 Provider',\r\n  description: 'Represent the current web3 provider used by the app at global scope',\r\n  methods: ['sendAsync'],\r\n  version: packageJson.version,\r\n  kind: 'provider'\r\n}\r\n\r\nexport class Web3ProviderModule extends Plugin {\r\n  constructor (blockchain) {\r\n    super(profile)\r\n    this.blockchain = blockchain\r\n  }\r\n\r\n  /*\r\n    that is used by plugins to call the current ethereum provider.\r\n    Should be taken carefully and probably not be release as it is now.\r\n  */\r\n  sendAsync (payload) {\r\n    return new Promise((resolve, reject) => {\r\n      const provider = this.blockchain.web3().currentProvider\r\n      // see https://github.com/ethereum/web3.js/pull/1018/files#diff-d25786686c1053b786cc2626dc6e048675050593c0ebaafbf0814e1996f22022R129\r\n      provider[provider.sendAsync ? 'sendAsync' : 'send'](payload, (error, message) => {\r\n        if (error) return reject(error)\r\n        resolve(message)\r\n      })\r\n    })\r\n  }\r\n}\r\n","export * from './run-tab'\r\nexport * from './make-udapp'\r\n","var registry = require('../../global/registry')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar yo = require('yo-yo')\r\nvar EventsDecoder = remixLib.execution.EventsDecoder\r\n\r\nconst transactionDetailsLinks = {\r\n  Main: 'https://www.etherscan.io/tx/',\r\n  Rinkeby: 'https://rinkeby.etherscan.io/tx/',\r\n  Ropsten: 'https://ropsten.etherscan.io/tx/',\r\n  Kovan: 'https://kovan.etherscan.io/tx/',\r\n  Goerli: 'https://goerli.etherscan.io/tx/'\r\n}\r\n\r\nfunction txDetailsLink (network, hash) {\r\n  if (transactionDetailsLinks[network]) {\r\n    return transactionDetailsLinks[network] + hash\r\n  }\r\n}\r\n\r\nexport function makeUdapp (blockchain, compilersArtefacts, logHtmlCallback) {\r\n  // ----------------- UniversalDApp -----------------\r\n  // TODO: to remove when possible\r\n  blockchain.event.register('transactionBroadcasted', (txhash, networkName) => {\r\n    var txLink = txDetailsLink(networkName, txhash)\r\n    if (txLink && logHtmlCallback) logHtmlCallback(yo`<a href=\"${txLink}\" target=\"_blank\">${txLink}</a>`)\r\n  })\r\n\r\n  // ----------------- Tx listener -----------------\r\n  const _transactionReceipts = {}\r\n  const transactionReceiptResolver = (tx, cb) => {\r\n    if (_transactionReceipts[tx.hash]) {\r\n      return cb(null, _transactionReceipts[tx.hash])\r\n    }\r\n    blockchain.web3().eth.getTransactionReceipt(tx.hash, (error, receipt) => {\r\n      if (error) {\r\n        return cb(error)\r\n      }\r\n      _transactionReceipts[tx.hash] = receipt\r\n      cb(null, receipt)\r\n    })\r\n  }\r\n\r\n  const txlistener = blockchain.getTxListener({\r\n    api: {\r\n      contracts: function () {\r\n        if (compilersArtefacts.__last) return compilersArtefacts.getAllContractDatas()\r\n        return null\r\n      },\r\n      resolveReceipt: transactionReceiptResolver\r\n    }\r\n  })\r\n\r\n  registry.put({ api: txlistener, name: 'txlistener' })\r\n  blockchain.startListening(txlistener)\r\n\r\n  const eventsDecoder = new EventsDecoder({\r\n    resolveReceipt: transactionReceiptResolver\r\n  })\r\n  txlistener.startListening()\r\n  registry.put({ api: eventsDecoder, name: 'eventsDecoder' })\r\n}\r\n","import { LibraryPlugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../../package.json'\r\n\r\nconst $ = require('jquery')\r\nconst yo = require('yo-yo')\r\nconst ethJSUtil = require('ethereumjs-util')\r\nconst Web3 = require('web3')\r\nconst EventManager = require('../../lib/events')\r\nconst Card = require('../ui/card')\r\n\r\nconst css = require('../tabs/styles/run-tab-styles')\r\nconst SettingsUI = require('../tabs/runTab/settings.js')\r\nconst Recorder = require('../tabs/runTab/model/recorder.js')\r\nconst RecorderUI = require('../tabs/runTab/recorder.js')\r\nconst DropdownLogic = require('../tabs/runTab/model/dropdownlogic.js')\r\nconst ContractDropdownUI = require('../tabs/runTab/contractDropdown.js')\r\n\r\nconst UniversalDAppUI = require('../ui/universal-dapp-ui')\r\n\r\nconst profile = {\r\n  name: 'udapp',\r\n  displayName: 'Deploy & run transactions',\r\n  icon: 'assets/img/deployAndRun.webp',\r\n  description: 'execute and save transactions',\r\n  kind: 'udapp',\r\n  location: 'sidePanel',\r\n  documentation: 'https://remix-ide.readthedocs.io/en/latest/run.html',\r\n  version: packageJson.version,\r\n  permission: true,\r\n  events: ['newTransaction'],\r\n  methods: ['createVMAccount', 'sendTransaction', 'getAccounts', 'pendingTransactionsCount']\r\n}\r\n\r\nexport class RunTab extends LibraryPlugin {\r\n  constructor (blockchain, pluginUDapp, config, fileManager, editor, filePanel, compilersArtefacts, networkModule, mainView, fileProvider) {\r\n    super(pluginUDapp, profile)\r\n    this.event = new EventManager()\r\n    this.config = config\r\n    this.blockchain = blockchain\r\n    this.fileManager = fileManager\r\n    this.editor = editor\r\n    this.logCallback = (msg) => { mainView.getTerminal().logHtml(msg) }\r\n    this.filePanel = filePanel\r\n    this.compilersArtefacts = compilersArtefacts\r\n    this.networkModule = networkModule\r\n    this.fileProvider = fileProvider\r\n  }\r\n\r\n  renderContainer () {\r\n    this.container = yo`<div class=\"${css.runTabView} run-tab\" id=\"runTabView\" data-id=\"runTabView\"></div>`\r\n\r\n    var el = yo`\r\n    <div class=\"list-group list-group-flush\">\r\n      ${this.settingsUI.render()}\r\n      ${this.contractDropdownUI.render()}\r\n      ${this.recorderCard.render()}\r\n      ${this.instanceContainer}\r\n    </div>\r\n    `\r\n    this.container.appendChild(el)\r\n    return this.container\r\n  }\r\n\r\n  renderInstanceContainer () {\r\n    this.instanceContainer = yo`<div class=\"${css.instanceContainer} border-0 list-group-item\"></div>`\r\n\r\n    const instanceContainerTitle = yo`\r\n      <div class=\"d-flex justify-content-between align-items-center pl-2 ml-1 mb-2\"\r\n        title=\"Autogenerated generic user interfaces for interaction with deployed contracts\">\r\n        Deployed Contracts\r\n        <i class=\"mr-2 ${css.icon} far fa-trash-alt\" data-id=\"deployAndRunClearInstances\" onclick=${() => this.event.trigger('clearInstance', [])}\r\n          title=\"Clear instances list and reset recorder\" aria-hidden=\"true\">\r\n        </i>\r\n      </div>`\r\n\r\n    this.noInstancesText = yo`\r\n      <span class=\"mx-2 mt-3 alert alert-warning\" data-id=\"deployAndRunNoInstanceText\" role=\"alert\">\r\n        Currently you have no contract instances to interact with.\r\n      </span>`\r\n\r\n    this.event.register('clearInstance', () => {\r\n      this.instanceContainer.innerHTML = '' // clear the instances list\r\n      this.instanceContainer.appendChild(instanceContainerTitle)\r\n      this.instanceContainer.appendChild(this.noInstancesText)\r\n    })\r\n\r\n    this.instanceContainer.appendChild(instanceContainerTitle)\r\n    this.instanceContainer.appendChild(this.noInstancesText)\r\n  }\r\n\r\n  renderSettings () {\r\n    this.settingsUI = new SettingsUI(this.blockchain, this.networkModule)\r\n\r\n    this.settingsUI.event.register('clearInstance', () => {\r\n      this.event.trigger('clearInstance', [])\r\n    })\r\n  }\r\n\r\n  renderDropdown (udappUI, fileManager, compilersArtefacts, config, editor, logCallback) {\r\n    const dropdownLogic = new DropdownLogic(compilersArtefacts, config, editor, this)\r\n    this.contractDropdownUI = new ContractDropdownUI(this.blockchain, dropdownLogic, logCallback, this)\r\n\r\n    fileManager.events.on('currentFileChanged', this.contractDropdownUI.changeCurrentFile.bind(this.contractDropdownUI))\r\n\r\n    this.contractDropdownUI.event.register('clearInstance', () => {\r\n      const noInstancesText = this.noInstancesText\r\n      if (noInstancesText.parentNode) { noInstancesText.parentNode.removeChild(noInstancesText) }\r\n    })\r\n    this.contractDropdownUI.event.register('newContractABIAdded', (abi, address) => {\r\n      this.instanceContainer.appendChild(udappUI.renderInstanceFromABI(abi, address, '<at address>'))\r\n    })\r\n    this.contractDropdownUI.event.register('newContractInstanceAdded', (contractObject, address, value) => {\r\n      this.instanceContainer.appendChild(udappUI.renderInstance(contractObject, address, value))\r\n    })\r\n  }\r\n\r\n  renderRecorder (udappUI, fileManager, config, logCallback) {\r\n    this.recorderCount = yo`<span>0</span>`\r\n\r\n    const recorder = new Recorder(this.blockchain)\r\n    recorder.event.register('recorderCountChange', (count) => {\r\n      this.recorderCount.innerText = count\r\n    })\r\n    this.event.register('clearInstance', recorder.clearAll.bind(recorder))\r\n\r\n    this.recorderInterface = new RecorderUI(this.blockchain, fileManager, recorder, logCallback, config)\r\n\r\n    this.recorderInterface.event.register('newScenario', (abi, address, contractName) => {\r\n      var noInstancesText = this.noInstancesText\r\n      if (noInstancesText.parentNode) { noInstancesText.parentNode.removeChild(noInstancesText) }\r\n      this.instanceContainer.appendChild(udappUI.renderInstanceFromABI(abi, address, contractName))\r\n    })\r\n\r\n    this.recorderInterface.render()\r\n  }\r\n\r\n  renderRecorderCard () {\r\n    const collapsedView = yo`\r\n      <div class=\"d-flex flex-column\">\r\n        <div class=\"ml-2 badge badge-pill badge-primary\" title=\"The number of recorded transactions\">${this.recorderCount}</div>\r\n      </div>`\r\n\r\n    const expandedView = yo`\r\n      <div class=\"d-flex flex-column\">\r\n        <div class=\"${css.recorderDescription} mt-2\">\r\n          All transactions (deployed contracts and function executions) in this environment can be saved and replayed in\r\n          another environment. e.g Transactions created in Javascript VM can be replayed in the Injected Web3.\r\n        </div>\r\n        <div class=\"${css.transactionActions}\">\r\n          ${this.recorderInterface.recordButton}\r\n          ${this.recorderInterface.runButton}\r\n          </div>\r\n        </div>\r\n      </div>`\r\n\r\n    this.recorderCard = new Card({}, {}, { title: 'Transactions recorded', collapsedView: collapsedView })\r\n    this.recorderCard.event.register('expandCollapseCard', (arrow, body, status) => {\r\n      body.innerHTML = ''\r\n      status.innerHTML = ''\r\n      if (arrow === 'down') {\r\n        status.appendChild(collapsedView)\r\n        body.appendChild(expandedView)\r\n      } else if (arrow === 'up') {\r\n        status.appendChild(collapsedView)\r\n      }\r\n    })\r\n  }\r\n\r\n  render () {\r\n    this.udappUI = new UniversalDAppUI(this.blockchain, this.logCallback)\r\n    this.blockchain.resetAndInit(this.config, {\r\n      getAddress: (cb) => {\r\n        cb(null, $('#txorigin').val())\r\n      },\r\n      getValue: (cb) => {\r\n        try {\r\n          const number = document.querySelector('#value').value\r\n          const select = document.getElementById('unit')\r\n          const index = select.selectedIndex\r\n          const selectedUnit = select.querySelectorAll('option')[index].dataset.unit\r\n          let unit = 'ether' // default\r\n          if (['ether', 'finney', 'gwei', 'wei'].indexOf(selectedUnit) >= 0) {\r\n            unit = selectedUnit\r\n          }\r\n          cb(null, Web3.utils.toWei(number, unit))\r\n        } catch (e) {\r\n          cb(e)\r\n        }\r\n      },\r\n      getGasLimit: (cb) => {\r\n        try {\r\n          cb(null, '0x' + new ethJSUtil.BN($('#gasLimit').val(), 10).toString(16))\r\n        } catch (e) {\r\n          cb(e.message)\r\n        }\r\n      }\r\n    })\r\n    this.renderInstanceContainer()\r\n    this.renderSettings()\r\n    this.renderDropdown(this.udappUI, this.fileManager, this.compilersArtefacts, this.config, this.editor, this.logCallback)\r\n    this.renderRecorder(this.udappUI, this.fileManager, this.config, this.logCallback)\r\n    this.renderRecorderCard()\r\n\r\n    const addPluginProvider = (profile) => {\r\n      if (profile.kind === 'provider') {\r\n        ((profile, app) => {\r\n          const web3Provider = {\r\n            async sendAsync (payload, callback) {\r\n              try {\r\n                const result = await app.call(profile.name, 'sendAsync', payload)\r\n                callback(null, result)\r\n              } catch (e) {\r\n                callback(e)\r\n              }\r\n            }\r\n          }\r\n          app.blockchain.addProvider({ name: profile.displayName, provider: web3Provider })\r\n        })(profile, this)\r\n      }\r\n    }\r\n    const removePluginProvider = (profile) => {\r\n      if (profile.kind === 'provider') this.blockchain.removeProvider(profile.displayName)\r\n    }\r\n    this.on('manager', 'pluginActivated', addPluginProvider.bind(this))\r\n    this.on('manager', 'pluginDeactivated', removePluginProvider.bind(this))\r\n    return this.renderContainer()\r\n  }\r\n}\r\n","'use strict'\r\nvar yo = require('yo-yo')\r\nvar csjs = require('csjs-inject')\r\nvar css = csjs`\r\n  .li_tv {\r\n    list-style-type: none;\r\n    -webkit-margin-before: 0px;\r\n    -webkit-margin-after: 0px;\r\n    -webkit-margin-start: 0px;\r\n    -webkit-margin-end: 0px;\r\n    -webkit-padding-start: 0px;\r\n  }\r\n  .ul_tv {\r\n    list-style-type: none;\r\n    -webkit-margin-before: 0px;\r\n    -webkit-margin-after: 0px;\r\n    -webkit-margin-start: 0px;\r\n    -webkit-margin-end: 0px;\r\n    -webkit-padding-start: 0px;\r\n  }\r\n  .caret_tv {\r\n    width: 10px;\r\n    flex-shrink: 0;\r\n    padding-right: 5px;\r\n  }\r\n  .label_item {\r\n    word-break: break-all;\r\n  }\r\n  .label_key {\r\n    min-width: 15%;\r\n    max-width: 80%;\r\n    word-break: break-word;\r\n  }\r\n  .label_value {\r\n    min-width: 10%;\r\n  }\r\n  .cursor_pointer {\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nvar EventManager = require('../../lib/events')\r\n\r\n/**\r\n * TreeView\r\n *  - extendable by specifying custom `extractData` and `formatSelf` function\r\n *  - trigger `nodeClick` and `leafClick`\r\n */\r\nclass TreeView {\r\n  constructor (opts) {\r\n    this.event = new EventManager()\r\n    this.extractData = opts.extractData || this.extractDataDefault\r\n    this.formatSelf = opts.formatSelf || this.formatSelfDefault\r\n    this.loadMore = opts.loadMore\r\n    this.view = null\r\n    this.expandPath = []\r\n  }\r\n\r\n  render (json, expand) {\r\n    var view = this.renderProperties(json, expand)\r\n    if (!this.view) {\r\n      this.view = view\r\n    }\r\n    return view\r\n  }\r\n\r\n  update (json) {\r\n    if (this.view) {\r\n      yo.update(this.view, this.render(json))\r\n    }\r\n  }\r\n\r\n  renderObject (item, parent, key, expand, keyPath) {\r\n    var data = this.extractData(item, parent, key)\r\n    var children = (data.children || []).map((child, index) => {\r\n      return this.renderObject(child.value, data, child.key, expand, keyPath + '/' + child.key)\r\n    })\r\n    return this.formatData(key, data, children, expand, keyPath)\r\n  }\r\n\r\n  renderProperties (json, expand, key) {\r\n    key = key || ''\r\n    var children = Object.keys(json).map((innerkey) => {\r\n      return this.renderObject(json[innerkey], json, innerkey, expand, innerkey)\r\n    })\r\n    return yo`<ul key=${key} data-id=\"treeViewUl${key}\" class=\"${css.ul_tv} ml-0 px-2\">${children}</ul>`\r\n  }\r\n\r\n  formatData (key, data, children, expand, keyPath) {\r\n    var self = this\r\n    var li = yo`<li key=${keyPath} data-id=\"treeViewLi${keyPath}\" class=${css.li_tv}></li>`\r\n    var caret = yo`<div class=\"px-1 fas fa-caret-right caret ${css.caret_tv}\"></div>`\r\n    var label = yo`\r\n      <div key=${keyPath} data-id=\"treeViewDiv${keyPath}\" class=\"d-flex flex-row align-items-center\">\r\n        ${caret}\r\n        <span class=\"w-100\">${self.formatSelf(key, data, li)}</span>\r\n      </div>`\r\n    const expanded = self.expandPath.includes(keyPath)\r\n    li.appendChild(label)\r\n    if (data.children) {\r\n      var list = yo`<ul key=${keyPath} data-id=\"treeViewUlList${keyPath}\" class=\"pl-2 ${css.ul_tv}\">${children}</ul>`\r\n      list.style.display = expanded ? 'block' : 'none'\r\n      caret.className = list.style.display === 'none' ? `fas fa-caret-right caret ${css.caret_tv}` : `fas fa-caret-down caret ${css.caret_tv}`\r\n      caret.setAttribute('data-id', `treeViewToggle${keyPath}`)\r\n      label.onclick = function () {\r\n        self.expand(keyPath)\r\n        if (self.isExpanded(keyPath)) {\r\n          if (!self.expandPath.includes(keyPath)) self.expandPath.push(keyPath)\r\n        } else {\r\n          self.expandPath = self.expandPath.filter(path => !path.startsWith(keyPath))\r\n        }\r\n      }\r\n      label.oncontextmenu = function (event) {\r\n        self.event.trigger('nodeRightClick', [keyPath, data, label, event])\r\n      }\r\n      li.appendChild(list)\r\n      if (data.hasNext) {\r\n        list.appendChild(yo`<li><span class=\"w-100 text-primary ${css.cursor_pointer}\" data-id=\"treeViewLoadMore\" onclick=\"${() => self.loadMore(data.cursor)}\">Load more</span></li>`)\r\n      }\r\n    } else {\r\n      caret.style.visibility = 'hidden'\r\n      label.oncontextmenu = function (event) {\r\n        self.event.trigger('leafRightClick', [keyPath, data, label, event])\r\n      }\r\n      label.onclick = function (event) {\r\n        self.event.trigger('leafClick', [keyPath, data, label, event])\r\n      }\r\n    }\r\n    return li\r\n  }\r\n\r\n  isExpanded (path) {\r\n    var current = this.nodeAt(path)\r\n    if (current) {\r\n      return current.style.display !== 'none'\r\n    }\r\n    return false\r\n  }\r\n\r\n  expand (path) {\r\n    var caret = this.caretAt(path)\r\n    var node = this.nodeAt(path)\r\n    if (node) {\r\n      node.style.display = node.style.display === 'none' ? 'block' : 'none'\r\n      caret.className = node.style.display === 'none' ? `fas fa-caret-right caret ${css.caret_tv}` : `fas fa-caret-down caret ${css.caret_tv}`\r\n      this.event.trigger('nodeClick', [path, node])\r\n    }\r\n  }\r\n\r\n  caretAt (path) {\r\n    var label = this.labelAt(path)\r\n    if (label) {\r\n      return label.querySelector('.caret')\r\n    }\r\n  }\r\n\r\n  itemAt (path) {\r\n    return this.view.querySelector(`li[key=\"${path}\"]`)\r\n  }\r\n\r\n  labelAt (path) {\r\n    return this.view.querySelector(`div[key=\"${path}\"]`)\r\n  }\r\n\r\n  nodeAt (path) {\r\n    return this.view.querySelector(`ul[key=\"${path}\"]`)\r\n  }\r\n\r\n  updateNodeFromJSON (path, jsonTree, expand) {\r\n    var newTree = this.renderProperties(jsonTree, expand, path)\r\n    var current = this.nodeAt(path)\r\n    if (current && current.parentElement) {\r\n      current.parentElement.replaceChild(newTree, current)\r\n    }\r\n  }\r\n\r\n  formatSelfDefault (key, data) {\r\n    return yo`\r\n      <div class=\"d-flex mb-1 flex-row ${css.label_item}\">\r\n        <label class=\"small font-weight-bold pr-1 ${css.label_key}\">${key}:</label> \r\n        <label class=\"m-0 ${css.label_value}\">${data.self}</label>\r\n      </div>\r\n    `\r\n  }\r\n\r\n  extractDataDefault (item, parent, key) {\r\n    var ret = {}\r\n    if (item instanceof Array) {\r\n      ret.children = item.map((item, index) => {\r\n        return { key: index, value: item }\r\n      })\r\n      ret.self = 'Array'\r\n      ret.isNode = true\r\n      ret.isLeaf = false\r\n    } else if (item instanceof Object) {\r\n      ret.children = Object.keys(item).map((key) => {\r\n        return { key: key, value: item[key] }\r\n      })\r\n      ret.self = 'Object'\r\n      ret.isNode = true\r\n      ret.isLeaf = false\r\n    } else {\r\n      ret.self = item\r\n      ret.children = null\r\n      ret.isNode = false\r\n      ret.isLeaf = true\r\n    }\r\n    return ret\r\n  }\r\n}\r\n\r\nmodule.exports = TreeView\r\n","var yo = require('yo-yo')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar EventManager = remixLib.EventManager\r\nvar Commands = require('../../lib/commands')\r\n\r\n// -------------- styling ----------------------\r\nvar css = require('./styles/auto-complete-popup-styles')\r\n\r\n/* USAGE:\r\n\r\n  var autoCompletePopup = new AutoCompletePopup({\r\n    options: []\r\n  })\r\n  autoCompletePopup.event.register('handleSelect', function (input) { })\r\n  autoCompletePopup.event.register('updateList', function () { })\r\n\r\n*/\r\n\r\nclass AutoCompletePopup {\r\n  constructor (opts = {}) {\r\n    var self = this\r\n    self.event = new EventManager()\r\n    self.isOpen = false\r\n    self.opts = opts\r\n    self.data = {\r\n      _options: []\r\n    }\r\n    self._components = {}\r\n    self._view = null\r\n    self._startingElement = 0\r\n    self._elementsToShow = 4\r\n    self._selectedElement = 0\r\n    this.extraCommands = []\r\n  }\r\n\r\n  render () {\r\n    var self = this\r\n    const autoComplete = yo`\r\n      <div class=\"${css.popup} alert alert-secondary\">\r\n        <div>\r\n          ${self.data._options.map((item, index) => {\r\n            return yo`\r\n              <div data-id=\"autoCompletePopUpAutoCompleteItem\" class=\"${css.autoCompleteItem} ${css.listHandlerHide} item ${self._selectedElement === index ? 'border border-primary' : ''}\">\r\n                  <div value=${index} onclick=${(event) => { self.handleSelect(event.srcElement.innerText) }}>\r\n                    ${getKeyOf(item)} \r\n                  </div>\r\n                  <div>\r\n                    ${getValueOf(item)}\r\n                  </div>\r\n              </div>\r\n            `\r\n          })}\r\n        </div>\r\n        <div class=\"${css.listHandlerHide}\">\r\n          <div class=\"${css.pageNumberAlignment}\">Page ${(self._startingElement / self._elementsToShow) + 1} of ${Math.ceil(self.data._options.length / self._elementsToShow)}</div>\r\n        </div>\r\n      </div>\r\n    `\r\n    function setUpPopUp (autoComplete) {\r\n      handleOpenPopup(autoComplete)\r\n      handleListSize(autoComplete)\r\n    }\r\n\r\n    function handleOpenPopup (autoComplete) {\r\n      autoComplete.style.display = self.data._options.length > 0 ? 'block' : 'none'\r\n    }\r\n\r\n    function handleListSize (autoComplete) {\r\n      if (self.data._options.length >= self._startingElement) {\r\n        for (let i = self._startingElement; i < (self._elementsToShow + self._startingElement); i++) {\r\n          const el = autoComplete.querySelectorAll('.item')[i]\r\n          if (el) {\r\n            el.classList.remove(css.listHandlerHide)\r\n            el.classList.add(css.listHandlerShow)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    setUpPopUp(autoComplete)\r\n    if (!this._view) this._view = autoComplete\r\n    return autoComplete\r\n  }\r\n\r\n  handleSelect (text) {\r\n    this.removeAutoComplete()\r\n    this.event.trigger('handleSelect', [text])\r\n  }\r\n\r\n  moveUp () {\r\n    if (this._selectedElement === 0) return\r\n    this._selectedElement--\r\n    this._startingElement = this._selectedElement > 0 ? this._selectedElement - 1 : 0\r\n    this.event.trigger('updateList')\r\n    yo.update(this._view, this.render())\r\n  }\r\n\r\n  moveDown () {\r\n    if (this.data._options.length <= this._selectedElement + 1) return\r\n    this._selectedElement++\r\n    this._startingElement = this._selectedElement - 1\r\n    this.event.trigger('updateList')\r\n    yo.update(this._view, this.render())\r\n  }\r\n\r\n  handleAutoComplete (event, inputString) {\r\n    if (this.isOpen && (event.which === 27 || event.which === 8 || event.which === 46)) {\r\n      // backspace or any key that should remove the autocompletion\r\n      this.removeAutoComplete()\r\n      return true\r\n    }\r\n    if (this.isOpen && (event.which === 13 || event.which === 9)) {\r\n      // enter and tab (validate completion)\r\n      event.preventDefault()\r\n      if (this.data._options[this._selectedElement]) {\r\n        this.handleSelect(getKeyOf(this.data._options[this._selectedElement]))\r\n      }\r\n      this.removeAutoComplete()\r\n      return true\r\n    }\r\n    if (this.isOpen && event.which === 38) {\r\n      // move up\r\n      event.preventDefault()\r\n      this.isOpen = true\r\n      this.moveUp()\r\n      return true\r\n    }\r\n    if (this.isOpen && event.which === 40) {\r\n      // move down\r\n      event.preventDefault()\r\n      this.isOpen = true\r\n      this.moveDown()\r\n      return true\r\n    }\r\n    if (event.which === 13 || event.which === 9) {\r\n      // enter || tab and autocompletion is off, just returning false\r\n      return false\r\n    }\r\n    const textList = inputString.split(' ')\r\n    const autoCompleteInput = textList.length > 1 ? textList[textList.length - 1] : textList[0]\r\n    if (inputString.length >= 2) {\r\n      // more than 2 letters, start completion\r\n      this.data._options = []\r\n      Commands.allPrograms.forEach(item => {\r\n        const program = getKeyOf(item)\r\n        if (program.substring(0, program.length - 1).includes(autoCompleteInput.trim())) {\r\n          this.data._options.push(item)\r\n        } else if (autoCompleteInput.trim().includes(program) || (program === autoCompleteInput.trim())) {\r\n          Commands.allCommands.forEach(item => {\r\n            const command = getKeyOf(item)\r\n            if (command.includes(autoCompleteInput.trim())) {\r\n              this.data._options.push(item)\r\n            }\r\n          })\r\n        }\r\n      })\r\n      this.extraCommands.forEach(item => {\r\n        const command = getKeyOf(item)\r\n        if (command.includes(autoCompleteInput.trim())) {\r\n          this.data._options.push(item)\r\n        }\r\n      })\r\n\r\n      if (this.data._options.length === 1 && event.which === 9) {\r\n        // if only one option and tab is pressed, we resolve it\r\n        event.preventDefault()\r\n        textList.pop()\r\n        textList.push(getKeyOf(this.data._options[0]))\r\n        this.handleSelect(`${textList}`.replace(/,/g, ' '))\r\n        this.removeAutoComplete()\r\n        return\r\n      }\r\n      if (this.data._options.length) this.isOpen = true\r\n      yo.update(this._view, this.render())\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  removeAutoComplete () {\r\n    if (!this.isOpen) return\r\n    this._view.style.display = 'none'\r\n    this.isOpen = false\r\n    this.data._options = []\r\n    this._startingElement = 0\r\n    this._selectedElement = 0\r\n    yo.update(this._view, this.render())\r\n  }\r\n\r\n  extendAutocompletion () {\r\n    // TODO: this is not using the appManager interface. Terminal should be put as module\r\n    this.opts.appManager.event.on('activate', async (profile) => {\r\n      if (!profile.methods) return\r\n      profile.methods.forEach((method) => {\r\n        const key = `remix.call('${profile.name}', '${method}')`\r\n        const keyValue = {}\r\n        keyValue[key] = `call ${profile.name} - ${method}`\r\n        if (this.extraCommands.includes(keyValue)) return\r\n        this.extraCommands.push(keyValue)\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nfunction getKeyOf (item) {\r\n  return Object.keys(item)[0]\r\n}\r\n\r\nfunction getValueOf (item) {\r\n  return Object.values(item)[0]\r\n}\r\n\r\nmodule.exports = AutoCompletePopup\r\n","var yo = require('yo-yo')\r\nvar csjs = require('csjs-inject')\r\nvar EventManager = require('../../lib/events')\r\n\r\nmodule.exports = class Card {\r\n  constructor (api, events, opts) {\r\n    const self = this\r\n    self._api = api\r\n    self._events = events\r\n    self._opts = opts\r\n    self._view = {}\r\n    self.event = new EventManager()\r\n  }\r\n\r\n  render () {\r\n    const self = this\r\n    if (self._view.el) return self._view.el\r\n\r\n    self._view.cardBody = yo`<div></div>`\r\n    self._view.arrow = yo`<i class=\"${css.arrow} fas fa-angle-down\" onclick=\"${() => trigger(this)}\"></i>`\r\n\r\n    self._view.expandCollapseButton = yo`\r\n    <div>${self._view.arrow}</div>`\r\n\r\n    self._view.statusBar = yo`<div>${self._opts.collapsedView}</div>`\r\n    self._view.cardHeader = yo`\r\n    <div class=\"d-flex justify-content-between align-items-center\" onclick=${() => trigger(self._view.arrow)}>\r\n      <div class=\"pr-1 d-flex flex-row\">\r\n        <div>${self._opts.title}</div>\r\n        ${self._view.statusBar}\r\n      </div>\r\n      <div>${self._view.expandCollapseButton}</div>\r\n    </div>`\r\n\r\n    function trigger (el) {\r\n      var body = self._view.cardBody\r\n      var status = self._view.statusBar\r\n      if (el.classList) {\r\n        el.classList.toggle('fa-angle-up')\r\n        var arrow = el.classList.toggle('fa-angle-down') ? 'up' : 'down'\r\n        self.event.trigger('expandCollapseCard', [arrow, body, status])\r\n      }\r\n    }\r\n\r\n    // HTML\r\n    self._view.el = yo`\r\n      <div class=\"${css.cardContainer} list-group-item border-0\">\r\n        ${self._view.cardHeader}\r\n        ${self._view.cardBody}\r\n      </div>`\r\n\r\n    return self._view.el\r\n  }\r\n}\r\n\r\nconst css = csjs`\r\n  .cardContainer {\r\n    padding             : 0 24px 16px;\r\n    margin              : 0;\r\n    background          : none;\r\n  }\r\n  .arrow {\r\n    font-weight         : bold;\r\n    cursor              : pointer;\r\n    font-size           : 14px;\r\n  }\r\n  .arrow:hover {\r\n  }\r\n\r\n`\r\n","var yo = require('yo-yo')\r\nvar csjs = require('csjs-inject')\r\nconst copyToClipboard = require('./copy-to-clipboard')\r\n\r\nvar css = csjs`\r\n  .txInfoBox {\r\n  }\r\n  .wrapword {\r\n    white-space: pre-wrap;       /* Since CSS 2.1 */\r\n    white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */\r\n    white-space: -pre-wrap;      /* Opera 4-6 */\r\n    white-space: -o-pre-wrap;    /* Opera 7 */\r\n    word-wrap: break-word;       /* Internet Explorer 5.5+ */\r\n  }\r\n`\r\n\r\n// TODO: self is not actually used and can be removed\r\nfunction confirmDialog (tx, amount, gasEstimation, self, newGasPriceCb, initialParamsCb) {\r\n  var onGasPriceChange = function () {\r\n    var gasPrice = el.querySelector('#gasprice').value\r\n    newGasPriceCb(gasPrice, (txFeeText, priceStatus) => {\r\n      el.querySelector('#txfee').innerHTML = txFeeText\r\n      el.gasPriceStatus = priceStatus\r\n    })\r\n  }\r\n\r\n  var el = yo`\r\n  <div>\r\n    <div>You are creating a transaction on the main network. Click confirm if you are sure to continue.</div>\r\n    <div class=${css.txInfoBox}>\r\n      <div>From: ${tx.from}</div>\r\n      <div>To: ${tx.to ? tx.to : '(Contract Creation)'}</div>\r\n      <div>Amount: ${amount} Ether</div>\r\n      <div>Gas estimation: ${gasEstimation}</div>\r\n      <div>Gas limit: ${tx.gas}</div>\r\n      <div>Gas price: <input id='gasprice' oninput=${onGasPriceChange} /> Gwei <span> (visit <a target='_blank' href='https://ethgasstation.info'>ethgasstation.info</a> to get more info about gas price)</span></div>\r\n      <div>Max transaction fee:<span id='txfee'></span></div>\r\n      <div>Data:</div>\r\n      <pre class=${css.wrapword}>${tx.data && tx.data.length > 50 ? tx.data.substring(0, 49) + '...' : tx.data} ${copyToClipboard(() => { return tx.data })}</pre>\r\n    </div>\r\n    <div class=${css.checkbox}>\r\n      <input id='confirmsetting' type=\"checkbox\">\r\n      <i class=\"fas fa-exclamation-triangle\" aria-hidden=\"true\"></i> Do not ask for confirmation again. (the setting will not be persisted for the next page reload)\r\n    </div>\r\n  </div>\r\n  `\r\n\r\n  initialParamsCb((txFeeText, gasPriceValue, gasPriceStatus) => {\r\n    if (txFeeText) {\r\n      el.querySelector('#txfee').innerHTML = txFeeText\r\n    }\r\n    if (gasPriceValue) {\r\n      el.querySelector('#gasprice').value = gasPriceValue\r\n      onGasPriceChange()\r\n    }\r\n    if (gasPriceStatus !== undefined) {\r\n      el.gasPriceStatus = gasPriceStatus\r\n    }\r\n  })\r\n\r\n  return el\r\n}\r\n\r\nmodule.exports = confirmDialog\r\n","var yo = require('yo-yo')\r\n// -------------- copyToClipboard ----------------------\r\nvar csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n    .container\r\n    {\r\n      display: none;\r\n      position: fixed;\r\n      border-radius: 2px;\r\n      z-index: 1000;\r\n      box-shadow: 0 0 4px var(--dark);\r\n    }\r\n    .liitem\r\n    {\r\n      padding: 2px;\r\n      padding-left: 6px;\r\n      cursor: pointer;\r\n      color: var(--text-dark);\r\n      background-color: var(--light);\r\n    }\r\n    .liitem:hover\r\n    {\r\n      background-color:  var(--secondary);\r\n    }\r\n    #menuitems\r\n    {\r\n      list-style: none;\r\n      margin: 0px;\r\n    }\r\n`\r\n\r\nmodule.exports = (event, items) => {\r\n  event.preventDefault()\r\n\r\n  function hide (event, force) {\r\n    if (container && container.parentElement && (force || (event.target !== container))) {\r\n      container.parentElement.removeChild(container)\r\n    }\r\n    window.removeEventListener('click', hide)\r\n  }\r\n\r\n  const menu = Object.keys(items).map((item, index) => {\r\n    const current = yo`<li id=\"menuitem${item.toLowerCase()}\" class=${css.liitem}>${item}</li>`\r\n    current.onclick = () => { hide(null, true); items[item]() }\r\n    return current\r\n  })\r\n  const container = yo`<div id=\"menuItemsContainer\" class=\"p-1 ${css.container} bg-light shadow border\"><ul id='menuitems'>${menu}</ul></div>`\r\n\r\n  container.style.left = event.pageX + 'px'\r\n  container.style.top = event.pageY + 'px'\r\n  container.style.display = 'block'\r\n  document.querySelector('body').appendChild(container)\r\n\r\n  const menuItemsContainer = document.getElementById('menuItemsContainer')\r\n  const boundary = menuItemsContainer.getBoundingClientRect()\r\n\r\n  if (boundary.bottom > (window.innerHeight || document.documentElement.clientHeight)) {\r\n    menuItemsContainer.style.position = 'absolute'\r\n    menuItemsContainer.style.bottom = '10px'\r\n    menuItemsContainer.style.top = null\r\n  }\r\n\r\n  setTimeout(() => {\r\n    window.addEventListener('click', hide)\r\n  }, 500)\r\n\r\n  return { hide }\r\n}\r\n","var yo = require('yo-yo')\r\n// -------------- copyToClipboard ----------------------\r\nconst copy = require('copy-text-to-clipboard')\r\nvar addTooltip = require('./tooltip')\r\n// -------------- styling ----------------------\r\nvar csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .copyIcon {\r\n    margin-left: 5px;\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nmodule.exports = function copyToClipboard (getContent, tip = 'Copy value to clipboard', icon = 'fa-copy') {\r\n  var copyIcon = yo`<i title=\"${tip}\" class=\"${css.copyIcon} far ${icon} p-2\" data-id=\"copyToClipboardCopyIcon\" aria-hidden=\"true\"></i>`\r\n  copyIcon.onclick = (event) => {\r\n    event.stopPropagation()\r\n    var copiableContent\r\n    try {\r\n      copiableContent = getContent()\r\n    } catch (e) {\r\n      addTooltip(e.message)\r\n      return\r\n    }\r\n    if (copiableContent) { // module `copy` keeps last copied thing in the memory, so don't show tooltip if nothing is copied, because nothing was added to memory\r\n      try {\r\n        if (typeof copiableContent !== 'string') {\r\n          copiableContent = JSON.stringify(copiableContent, null, '\\t')\r\n        }\r\n      } catch (e) {}\r\n      copy(copiableContent)\r\n      addTooltip('Copied value to clipboard.')\r\n    } else {\r\n      addTooltip('Cannot copy empty content!')\r\n    }\r\n  }\r\n  return copyIcon\r\n}\r\n","import * as packageJson from '../../../../../../package.json'\r\nimport { ViewPlugin } from '@remixproject/engine-web'\r\n\r\nconst yo = require('yo-yo')\r\nconst csjs = require('csjs-inject')\r\nconst globalRegistry = require('../../../global/registry')\r\nconst CompilerImport = require('../../compiler/compiler-imports')\r\nvar modalDialogCustom = require('../modal-dialog-custom')\r\nvar tooltip = require('../tooltip')\r\nvar GistHandler = require('../../../lib/gist-handler')\r\nvar QueryParams = require('../../../lib/query-params.js')\r\n\r\nconst css = csjs`\r\n  .text {\r\n    cursor: pointer;\r\n    font-weight: normal;\r\n    max-width: 300px;\r\n    user-select: none;\r\n  }\r\n  .text:hover {\r\n    text-decoration: underline;\r\n  }\r\n  .homeContainer {\r\n    user-select: none;\r\n    overflow-y: hidden;\r\n  }\r\n  .mainContent {\r\n    overflow-y: auto;\r\n    flex-grow: 3;\r\n  }\r\n  .hpLogoContainer {\r\n    margin: 30px;\r\n    padding-right: 90px;\r\n  }\r\n  .mediaBadge {\r\n   font-size: 2em;\r\n   height: 2em;\r\n   width: 2em;\r\n  }\r\n  .mediaBadge:focus {\r\n    outline: none;\r\n  }\r\n  .image {\r\n    height: 1em;\r\n    width: 1em;\r\n    text-align: center;\r\n  }\r\n  .logoImg {\r\n    height: 10em;\r\n  }\r\n  .hpSections {\r\n  }\r\n  .rightPanel {\r\n    right: 0;\r\n    position: absolute;\r\n    z-index: 3;\r\n  }\r\n  .remixHomeMedia {\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    max-height: 720px;\r\n  }\r\n  .panels {\r\n    box-shadow: 0px 0px 13px -7px;\r\n  }\r\n  .labelIt {\r\n    margin-bottom: 0;\r\n  }\r\n  .bigLabelSize {\r\n    font-size: 13px;\r\n  }\r\n  .seeAll {\r\n    margin-top: 7px;\r\n    white-space: nowrap;\r\n  }\r\n  .importFrom p {\r\n    margin-right: 10px;\r\n  }\r\n  .logoContainer img{\r\n    height: 150px;\r\n    opacity: 0.7;\r\n  }\r\n  .envLogo {\r\n    height: 16px;\r\n  }\r\n  .cursorStyle {\r\n    cursor: pointer;\r\n  }\r\n  .envButton {\r\n    width: 120px;\r\n    height: 70px;\r\n  }\r\n  .media {\r\n    overflow: hidden;\r\n    width: 400px;\r\n    transition: .5s ease-out;\r\n    z-index: 1000;\r\n  }\r\n}\r\n`\r\n\r\nconst profile = {\r\n  name: 'home',\r\n  displayName: 'Home',\r\n  methods: [],\r\n  events: [],\r\n  description: ' - ',\r\n  icon: 'assets/img/remixLogo.webp',\r\n  location: 'mainPanel',\r\n  version: packageJson.version\r\n}\r\n\r\nexport class LandingPage extends ViewPlugin {\r\n  constructor (appManager, verticalIcons) {\r\n    super(profile)\r\n    this.profile = profile\r\n    this.appManager = appManager\r\n    this.verticalIcons = verticalIcons\r\n    this.gistHandler = new GistHandler()\r\n    const themeQuality = globalRegistry.get('themeModule').api.currentTheme().quality\r\n    window.addEventListener('resize', () => this.adjustMediaPanel())\r\n    window.addEventListener('click', (e) => this.hideMediaPanel(e))\r\n    this.twitterFrame = yo`\r\n      <div class=\"px-2 ${css.media}\">\r\n        <a class=\"twitter-timeline\"\r\n          data-width=\"350\"\r\n          data-theme=\"${themeQuality}\"\r\n          data-chrome=\"nofooter noheader transparent\"\r\n          data-tweet-limit=\"8\"\r\n          href=\"https://twitter.com/EthereumRemix\"\r\n        >\r\n        </a>\r\n        <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\r\n      </div>\r\n    `\r\n    this.badgeTwitter = yo`<button\r\n      class=\"btn-info p-2 m-1 border rounded-circle ${css.mediaBadge} fab fa-twitter\"\r\n      id=\"remixIDEHomeTwitterbtn\"\r\n      onclick=${(e) => this.showMediaPanel(e)}\r\n    ></button>`\r\n    this.badgeMedium = yo`<button\r\n      class=\"btn-danger p-2 m-1 border rounded-circle ${css.mediaBadge} fab fa-medium\"\r\n      id=\"remixIDEHomeMediumbtn\"\r\n      onclick=${(e) => this.showMediaPanel(e)}\r\n    ></button>`\r\n    this.twitterPanel = yo`\r\n      <div id=\"remixIDE_TwitterBlock\" class=\"p-2 mx-0 mb-0 d-none ${css.remixHomeMedia}\">\r\n        ${this.twitterFrame}\r\n      </div>\r\n    `\r\n    this.mediumPanel = yo`\r\n      <div id=\"remixIDE_MediumBlock\" class=\"p-2 mx-0 mb-0 d-none ${css.remixHomeMedia}\">\r\n        <div id=\"medium-widget\" class=\"p-3 ${css.media}\">\r\n          <div\r\n            id=\"retainable-rss-embed\"\r\n            data-rss=\"https://medium.com/feed/remix-ide\"\r\n            data-maxcols=\"1\"\r\n            data-layout=\"grid\"\r\n            data-poststyle=\"external\"\r\n            data-readmore=\"More...\"\r\n            data-buttonclass=\"btn mb-3\"\r\n            data-offset=\"-100\"\r\n          >\r\n-        </div>\r\n        </div>\r\n      </div>\r\n    `\r\n    this.adjustMediaPanel()\r\n    globalRegistry.get('themeModule').api.events.on('themeChanged', (theme) => {\r\n      this.onThemeChanged(theme.quality)\r\n    })\r\n  }\r\n\r\n  adjustMediaPanel () {\r\n    this.twitterPanel.style.maxHeight = Math.max(window.innerHeight - 150, 200) + 'px'\r\n    this.mediumPanel.style.maxHeight = Math.max(window.innerHeight - 150, 200) + 'px'\r\n  }\r\n\r\n  hideMediaPanel (e) {\r\n    const mediaPanelsTitle = document.getElementById('remixIDEMediaPanelsTitle')\r\n    const mediaPanels = document.getElementById('remixIDEMediaPanels')\r\n    if (!mediaPanelsTitle || !mediaPanels) return\r\n    if (!mediaPanelsTitle.contains(e.target) && !mediaPanels.contains(e.target)) {\r\n      this.mediumPanel.classList.remove('d-block')\r\n      this.mediumPanel.classList.add('d-none')\r\n      this.twitterPanel.classList.remove('d-block')\r\n      this.twitterPanel.classList.add('d-none')\r\n    }\r\n  }\r\n\r\n  onThemeChanged (themeQuality) {\r\n    const twitterFrame = yo`\r\n      <div class=\"px-2 ${css.media}\">\r\n        <a class=\"twitter-timeline\"\r\n          data-width=\"350\"\r\n          data-theme=\"${themeQuality}\"\r\n          data-chrome=\"nofooter noheader transparent\"\r\n          data-tweet-limit=\"8\"\r\n          href=\"https://twitter.com/EthereumRemix\"\r\n        >\r\n        </a>\r\n        <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\r\n      </div>\r\n    `\r\n    yo.update(this.twitterFrame, twitterFrame)\r\n  }\r\n\r\n  showMediaPanel (e) {\r\n    if (e.target.id === 'remixIDEHomeTwitterbtn') {\r\n      this.mediumPanel.classList.remove('d-block')\r\n      this.mediumPanel.classList.add('d-none')\r\n      this.twitterPanel.classList.toggle('d-block')\r\n    } else {\r\n      this.twitterPanel.classList.remove('d-block')\r\n      this.twitterPanel.classList.add('d-none')\r\n      this.mediumPanel.classList.toggle('d-block')\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const load = (service, item, examples, info) => {\r\n      const compilerImport = new CompilerImport()\r\n      const fileProviders = globalRegistry.get('fileproviders').api\r\n      const msg = yo`\r\n        <div class=\"p-2\">\r\n          <span>Enter the ${item} you would like to load.</span>\r\n          <div>${info}</div>\r\n          <div>e.g ${examples.map((url) => { return yo`<div class=\"p-1\"><a>${url}</a></div>` })}</div>\r\n        </div>`\r\n\r\n      modalDialogCustom.prompt(`Import from ${service}`, msg, null, (target) => {\r\n        if (target !== '') {\r\n          compilerImport.import(\r\n            target,\r\n            (loadingMsg) => { tooltip(loadingMsg) },\r\n            (error, content, cleanUrl, type, url) => {\r\n              if (error) {\r\n                modalDialogCustom.alert(error)\r\n              } else {\r\n                fileProviders.browser.addExternal(type + '/' + cleanUrl, content, url)\r\n                this.verticalIcons.select('fileExplorers')\r\n              }\r\n            }\r\n          )\r\n        }\r\n      })\r\n    }\r\n\r\n    const startSolidity = async () => {\r\n      await this.appManager.activatePlugin(['solidity', 'udapp', 'solidityStaticAnalysis', 'solidityUnitTesting'])\r\n      this.verticalIcons.select('solidity')\r\n    }\r\n    const startPipeline = () => {\r\n      this.appManager.activatePlugin(['solidity', 'pipeline', 'udapp'])\r\n    }\r\n    const startDebugger = async () => {\r\n      await this.appManager.activatePlugin('debugger')\r\n      this.verticalIcons.select('debugger')\r\n    }\r\n    const startMythX = async () => {\r\n      await this.appManager.activatePlugin(['solidity', 'mythx'])\r\n      this.verticalIcons.select('mythx')\r\n    }\r\n    const startSourceVerify = async () => {\r\n      await this.appManager.activatePlugin(['solidity', 'source-verification'])\r\n      this.verticalIcons.select('source-verification')\r\n    }\r\n    const startPluginManager = async () => {\r\n      await this.appManager.activatePlugin('pluginManager')\r\n      this.verticalIcons.select('pluginManager')\r\n    }\r\n\r\n    const createNewFile = () => {\r\n      const fileExplorer = globalRegistry.get('fileexplorer/browser').api\r\n      fileExplorer.createNewFile()\r\n    }\r\n    const connectToLocalhost = () => {\r\n      this.appManager.activatePlugin('remixd')\r\n    }\r\n    const importFromGist = () => {\r\n      this.gistHandler.loadFromGist({ gist: '' }, globalRegistry.get('filemanager').api)\r\n      this.verticalIcons.select('fileExplorers')\r\n    }\r\n\r\n    globalRegistry.get('themeModule').api.events.on('themeChanged', (theme) => {\r\n      globalRegistry.get('themeModule').api.fixInvert(document.getElementById('remixLogo'))\r\n      globalRegistry.get('themeModule').api.fixInvert(document.getElementById('solidityLogo'))\r\n      globalRegistry.get('themeModule').api.fixInvert(document.getElementById('pipelineLogo'))\r\n      globalRegistry.get('themeModule').api.fixInvert(document.getElementById('debuggerLogo'))\r\n      globalRegistry.get('themeModule').api.fixInvert(document.getElementById('workshopLogo'))\r\n      globalRegistry.get('themeModule').api.fixInvert(document.getElementById('moreLogo'))\r\n    })\r\n\r\n    const createLargeButton = (imgPath, envID, envText, callback) => {\r\n      return yo`\r\n        <button\r\n          class=\"btn border-secondary d-flex mr-3 text-nowrap justify-content-center flex-column align-items-center ${css.envButton}\"\r\n          data-id=\"landingPageStartSolidity\"\r\n          onclick=${() => callback()}\r\n        >\r\n          <img class=\"m-2 align-self-center ${css.envLogo}\" id=${envID} src=\"${imgPath}\">\r\n          <label class=\"text-uppercase text-dark ${css.cursorStyle}\">${envText}</label>\r\n        </button>\r\n      `\r\n    }\r\n\r\n    // main\r\n    const solEnv = createLargeButton('assets/img/solidityLogo.webp', 'solidityLogo', 'Solidity', startSolidity)\r\n    // Featured\r\n    const pipelineEnv = createLargeButton('assets/img/pipelineLogo.webp', 'pipelineLogo', 'Pipeline', startPipeline)\r\n    const debuggerEnv = createLargeButton('assets/img/debuggerLogo.webp', 'debuggerLogo', 'Debugger', startDebugger)\r\n    const mythXEnv = createLargeButton('assets/img/mythxLogo.webp', 'mythxLogo', 'MythX', startMythX)\r\n    const sourcifyEnv = createLargeButton('assets/img/sourcifyLogo.webp', 'sourcifyLogo', 'Sourcify', startSourceVerify)\r\n    const moreEnv = createLargeButton('assets/img/moreLogo.webp', 'moreLogo', 'More', startPluginManager)\r\n\r\n    const themeQuality = globalRegistry.get('themeModule').api.currentTheme().quality\r\n    const invertNum = (themeQuality === 'dark') ? 1 : 0\r\n    solEnv.getElementsByTagName('img')[0].style.filter = `invert(${invertNum})`\r\n    pipelineEnv.getElementsByTagName('img')[0].style.filter = `invert(${invertNum})`\r\n    debuggerEnv.getElementsByTagName('img')[0].style.filter = `invert(${invertNum})`\r\n    mythXEnv.getElementsByTagName('img')[0].style.filter = `invert(${invertNum})`\r\n    sourcifyEnv.getElementsByTagName('img')[0].style.filter = `invert(${invertNum})`\r\n    moreEnv.getElementsByTagName('img')[0].style.filter = `invert(${invertNum})`\r\n\r\n    const switchToPreviousVersion = () => {\r\n      const query = new QueryParams()\r\n      query.update({ appVersion: '0.7.7' })\r\n      document.location.reload()\r\n    }\r\n    const img = yo`<img class=${css.logoImg} src=\"assets/img/guitarRemiCroped.webp\" onclick=\"${() => playRemi()}\"></img>`\r\n    const playRemi = async () => { await document.getElementById('remiAudio').play() }\r\n    // to retrieve medium posts\r\n    document.body.appendChild(yo`<script src=\"https://www.twilik.com/assets/retainable/rss-embed/retainable-rss-embed.js\"></script>`)\r\n    const container = yo`\r\n      <div class=\"${css.homeContainer} d-flex\" data-id=\"landingPageHomeContainer\">\r\n        <div class=\"${css.mainContent} bg-light\">\r\n          <div class=\"d-flex justify-content-between\">\r\n            <div class=\"d-flex flex-column\">\r\n              <div class=\"border-bottom d-flex justify-content-between clearfix py-3 mb-4\">\r\n                <div class=\"mx-4 w-100\">\r\n                  ${img}\r\n                  <audio id=\"remiAudio\" muted=false src=\"assets/audio/remiGuitar-single-power-chord-A-minor.wav\"></audio>\r\n                </div>\r\n              </div>\r\n              <div class=\"row ${css.hpSections} mx-4\" data-id=\"landingPageHpSections\">\r\n                <div class=\"ml-3\">\r\n                  <div class=\"plugins mb-5\">\r\n                  <h4>Featured Plugins</h4>\r\n                  <div class=\"d-flex flex-row pt-2\">\r\n                    ${solEnv}\r\n                    ${pipelineEnv}\r\n                    ${mythXEnv}\r\n                    ${sourcifyEnv}\r\n                    ${debuggerEnv}\r\n                    ${moreEnv}\r\n                  </div>\r\n                </div>\r\n                  <div class=\"d-flex\">\r\n                    <div class=\"file\">\r\n                      <h4>File</h4>\r\n                      <p class=\"mb-1\">\r\n                        <i class=\"mr-1 far fa-file\"></i>\r\n                        <span class=\"ml-1 mb-1 ${css.text}\" onclick=${() => createNewFile()}>New File</span>\r\n                      </p>\r\n                      <p class=\"mb-1\">\r\n                        <i class=\"mr-1 far fa-file-alt\"></i>\r\n                        <label class=\"ml-1 ${css.labelIt} ${css.bigLabelSize} ${css.text}\">\r\n                          Open Files\r\n                          <input title=\"open file\" type=\"file\" onchange=\"${\r\n                            (event) => {\r\n                              event.stopPropagation()\r\n                              const fileExplorer = globalRegistry.get('fileexplorer/browser').api\r\n                              fileExplorer.uploadFile(event)\r\n                            }\r\n                          }\" multiple />\r\n                        </label>\r\n                      </p>\r\n                      <p class=\"mb-1\">\r\n                        <i class=\"far fa-hdd\"></i>\r\n                        <span class=\"ml-1 ${css.text}\" onclick=${() => connectToLocalhost()}>Connect to Localhost</span>\r\n                      </p>\r\n                      <p class=\"mt-3 mb-0\"><label>IMPORT FROM:</label></p>\r\n                      <div class=\"btn-group\">\r\n                        <button class=\"btn mr-1 btn-secondary\" data-id=\"landingPageImportFromGistButton\" onclick=\"${() => importFromGist()}\">Gist</button>\r\n                        <button class=\"btn mx-1 btn-secondary\" onclick=\"${() => load('Github', 'github URL', ['https://github.com/0xcert/ethereum-erc721/src/contracts/tokens/nf-token-metadata.sol', 'https://github.com/OpenZeppelin/openzeppelin-solidity/blob/67bca857eedf99bf44a4b6a0fc5b5ed553135316/contracts/access/Roles.sol', 'github:OpenZeppelin/openzeppelin-solidity/contracts/ownership/Ownable.sol#v2.1.2'])}\">GitHub</button>\r\n                        <button class=\"btn mx-1 btn-secondary\" onclick=\"${() => load('Swarm', 'bzz-raw URL', ['bzz-raw://<swarm-hash>'])}\">Swarm</button>\r\n                        <button class=\"btn mx-1 btn-secondary\" onclick=\"${() => load('Ipfs', 'ipfs URL', ['ipfs://<ipfs-hash>'])}\">Ipfs</button>\r\n                        <button class=\"btn mx-1 btn-secondary\" onclick=\"${() => load('Https', 'http/https raw content', ['https://raw.githubusercontent.com/OpenZeppelin/openzeppelin-solidity/master/contracts/crowdsale/validation/IndividuallyCappedCrowdsale.sol'])}\">https</button>\r\n                        <button class=\"btn mx-1 btn-secondary  text-nowrap\" onclick=\"${() => load('@resolver-engine', 'resolver-engine URL', ['github:OpenZeppelin/openzeppelin-solidity/contracts/ownership/Ownable.sol#v2.1.2'], yo`<span>please checkout <a class='text-primary' href=\"https://github.com/Crypto-Punkers/resolver-engine\" target='_blank'>https://github.com/Crypto-Punkers/resolver-engine</a> for more information</span>`)}\">Resolver-engine</button>\r\n                      </div><!-- end of btn-group -->\r\n                    </div><!-- end of div.file -->\r\n                    <div class=\"ml-4 pl-4\">\r\n                      <h4>Resources</h4>\r\n                      <p class=\"mb-1\">\r\n                        <i class=\"mr-1 fas fa-book\"></i>\r\n                        <a class=\"${css.text}\" target=\"__blank\" href=\"https://remix-ide.readthedocs.io/en/latest/#\">Documentation</a>\r\n                      </p>\r\n                      <p class=\"mb-1\">\r\n                        <i class=\"mr-1 fab fa-gitter\"></i>\r\n                        <a class=\"${css.text}\" target=\"__blank\" href=\"https://gitter.im/ethereum/remix\">Gitter channel</a>\r\n                        </p>\r\n                      <p class=\"mb-1\">\r\n                        <img class=\"mr-1 ${css.image}\" src=\"${profile.icon}\">\r\n                        <a class=\"${css.text}\" target=\"__blank\" href=\"https://remix-project.org\">Featuring website</a>\r\n                      </p>\r\n                      <p>\r\n                        <i class=\"fab fa-ethereum ${css.image}\"></i>\r\n                        <span class=\"${css.text}\" onclick=${() => switchToPreviousVersion()}>Old experience</span>\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div><!-- end of hpSections -->\r\n            </div>\r\n            <div class=\"d-flex flex-column ${css.rightPanel}\">\r\n              <div class=\"d-flex pr-3 py-2 align-self-end\"  id=\"remixIDEMediaPanelsTitle\">\r\n                ${this.badgeTwitter}\r\n                ${this.badgeMedium}\r\n              </div>\r\n              <div class=\"mr-3 d-flex bg-light ${css.panels}\" id=\"remixIDEMediaPanels\">\r\n                ${this.mediumPanel}\r\n                ${this.twitterPanel}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `\r\n    return container\r\n  }\r\n}\r\n","var modal = require('./modaldialog.js')\r\nvar yo = require('yo-yo')\r\nvar css = require('./styles/modal-dialog-custom-styles')\r\n\r\nmodule.exports = {\r\n  alert: function (title, text) {\r\n    if (text) return modal(title, yo`<div>${text}</div>`, null, { label: null })\r\n    return modal('', yo`<div>${title}</div>`, null, { label: null })\r\n  },\r\n  prompt: function (title, text, inputValue, ok, cancel, focus) {\r\n    return prompt(title, text, false, inputValue, ok, cancel, focus)\r\n  },\r\n  promptPassphrase: function (title, text, inputValue, ok, cancel) {\r\n    return prompt(title, text, true, inputValue, ok, cancel)\r\n  },\r\n  promptPassphraseCreation: function (ok, cancel) {\r\n    var text = 'Please provide a Passphrase for the account creation'\r\n    var input = yo`\r\n      <div>\r\n        <input id=\"prompt1\" type=\"password\" name='prompt_text' class=\"${css.prompt_text}\" oninput=\"${(e) => validateInput(e)}\">\r\n        <br>\r\n        <br>\r\n        <input id=\"prompt2\" type=\"password\" name='prompt_text' class=\"${css.prompt_text}\" oninput=\"${(e) => validateInput(e)}\">\r\n      </div>\r\n    `\r\n    return modal(null, yo`<div>${text}<div>${input}</div></div>`,\r\n      {\r\n        fn: () => {\r\n          if (typeof ok === 'function') {\r\n            if (input.querySelector('#prompt1').value === input.querySelector('#prompt2').value) {\r\n              ok(null, input.querySelector('#prompt1').value)\r\n            } else {\r\n              ok('Passphase does not match')\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        fn: () => {\r\n          if (typeof cancel === 'function') cancel()\r\n        }\r\n      }\r\n    )\r\n  },\r\n  promptMulti: function ({ title, text, inputValue }, ok, cancel) {\r\n    if (!inputValue) inputValue = ''\r\n    const input = yo`\r\n      <textarea\r\n        id=\"prompt_text\"\r\n        data-id=\"modalDialogCustomPromptText\"\r\n        class=${css.prompt_text}\r\n        rows=\"4\"\r\n        cols=\"50\"\r\n        oninput=\"${(e) => validateInput(e)}\"\r\n      ></textarea>\r\n    `\r\n    return modal(title, yo`<div>${text}<div>${input}</div></div>`,\r\n      {\r\n        fn: () => { if (typeof ok === 'function') ok(document.getElementById('prompt_text').value) }\r\n      },\r\n      {\r\n        fn: () => { if (typeof cancel === 'function') cancel() }\r\n      }\r\n    )\r\n  },\r\n  confirm: function (title, text, ok, cancel) {\r\n    return modal(title, yo`<div>${text}</div>`,\r\n      {\r\n        fn: () => { if (typeof ok === 'function') ok() }\r\n      },\r\n      {\r\n        fn: () => { if (typeof cancel === 'function') cancel() }\r\n      }\r\n    )\r\n  }\r\n}\r\n\r\nconst validateInput = (e) => {\r\n  if (!document.getElementById('modal-footer-ok')) return\r\n\r\n  if (e.target.value === '') {\r\n    document.getElementById('modal-footer-ok').classList.add('disabled')\r\n    document.getElementById('modal-footer-ok').style.pointerEvents = 'none'\r\n  } else {\r\n    document.getElementById('modal-footer-ok').classList.remove('disabled')\r\n    document.getElementById('modal-footer-ok').style.pointerEvents = 'auto'\r\n  }\r\n}\r\n\r\nfunction prompt (title, text, hidden, inputValue, ok, cancel, focus) {\r\n  if (!inputValue) inputValue = ''\r\n  var type = hidden ? 'password' : 'text'\r\n  var input = yo`\r\n    <input\r\n      type=${type}\r\n      name='prompt_text'\r\n      id='prompt_text'\r\n      class=\"${css.prompt_text} form-control\"\r\n      value='${inputValue}'\r\n      data-id=\"modalDialogCustomPromptText\"\r\n      oninput=\"${(e) => validateInput(e)}\"\r\n    >\r\n  `\r\n\r\n  modal(title, yo`<div>${text}<div>${input}</div></div>`,\r\n    {\r\n      fn: () => { if (typeof ok === 'function') ok(document.getElementById('prompt_text').value) }\r\n    },\r\n    {\r\n      fn: () => { if (typeof cancel === 'function') cancel() }\r\n    },\r\n    focus ? '#prompt_text' : undefined\r\n  )\r\n}\r\n","var yo = require('yo-yo')\r\nvar css = require('./styles/modaldialog-styles')\r\n\r\nlet incomingModal = false // in case modals are queued, ensure we are not hiding the last one.\r\nmodule.exports = (title, content, ok, cancel, focusSelector, opts) => {\r\n  let agreed = true\r\n  let footerIsActive = false\r\n  opts = opts || {}\r\n  var container = document.querySelector('.modal')\r\n  if (!container) {\r\n    document.querySelector('body').appendChild(html(opts))\r\n    container = document.querySelector('.modal')\r\n    incomingModal = false\r\n  } else incomingModal = true\r\n\r\n  var closeDiv = document.getElementById('modal-close')\r\n  if (opts.hideClose) closeDiv.style.display = 'none'\r\n\r\n  var okDiv = document.getElementById('modal-footer-ok')\r\n  okDiv.innerHTML = (ok && ok.label !== undefined) ? ok.label : 'OK'\r\n  okDiv.style.display = okDiv.innerHTML === '' ? 'none' : 'inline-block'\r\n\r\n  var cancelDiv = document.getElementById('modal-footer-cancel')\r\n  cancelDiv.innerHTML = (cancel && cancel.label !== undefined) ? cancel.label : 'Cancel'\r\n  cancelDiv.style.display = cancelDiv.innerHTML === '' ? 'none' : 'inline-block'\r\n\r\n  var modal = document.querySelector('.modal-body')\r\n  var modalTitle = document.querySelector('.modal-header h6')\r\n\r\n  modalTitle.innerHTML = ''\r\n  if (title) modalTitle.innerText = title\r\n\r\n  modal.innerHTML = ''\r\n  if (content) modal.appendChild(content)\r\n\r\n  setFocusOn('ok')\r\n\r\n  show()\r\n\r\n  function setFocusOn (btn) {\r\n    var okDiv = document.getElementById('modal-footer-ok')\r\n    var cancelDiv = document.getElementById('modal-footer-cancel')\r\n    if (btn === 'ok') {\r\n      okDiv.className = okDiv.className.replace(/\\bbtn-light\\b/g, 'btn-dark')\r\n      cancelDiv.className = cancelDiv.className.replace(/\\bbtn-dark\\b/g, 'btn-light')\r\n    } else {\r\n      cancelDiv.className = cancelDiv.className.replace(/\\bbtn-light\\b/g, 'btn-dark')\r\n      okDiv.className = okDiv.className.replace(/\\bbtn-dark\\b/g, 'btn-light')\r\n    }\r\n  }\r\n\r\n  function okListener () {\r\n    removeEventListener()\r\n    if (ok && ok.fn && agreed) ok.fn()\r\n    if (!incomingModal) hide()\r\n    incomingModal = false\r\n  }\r\n\r\n  function cancelListener () {\r\n    removeEventListener()\r\n    if (cancel && cancel.fn) cancel.fn()\r\n    if (!incomingModal) hide()\r\n    incomingModal = false\r\n  }\r\n\r\n  function modalKeyEvent (e) {\r\n    if (e.keyCode === 27) { // Esc\r\n      cancelListener()\r\n    } else if (e.keyCode === 13) { // Enter\r\n      e.preventDefault()\r\n      okListener()\r\n    } else if (e.keyCode === 37 && footerIsActive) { // Arrow Left\r\n      e.preventDefault()\r\n      agreed = true\r\n      setFocusOn('ok')\r\n    } else if (e.keyCode === 39 && footerIsActive) { // Arrow Right\r\n      e.preventDefault()\r\n      agreed = false\r\n      setFocusOn('cancel')\r\n    }\r\n  }\r\n\r\n  function hide () {\r\n    if (!container) return\r\n    container.style.display = 'none'\r\n    if (container.parentElement) container.parentElement.removeChild(container)\r\n    container = null\r\n    incomingModal = false\r\n  }\r\n\r\n  function show () {\r\n    if (!container) return\r\n    container.style.display = 'block'\r\n    if (focusSelector) {\r\n      const focusTarget = document.querySelector(`.modal ${focusSelector}`)\r\n      if (focusTarget) {\r\n        focusTarget.focus()\r\n        if (typeof focusTarget.setSelectionRange === 'function') {\r\n          focusTarget.setSelectionRange(0, focusTarget.value.length)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function removeEventListener () {\r\n    okDiv.removeEventListener('click', okListener)\r\n    cancelDiv.removeEventListener('click', cancelListener)\r\n    closeDiv.removeEventListener('click', cancelListener)\r\n    document.removeEventListener('keydown', modalKeyEvent)\r\n    if (document.getElementById('modal-background')) {\r\n      document.getElementById('modal-background').removeEventListener('click', cancelListener)\r\n    }\r\n  }\r\n  okDiv.addEventListener('click', okListener)\r\n  cancelDiv.addEventListener('click', cancelListener)\r\n  closeDiv.addEventListener('click', cancelListener)\r\n  document.addEventListener('keydown', modalKeyEvent)\r\n\r\n  const modalDialog = document.getElementById('modal-dialog')\r\n  if (modalDialog) {\r\n    modalDialog.addEventListener('click', (e) => {\r\n      footerIsActive = document.activeElement === modalDialog\r\n      if (e.toElement === modalDialog) {\r\n        cancelListener() // click is outside of modal-content\r\n      }\r\n    })\r\n  }\r\n  return { container, okListener, cancelListener, hide }\r\n}\r\n\r\nfunction html (opts) {\r\n  return yo`\r\n  <div id=\"modal-dialog\" data-id=\"modalDialogContainer\" data-backdrop=\"static\" data-keyboard=\"false\" class=\"modal\" tabindex=\"-1\" role=\"dialog\">\r\n    <div id=\"modal-background\" class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content ${css.modalContent} ${opts.class}\">\r\n        <div class=\"modal-header\">\r\n          <h6 class=\"modal-title\" data-id=\"modalDialogModalTitle\"></h6>\r\n          <span class=\"modal-close\">\r\n            <i id=\"modal-close\" title=\"Close\" class=\"fas fa-times\" aria-hidden=\"true\"></i>\r\n          </span>\r\n        </div>\r\n        <div class=\"modal-body ${css.modalBody}\" data-id=\"modalDialogModalBody\"> - </div>\r\n        <div class=\"modal-footer\" data-id=\"modalDialogModalFooter\" autofocus>\r\n          <span id=\"modal-footer-ok\" class=\"${css.modalFooterOk} modal-ok btn btn-sm btn-light\" tabindex='5'>OK</span>\r\n          <span id=\"modal-footer-cancel\" class=\"${css.modalFooterCancel} modal-cancel btn btn-sm btn-light\" tabindex='10' data-dismiss=\"modal\">Cancel</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>`\r\n}\r\n","'use strict'\r\n\r\nvar yo = require('yo-yo')\r\nvar css = require('../../universal-dapp-styles')\r\nvar copyToClipboard = require('./copy-to-clipboard')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar txFormat = remixLib.execution.txFormat\r\n\r\nclass MultiParamManager {\r\n  /**\r\n    *\r\n    * @param {bool} lookupOnly\r\n    * @param {Object} funABI\r\n    * @param {Function} clickMultiCallBack\r\n    * @param {string} inputs\r\n    * @param {string} title\r\n    * @param {string} evmBC\r\n    *\r\n    */\r\n  constructor (lookupOnly, funABI, clickCallBack, inputs, title, evmBC, isDeploy) {\r\n    this.lookupOnly = lookupOnly\r\n    this.funABI = funABI\r\n    this.clickCallBack = clickCallBack\r\n    this.inputs = inputs\r\n    this.title = title\r\n    this.evmBC = evmBC\r\n    this.basicInputField = null\r\n    this.multiFields = null\r\n    this.isDeploy = isDeploy\r\n  }\r\n\r\n  switchMethodViewOn () {\r\n    this.contractActionsContainerSingle.style.display = 'none'\r\n    this.contractActionsContainerMulti.style.display = 'flex'\r\n    this.makeMultiVal()\r\n  }\r\n\r\n  switchMethodViewOff () {\r\n    this.contractActionsContainerSingle.style.display = 'flex'\r\n    this.contractActionsContainerMulti.style.display = 'none'\r\n    var multiValString = this.getMultiValsString()\r\n    if (multiValString) this.basicInputField.value = multiValString\r\n  }\r\n\r\n  getValue (item, index) {\r\n    var valStr = item.value.join('')\r\n    return valStr\r\n  }\r\n\r\n  getMultiValsString () {\r\n    var valArray = this.multiFields.querySelectorAll('input')\r\n    var ret = ''\r\n    var valArrayTest = []\r\n\r\n    for (var j = 0; j < valArray.length; j++) {\r\n      if (ret !== '') ret += ','\r\n      var elVal = valArray[j].value\r\n      valArrayTest.push(elVal)\r\n      elVal = elVal.replace(/(^|,\\s+|,)(\\d+)(\\s+,|,|$)/g, '$1\"$2\"$3') // replace non quoted number by quoted number\r\n      elVal = elVal.replace(/(^|,\\s+|,)(0[xX][0-9a-fA-F]+)(\\s+,|,|$)/g, '$1\"$2\"$3') // replace non quoted hex string by quoted hex string\r\n      try {\r\n        JSON.parse(elVal)\r\n      } catch (e) {\r\n        elVal = '\"' + elVal + '\"'\r\n      }\r\n      ret += elVal\r\n    }\r\n    var valStringTest = valArrayTest.join('')\r\n    if (valStringTest) {\r\n      return ret\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  emptyInputs () {\r\n    var valArray = this.multiFields.querySelectorAll('input')\r\n    for (var k = 0; k < valArray.length; k++) {\r\n      valArray[k].value = ''\r\n    }\r\n    this.basicInputField.value = ''\r\n  }\r\n\r\n  makeMultiVal () {\r\n    var inputString = this.basicInputField.value\r\n    if (inputString) {\r\n      inputString = inputString.replace(/(^|,\\s+|,)(\\d+)(\\s+,|,|$)/g, '$1\"$2\"$3') // replace non quoted number by quoted number\r\n      inputString = inputString.replace(/(^|,\\s+|,)(0[xX][0-9a-fA-F]+)(\\s+,|,|$)/g, '$1\"$2\"$3') // replace non quoted hex string by quoted hex string\r\n      var inputJSON = JSON.parse('[' + inputString + ']')\r\n      var multiInputs = this.multiFields.querySelectorAll('input')\r\n      for (var k = 0; k < multiInputs.length; k++) {\r\n        if (inputJSON[k]) {\r\n          multiInputs[k].value = JSON.stringify(inputJSON[k])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  createMultiFields () {\r\n    if (this.funABI.inputs) {\r\n      return yo`<div>\r\n        ${this.funABI.inputs.map(function (inp) {\r\n          return yo`<div class=\"${css.multiArg}\"><label for=\"${inp.name}\"> ${inp.name}: </label><input class=\"form-control\" placeholder=\"${inp.type}\" title=\"${inp.name}\" data-id=\"multiParamManagerInput${inp.name}\"></div>`\r\n        })}\r\n      </div>`\r\n    }\r\n  }\r\n\r\n  render () {\r\n    var title\r\n    if (this.title) {\r\n      title = this.title\r\n    } else if (this.funABI.name) {\r\n      title = this.funABI.name\r\n    } else {\r\n      title = this.funABI.type === 'receive' ? '(receive)' : '(fallback)'\r\n    }\r\n\r\n    this.basicInputField = yo`<input class=\"form-control\" data-id=\"multiParamManagerBasicInputField\"></input>`\r\n    this.basicInputField.setAttribute('placeholder', this.inputs)\r\n    this.basicInputField.setAttribute('title', this.inputs)\r\n    this.basicInputField.setAttribute('data-id', this.inputs)\r\n\r\n    var onClick = () => {\r\n      this.clickCallBack(this.funABI.inputs, this.basicInputField.value)\r\n    }\r\n    const width = this.isDeploy ? '' : 'w-50'\r\n    const funcButton = yo`<button onclick=${() => onClick()} class=\"${css.instanceButton} ${width} btn btn-sm\" data-id=\"multiParamManagerFuncButton\">${title}</button>`\r\n    this.contractActionsContainerSingle = yo`\r\n    <div class=\"${css.contractActionsContainerSingle} pt-2\">\r\n      ${funcButton}\r\n      ${this.basicInputField}\r\n      <i class=\"fas fa-angle-down ${css.methCaret}\" onclick=${() => this.switchMethodViewOn()} title=${title} ></i>\r\n    </div>`\r\n\r\n    this.multiFields = this.createMultiFields()\r\n\r\n    var multiOnClick = () => {\r\n      var valsString = this.getMultiValsString()\r\n      if (valsString) {\r\n        this.clickCallBack(this.funABI.inputs, valsString)\r\n      } else {\r\n        this.clickCallBack(this.funABI.inputs, '')\r\n      }\r\n    }\r\n\r\n    var expandedButton = yo`<button onclick=${() => { multiOnClick() }} class=\"${css.instanceButton}\" data-id=\"multiParamManagerExpandedButton\"></button>`\r\n\r\n    this.contractActionsContainerMulti = yo`<div class=\"${css.contractActionsContainerMulti}\" >\r\n      <div class=\"${css.contractActionsContainerMultiInner} text-dark\" >\r\n        <div onclick=${() => { this.switchMethodViewOff() }} class=\"${css.multiHeader}\">\r\n          <div class=\"${css.multiTitle} run-instance-multi-title\">${title}</div>\r\n          <i class='fas fa-angle-up ${css.methCaret}'></i>\r\n        </div>\r\n        ${this.multiFields}\r\n        <div class=\"${css.group} ${css.multiArg}\" >\r\n          ${copyToClipboard(\r\n            () => {\r\n              var multiString = this.getMultiValsString()\r\n              var multiJSON = JSON.parse('[' + multiString + ']')\r\n              var encodeObj\r\n              if (this.evmBC) {\r\n                encodeObj = txFormat.encodeData(this.funABI, multiJSON, this.evmBC)\r\n              } else {\r\n                encodeObj = txFormat.encodeData(this.funABI, multiJSON)\r\n              }\r\n              if (encodeObj.error) {\r\n                throw new Error(encodeObj.error)\r\n              } else {\r\n                return encodeObj.data\r\n              }\r\n            }, 'Encode values of input fields & copy to clipboard', 'fa-clipboard')}\r\n            ${expandedButton}\r\n        </div>\r\n      </div>\r\n    </div>`\r\n\r\n    var contractProperty = yo`\r\n      <div class=\"${css.contractProperty}\">\r\n        ${this.contractActionsContainerSingle} ${this.contractActionsContainerMulti}\r\n      </div>\r\n    `\r\n    if (this.lookupOnly) {\r\n      // call. stateMutability is either pure or view\r\n      expandedButton.setAttribute('title', (title + ' - call'))\r\n      expandedButton.innerHTML = 'call'\r\n      expandedButton.classList.add('btn-info')\r\n      expandedButton.setAttribute('data-id', (title + ' - call'))\r\n      funcButton.setAttribute('title', (title + ' - call'))\r\n      funcButton.classList.add('btn-info')\r\n      funcButton.setAttribute('data-id', (title + ' - call'))\r\n    } else if (this.funABI.stateMutability === 'payable' || this.funABI.payable) {\r\n      // transact. stateMutability = payable\r\n      expandedButton.setAttribute('title', (title + ' - transact (payable)'))\r\n      expandedButton.innerHTML = 'transact'\r\n      expandedButton.classList.add('btn-danger')\r\n      expandedButton.setAttribute('data-id', (title + ' - transact (payable)'))\r\n      funcButton.setAttribute('title', (title + ' - transact (payable)'))\r\n      funcButton.classList.add('btn-danger')\r\n      funcButton.setAttribute('data-id', (title + ' - transact (payable)'))\r\n    } else {\r\n      // transact. stateMutability = nonpayable\r\n      expandedButton.setAttribute('title', (title + ' - transact (not payable)'))\r\n      expandedButton.innerHTML = 'transact'\r\n      expandedButton.classList.add('btn-warning')\r\n      expandedButton.setAttribute('data-id', (title + ' - transact (not payable)'))\r\n      funcButton.classList.add('btn-warning')\r\n      funcButton.setAttribute('title', (title + ' - transact (not payable)'))\r\n      funcButton.setAttribute('data-id', (title + ' - transact (not payable)'))\r\n    }\r\n\r\n    if (this.funABI.inputs && this.funABI.inputs.length > 0) {\r\n      contractProperty.classList.add(css.hasArgs)\r\n    } else if (this.funABI.type === 'fallback' || this.funABI.type === 'receive') {\r\n      contractProperty.classList.add(css.hasArgs)\r\n      this.basicInputField.setAttribute('title', `'(${this.funABI.type}')`) // probably should pass name instead\r\n      this.contractActionsContainerSingle.querySelector('i').style.visibility = 'hidden'\r\n      this.basicInputField.setAttribute('data-id', `'(${this.funABI.type}')`)\r\n    } else {\r\n      this.contractActionsContainerSingle.querySelector('i').style.visibility = 'hidden'\r\n      this.basicInputField.style.visibility = 'hidden'\r\n    }\r\n\r\n    return contractProperty\r\n  }\r\n}\r\n\r\nmodule.exports = MultiParamManager\r\n","/* global localStorage */\r\nconst yo = require('yo-yo')\r\nconst csjs = require('csjs-inject')\r\nconst addTooltip = require('./tooltip')\r\nconst modalDialog = require('./modaldialog')\r\nconst globalRegistry = require('../../global/registry')\r\n\r\nconst css = csjs`\r\n.permission h4 {\r\n  text-transform: uppercase;\r\n  text-align: center;\r\n}\r\n.permission h6 {\r\n  text-transform: uppercase;\r\n}\r\n.remember {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.images {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 10px;\r\n}\r\n.images img {\r\n  width: 40px;\r\n  height: 40px;\r\n}\r\n.images i {\r\n  margin: 0 20px;\r\n}\r\n`\r\n\r\nfunction notAllowWarning (from, to, method) {\r\n  return `${from.displayName || from.name} is not allowed to call ${method} method of ${to.displayName || to.name}.`\r\n}\r\n\r\nexport class PermissionHandler {\r\n  constructor () {\r\n    this.permissions = this._getFromLocal()\r\n    this.currentVersion = 1\r\n    // here we remove the old permissions saved before adding 'permissionVersion'\r\n    // since with v1 the structure has been changed because of new engine ^0.2.0-alpha.6 changes\r\n    if (!localStorage.getItem('permissionVersion')) {\r\n      localStorage.setItem('plugins/permissions', '')\r\n      localStorage.setItem('permissionVersion', this.currentVersion)\r\n    }\r\n  }\r\n\r\n  _getFromLocal () {\r\n    const permission = localStorage.getItem('plugins/permissions')\r\n    return permission ? JSON.parse(permission) : {}\r\n  }\r\n\r\n  persistPermissions () {\r\n    const permissions = JSON.stringify(this.permissions)\r\n    localStorage.setItem('plugins/permissions', permissions)\r\n  }\r\n\r\n  clear () {\r\n    localStorage.removeItem('plugins/permissions')\r\n    addTooltip('All Permissions have been reset')\r\n  }\r\n\r\n  /**\r\n   * Show a message to ask the user for a permission\r\n   * @param {PluginProfile} from The name and hash of the plugin that make the call\r\n   * @param {ModuleProfile} to The name of the plugin that receive the call\r\n   * @param {string} method The name of the function to be called\r\n   * @param {string} message from the caller plugin to add more details if needed\r\n   * @returns {Promise<{ allow: boolean; remember: boolean }} Answer from the user to the permission\r\n   */\r\n  async openPermission (from, to, method, message) {\r\n    return new Promise((resolve, reject) => {\r\n      modalDialog(\r\n        `Permission needed for ${to.displayName || to.name}`,\r\n        this.form(from, to, method, message),\r\n        {\r\n          label: 'Accept',\r\n          fn: () => {\r\n            if (this.permissions[to.name][method][from.name]) {\r\n              this.permissions[to.name][method][from.name] = {\r\n                allow: true,\r\n                hash: from.hash\r\n              }\r\n              this.persistPermissions()\r\n            }\r\n            resolve(true)\r\n          }\r\n        },\r\n        {\r\n          label: 'Decline',\r\n          fn: () => {\r\n            if (this.permissions[to.name][method][from.name]) {\r\n              this.permissions[to.name][method][from.name] = {\r\n                allow: false,\r\n                hash: from.hash\r\n              }\r\n              this.persistPermissions()\r\n            }\r\n            reject(notAllowWarning(from, to, method))\r\n          }\r\n        }\r\n      )\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Check if a plugin has the permission to call another plugin and askPermission if needed\r\n   * @param {PluginProfile} from the profile of the plugin that make the call\r\n   * @param {ModuleProfile} to The profile of the module that receive the call\r\n   * @param {string} method The name of the function to be called\r\n   * @param {string} message from the caller plugin to add more details if needed\r\n   * @returns {Promise<boolean>}\r\n   */\r\n  async askPermission (from, to, method, message) {\r\n    try {\r\n      this.permissions = this._getFromLocal()\r\n      if (!this.permissions[to.name]) this.permissions[to.name] = {}\r\n      if (!this.permissions[to.name][method]) this.permissions[to.name][method] = {}\r\n      if (!this.permissions[to.name][method][from.name]) return this.openPermission(from, to, method, message)\r\n\r\n      const { allow, hash } = this.permissions[to.name][method][from.name]\r\n      if (!allow) {\r\n        const warning = notAllowWarning(from, to, method)\r\n        addTooltip(warning)\r\n        return false\r\n      }\r\n      return hash === from.hash\r\n        ? true // Allow\r\n        : this.openPermission(from, to, method, message) // New version of a plugin\r\n    } catch (err) {\r\n      throw new Error(err)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The permission form\r\n   * @param {PluginProfile} from The name and hash of the plugin that make the call\r\n   * @param {ModuleProfile} to The name of the plugin that receive the call\r\n   * @param {string} method The name of te methode to be called\r\n   * @param {string} message from the caller plugin to add more details if needed\r\n   */\r\n  form (from, to, method, message) {\r\n    const fromName = from.displayName || from.name\r\n    const toName = to.displayName || to.name\r\n    const remember = this.permissions[to.name][method][from.name]\r\n\r\n    const switchMode = (e) => {\r\n      e.target.checked\r\n        ? this.permissions[to.name][method][from.name] = {}\r\n        : delete this.permissions[to.name][method][from.name]\r\n    }\r\n    const rememberSwitch = remember\r\n      ? yo`<input type=\"checkbox\" onchange=\"${switchMode}\" checkbox class=\"form-check-input\" id=\"remember\" data-id=\"permissionHandlerRememberChecked\">`\r\n      : yo`<input type=\"checkbox\" onchange=\"${switchMode}\" class=\"form-check-input\" id=\"remember\" data-id=\"permissionHandlerRememberUnchecked\">`\r\n    const text = `\"${fromName}\" ${(remember ? 'has changed and' : '')} would like to access to \"${method}\" of \"${toName}\"`\r\n    const imgFrom = yo`<img id=\"permissionModalImagesFrom\" src=\"${from.icon}\" />`\r\n    const imgTo = yo`<img id=\"permissionModalImagesTo\" src=\"${to.icon}\" />`\r\n    const pluginsImages = yo`\r\n      <article class=\"${css.images}\">\r\n        ${imgFrom}\r\n        <i class=\"fas fa-arrow-right\"></i>\r\n        ${imgTo}\r\n      </article>\r\n    `\r\n\r\n    globalRegistry.get('themeModule').api.fixInvert(imgFrom)\r\n    globalRegistry.get('themeModule').api.fixInvert(imgTo)\r\n\r\n    const pluginMessage = message ? yo`\r\n      <div>\r\n        <h6>Description</h6>\r\n        <p>${message}</p>\r\n      </div>\r\n    ` : ''\r\n    return yo`\r\n      <section class=\"${css.permission}\">\r\n        ${pluginsImages}\r\n        <article>\r\n          <h4 data-id=\"permissionHandlerMessage\">${text} :</h4>\r\n          <h6>${fromName}</h6>\r\n          <p>${from.description || yo`<i>No description Provided</i>`}</p>\r\n          <h6>${toName} :</p>\r\n          <p>${to.description || yo`<i>No description Provided</i>`}</p>\r\n          ${pluginMessage}\r\n        </article>\r\n\r\n        <article class=\"${css.remember}\">\r\n          <div class=\"form-check\">\r\n            ${rememberSwitch}\r\n            <label class=\"form-check-label\" for=\"remember\" data-id=\"permissionHandlerRememberChoice\">Remember this choice</label>\r\n          </div>\r\n          <button class=\"btn btn-sm\" onclick=\"${_ => this.clear()}\">Reset all Permissions</button>\r\n        </article>\r\n      </section>\r\n    `\r\n  }\r\n}\r\n","'use strict'\r\n\r\nvar $ = require('jquery')\r\nvar yo = require('yo-yo')\r\nvar css = require('./styles/renderer-styles')\r\nvar globlalRegistry = require('../../global/registry')\r\n\r\n/**\r\n * After refactor, the renderer is only used to render error/warning\r\n * TODO: This don't need to be an object anymore. Simplify and just export the renderError function.\r\n *\r\n */\r\nfunction Renderer (localRegistry) {\r\n  const self = this\r\n  self._components = {}\r\n  self._components.registry = localRegistry || globlalRegistry\r\n  // dependencies\r\n  self._deps = {\r\n    fileManager: self._components.registry.get('filemanager').api,\r\n    config: self._components.registry.get('config').api\r\n  }\r\n  if (document && document.head) {\r\n    document.head.appendChild(css)\r\n  }\r\n}\r\n\r\nRenderer.prototype._error = function (file, error) {\r\n  const self = this\r\n  const editor = self._components.registry.get('editor').api\r\n  if (file === self._deps.config.get('currentFile')) {\r\n    editor.addAnnotation(error)\r\n  }\r\n}\r\n\r\nRenderer.prototype._errorClick = function (errFile, errLine, errCol) {\r\n  const self = this\r\n  const editor = self._components.registry.get('editor').api\r\n  if (errFile !== self._deps.config.get('currentFile')) {\r\n    // TODO: refactor with this._components.contextView.jumpTo\r\n    var provider = self._deps.fileManager.fileProviderOf(errFile)\r\n    if (provider) {\r\n      provider.exists(errFile, (error, exist) => {\r\n        if (error) return console.log(error)\r\n        self._deps.fileManager.open(errFile)\r\n        editor.gotoLine(errLine, errCol)\r\n      })\r\n    }\r\n  } else {\r\n    editor.gotoLine(errLine, errCol)\r\n  }\r\n}\r\n\r\n/**\r\n * format msg like error or warning,\r\n *\r\n * @param {String or DOMElement} message\r\n * @param {DOMElement} container\r\n * @param {Object} options {\r\n *  useSpan,\r\n *  noAnnotations,\r\n *  click:(Function),\r\n *  type:(\r\n *    warning,\r\n *    error\r\n *  ),\r\n *  errFile,\r\n *  errLine,\r\n *  errCol\r\n * }\r\n */\r\nRenderer.prototype.error = function (message, container, opt) {\r\n  if (!message) return\r\n  if (container === undefined) return\r\n  opt = opt || {}\r\n\r\n  var text\r\n  if (typeof message === 'string') {\r\n    text = message\r\n    message = yo`<span>${message}</span>`\r\n  } else if (message.innerText) {\r\n    text = message.innerText\r\n  }\r\n\r\n  // ^ e.g:\r\n  // browser/gm.sol: Warning: Source file does not specify required compiler version! Consider adding \"pragma solidity ^0.6.12\r\n  // https://github.com/OpenZeppelin/openzeppelin-contracts/blob/release-v3.2.0/contracts/introspection/IERC1820Registry.sol:3:1: ParserError: Source file requires different compiler version (current compiler is 0.7.4+commit.3f05b770.Emscripten.clang) - note that nightly builds are considered to be strictly less than the released version\r\n\r\n  // extract line / column\r\n  let position = text.match(/^(.*?):([0-9]*?):([0-9]*?)?/)\r\n  opt.errLine = position ? parseInt(position[2]) - 1 : -1\r\n  opt.errCol = position ? parseInt(position[3]) : -1\r\n\r\n  // extract file\r\n  position = text.match(/^(https:.*?|http:.*?|.*?):/)\r\n  opt.errFile = position ? position[1] : ''\r\n\r\n  if (!opt.noAnnotations && opt.errFile) {\r\n    this._error(opt.errFile, {\r\n      row: opt.errLine,\r\n      column: opt.errCol,\r\n      text: text,\r\n      type: opt.type\r\n    })\r\n  }\r\n\r\n  var $pre = $(opt.useSpan ? yo`<span></span>` : yo`<pre></pre>`).html(message)\r\n\r\n  const classList = opt.type === 'error' ? 'alert alert-danger' : 'alert alert-warning'\r\n  var $error = $(yo`<div class=\"sol ${opt.type} ${classList}\"><div class=\"close\" data-id=\"renderer\"><i class=\"fas fa-times\"></i></div></div>`).prepend($pre)\r\n  $(container).append($error)\r\n\r\n  $error.click((ev) => {\r\n    if (opt.click) {\r\n      opt.click(message)\r\n    } else if (opt.errFile !== undefined && opt.errLine !== undefined && opt.errCol !== undefined) {\r\n      this._errorClick(opt.errFile, opt.errLine, opt.errCol)\r\n    }\r\n  })\r\n\r\n  $error.find('.close').click(function (ev) {\r\n    ev.preventDefault()\r\n    $error.remove()\r\n    return false\r\n  })\r\n}\r\n\r\nmodule.exports = Renderer\r\n","const yo = require('yo-yo')\r\nconst remixLib = require('@remix-project/remix-lib')\r\nconst confirmDialog = require('./confirmDialog')\r\nconst modalCustom = require('./modal-dialog-custom')\r\nconst modalDialog = require('./modaldialog')\r\nconst typeConversion = remixLib.execution.typeConversion\r\nconst Web3 = require('web3')\r\n\r\nmodule.exports = {\r\n  getCallBacksWithContext: (udappUI, blockchain) => {\r\n    const callbacks = {}\r\n    callbacks.confirmationCb = confirmationCb\r\n    callbacks.continueCb = continueCb\r\n    callbacks.promptCb = promptCb\r\n    callbacks.udappUI = udappUI\r\n    callbacks.blockchain = blockchain\r\n    return callbacks\r\n  }\r\n}\r\n\r\nconst continueCb = function (error, continueTxExecution, cancelCb) {\r\n  if (error) {\r\n    const msg = typeof error !== 'string' ? error.message : error\r\n    modalDialog(\r\n      'Gas estimation failed',\r\n      yo`\r\n        <div>Gas estimation errored with the following message (see below).\r\n        The transaction execution will likely fail. Do you want to force sending? <br>${msg}</div>\r\n      `,\r\n      {\r\n        label: 'Send Transaction',\r\n        fn: () => continueTxExecution()\r\n      },\r\n      {\r\n        label: 'Cancel Transaction',\r\n        fn: () => cancelCb()\r\n      }\r\n    )\r\n  } else {\r\n    continueTxExecution()\r\n  }\r\n}\r\n\r\nconst promptCb = function (okCb, cancelCb) {\r\n  modalCustom.promptPassphrase('Passphrase requested', 'Personal mode is enabled. Please provide passphrase of account', '', okCb, cancelCb)\r\n}\r\n\r\nconst confirmationCb = function (network, tx, gasEstimation, continueTxExecution, cancelCb) {\r\n  const self = this\r\n  if (network.name !== 'Main') {\r\n    return continueTxExecution(null)\r\n  }\r\n  var amount = Web3.utils.fromWei(typeConversion.toInt(tx.value), 'ether')\r\n  var content = confirmDialog(tx, amount, gasEstimation, self.udappUI,\r\n    (gasPrice, cb) => {\r\n      let txFeeText, priceStatus\r\n      // TODO: this try catch feels like an anti pattern, can/should be\r\n      // removed, but for now keeping the original logic\r\n      try {\r\n        var fee = Web3.utils.toBN(tx.gas).mul(Web3.utils.toBN(Web3.utils.toWei(gasPrice.toString(10), 'gwei')))\r\n        txFeeText = ' ' + Web3.utils.fromWei(fee.toString(10), 'ether') + ' Ether'\r\n        priceStatus = true\r\n      } catch (e) {\r\n        txFeeText = ' Please fix this issue before sending any transaction. ' + e.message\r\n        priceStatus = false\r\n      }\r\n      cb(txFeeText, priceStatus)\r\n    },\r\n    (cb) => {\r\n      self.blockchain.web3().eth.getGasPrice((error, gasPrice) => {\r\n        const warnMessage = ' Please fix this issue before sending any transaction. '\r\n        if (error) {\r\n          return cb('Unable to retrieve the current network gas price.' + warnMessage + error)\r\n        }\r\n        try {\r\n          var gasPriceValue = Web3.utils.fromWei(gasPrice.toString(10), 'gwei')\r\n          cb(null, gasPriceValue)\r\n        } catch (e) {\r\n          cb(warnMessage + e.message, null, false)\r\n        }\r\n      })\r\n    }\r\n  )\r\n  modalDialog(\r\n    'Confirm transaction',\r\n    content,\r\n    {\r\n      label: 'Confirm',\r\n      fn: () => {\r\n        self.blockchain.config.setUnpersistedProperty(\r\n          'doNotShowTransactionConfirmationAgain',\r\n          content.querySelector('input#confirmsetting').checked\r\n        )\r\n        // TODO: check if this is check is still valid given the refactor\r\n        if (!content.gasPriceStatus) {\r\n          cancelCb('Given gas price is not correct')\r\n        } else {\r\n          var gasPrice = Web3.utils.toWei(content.querySelector('#gasprice').value, 'gwei')\r\n          continueTxExecution(gasPrice)\r\n        }\r\n      }\r\n    },\r\n    {\r\n      label: 'Cancel',\r\n      fn: () => {\r\n        return cancelCb('Transaction canceled by user.')\r\n      }\r\n    }\r\n  )\r\n}\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .popup             {\r\n    position         : absolute;\r\n    text-align       : left;\r\n    display          : none;\r\n    width            : 95%;\r\n    font-family      : monospace;\r\n    background-color : var(--secondary);\r\n    overflow         : auto;\r\n    padding-bottom   : 13px;\r\n    z-index          : 80;\r\n    bottom           : 1em;\r\n    border-width     : 4px;\r\n    left             : 2em;\r\n  }\r\n\r\n  .autoCompleteItem {\r\n    padding          : 4px;\r\n    border-radius    : 2px;\r\n  }\r\n\r\n  .popup a {\r\n    cursor           : pointer;\r\n  }\r\n\r\n  .listHandlerShow   {\r\n    display          : block;\r\n  }\r\n\r\n  .listHandlerHide   {\r\n    display          : none;\r\n  }\r\n\r\n  .listHandlerButtonShow {\r\n    position         : fixed;\r\n    width            : 46%;\r\n  }\r\n\r\n  .pageNumberAlignment {\r\n    font-size        : 10px;\r\n    float            : right;\r\n  }\r\n\r\n  .modalContent {\r\n    position         : absolute;\r\n    margin-left      : 20%;\r\n    margin-bottom    : 32px;\r\n    bottom           : 0px;\r\n    padding          : 0;\r\n    line-height      : 18px;\r\n    font-size        : 12px;\r\n    width            : 40%;\r\n    box-shadow       : 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\r\n    -webkit-animation-name: animatebottom;\r\n    -webkit-animation-duration: 0.4s;\r\n    animation-name   : animatetop;\r\n    animation-duration: 0.4s\r\n  }\r\n\r\n  @-webkit-keyframes animatetop {\r\n    from {bottom: -300px; opacity: 0}\r\n    to {bottom: 0; opacity: 1}\r\n  }\r\n\r\n  @keyframes animatetop {\r\n    from {bottom: -300px; opacity: 0}\r\n    to {bottom: 0; opacity: 1}\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .prompt_text {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n\r\n  .modalFooter {\r\n  }\r\n  .modalContent {\r\n    box-shadow: 0 0 8px 1000px rgba(0,0,0,0.6),0 6px 20px 0 rgba(0,0,0,0.19);\r\n    -webkit-animation-name: animatetop;\r\n    -webkit-animation-duration: 0.4s;\r\n    animation-name: animatetop;\r\n    animation-duration: 0.4s\r\n  }\r\n  .modalBody {\r\n    word-break: break-word;\r\n    overflow-y: auto;\r\n    max-height: 600px;\r\n  }\r\n  .modalFooterOk {\r\n  }\r\n  .modalFooterCancel {\r\n  }\r\n  @-webkit-keyframes animatetop {\r\n    from {top: -300px; opacity: 0}\r\n    to {top: 0; opacity: 1}\r\n  }\r\n  @keyframes animatetop {\r\n    from {top: -300px; opacity: 0}\r\n    to {top: 0; opacity: 1}\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","var yo = require('yo-yo')\r\n\r\nvar css = yo`<style>\r\n.sol.success,\r\n.sol.error,\r\n.sol.warning {\r\n    white-space: pre-line;\r\n    word-wrap: break-word;\r\n    cursor: pointer;\r\n    position: relative;\r\n    margin: 0.5em 0 1em 0;\r\n    border-radius: 5px;\r\n    line-height: 20px;\r\n    padding: 8px 15px;\r\n}\r\n\r\n.sol.success pre,\r\n.sol.error pre,\r\n.sol.warning pre {\r\n    white-space: pre-line;\r\n    overflow-y: hidden;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    font-size: 12px;\r\n    border: 0 none;\r\n    padding: 0;\r\n    border-radius: 0;\r\n}\r\n\r\n.sol.success .close,\r\n.sol.error .close,\r\n.sol.warning .close {\r\n    white-space: pre-line;\r\n    font-weight: bold;\r\n    position: absolute;\r\n    color: hsl(0, 0%, 0%); /* black in style-guide.js */\r\n    top: 0;\r\n    right: 0;\r\n    padding: 0.5em;\r\n}\r\n\r\n.sol.error {\r\n}\r\n\r\n.sol.warning {\r\n}\r\n\r\n.sol.success {\r\n  /* background-color:  // styles.rightPanel.message_Success_BackgroundColor; */\r\n}</style>`\r\n\r\nmodule.exports = css\r\n","var csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .tooltip {\r\n    z-index: 1001;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    position: fixed;\r\n    min-height: 50px;\r\n    padding: 16px 24px 12px;\r\n    border-radius: 3px;\r\n    bottom: -300;\r\n    left: 40%;\r\n    font-size: 14px;\r\n    text-align: center;\r\n    bottom: 0;\r\n    flex-direction: row;\r\n  }\r\n  @-webkit-keyframes animatebottom  {\r\n    0% {bottom: -300px}\r\n    100% {bottom: 0}\r\n  }\r\n  @keyframes animatebottom  {\r\n    0% {bottom: -300px}\r\n    100% {bottom: 0}\r\n  }\r\n  @-webkit-keyframes animatetop  {\r\n    0% {bottom: 0}\r\n    100% {bottom: -300px}\r\n  }\r\n  @keyframes animatetop  {\r\n    0% {bottom: 0}\r\n    100% {bottom: -300px}\r\n  }\r\n  .animateTop {\r\n    -webkit-animation-name: animatetop;\r\n    -webkit-animation-duration: 2s;\r\n    animation-name: animatetop;\r\n    animation-duration: 2s;\r\n  }\r\n  .animateBottom {\r\n    -webkit-animation-name: animatebottom;\r\n    -webkit-animation-duration: 2s;\r\n    animation-name: animatebottom;\r\n    animation-duration: 2s;    \r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","import yo from 'yo-yo'\r\nexport function basicLogo () {\r\n  return yo`<svg id=\"Ebene_2\" data-name=\"Ebene 2\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 105 100\"> \r\n<path d=\"M91.84,35a.09.09,0,0,1-.1-.07,41,41,0,0,0-79.48,0,.09.09,0,0,1-.1.07C9.45,35,1,35.35,1,42.53c0,8.56,1,16,6,20.32,2.16,1.85,5.81,2.3,9.27,2.22a44.4,44.4,0,0,0,6.45-.68.09.09,0,0,0,.06-.15A34.81,34.81,0,0,1,17,45c0-.1,0-.21,0-.31a35,35,0,0,1,70,0c0,.1,0,.21,0,.31a34.81,34.81,0,0,1-5.78,19.24.09.09,0,0,0,.06.15,44.4,44.4,0,0,0,6.45.68c3.46.08,7.11-.37,9.27-2.22,5-4.27,6-11.76,6-20.32C103,35.35,94.55,35,91.84,35Z\"/>\r\n<path d=\"M52,74,25.4,65.13a.1.1,0,0,0-.1.17L51.93,91.93a.1.1,0,0,0,.14,0L78.7,65.3a.1.1,0,0,0-.1-.17L52,74A.06.06,0,0,1,52,74Z\"/>\r\n<path d=\"M75.68,46.9,82,45a.09.09,0,0,0,.08-.09,29.91,29.91,0,0,0-.87-6.94.11.11,0,0,0-.09-.08l-6.43-.58a.1.1,0,0,1-.06-.18l4.78-4.18a.13.13,0,0,0,0-.12,30.19,30.19,0,0,0-3.65-6.07.09.09,0,0,0-.11,0l-5.91,2a.1.1,0,0,1-.12-.14L72.19,23a.11.11,0,0,0,0-.12,29.86,29.86,0,0,0-5.84-4.13.09.09,0,0,0-.11,0l-4.47,4.13a.1.1,0,0,1-.17-.07l.09-6a.1.1,0,0,0-.07-.1,30.54,30.54,0,0,0-7-1.47.1.1,0,0,0-.1.07l-2.38,5.54a.1.1,0,0,1-.18,0l-2.37-5.54a.11.11,0,0,0-.11-.06,30,30,0,0,0-7,1.48.12.12,0,0,0-.07.1l.08,6.05a.09.09,0,0,1-.16.07L37.8,18.76a.11.11,0,0,0-.12,0,29.75,29.75,0,0,0-5.83,4.13.11.11,0,0,0,0,.12l2.59,5.6a.11.11,0,0,1-.13.14l-5.9-2a.11.11,0,0,0-.12,0,30.23,30.23,0,0,0-3.62,6.08.11.11,0,0,0,0,.12l4.79,4.19a.1.1,0,0,1-.06.17L23,37.91a.1.1,0,0,0-.09.07A29.9,29.9,0,0,0,22,44.92a.1.1,0,0,0,.07.1L28.4,47a.1.1,0,0,1,0,.18l-5.84,3.26a.16.16,0,0,0,0,.11,30.17,30.17,0,0,0,2.1,6.76c.32.71.67,1.4,1,2.08a.1.1,0,0,0,.06,0L52,68.16H52l26.34-8.78a.1.1,0,0,0,.06-.05,30.48,30.48,0,0,0,3.11-8.88.1.1,0,0,0-.05-.11l-5.83-3.26A.1.1,0,0,1,75.68,46.9Z\"/>\r\n</svg>`\r\n}\r\n","/* global Element */\r\nvar yo = require('yo-yo')\r\nvar css = require('./styles/tooltip-styles')\r\nvar modal = require('./modal-dialog-custom')\r\n\r\n/**\r\n * Open a tooltip\r\n * @param {string} tooltipText The text shown by the tooltip\r\n * @param {function} [action] Returns An HTMLElement to display for action\r\n */\r\nmodule.exports = function addTooltip (tooltipText, action, opts) {\r\n  action = action || function () { return yo`<div></div>` }\r\n  const t = new Toaster()\r\n  return t.render(tooltipText, action(t), opts)\r\n}\r\n\r\nclass Toaster {\r\n  hide () {\r\n    if (this.id) clearTimeout(this.id)\r\n    setTimeout(() => {\r\n      // remove from body after the animation is finished\r\n      if (this.tooltip.parentElement) this.tooltip.parentElement.removeChild(this.tooltip)\r\n    }, 2000)\r\n    animation(this.tooltip, css.animateTop.className)\r\n  }\r\n\r\n  render (tooltipText, actionElement, opts) {\r\n    opts = defaultOptions(opts)\r\n    let canShorten = true\r\n    if (tooltipText instanceof Element) {\r\n      canShorten = false\r\n    } else {\r\n      if (typeof tooltipText === 'object') {\r\n        if (tooltipText.message) {\r\n          tooltipText = tooltipText.message\r\n        } else {\r\n          try {\r\n            tooltipText = JSON.stringify(tooltipText)\r\n          } catch (e) {\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const shortTooltipText = (canShorten && tooltipText.length > 201) ? tooltipText.substring(0, 200) + '...' : tooltipText\r\n      this.resolveFn = resolve\r\n\r\n      function showFullMessage () {\r\n        modal.alert(tooltipText)\r\n      }\r\n\r\n      function closeTheToaster (self) {\r\n        self.hide()\r\n        over()\r\n        resolve()\r\n      }\r\n      const button = tooltipText.length > 201 ? yo`\r\n      <button class=\"btn btn-secondary btn-sm mx-3\" style=\"white-space: nowrap;\" onclick=${() => showFullMessage()}>Show full message</button>\r\n      ` : ''\r\n\r\n      this.tooltip = yo`\r\n        <div data-shared=\"tooltipPopup\" class=\"${css.tooltip} alert alert-info p-2\"  onmouseenter=${() => { over() }} onmouseleave=${() => { out() }}>\r\n          <span class=\"px-2\">\r\n            ${shortTooltipText}\r\n            ${button}\r\n            ${actionElement}\r\n          </span>\r\n          <span style=\"align-self: baseline;\">\r\n            <button data-id=\"tooltipCloseButton\" class=\"fas fa-times btn-info mx-1 p-0\" onclick=${() => closeTheToaster(this)}></button>\r\n          </span>\r\n        </div>`\r\n      const timeOut = () => {\r\n        return setTimeout(() => {\r\n          if (this.id) {\r\n            this.hide()\r\n            resolve()\r\n          }\r\n        }, opts.time)\r\n      }\r\n      const over = () => {\r\n        if (this.id) {\r\n          clearTimeout(this.id)\r\n          this.id = null\r\n        }\r\n      }\r\n      const out = () => {\r\n        if (!this.id) this.id = timeOut()\r\n      }\r\n      this.id = timeOut()\r\n      document.body.appendChild(this.tooltip)\r\n      animation(this.tooltip, css.animateBottom.className)\r\n    })\r\n  }\r\n}\r\n\r\nconst defaultOptions = (opts) => {\r\n  opts = opts || {}\r\n  return {\r\n    time: opts.time || 7000\r\n  }\r\n}\r\n\r\nconst animation = (tooltip, anim) => {\r\n  tooltip.classList.remove(css.animateTop.className)\r\n  tooltip.classList.remove(css.animateBottom.className)\r\n  // eslint-disable-next-line\r\n  void tooltip.offsetWidth // trick for restarting the animation\r\n  tooltip.classList.add(anim)\r\n}\r\n","'use strict'\r\nvar yo = require('yo-yo')\r\nvar copyToClipboard = require('./copy-to-clipboard')\r\n\r\n// -------------- styling ----------------------\r\nvar csjs = require('csjs-inject')\r\nvar remixLib = require('@remix-project/remix-lib')\r\n\r\nvar EventManager = require('../../lib/events')\r\nvar helper = require('../../lib/helper')\r\nvar modalDialog = require('./modal-dialog-custom')\r\nvar typeConversion = remixLib.execution.typeConversion\r\nvar globlalRegistry = require('../../global/registry')\r\n\r\nvar css = csjs`\r\n  .log {\r\n    display: flex;\r\n    cursor: pointer;\r\n    align-items: center;\r\n    cursor: pointer;\r\n  }\r\n  .log:hover {\r\n    opacity: 0.8;\r\n  }\r\n  .arrow {\r\n    color: var(--text-info);\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    margin-left: 10px;\r\n  }\r\n  .arrow:hover {\r\n    color: var(--secondary);\r\n  }\r\n  .txLog {\r\n  }\r\n  .txStatus {\r\n    display: flex;\r\n    font-size: 20px;\r\n    margin-right: 20px;\r\n    float: left;\r\n  }\r\n  .succeeded {\r\n    color: var(--success);\r\n  }\r\n  .failed {\r\n    color: var(--danger);\r\n  }\r\n  .notavailable {\r\n  }\r\n  .call {\r\n    font-size: 7px;\r\n    border-radius: 50%;\r\n    min-width: 20px;\r\n    min-height: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: var(--text-info);\r\n    text-transform: uppercase;\r\n    font-weight: bold;\r\n  }\r\n  .txItem {\r\n    color: var(--text-info);\r\n    margin-right: 5px;\r\n    float: left;\r\n  }\r\n  .txItemTitle {\r\n    font-weight: bold;\r\n  }\r\n  .tx {\r\n    color: var(--text-info);\r\n    font-weight: bold;\r\n    float: left;\r\n    margin-right: 10px;\r\n  }\r\n  .txTable,\r\n  .tr,\r\n  .td {\r\n    border-collapse: collapse;\r\n    font-size: 10px;\r\n    color: var(--text-info);\r\n    border: 1px solid var(--text-info);\r\n  }\r\n  #txTable {\r\n    margin-top: 1%;\r\n    margin-bottom: 5%;\r\n    align-self: center;\r\n    width: 85%;\r\n  }\r\n  .tr, .td {\r\n    padding: 4px;\r\n    vertical-align: baseline;\r\n  }\r\n  .td:first-child {\r\n    min-width: 30%;\r\n    width: 30%;\r\n    align-items: baseline;\r\n    font-weight: bold;\r\n  }\r\n  .tableTitle {\r\n    width: 25%;\r\n  }\r\n  .buttons {\r\n    display: flex;\r\n    margin-left: auto;\r\n  }\r\n  .debug {\r\n    white-space: nowrap;\r\n  }\r\n  .debug:hover {\r\n    opacity: 0.8;\r\n  }`\r\n/**\r\n  * This just export a function that register to `newTransaction` and forward them to the logger.\r\n  *\r\n  */\r\nclass TxLogger {\r\n  constructor (terminal, blockchain) {\r\n    this.event = new EventManager()\r\n    this.seen = {}\r\n    function filterTx (value, query) {\r\n      if (value.length) {\r\n        return helper.find(value, query)\r\n      }\r\n      return false\r\n    }\r\n    this.eventsDecoder = globlalRegistry.get('eventsDecoder').api\r\n    this.txListener = globlalRegistry.get('txlistener').api\r\n    this.terminal = terminal\r\n    // dependencies\r\n    this._deps = {\r\n      compilersArtefacts: globlalRegistry.get('compilersartefacts').api\r\n    }\r\n\r\n    this.logKnownTX = this.terminal.registerCommand('knownTransaction', (args, cmds, append) => {\r\n      var data = args[0]\r\n      var el\r\n      if (data.tx.isCall) {\r\n        el = renderCall(this, data)\r\n      } else {\r\n        el = renderKnownTransaction(this, data, blockchain)\r\n      }\r\n      this.seen[data.tx.hash] = el\r\n      append(el)\r\n    }, { activate: true, filterFn: filterTx })\r\n\r\n    this.logUnknownTX = this.terminal.registerCommand('unknownTransaction', (args, cmds, append) => {\r\n      // triggered for transaction AND call\r\n      var data = args[0]\r\n      var el = renderUnknownTransaction(this, data, blockchain)\r\n      append(el)\r\n    }, { activate: false, filterFn: filterTx })\r\n\r\n    this.logEmptyBlock = this.terminal.registerCommand('emptyBlock', (args, cmds, append) => {\r\n      var data = args[0]\r\n      var el = renderEmptyBlock(this, data)\r\n      append(el)\r\n    }, { activate: true })\r\n\r\n    this.txListener.event.register('newBlock', (block) => {\r\n      if (!block.transactions || (block.transactions && !block.transactions.length)) {\r\n        this.logEmptyBlock({ block: block })\r\n      }\r\n    })\r\n\r\n    this.txListener.event.register('newTransaction', (tx, receipt) => {\r\n      log(this, tx, receipt)\r\n    })\r\n\r\n    this.txListener.event.register('newCall', (tx) => {\r\n      log(this, tx, null)\r\n    })\r\n\r\n    this.terminal.updateJournal({ type: 'select', value: 'unknownTransaction' })\r\n    this.terminal.updateJournal({ type: 'select', value: 'knownTransaction' })\r\n  }\r\n}\r\n\r\nfunction debug (e, data, self) {\r\n  e.stopPropagation()\r\n  if (data.tx.isCall && data.tx.envMode !== 'vm') {\r\n    modalDialog.alert('Cannot debug this call. Debugging calls is only possible in JavaScript VM mode.')\r\n  } else {\r\n    self.event.trigger('debuggingRequested', [data.tx.hash])\r\n  }\r\n}\r\n\r\nfunction log (self, tx, receipt) {\r\n  var resolvedTransaction = self.txListener.resolvedTransaction(tx.hash)\r\n  if (resolvedTransaction) {\r\n    var compiledContracts = null\r\n    if (self._deps.compilersArtefacts.__last) {\r\n      compiledContracts = self._deps.compilersArtefacts.__last.getContracts()\r\n    }\r\n    self.eventsDecoder.parseLogs(tx, resolvedTransaction.contractName, compiledContracts, (error, logs) => {\r\n      if (!error) {\r\n        self.logKnownTX({ tx: tx, receipt: receipt, resolvedData: resolvedTransaction, logs: logs })\r\n      }\r\n    })\r\n  } else {\r\n    // contract unknown - just displaying raw tx.\r\n    self.logUnknownTX({ tx: tx, receipt: receipt })\r\n  }\r\n}\r\n\r\nfunction renderKnownTransaction (self, data, blockchain) {\r\n  var from = data.tx.from\r\n  var to = data.resolvedData.contractName + '.' + data.resolvedData.fn\r\n  var obj = { from, to }\r\n  var txType = 'knownTx'\r\n  var tx = yo`\r\n    <span id=\"tx${data.tx.hash}\" data-id=\"txLogger${data.tx.hash}\">\r\n      <div class=\"${css.log}\" onclick=${e => txDetails(e, tx, data, obj)}>\r\n        ${checkTxStatus(data.receipt, txType)}\r\n        ${context(self, { from, to, data }, blockchain)}\r\n        <div class=${css.buttons}>\r\n          <button class=\"${css.debug} btn btn-primary btn-sm\" data-shared=\"txLoggerDebugButton\" data-id=\"txLoggerDebugButton${data.tx.hash}\" onclick=${(e) => debug(e, data, self)}>Debug</div>\r\n        </div>\r\n        <i class=\"${css.arrow} fas fa-angle-down\"></i>\r\n      </div>\r\n    </span>\r\n  `\r\n  return tx\r\n}\r\n\r\nfunction renderCall (self, data) {\r\n  var to = data.resolvedData.contractName + '.' + data.resolvedData.fn\r\n  var from = data.tx.from ? data.tx.from : ' - '\r\n  var input = data.tx.input ? helper.shortenHexData(data.tx.input) : ''\r\n  var obj = { from, to }\r\n  var txType = 'call'\r\n  var tx = yo`\r\n    <span id=\"tx${data.tx.hash}\">\r\n      <div class=\"${css.log}\" onclick=${e => txDetails(e, tx, data, obj)}>\r\n        ${checkTxStatus(data.tx, txType)}\r\n        <span class=${css.txLog}>\r\n          <span class=${css.tx}>[call]</span>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>from:</span> ${from}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>to:</span> ${to}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>data:</span> ${input}</div>\r\n        </span>\r\n        <div class=${css.buttons}>\r\n          <div class=\"${css.debug} btn btn-primary btn-sm\" onclick=${(e) => debug(e, data, self)}>Debug</div>\r\n        </div>\r\n        <i class=\"${css.arrow} fas fa-angle-down\"></i>\r\n      </div>\r\n    </span>\r\n  `\r\n  return tx\r\n}\r\n\r\nfunction renderUnknownTransaction (self, data, blockchain) {\r\n  var from = data.tx.from\r\n  var to = data.tx.to\r\n  var obj = { from, to }\r\n  var txType = 'unknown' + (data.tx.isCall ? 'Call' : 'Tx')\r\n  var tx = yo`\r\n    <span id=\"tx${data.tx.hash}\">\r\n      <div class=\"${css.log}\" onclick=${e => txDetails(e, tx, data, obj)}>\r\n        ${checkTxStatus(data.receipt || data.tx, txType)}\r\n        ${context(self, { from, to, data }, blockchain)}\r\n        <div class=${css.buttons}>\r\n          <div class=\"${css.debug} btn btn-primary btn-sm\" onclick=${(e) => debug(e, data, self)}>Debug</div>\r\n        </div>\r\n        <i class=\"${css.arrow} fas fa-angle-down\"></i>\r\n      </div>\r\n    </span>\r\n  `\r\n  return tx\r\n}\r\n\r\nfunction renderEmptyBlock (self, data) {\r\n  return yo`\r\n    <span class=${css.txLog}>\r\n      <span class='${css.tx}'><div class=${css.txItem}>[<span class=${css.txItemTitle}>block:${data.block.number} - </span> 0 transactions]</span></span>\r\n    </span>`\r\n}\r\n\r\nfunction checkTxStatus (tx, type) {\r\n  if (tx.status === '0x1' || tx.status === true) {\r\n    return yo`<i class=\"${css.txStatus} ${css.succeeded} fas fa-check-circle\"></i>`\r\n  }\r\n  if (type === 'call' || type === 'unknownCall') {\r\n    return yo`<i class=\"${css.txStatus} ${css.call}\">call</i>`\r\n  } else if (tx.status === '0x0' || tx.status === false) {\r\n    return yo`<i class=\"${css.txStatus} ${css.failed} fas fa-times-circle\"></i>`\r\n  } else {\r\n    return yo`<i class=\"${css.txStatus} ${css.notavailable} fas fa-circle-thin\" title='Status not available' ></i>`\r\n  }\r\n}\r\n\r\nfunction context (self, opts, blockchain) {\r\n  var data = opts.data || ''\r\n  var from = opts.from ? helper.shortenHexData(opts.from) : ''\r\n  var to = opts.to\r\n  if (data.tx.to) to = to + ' ' + helper.shortenHexData(data.tx.to)\r\n  var val = data.tx.value\r\n  var hash = data.tx.hash ? helper.shortenHexData(data.tx.hash) : ''\r\n  var input = data.tx.input ? helper.shortenHexData(data.tx.input) : ''\r\n  var logs = data.logs && data.logs.decoded && data.logs.decoded.length ? data.logs.decoded.length : 0\r\n  var block = data.receipt ? data.receipt.blockNumber : data.tx.blockNumber || ''\r\n  var i = data.receipt ? data.receipt.transactionIndex : data.tx.transactionIndex\r\n  var value = val ? typeConversion.toInt(val) : 0\r\n  if (blockchain.getProvider() === 'vm') {\r\n    return yo`\r\n      <div>\r\n        <span class=${css.txLog}>\r\n          <span class=${css.tx}>[vm]</span>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>from:</span> ${from}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>to:</span> ${to}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>value:</span> ${value} wei</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>data:</span> ${input}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>logs:</span> ${logs}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>hash:</span> ${hash}</div>\r\n        </span>\r\n      </div>`\r\n  } else if (blockchain.getProvider() !== 'vm' && data.resolvedData) {\r\n    return yo`\r\n      <div>\r\n        <span class=${css.txLog}>\r\n        <span class='${css.tx}'>[block:${block} txIndex:${i}]</span>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>from:</span> ${from}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>to:</span> ${to}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>value:</span> ${value} wei</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>data:</span> ${input}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>logs:</span> ${logs}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>hash:</span> ${hash}</div>\r\n        </span>\r\n      </div>`\r\n  } else {\r\n    to = helper.shortenHexData(to)\r\n    hash = helper.shortenHexData(data.tx.blockHash)\r\n    return yo`\r\n      <div>\r\n        <span class=${css.txLog}>\r\n          <span class='${css.tx}'>[block:${block} txIndex:${i}]</span>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>from:</span> ${from}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>to:</span> ${to}</div>\r\n          <div class=${css.txItem}><span class=${css.txItemTitle}>value:</span> ${value} wei</div>\r\n        </span>\r\n      </div>`\r\n  }\r\n}\r\n\r\nmodule.exports = TxLogger\r\n\r\n// helpers\r\n\r\nfunction txDetails (e, tx, data, obj) {\r\n  const from = obj.from\r\n  const to = obj.to\r\n  const arrowUp = yo`<i class=\"${css.arrow} fas fa-angle-up\"></i>`\r\n  const arrowDown = yo`<i class=\"${css.arrow} fas fa-angle-down\"></i>`\r\n\r\n  let blockElement = e.target\r\n  while (true) { // get the parent block element\r\n    if (blockElement.className.startsWith('block')) break\r\n    else if (blockElement.parentElement) {\r\n      blockElement = blockElement.parentElement\r\n    } else break\r\n  }\r\n\r\n  let table = blockElement.querySelector(`#${tx.id} [class^=\"txTable\"]`)\r\n  const log = blockElement.querySelector(`#${tx.id} [class^='log']`)\r\n  const arrow = blockElement.querySelector(`#${tx.id} [class^='arrow']`)\r\n\r\n  if (table && table.parentNode) {\r\n    tx.removeChild(table)\r\n    log.removeChild(arrow)\r\n    log.appendChild(arrowDown)\r\n  } else {\r\n    log.removeChild(arrow)\r\n    log.appendChild(arrowUp)\r\n    table = createTable({\r\n      hash: data.tx.hash,\r\n      status: data.receipt ? data.receipt.status : null,\r\n      isCall: data.tx.isCall,\r\n      contractAddress: data.tx.contractAddress,\r\n      data: data.tx,\r\n      from,\r\n      to,\r\n      gas: data.tx.gas,\r\n      input: data.tx.input,\r\n      'decoded input': data.resolvedData && data.resolvedData.params ? JSON.stringify(typeConversion.stringify(data.resolvedData.params), null, '\\t') : ' - ',\r\n      'decoded output': data.resolvedData && data.resolvedData.decodedReturnValue ? JSON.stringify(typeConversion.stringify(data.resolvedData.decodedReturnValue), null, '\\t') : ' - ',\r\n      logs: data.logs,\r\n      val: data.tx.value,\r\n      transactionCost: data.tx.transactionCost,\r\n      executionCost: data.tx.executionCost\r\n    })\r\n    tx.appendChild(table)\r\n  }\r\n}\r\n\r\nfunction createTable (opts) {\r\n  var table = yo`<table class=\"${css.txTable}\" id=\"txTable\" data-id=\"txLoggerTable${opts.hash}\"></table>`\r\n  if (!opts.isCall) {\r\n    var msg = ''\r\n    if (opts.status !== undefined && opts.status !== null) {\r\n      if (opts.status === '0x0' || opts.status === false) {\r\n        msg = ' Transaction mined but execution failed'\r\n      } else if (opts.status === '0x1' || opts.status === true) {\r\n        msg = ' Transaction mined and execution succeed'\r\n      }\r\n    } else {\r\n      msg = ' Status not available at the moment'\r\n    }\r\n    table.appendChild(yo`\r\n      <tr class=\"${css.tr}\">\r\n        <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> status </td>\r\n        <td class=\"${css.td}\" data-id=\"txLoggerTableStatus${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts.status}${msg}</td>\r\n      </tr>`)\r\n  }\r\n\r\n  var transactionHash = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> transaction hash </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableHash${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts.hash}\r\n        ${copyToClipboard(() => opts.hash)}\r\n      </td>\r\n    </tr>\r\n  `\r\n  table.appendChild(transactionHash)\r\n\r\n  var contractAddress = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> contract address </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableContractAddress${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts.contractAddress}\r\n        ${copyToClipboard(() => opts.contractAddress)}\r\n      </td>\r\n    </tr>\r\n  `\r\n  if (opts.contractAddress) table.appendChild(contractAddress)\r\n\r\n  var from = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td} ${css.tableTitle}\" data-shared=\"key_${opts.hash}\"> from </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableFrom${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts.from}\r\n        ${copyToClipboard(() => opts.from)}\r\n      </td>\r\n    </tr>\r\n  `\r\n  if (opts.from) table.appendChild(from)\r\n\r\n  var toHash\r\n  var data = opts.data // opts.data = data.tx\r\n  if (data.to) {\r\n    toHash = opts.to + ' ' + data.to\r\n  } else {\r\n    toHash = opts.to\r\n  }\r\n  var to = yo`\r\n    <tr class=\"${css.tr}\">\r\n    <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> to </td>\r\n    <td class=\"${css.td}\" data-id=\"txLoggerTableTo${opts.hash}\" data-shared=\"pair_${opts.hash}\">${toHash}\r\n      ${copyToClipboard(() => data.to ? data.to : toHash)}\r\n    </td>\r\n    </tr>\r\n  `\r\n  if (opts.to) table.appendChild(to)\r\n\r\n  var gas = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> gas </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableGas${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts.gas} gas\r\n        ${copyToClipboard(() => opts.gas)}\r\n      </td>\r\n    </tr>\r\n  `\r\n  if (opts.gas) table.appendChild(gas)\r\n\r\n  var callWarning = ''\r\n  if (opts.isCall) {\r\n    callWarning = '(Cost only applies when called by a contract)'\r\n  }\r\n  if (opts.transactionCost) {\r\n    table.appendChild(yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> transaction cost </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableTransactionCost${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts.transactionCost} gas ${callWarning}\r\n        ${copyToClipboard(() => opts.transactionCost)}\r\n      </td>\r\n    </tr>`)\r\n  }\r\n\r\n  if (opts.executionCost) {\r\n    table.appendChild(yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> execution cost </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableExecutionHash${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts.executionCost} gas ${callWarning}\r\n        ${copyToClipboard(() => opts.executionCost)}\r\n      </td>\r\n    </tr>`)\r\n  }\r\n\r\n  var hash = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> hash </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableHash${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts.hash}\r\n        ${copyToClipboard(() => opts.hash)}\r\n      </td>\r\n    </tr>\r\n  `\r\n  if (opts.hash) table.appendChild(hash)\r\n\r\n  var input = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> input </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableInput${opts.hash}\" data-shared=\"pair_${opts.hash}\">${helper.shortenHexData(opts.input)}\r\n        ${copyToClipboard(() => opts.input)}\r\n      </td>\r\n    </tr>\r\n  `\r\n  if (opts.input) table.appendChild(input)\r\n\r\n  if (opts['decoded input']) {\r\n    var inputDecoded = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> decoded input </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableDecodedInput${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts['decoded input']}\r\n        ${copyToClipboard(() => opts['decoded input'])}\r\n      </td>\r\n    </tr>`\r\n    table.appendChild(inputDecoded)\r\n  }\r\n\r\n  if (opts['decoded output']) {\r\n    var outputDecoded = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> decoded output </td>\r\n      <td class=\"${css.td}\" id=\"decodedoutput\" data-id=\"txLoggerTableDecodedOutput${opts.hash}\" data-shared=\"pair_${opts.hash}\">${opts['decoded output']}\r\n        ${copyToClipboard(() => opts['decoded output'])}\r\n      </td>\r\n    </tr>`\r\n    table.appendChild(outputDecoded)\r\n  }\r\n\r\n  var stringified = ' - '\r\n  if (opts.logs && opts.logs.decoded) {\r\n    stringified = typeConversion.stringify(opts.logs.decoded)\r\n  }\r\n  var logs = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> logs </td>\r\n      <td class=\"${css.td}\" id=\"logs\" data-id=\"txLoggerTableLogs${opts.hash}\" data-shared=\"pair_${opts.hash}\">\r\n        ${JSON.stringify(stringified, null, '\\t')}\r\n        ${copyToClipboard(() => JSON.stringify(stringified, null, '\\t'))}\r\n        ${copyToClipboard(() => JSON.stringify(opts.logs.raw || '0'))}\r\n      </td>\r\n    </tr>\r\n  `\r\n  if (opts.logs) table.appendChild(logs)\r\n\r\n  var val = opts.val != null ? typeConversion.toInt(opts.val) : 0\r\n  val = yo`\r\n    <tr class=\"${css.tr}\">\r\n      <td class=\"${css.td}\" data-shared=\"key_${opts.hash}\"> value </td>\r\n      <td class=\"${css.td}\" data-id=\"txLoggerTableValue${opts.hash}\" data-shared=\"pair_${opts.hash}\">${val} wei\r\n        ${copyToClipboard(() => `${val} wei`)}\r\n      </td>\r\n    </tr>\r\n  `\r\n  if (opts.val) table.appendChild(val)\r\n\r\n  return table\r\n}\r\n","/* global */\r\n'use strict'\r\n\r\nvar $ = require('jquery')\r\nvar yo = require('yo-yo')\r\nvar ethJSUtil = require('ethereumjs-util')\r\nvar BN = ethJSUtil.BN\r\nvar helper = require('../../lib/helper')\r\nvar copyToClipboard = require('./copy-to-clipboard')\r\nvar css = require('../../universal-dapp-styles')\r\nvar MultiParamManager = require('./multiParamManager')\r\nvar remixLib = require('@remix-project/remix-lib')\r\nvar txFormat = remixLib.execution.txFormat\r\nconst txHelper = remixLib.execution.txHelper\r\nvar TreeView = require('./TreeView')\r\nvar txCallBacks = require('./sendTxCallbacks')\r\n\r\nfunction UniversalDAppUI (blockchain, logCallback) {\r\n  this.blockchain = blockchain\r\n  this.logCallback = logCallback\r\n  this.compilerData = { contractsDetails: {} }\r\n}\r\n\r\nfunction decodeResponseToTreeView (response, fnabi) {\r\n  var treeView = new TreeView({\r\n    extractData: (item, parent, key) => {\r\n      var ret = {}\r\n      if (BN.isBN(item)) {\r\n        ret.self = item.toString(10)\r\n        ret.children = []\r\n      } else {\r\n        ret = treeView.extractDataDefault(item, parent, key)\r\n      }\r\n      return ret\r\n    }\r\n  })\r\n  return treeView.render(txFormat.decodeResponse(response, fnabi))\r\n}\r\n\r\nUniversalDAppUI.prototype.renderInstance = function (contract, address, contractName) {\r\n  var noInstances = document.querySelector('[data-id=\"deployAndRunNoInstanceText\"]')\r\n  if (noInstances) {\r\n    noInstances.parentNode.removeChild(noInstances)\r\n  }\r\n  const abi = txHelper.sortAbiFunction(contract.abi)\r\n  return this.renderInstanceFromABI(abi, address, contractName)\r\n}\r\n\r\n// TODO this function was named before \"appendChild\".\r\n// this will render an instance: contract name, contract address, and all the public functions\r\n// basically this has to be called for the \"atAddress\" (line 393) and when a contract creation succeed\r\n// this returns a DOM element\r\nUniversalDAppUI.prototype.renderInstanceFromABI = function (contractABI, address, contractName) {\r\n  const self = this\r\n  address = (address.slice(0, 2) === '0x' ? '' : '0x') + address.toString('hex')\r\n  address = ethJSUtil.toChecksumAddress(address)\r\n  var instance = yo`<div class=\"instance run-instance border-dark ${css.instance} ${css.hidesub}\" id=\"instance${address}\" data-shared=\"universalDappUiInstance\"></div>`\r\n  const context = this.blockchain.context()\r\n\r\n  var shortAddress = helper.shortenAddress(address)\r\n  var title = yo`\r\n    <div class=\"${css.title} alert alert-secondary\">\r\n      <button data-id=\"universalDappUiTitleExpander\" class=\"btn ${css.titleExpander}\" onclick=\"${(e) => { toggleClass(e) }}\">\r\n        <i class=\"fas fa-angle-right\" aria-hidden=\"true\"></i>\r\n      </button>\r\n      <div class=\"input-group ${css.nameNbuts}\">\r\n        <div class=\"${css.titleText} input-group-prepend\">\r\n          <span class=\"input-group-text ${css.spanTitleText}\">\r\n            ${contractName} at ${shortAddress} (${context})\r\n          </span>\r\n        </div>\r\n        <div class=\"btn-group\">\r\n          <button class=\"btn p-1 btn-secondary\">${copyToClipboard(() => address)}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `\r\n\r\n  var close = yo`\r\n    <button\r\n      class=\"${css.udappClose} mr-1 p-1 btn btn-secondary align-items-center\"\r\n      data-id=\"universalDappUiUdappClose\"\r\n      onclick=${remove}\r\n      title=\"Remove from the list\"\r\n    >\r\n      <i class=\"${css.closeIcon} fas fa-times\" aria-hidden=\"true\"></i>\r\n    </button>`\r\n  title.querySelector('.btn-group').appendChild(close)\r\n\r\n  var contractActionsWrapper = yo`\r\n    <div class=\"${css.cActionsWrapper}\" data-id=\"universalDappUiContractActionWrapper\">\r\n    </div>\r\n  `\r\n\r\n  function remove () {\r\n    instance.remove()\r\n    // @TODO perhaps add a callack here to warn the caller that the instance has been removed\r\n  }\r\n\r\n  function toggleClass (e) {\r\n    $(instance).toggleClass(`${css.hidesub} bg-light`)\r\n    // e.currentTarget.querySelector('i')\r\n    e.currentTarget.querySelector('i').classList.toggle('fa-angle-right')\r\n    e.currentTarget.querySelector('i').classList.toggle('fa-angle-down')\r\n  }\r\n\r\n  instance.appendChild(title)\r\n  instance.appendChild(contractActionsWrapper)\r\n\r\n  $.each(contractABI, (i, funABI) => {\r\n    if (funABI.type !== 'function') {\r\n      return\r\n    }\r\n    // @todo getData cannot be used with overloaded functions\r\n    contractActionsWrapper.appendChild(this.getCallButton({\r\n      funABI: funABI,\r\n      address: address,\r\n      contractABI: contractABI,\r\n      contractName: contractName\r\n    }))\r\n  })\r\n\r\n  const calldataInput = yo`\r\n    <input id=\"deployAndRunLLTxCalldata\" class=\"${css.calldataInput} form-control\" title=\"The Calldata to send to fallback function of the contract.\">\r\n  `\r\n  const llIError = yo`\r\n    <label id=\"deployAndRunLLTxError\" class=\"text-danger my-2\"></label>\r\n  `\r\n  // constract LLInteractions elements\r\n  const lowLevelInteracions = yo`\r\n    <div class=\"d-flex flex-column\">\r\n      <div class=\"d-flex flex-row justify-content-between mt-2\">\r\n        <div class=\"py-2 border-top d-flex justify-content-start flex-grow-1\">\r\n          Low level interactions\r\n        </div>\r\n        <a\r\n          href=\"https://solidity.readthedocs.io/en/v0.6.2/contracts.html#receive-ether-function\"\r\n          title=\"check out docs for using 'receive'/'fallback'\"\r\n          target=\"_blank\"\r\n        >\r\n          <i aria-hidden=\"true\" class=\"fas fa-info my-2 mr-1\"></i>\r\n        </a>\r\n      </div>\r\n      <div class=\"d-flex flex-column align-items-start\">\r\n        <label class=\"\">CALLDATA</label>\r\n        <div class=\"d-flex justify-content-end w-100 align-items-center\">\r\n          ${calldataInput}\r\n          <button id=\"deployAndRunLLTxSendTransaction\" data-id=\"pluginManagerSettingsDeployAndRunLLTxSendTransaction\" class=\"${css.instanceButton} p-0 w-50 btn border-warning text-warning\" title=\"Send data to contract.\" onclick=${() => sendData()}>Transact</button>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        ${llIError}\r\n      </div>\r\n    </div>\r\n  `\r\n\r\n  function sendData () {\r\n    function setLLIError (text) {\r\n      llIError.innerText = text\r\n    }\r\n\r\n    setLLIError('')\r\n    const fallback = txHelper.getFallbackInterface(contractABI)\r\n    const receive = txHelper.getReceiveInterface(contractABI)\r\n    const args = {\r\n      funABI: fallback || receive,\r\n      address: address,\r\n      contractName: contractName,\r\n      contractABI: contractABI\r\n    }\r\n    const amount = document.querySelector('#value').value\r\n    if (amount !== '0') {\r\n      // check for numeric and receive/fallback\r\n      if (!helper.isNumeric(amount)) {\r\n        return setLLIError('Value to send should be a number')\r\n      } else if (!receive && !(fallback && fallback.stateMutability === 'payable')) {\r\n        return setLLIError(\"In order to receive Ether transfer the contract should have either 'receive' or payable 'fallback' function\")\r\n      }\r\n    }\r\n    let calldata = calldataInput.value\r\n    if (calldata) {\r\n      if (calldata.length < 4 && helper.is0XPrefixed(calldata)) {\r\n        return setLLIError('The calldata should be a valid hexadecimal value with size of at least one byte.')\r\n      } else {\r\n        if (helper.is0XPrefixed(calldata)) {\r\n          calldata = calldata.substr(2, calldata.length)\r\n        }\r\n        if (!helper.isHexadecimal(calldata)) {\r\n          return setLLIError('The calldata should be a valid hexadecimal value.')\r\n        }\r\n      }\r\n      if (!fallback) {\r\n        return setLLIError(\"'Fallback' function is not defined\")\r\n      }\r\n    }\r\n\r\n    if (!receive && !fallback) return setLLIError('Both \\'receive\\' and \\'fallback\\' functions are not defined')\r\n\r\n    // we have to put the right function ABI:\r\n    // if receive is defined and that there is no calldata => receive function is called\r\n    // if fallback is defined => fallback function is called\r\n    if (receive && !calldata) args.funABI = receive\r\n    else if (fallback) args.funABI = fallback\r\n\r\n    if (!args.funABI) return setLLIError('Please define a \\'Fallback\\' function to send calldata and a either \\'Receive\\' or payable \\'Fallback\\' to send ethers')\r\n    self.runTransaction(false, args, null, calldataInput.value, null)\r\n  }\r\n\r\n  contractActionsWrapper.appendChild(lowLevelInteracions)\r\n  return instance\r\n}\r\n\r\n// TODO this is used by renderInstance when a new instance is displayed.\r\n// this returns a DOM element.\r\nUniversalDAppUI.prototype.getCallButton = function (args) {\r\n  const self = this\r\n  var outputOverride = yo`<div class=${css.value}></div>` // show return value\r\n  const isConstant = args.funABI.constant !== undefined ? args.funABI.constant : false\r\n  const lookupOnly = args.funABI.stateMutability === 'view' || args.funABI.stateMutability === 'pure' || isConstant\r\n  const multiParamManager = new MultiParamManager(\r\n    lookupOnly,\r\n    args.funABI,\r\n    (valArray, inputsValues) => self.runTransaction(lookupOnly, args, valArray, inputsValues, outputOverride),\r\n    self.blockchain.getInputs(args.funABI)\r\n  )\r\n\r\n  const contractActionsContainer = yo`<div class=\"${css.contractActionsContainer}\" >${multiParamManager.render()}</div>`\r\n  contractActionsContainer.appendChild(outputOverride)\r\n\r\n  return contractActionsContainer\r\n}\r\n\r\nUniversalDAppUI.prototype.runTransaction = function (lookupOnly, args, valArr, inputsValues, outputOverride) {\r\n  const functionName = args.funABI.type === 'function' ? args.funABI.name : `(${args.funABI.type})`\r\n  const logMsg = `${lookupOnly ? 'call' : 'transact'} to ${args.contractName}.${functionName}`\r\n\r\n  const callbacksInContext = txCallBacks.getCallBacksWithContext(this, this.blockchain)\r\n\r\n  const outputCb = (returnValue) => {\r\n    if (outputOverride) {\r\n      const decoded = decodeResponseToTreeView(returnValue, args.funABI)\r\n      outputOverride.innerHTML = ''\r\n      outputOverride.appendChild(decoded)\r\n    }\r\n  }\r\n  const params = args.funABI.type !== 'fallback' ? inputsValues : ''\r\n  this.blockchain.runOrCallContractMethod(\r\n    args.contractName,\r\n    args.contractAbi,\r\n    args.funABI,\r\n    inputsValues,\r\n    args.address,\r\n    params,\r\n    lookupOnly,\r\n    logMsg,\r\n    this.logCallback,\r\n    outputCb,\r\n    callbacksInContext.confirmationCb.bind(callbacksInContext),\r\n    callbacksInContext.continueCb.bind(callbacksInContext),\r\n    callbacksInContext.promptCb.bind(callbacksInContext))\r\n}\r\n\r\nmodule.exports = UniversalDAppUI\r\n","/* eslint-disable */\r\nace.define(\"ace/theme/remixDark\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(acequire, exports, module) {\r\n\r\n  exports.isDark = true;\r\n  exports.cssClass = \"ace-remixDark\";\r\n  exports.cssText = \".ace-remixDark .ace_gutter {\\\r\n  background: #2a2c3f;\\\r\n  color: #8789a1;\\\r\n  border-right: 1px solid #282828;\\\r\n  }\\\r\n  .ace-remixDark .ace_gutter-cell.ace_warning {\\\r\n  background-image: none;\\\r\n  background: #FC0;\\\r\n  border-left: none;\\\r\n  padding-left: 0;\\\r\n  color: #000;\\\r\n  }\\\r\n  .ace-remixDark .ace_gutter-cell.ace_error {\\\r\n  background-position: -6px center;\\\r\n  background-image: none;\\\r\n  background: #F10;\\\r\n  border-left: none;\\\r\n  padding-left: 0;\\\r\n  color: #000;\\\r\n  }\\\r\n  .ace-remixDark .ace_print-margin {\\\r\n  border-left: 1px solid #555;\\\r\n  right: 0;\\\r\n  background: #1D1D1D;\\\r\n  }\\\r\n  .ace-remixDark {\\\r\n  background-color: #222336;\\\r\n  color: #a2a3bd;\\\r\n  }\\\r\n  .ace-remixDark .ace_cursor {\\\r\n  border-left: 2px solid #FFFFFF;\\\r\n  }\\\r\n  .ace-remixDark .ace_cursor.ace_overwrite {\\\r\n  border-left: 0px;\\\r\n  border-bottom: 1px solid #FFFFFF;\\\r\n  }\\\r\n  .ace-remixDark .ace_marker-layer .ace_selection {\\\r\n  background: #494836;\\\r\n  }\\\r\n  .ace-remixDark .ace_marker-layer .ace_step {\\\r\n  background: rgb(198, 219, 174);\\\r\n  }\\\r\n  .ace-remixDark .ace_marker-layer .ace_bracket {\\\r\n  margin: -1px 0 0 -1px;\\\r\n  border: 1px solid #FCE94F;\\\r\n  }\\\r\n  .ace-remixDark .ace_marker-layer .ace_active-line {\\\r\n  background: #262843;\\\r\n  }\\\r\n  .ace-remixDark .ace_gutter-active-line {\\\r\n  background-color: #363950;\\\r\n  }\\\r\n  .ace-remixDark .ace_invisible {\\\r\n  color: #404040;\\\r\n  }\\\r\n  .ace-remixDark .ace_rparen {\\\r\n    color: #d4d7ed;\\\r\n  }\\\r\n  .ace-remixDark .ace_lparen {\\\r\n    color: #d4d7ed;\\\r\n  }\\\r\n  .ace-remixDark .ace_keyword {\\\r\n  color:#ffa76d;\\\r\n  }\\\r\n  .ace-remixDark .ace_keyword.ace_operator {\\\r\n  color:#eceeff;\\\r\n  }\\\r\n  .ace-remixDark .ace_constant {\\\r\n  color:#1EDAFB;\\\r\n  }\\\r\n  .ace-remixDark .ace_constant.ace_language {\\\r\n  color:#FDC251;\\\r\n  }\\\r\n  .ace-remixDark .ace_constant.ace_library {\\\r\n  color:#8DFF0A;\\\r\n  }\\\r\n  .ace-remixDark .ace_constant.ace_numeric {\\\r\n  color:#eceeff;\\\r\n  }\\\r\n  .ace-remixDark .ace_invalid {\\\r\n  color:#FFFFFF;\\\r\n  background-color:#990000;\\\r\n  }\\\r\n  .ace-remixDark .ace_invalid.ace_deprecated {\\\r\n  color:#FFFFFF;\\\r\n  background-color:#990000;\\\r\n  }\\\r\n  .ace-remixDark .ace_support {\\\r\n  color: #999;\\\r\n  }\\\r\n  .ace-remixDark .ace_support.ace_function {\\\r\n  color:#3fe2a7;\\\r\n  }\\\r\n  .ace-remixDark .ace_function {\\\r\n  color:#3fe2a7;\\\r\n  }\\\r\n  .ace-remixDark .ace_string {\\\r\n  color:#eceeff;\\\r\n  }\\\r\n  .ace-remixDark .ace_comment {\\\r\n  color:#a7a7a7;\\\r\n  font-style:italic;\\\r\n  padding-bottom: 0px;\\\r\n  }\\\r\n  .ace-remixDark .ace_type {\\\r\n  color:#75ceef;\\\r\n  }]\\\r\n  .ace-remixDark .ace_visibility (\\\r\n    color:#f7d777;\\\r\n  )\\\r\n  .ace-remixDark .ace_identifier {\\\r\n    color:#bec1dd;\\\r\n  }\\\r\n  .ace-remixDark .ace_modifier {\\\r\n    color:#efff2f;\\\r\n  }\\\r\n  .ace-remixDark .ace-boolean {\\\r\n    color:#ff86ac;\\\r\n  }\\\r\n  .ace-remixDark .ace_statemutability {\\\r\n    color:#FFCC00;\\\r\n  }\\\r\n  .ace-remixDark .ace_variable {\\\r\n  color:#e0bb83;\\\r\n  }\\\r\n  .ace-remixDark .ace_meta.ace_tag {\\\r\n  color:#BE53E6;\\\r\n  }\\\r\n  .ace-remixDark .ace_entity.ace_other.ace_attribute-name {\\\r\n  color:#4aa8fd;\\\r\n  }\\\r\n  .ace-remixDark .ace_markup.ace_underline {\\\r\n  text-decoration: underline;\\\r\n  }\\\r\n  .ace-remixDark .ace_fold-widget {\\\r\n  text-align: center;\\\r\n  }\\\r\n  .ace-remixDark .ace_fold-widget:hover {\\\r\n  color: #777;\\\r\n  }\\\r\n  .ace-remixDark .ace_fold-widget.ace_start,\\\r\n  .ace-remixDark .ace_fold-widget.ace_end,\\\r\n  .ace-remixDark .ace_fold-widget.ace_closed{\\\r\n  background: none;\\\r\n  border: none;\\\r\n  box-shadow: none;\\\r\n  }\\\r\n  .ace-remixDark .ace_fold-widget.ace_start:after {\\\r\n  content: '▾'\\\r\n  }\\\r\n  .ace-remixDark .ace_fold-widget.ace_end:after {\\\r\n  content: '▴'\\\r\n  }\\\r\n  .ace-remixDark .ace_fold-widget.ace_closed:after {\\\r\n  content: '‣'\\\r\n  }\\\r\n  .ace-remixDark .ace_indent-guide {\\\r\n  border-right:1px dotted #333;\\\r\n  margin-right:-1px;\\\r\n  }\\\r\n  .ace-remixDark .ace_fold { \\\r\n  background: #222; \\\r\n  border-radius: 3px; \\\r\n  color: #7AF; \\\r\n  border: none; \\\r\n  }\\\r\n  .ace-remixDark .ace_fold:hover {\\\r\n  background: #CCC; \\\r\n  color: #000;\\\r\n  }\\\r\n  \";\r\n  \r\n  var dom = acequire(\"../lib/dom\");\r\n  dom.importCssString(exports.cssText, exports.cssClass);\r\n  \r\n  });","const remixLib = require('@remix-project/remix-lib')\r\nconst txFormat = remixLib.execution.txFormat\r\nconst txExecution = remixLib.execution.txExecution\r\nconst typeConversion = remixLib.execution.typeConversion\r\nconst Txlistener = remixLib.execution.txListener\r\nconst TxRunner = remixLib.execution.txRunner\r\nconst txHelper = remixLib.execution.txHelper\r\nconst EventManager = remixLib.EventManager\r\nconst executionContext = remixLib.execution.executionContext\r\nconst Web3 = require('web3')\r\n\r\nconst async = require('async')\r\nconst { EventEmitter } = require('events')\r\n\r\nconst { resultToRemixTx } = require('./txResultHelper')\r\n\r\nconst VMProvider = require('./providers/vm.js')\r\nconst InjectedProvider = require('./providers/injected.js')\r\nconst NodeProvider = require('./providers/node.js')\r\n\r\nclass Blockchain {\r\n  // NOTE: the config object will need to be refactored out in remix-lib\r\n  constructor (config) {\r\n    this.event = new EventManager()\r\n    this.executionContext = executionContext\r\n\r\n    this.events = new EventEmitter()\r\n    this.config = config\r\n\r\n    this.txRunner = new TxRunner({}, {\r\n      config: config,\r\n      detectNetwork: (cb) => {\r\n        this.executionContext.detectNetwork(cb)\r\n      },\r\n      personalMode: () => {\r\n        return this.getProvider() === 'web3' ? this.config.get('settings/personal-mode') : false\r\n      }\r\n    }, this.executionContext)\r\n    this.executionContext.event.register('contextChanged', this.resetEnvironment.bind(this))\r\n\r\n    this.networkcallid = 0\r\n    this.setupEvents()\r\n    this.setupProviders()\r\n  }\r\n\r\n  setupEvents () {\r\n    this.executionContext.event.register('contextChanged', (context, silent) => {\r\n      this.event.trigger('contextChanged', [context, silent])\r\n    })\r\n\r\n    this.executionContext.event.register('addProvider', (network) => {\r\n      this.event.trigger('addProvider', [network])\r\n    })\r\n\r\n    this.executionContext.event.register('removeProvider', (name) => {\r\n      this.event.trigger('removeProvider', [name])\r\n    })\r\n  }\r\n\r\n  setupProviders () {\r\n    this.providers = {}\r\n    this.providers.vm = new VMProvider(this.executionContext)\r\n    this.providers.injected = new InjectedProvider(this.executionContext)\r\n    this.providers.web3 = new NodeProvider(this.executionContext, this.config)\r\n  }\r\n\r\n  getCurrentProvider () {\r\n    const provider = this.getProvider()\r\n    if (this.providers[provider]) return this.providers[provider]\r\n    return this.providers.web3 // default to the common type of provider\r\n  }\r\n\r\n  /** Return the list of accounts */\r\n  // note: the dual promise/callback is kept for now as it was before\r\n  getAccounts (cb) {\r\n    return new Promise((resolve, reject) => {\r\n      this.getCurrentProvider().getAccounts((error, accounts) => {\r\n        if (cb) {\r\n          return cb(error, accounts)\r\n        }\r\n        if (error) {\r\n          reject(error)\r\n        }\r\n        resolve(accounts)\r\n      })\r\n    })\r\n  }\r\n\r\n  deployContractAndLibraries (selectedContract, args, contractMetadata, compilerContracts, callbacks, confirmationCb) {\r\n    const { continueCb, promptCb, statusCb, finalCb } = callbacks\r\n    const constructor = selectedContract.getConstructorInterface()\r\n    txFormat.buildData(selectedContract.name, selectedContract.object, compilerContracts, true, constructor, args, (error, data) => {\r\n      if (error) return statusCb(`creation of ${selectedContract.name} errored: ` + error)\r\n\r\n      statusCb(`creation of ${selectedContract.name} pending...`)\r\n      this.createContract(selectedContract, data, continueCb, promptCb, confirmationCb, finalCb)\r\n    }, statusCb, (data, runTxCallback) => {\r\n      // called for libraries deployment\r\n      this.runTx(data, confirmationCb, continueCb, promptCb, runTxCallback)\r\n    })\r\n  }\r\n\r\n  deployContractWithLibrary (selectedContract, args, contractMetadata, compilerContracts, callbacks, confirmationCb) {\r\n    const { continueCb, promptCb, statusCb, finalCb } = callbacks\r\n    const constructor = selectedContract.getConstructorInterface()\r\n    txFormat.encodeConstructorCallAndLinkLibraries(selectedContract.object, args, constructor, contractMetadata.linkReferences, selectedContract.bytecodeLinkReferences, (error, data) => {\r\n      if (error) return statusCb(`creation of ${selectedContract.name} errored: ` + (error.message ? error.message : error))\r\n\r\n      statusCb(`creation of ${selectedContract.name} pending...`)\r\n      this.createContract(selectedContract, data, continueCb, promptCb, confirmationCb, finalCb)\r\n    })\r\n  }\r\n\r\n  createContract (selectedContract, data, continueCb, promptCb, confirmationCb, finalCb) {\r\n    if (data) {\r\n      data.contractName = selectedContract.name\r\n      data.linkReferences = selectedContract.bytecodeLinkReferences\r\n      data.contractABI = selectedContract.abi\r\n    }\r\n\r\n    this.runTx({ data: data, useCall: false }, confirmationCb, continueCb, promptCb,\r\n      (error, txResult, address) => {\r\n        if (error) {\r\n          return finalCb(`creation of ${selectedContract.name} errored: ${(error.message ? error.message : error)}`)\r\n        }\r\n        if (txResult.result.status && txResult.result.status === '0x0') {\r\n          return finalCb(`creation of ${selectedContract.name} errored: transaction execution failed`)\r\n        }\r\n        finalCb(null, selectedContract, address)\r\n      }\r\n    )\r\n  }\r\n\r\n  determineGasPrice (cb) {\r\n    this.getCurrentProvider().getGasPrice((error, gasPrice) => {\r\n      const warnMessage = ' Please fix this issue before sending any transaction. '\r\n      if (error) {\r\n        return cb('Unable to retrieve the current network gas price.' + warnMessage + error)\r\n      }\r\n      try {\r\n        const gasPriceValue = this.fromWei(gasPrice, false, 'gwei')\r\n        cb(null, gasPriceValue)\r\n      } catch (e) {\r\n        cb(warnMessage + e.message, null, false)\r\n      }\r\n    })\r\n  }\r\n\r\n  getInputs (funABI) {\r\n    if (!funABI.inputs) {\r\n      return ''\r\n    }\r\n    return txHelper.inputParametersDeclarationToString(funABI.inputs)\r\n  }\r\n\r\n  fromWei (value, doTypeConversion, unit) {\r\n    if (doTypeConversion) {\r\n      return Web3.utils.fromWei(typeConversion.toInt(value), unit || 'ether')\r\n    }\r\n    return Web3.utils.fromWei(value.toString(10), unit || 'ether')\r\n  }\r\n\r\n  toWei (value, unit) {\r\n    return Web3.utils.toWei(value, unit || 'gwei')\r\n  }\r\n\r\n  calculateFee (gas, gasPrice, unit) {\r\n    return Web3.utils.toBN(gas).mul(Web3.utils.toBN(Web3.utils.toWei(gasPrice.toString(10), unit || 'gwei')))\r\n  }\r\n\r\n  determineGasFees (tx) {\r\n    const determineGasFeesCb = (gasPrice, cb) => {\r\n      let txFeeText, priceStatus\r\n      // TODO: this try catch feels like an anti pattern, can/should be\r\n      // removed, but for now keeping the original logic\r\n      try {\r\n        const fee = this.calculateFee(tx.gas, gasPrice)\r\n        txFeeText = ' ' + this.fromWei(fee, false, 'ether') + ' Ether'\r\n        priceStatus = true\r\n      } catch (e) {\r\n        txFeeText = ' Please fix this issue before sending any transaction. ' + e.message\r\n        priceStatus = false\r\n      }\r\n      cb(txFeeText, priceStatus)\r\n    }\r\n\r\n    return determineGasFeesCb\r\n  }\r\n\r\n  changeExecutionContext (context, confirmCb, infoCb, cb) {\r\n    return this.executionContext.executionContextChange(context, null, confirmCb, infoCb, cb)\r\n  }\r\n\r\n  setProviderFromEndpoint (target, context, cb) {\r\n    return this.executionContext.setProviderFromEndpoint(target, context, cb)\r\n  }\r\n\r\n  updateNetwork (cb) {\r\n    this.executionContext.detectNetwork((err, { id, name } = {}) => {\r\n      if (err) {\r\n        return cb(err)\r\n      }\r\n      cb(null, { id, name })\r\n    })\r\n  }\r\n\r\n  detectNetwork (cb) {\r\n    return this.executionContext.detectNetwork(cb)\r\n  }\r\n\r\n  getProvider () {\r\n    return this.executionContext.getProvider()\r\n  }\r\n\r\n  isWeb3Provider () {\r\n    const isVM = this.getProvider() === 'vm'\r\n    const isInjected = this.getProvider() === 'injected'\r\n    return (!isVM && !isInjected)\r\n  }\r\n\r\n  isInjectedWeb3 () {\r\n    return this.getProvider() === 'injected'\r\n  }\r\n\r\n  signMessage (message, account, passphrase, cb) {\r\n    this.getCurrentProvider().signMessage(message, account, passphrase, cb)\r\n  }\r\n\r\n  web3 () {\r\n    // @todo(https://github.com/ethereum/remix-project/issues/431)\r\n    const isVM = this.getProvider() === 'vm'\r\n    if (isVM) {\r\n      return this.providers.vm.web3\r\n    }\r\n    return this.executionContext.web3()\r\n  }\r\n\r\n  getTxListener (opts) {\r\n    opts.event = {\r\n      // udapp: this.udapp.event\r\n      udapp: this.event\r\n    }\r\n    const txlistener = new Txlistener(opts, this.executionContext)\r\n    return txlistener\r\n  }\r\n\r\n  runOrCallContractMethod (contractName, contractAbi, funABI, value, address, callType, lookupOnly, logMsg, logCallback, outputCb, confirmationCb, continueCb, promptCb) {\r\n    // contractsDetails is used to resolve libraries\r\n    txFormat.buildData(contractName, contractAbi, {}, false, funABI, callType, (error, data) => {\r\n      if (error) {\r\n        return logCallback(`${logMsg} errored: ${error} `)\r\n      }\r\n      if (!lookupOnly) {\r\n        logCallback(`${logMsg} pending ... `)\r\n      } else {\r\n        logCallback(`${logMsg}`)\r\n      }\r\n      if (funABI.type === 'fallback') data.dataHex = value\r\n\r\n      const useCall = funABI.stateMutability === 'view' || funABI.stateMutability === 'pure'\r\n      this.runTx({ to: address, data, useCall }, confirmationCb, continueCb, promptCb, (error, txResult, _address, returnValue) => {\r\n        if (error) {\r\n          return logCallback(`${logMsg} errored: ${error} `)\r\n        }\r\n        if (lookupOnly) {\r\n          outputCb(returnValue)\r\n        }\r\n      })\r\n    },\r\n    (msg) => {\r\n      logCallback(msg)\r\n    },\r\n    (data, runTxCallback) => {\r\n      // called for libraries deployment\r\n      this.runTx(data, confirmationCb, runTxCallback, promptCb, () => {})\r\n    })\r\n  }\r\n\r\n  context () {\r\n    return (this.executionContext.isVM() ? 'memory' : 'blockchain')\r\n  }\r\n\r\n  // NOTE: the config is only needed because exectuionContext.init does\r\n  // if config.get('settings/always-use-vm'), we can simplify this later\r\n  resetAndInit (config, transactionContextAPI) {\r\n    this.transactionContextAPI = transactionContextAPI\r\n    this.executionContext.init(config)\r\n    this.executionContext.stopListenOnLastBlock()\r\n    this.executionContext.listenOnLastBlock()\r\n    this.resetEnvironment()\r\n  }\r\n\r\n  addProvider (provider) {\r\n    this.executionContext.addProvider(provider)\r\n  }\r\n\r\n  removeProvider (name) {\r\n    this.executionContext.removeProvider(name)\r\n  }\r\n\r\n  // TODO : event should be triggered by Udapp instead of TxListener\r\n  /** Listen on New Transaction. (Cannot be done inside constructor because txlistener doesn't exist yet) */\r\n  startListening (txlistener) {\r\n    txlistener.event.register('newTransaction', (tx) => {\r\n      this.events.emit('newTransaction', tx)\r\n    })\r\n  }\r\n\r\n  resetEnvironment () {\r\n    this.getCurrentProvider().resetEnvironment()\r\n    // TODO: most params here can be refactored away in txRunner\r\n    // this.txRunner = new TxRunner(this.providers.vm.accounts, {\r\n    this.txRunner = new TxRunner(this.providers.vm.RemixSimulatorProvider.Accounts.accounts, {\r\n      // TODO: only used to check value of doNotShowTransactionConfirmationAgain property\r\n      config: this.config,\r\n      // TODO: to refactor, TxRunner already has access to executionContext\r\n      detectNetwork: (cb) => {\r\n        this.executionContext.detectNetwork(cb)\r\n      },\r\n      personalMode: () => {\r\n        return this.getProvider() === 'web3' ? this.config.get('settings/personal-mode') : false\r\n      }\r\n    }, this.executionContext)\r\n    this.txRunner.event.register('transactionBroadcasted', (txhash) => {\r\n      this.executionContext.detectNetwork((error, network) => {\r\n        if (error || !network) return\r\n        this.event.trigger('transactionBroadcasted', [txhash, network.name])\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create a VM Account\r\n   * @param {{privateKey: string, balance: string}} newAccount The new account to create\r\n   */\r\n  createVMAccount (newAccount) {\r\n    if (this.getProvider() !== 'vm') {\r\n      throw new Error('plugin API does not allow creating a new account through web3 connection. Only vm mode is allowed')\r\n    }\r\n    return this.providers.vm.createVMAccount(newAccount)\r\n  }\r\n\r\n  newAccount (_password, passwordPromptCb, cb) {\r\n    return this.getCurrentProvider().newAccount(passwordPromptCb, cb)\r\n  }\r\n\r\n  /** Get the balance of an address, and convert wei to ether */\r\n  getBalanceInEther (address, cb) {\r\n    this.getCurrentProvider().getBalanceInEther(address, cb)\r\n  }\r\n\r\n  pendingTransactionsCount () {\r\n    return Object.keys(this.txRunner.pendingTxs).length\r\n  }\r\n\r\n  /**\r\n   * This function send a tx only to javascript VM or testnet, will return an error for the mainnet\r\n   * SHOULD BE TAKEN CAREFULLY!\r\n   *\r\n   * @param {Object} tx    - transaction.\r\n   */\r\n  sendTransaction (tx) {\r\n    return new Promise((resolve, reject) => {\r\n      this.executionContext.detectNetwork((error, network) => {\r\n        if (error) return reject(error)\r\n        if (network.name === 'Main' && network.id === '1') {\r\n          return reject(new Error('It is not allowed to make this action against mainnet'))\r\n        }\r\n\r\n        this.txRunner.rawRun(\r\n          tx,\r\n          (network, tx, gasEstimation, continueTxExecution, cancelCb) => { continueTxExecution() },\r\n          (error, continueTxExecution, cancelCb) => { if (error) { reject(error) } else { continueTxExecution() } },\r\n          (okCb, cancelCb) => { okCb() },\r\n          (error, result) => {\r\n            if (error) return reject(error)\r\n            try {\r\n              resolve(resultToRemixTx(result))\r\n            } catch (e) {\r\n              reject(e)\r\n            }\r\n          }\r\n        )\r\n      })\r\n    })\r\n  }\r\n\r\n  runTx (args, confirmationCb, continueCb, promptCb, cb) {\r\n    const self = this\r\n    async.waterfall([\r\n      function getGasLimit (next) {\r\n        if (self.transactionContextAPI.getGasLimit) {\r\n          return self.transactionContextAPI.getGasLimit(next)\r\n        }\r\n        next(null, 3000000)\r\n      },\r\n      function queryValue (gasLimit, next) {\r\n        if (args.value) {\r\n          return next(null, args.value, gasLimit)\r\n        }\r\n        if (args.useCall || !self.transactionContextAPI.getValue) {\r\n          return next(null, 0, gasLimit)\r\n        }\r\n        self.transactionContextAPI.getValue(function (err, value) {\r\n          next(err, value, gasLimit)\r\n        })\r\n      },\r\n      function getAccount (value, gasLimit, next) {\r\n        if (args.from) {\r\n          return next(null, args.from, value, gasLimit)\r\n        }\r\n        if (self.transactionContextAPI.getAddress) {\r\n          return self.transactionContextAPI.getAddress(function (err, address) {\r\n            next(err, address, value, gasLimit)\r\n          })\r\n        }\r\n        self.getAccounts(function (err, accounts) {\r\n          const address = accounts[0]\r\n\r\n          if (err) return next(err)\r\n          if (!address) return next('No accounts available')\r\n          // if (self.executionContext.isVM() && !self.providers.vm.accounts[address]) {\r\n          if (self.executionContext.isVM() && !self.providers.vm.RemixSimulatorProvider.Accounts.accounts[address]) {\r\n            return next('Invalid account selected')\r\n          }\r\n          next(null, address, value, gasLimit)\r\n        })\r\n      },\r\n      function runTransaction (fromAddress, value, gasLimit, next) {\r\n        const tx = { to: args.to, data: args.data.dataHex, useCall: args.useCall, from: fromAddress, value: value, gasLimit: gasLimit, timestamp: args.data.timestamp }\r\n        const payLoad = { funAbi: args.data.funAbi, funArgs: args.data.funArgs, contractBytecode: args.data.contractBytecode, contractName: args.data.contractName, contractABI: args.data.contractABI, linkReferences: args.data.linkReferences }\r\n        let timestamp = Date.now()\r\n        if (tx.timestamp) {\r\n          timestamp = tx.timestamp\r\n        }\r\n\r\n        self.event.trigger('initiatingTransaction', [timestamp, tx, payLoad])\r\n        self.txRunner.rawRun(tx, confirmationCb, continueCb, promptCb,\r\n          function (error, result) {\r\n            if (error) return next(error)\r\n\r\n            const rawAddress = self.executionContext.isVM() ? result.result.createdAddress : result.result.contractAddress\r\n            const eventName = (tx.useCall ? 'callExecuted' : 'transactionExecuted')\r\n            self.event.trigger(eventName, [error, tx.from, tx.to, tx.data, tx.useCall, result, timestamp, payLoad, rawAddress])\r\n\r\n            if (error && (typeof (error) !== 'string')) {\r\n              if (error.message) error = error.message\r\n              else {\r\n                try { error = 'error: ' + JSON.stringify(error) } catch (e) {}\r\n              }\r\n            }\r\n            next(error, result)\r\n          }\r\n        )\r\n      }\r\n    ],\r\n    (error, txResult) => {\r\n      if (error) {\r\n        return cb(error)\r\n      }\r\n\r\n      const isVM = this.executionContext.isVM()\r\n      if (isVM) {\r\n        const vmError = txExecution.checkVMError(txResult)\r\n        if (vmError.error) {\r\n          return cb(vmError.message)\r\n        }\r\n      }\r\n\r\n      let address = null\r\n      let returnValue = null\r\n      if (txResult && txResult.result) {\r\n        address = isVM ? txResult.result.createdAddress : txResult.result.contractAddress\r\n        // if it's not the VM, we don't have return value. We only have the transaction, and it does not contain the return value.\r\n        returnValue = (txResult.result.execResult && isVM) ? txResult.result.execResult.returnValue : txResult.result\r\n      }\r\n\r\n      cb(error, txResult, address, returnValue)\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = Blockchain\r\n","const { EventEmitter } = require('events')\r\n\r\nclass PluginUdapp {\r\n  constructor (blockchain) {\r\n    this.blockchain = blockchain\r\n    this.events = new EventEmitter()\r\n    this.setupEvents()\r\n  }\r\n\r\n  setupEvents () {\r\n    this.blockchain.events.on('newTransaction', (tx, receipt) => {\r\n      this.events.emit('newTransaction', tx, receipt)\r\n    })\r\n  }\r\n\r\n  createVMAccount (newAccount) {\r\n    return this.blockchain.createVMAccount(newAccount)\r\n  }\r\n\r\n  sendTransaction (tx) {\r\n    return this.blockchain.sendTransaction(tx)\r\n  }\r\n\r\n  getAccounts (cb) {\r\n    return this.blockchain.getAccounts(cb)\r\n  }\r\n\r\n  pendingTransactionsCount () {\r\n    return this.blockchain.pendingTransactionsCount()\r\n  }\r\n}\r\n\r\nmodule.exports = PluginUdapp\r\n","const Web3 = require('web3')\r\nconst { stripHexPrefix, hashPersonalMessage } = require('ethereumjs-util')\r\n\r\nclass InjectedProvider {\r\n  constructor (executionContext) {\r\n    this.executionContext = executionContext\r\n  }\r\n\r\n  getAccounts (cb) {\r\n    return this.executionContext.web3().eth.getAccounts(cb)\r\n  }\r\n\r\n  newAccount (passwordPromptCb, cb) {\r\n    passwordPromptCb((passphrase) => {\r\n      this.executionContext.web3().personal.newAccount(passphrase, cb)\r\n    })\r\n  }\r\n\r\n  resetEnvironment () {\r\n  }\r\n\r\n  getBalanceInEther (address, cb) {\r\n    address = stripHexPrefix(address)\r\n    this.executionContext.web3().eth.getBalance(address, (err, res) => {\r\n      if (err) {\r\n        return cb(err)\r\n      }\r\n      cb(null, Web3.utils.fromWei(res.toString(10), 'ether'))\r\n    })\r\n  }\r\n\r\n  getGasPrice (cb) {\r\n    this.executionContext.web3().eth.getGasPrice(cb)\r\n  }\r\n\r\n  signMessage (message, account, _passphrase, cb) {\r\n    const messageHash = hashPersonalMessage(Buffer.from(message))\r\n    try {\r\n      this.executionContext.web3().eth.personal.sign(message, account, (error, signedData) => {\r\n        cb(error, '0x' + messageHash.toString('hex'), signedData)\r\n      })\r\n    } catch (e) {\r\n      cb(e.message)\r\n    }\r\n  }\r\n\r\n  getProvider () {\r\n    return 'injected'\r\n  }\r\n}\r\n\r\nmodule.exports = InjectedProvider\r\n","const Web3 = require('web3')\r\nconst { stripHexPrefix, hashPersonalMessage } = require('ethereumjs-util')\r\nconst Personal = require('web3-eth-personal')\r\n\r\nclass NodeProvider {\r\n  constructor (executionContext, config) {\r\n    this.executionContext = executionContext\r\n    this.config = config\r\n  }\r\n\r\n  getAccounts (cb) {\r\n    if (this.config.get('settings/personal-mode')) {\r\n      return this.executionContext.web3().personal.getListAccounts(cb)\r\n    }\r\n    return this.executionContext.web3().eth.getAccounts(cb)\r\n  }\r\n\r\n  newAccount (passwordPromptCb, cb) {\r\n    if (!this.config.get('settings/personal-mode')) {\r\n      return cb('Not running in personal mode')\r\n    }\r\n    passwordPromptCb((passphrase) => {\r\n      this.executionContext.web3().personal.newAccount(passphrase, cb)\r\n    })\r\n  }\r\n\r\n  resetEnvironment () {\r\n  }\r\n\r\n  getBalanceInEther (address, cb) {\r\n    address = stripHexPrefix(address)\r\n    this.executionContext.web3().eth.getBalance(address, (err, res) => {\r\n      if (err) {\r\n        return cb(err)\r\n      }\r\n      cb(null, Web3.utils.fromWei(res.toString(10), 'ether'))\r\n    })\r\n  }\r\n\r\n  getGasPrice (cb) {\r\n    this.executionContext.web3().eth.getGasPrice(cb)\r\n  }\r\n\r\n  signMessage (message, account, passphrase, cb) {\r\n    const messageHash = hashPersonalMessage(Buffer.from(message))\r\n    try {\r\n      const personal = new Personal(this.executionContext.web3().currentProvider)\r\n      personal.sign(message, account, passphrase, (error, signedData) => {\r\n        cb(error, '0x' + messageHash.toString('hex'), signedData)\r\n      })\r\n    } catch (e) {\r\n      cb(e.message)\r\n    }\r\n  }\r\n\r\n  getProvider () {\r\n    return this.executionContext.getProvider()\r\n  }\r\n}\r\n\r\nmodule.exports = NodeProvider\r\n","const Web3 = require('web3')\r\nconst { BN, privateToAddress, stripHexPrefix, hashPersonalMessage } = require('ethereumjs-util')\r\nconst RemixSimulator = require('@remix-project/remix-simulator')\r\n\r\nclass VMProvider {\r\n  constructor (executionContext) {\r\n    this.executionContext = executionContext\r\n    this.RemixSimulatorProvider = new RemixSimulator.Provider({ executionContext: this.executionContext })\r\n    this.RemixSimulatorProvider.init()\r\n    this.web3 = new Web3(this.RemixSimulatorProvider)\r\n    this.accounts = {}\r\n  }\r\n\r\n  getAccounts (cb) {\r\n    this.web3.eth.getAccounts((err, accounts) => {\r\n      if (err) {\r\n        return cb('No accounts?')\r\n      }\r\n      return cb(null, accounts)\r\n    })\r\n  }\r\n\r\n  resetEnvironment () {\r\n    this.RemixSimulatorProvider.Accounts.resetAccounts()\r\n    this.accounts = {}\r\n  }\r\n\r\n  // TODO: is still here because of the plugin API\r\n  // can be removed later when we update the API\r\n  createVMAccount (newAccount) {\r\n    const { privateKey, balance } = newAccount\r\n    this.RemixSimulatorProvider.Accounts._addAccount(privateKey, balance)\r\n    const privKey = Buffer.from(privateKey, 'hex')\r\n    return '0x' + privateToAddress(privKey).toString('hex')\r\n  }\r\n\r\n  newAccount (_passwordPromptCb, cb) {\r\n    this.RemixSimulatorProvider.Accounts.newAccount(cb)\r\n  }\r\n\r\n  getBalanceInEther (address, cb) {\r\n    address = stripHexPrefix(address)\r\n    this.web3.eth.getBalance(address, (err, res) => {\r\n      if (err) {\r\n        return cb(err)\r\n      }\r\n      cb(null, Web3.utils.fromWei(new BN(res).toString(10), 'ether'))\r\n    })\r\n  }\r\n\r\n  getGasPrice (cb) {\r\n    this.web3.eth.getGasPrice(cb)\r\n  }\r\n\r\n  signMessage (message, account, _passphrase, cb) {\r\n    const messageHash = hashPersonalMessage(Buffer.from(message))\r\n    this.web3.eth.sign(message, account, (error, signedData) => {\r\n      if (error) {\r\n        return cb(error)\r\n      }\r\n      cb(null, '0x' + messageHash.toString('hex'), signedData)\r\n    })\r\n  }\r\n\r\n  getProvider () {\r\n    return 'vm'\r\n  }\r\n}\r\n\r\nmodule.exports = VMProvider\r\n","'use strict'\r\nconst { bufferToHex, isHexString } = require('ethereumjs-util')\r\n\r\nfunction convertToPrefixedHex (input) {\r\n  if (input === undefined || input === null || isHexString(input)) {\r\n    return input\r\n  } else if (Buffer.isBuffer(input)) {\r\n    return bufferToHex(input)\r\n  }\r\n  return '0x' + input.toString(16)\r\n}\r\n\r\n/*\r\n txResult.result can be 3 different things:\r\n - VM call or tx: ethereumjs-vm result object\r\n - Node transaction: object returned from eth.getTransactionReceipt()\r\n - Node call: return value from function call (not an object)\r\n\r\n Also, VM results use BN and Buffers, Node results use hex strings/ints,\r\n So we need to normalize the values to prefixed hex strings\r\n*/\r\nfunction resultToRemixTx (txResult) {\r\n  const { result, transactionHash } = txResult\r\n  const { status, execResult, gasUsed, createdAddress, contractAddress } = result\r\n  let returnValue, errorMessage\r\n\r\n  if (isHexString(result)) {\r\n    returnValue = result\r\n  } else if (execResult !== undefined) {\r\n    returnValue = execResult.returnValue\r\n    errorMessage = execResult.exceptionError\r\n  }\r\n\r\n  return {\r\n    transactionHash,\r\n    status,\r\n    gasUsed: convertToPrefixedHex(gasUsed),\r\n    error: errorMessage,\r\n    return: convertToPrefixedHex(returnValue),\r\n    createdAddress: convertToPrefixedHex(createdAddress || contractAddress)\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  resultToRemixTx\r\n}\r\n","'use strict'\r\n\r\nvar CONFIG_FILE = '.remix.config'\r\nconst EventEmitter = require('events')\r\n\r\nfunction Config (storage) {\r\n  this.items = {}\r\n  this.unpersistedItems = {}\r\n  this.events = new EventEmitter()\r\n\r\n  // load on instantiation\r\n  try {\r\n    var config = storage.get(CONFIG_FILE)\r\n    if (config) {\r\n      this.items = JSON.parse(config)\r\n    }\r\n  } catch (exception) {\r\n  }\r\n\r\n  this.exists = function (key) {\r\n    return this.items[key] !== undefined\r\n  }\r\n\r\n  this.get = function (key) {\r\n    this.ensureStorageUpdated(key)\r\n    return this.items[key]\r\n  }\r\n\r\n  this.set = function (key, content) {\r\n    this.items[key] = content\r\n    try {\r\n      storage.set(CONFIG_FILE, JSON.stringify(this.items))\r\n      this.events.emit(key + '_changed', content)\r\n    } catch (exception) {\r\n    }\r\n  }\r\n\r\n  this.ensureStorageUpdated = function (key) {\r\n    if (key === 'currentFile') {\r\n      if (this.items[key] && this.items[key] !== '' &&\r\n        this.items[key].indexOf('config/') !== 0 &&\r\n        this.items[key].indexOf('browser/') !== 0 &&\r\n        this.items[key].indexOf('localhost/') !== 0 &&\r\n        this.items[key].indexOf('swarm/') !== 0 &&\r\n        this.items[key].indexOf('gist/') !== 0 &&\r\n        this.items[key].indexOf('github/') !== 0 &&\r\n        this.items[key].indexOf('ipfs/') !== 0 &&\r\n        this.items[key].indexOf('http/') !== 0 &&\r\n        this.items[key].indexOf('https/') !== 0) {\r\n        this.items[key] = 'browser/' + this.items[key]\r\n      }\r\n    }\r\n  }\r\n\r\n  this.getUnpersistedProperty = function (key) {\r\n    return this.unpersistedItems[key]\r\n  }\r\n\r\n  // TODO: this only used for *one* property \"doNotShowTransactionConfirmationAgain\"\r\n  // and can be removed once it's refactored away in txRunner\r\n  this.setUnpersistedProperty = function (key, value) {\r\n    this.unpersistedItems[key] = value\r\n  }\r\n}\r\n\r\nmodule.exports = Config\r\n","export class FramingService {\r\n  constructor (sidePanel, verticalIcon, mainView, resizeFeature) {\r\n    this.sidePanel = sidePanel\r\n    this.verticalIcon = verticalIcon\r\n    this.mainPanel = mainView.getAppPanel()\r\n    this.mainView = mainView\r\n    this.resizeFeature = resizeFeature\r\n  }\r\n\r\n  start (params) {\r\n    this.sidePanel.events.on('toggle', () => {\r\n      this.resizeFeature.panel.clientWidth !== 0 ? this.resizeFeature.hidePanel() : this.resizeFeature.showPanel()\r\n    })\r\n    this.sidePanel.events.on('showing', () => {\r\n      if (this.resizeFeature.panel.clientWidth === 0) this.resizeFeature.showPanel()\r\n    })\r\n    this.mainPanel.events.on('toggle', () => {\r\n      this.resizeFeature.showPanel()\r\n    })\r\n\r\n    this.verticalIcon.select('fileExplorers')\r\n\r\n    document.addEventListener('keypress', (e) => {\r\n      if (e.shiftKey && e.ctrlKey) {\r\n        if (e.code === 'KeyF') { // Ctrl+Shift+F\r\n          this.verticalIcon.select('fileExplorers')\r\n        } else if (e.code === 'KeyA') { // Ctrl+Shift+A\r\n          this.verticalIcon.select('pluginManager')\r\n        } else if (e.code === 'KeyS') { //  Ctrl+Shift+S\r\n          this.verticalIcon.select('settings')\r\n        }\r\n        e.preventDefault()\r\n      }\r\n    })\r\n\r\n    if (params.minimizeterminal) this.mainView.minimizeTerminal()\r\n    if (params.minimizesidepanel) this.resizeFeature.hidePanel()\r\n  }\r\n\r\n  embed () {\r\n    this.mainView.minimizeTerminal()\r\n    this.resizeFeature.hidePanel()\r\n  }\r\n}\r\n","module.exports = new (require('../registry.js'))()\r\n","'use strict'\r\n\r\n// require('@babel/polyfill')\r\nvar App = require('./app.js')\r\n\r\nvar app = new App({})\r\n\r\ndocument.body.appendChild(app.render())\r\n\r\napp.init() // @TODO: refactor to remove\r\n","'use strict'\r\nvar yo = require('yo-yo')\r\nvar async = require('async')\r\nvar EventManager = require('../lib/events')\r\n\r\nvar CompilerImport = require('../app/compiler/compiler-imports')\r\nvar toolTip = require('../app/ui/tooltip')\r\nvar globalRegistry = require('../global/registry')\r\nvar SourceHighlighter = require('../app/editor/sourceHighlighter')\r\nvar GistHandler = require('./gist-handler')\r\n\r\nclass CmdInterpreterAPI {\r\n  constructor (terminal, localRegistry, blockchain) {\r\n    const self = this\r\n    self.event = new EventManager()\r\n    self.blockchain = blockchain\r\n    self._components = {}\r\n    self._components.registry = localRegistry || globalRegistry\r\n    self._components.terminal = terminal\r\n    self._components.sourceHighlighter = new SourceHighlighter()\r\n    self._components.fileImport = new CompilerImport()\r\n    self._components.gistHandler = new GistHandler()\r\n    self._deps = {\r\n      fileManager: self._components.registry.get('filemanager').api,\r\n      editor: self._components.registry.get('editor').api,\r\n      compilersArtefacts: self._components.registry.get('compilersartefacts').api,\r\n      offsetToLineColumnConverter: self._components.registry.get('offsettolinecolumnconverter').api\r\n    }\r\n    self.commandHelp = {\r\n      'remix.loadgist(id)': 'Load a gist in the file explorer.',\r\n      'remix.loadurl(url)': 'Load the given url in the file explorer. The url can be of type github, swarm, ipfs or raw http',\r\n      'remix.execute(filepath)': 'Run the script specified by file path. If filepath is empty, script currently displayed in the editor is executed.',\r\n      'remix.exeCurrent()': 'Run the script currently displayed in the editor',\r\n      'remix.help()': 'Display this help message'\r\n    }\r\n  }\r\n\r\n  log () { arguments[0] != null ? this._components.terminal.commands.html(arguments[0]) : this._components.terminal.commands.html(arguments[1]) }\r\n  loadgist (id, cb) {\r\n    const self = this\r\n    self._components.gistHandler.loadFromGist({ gist: id }, this._deps.fileManager)\r\n    if (cb) cb()\r\n  }\r\n\r\n  loadurl (url, cb) {\r\n    const self = this\r\n    self._components.fileImport.import(url,\r\n      (loadingMsg) => { toolTip(loadingMsg) },\r\n      (err, content, cleanUrl, type, url) => {\r\n        if (err) {\r\n          toolTip(`Unable to load ${url}: ${err}`)\r\n          if (cb) cb(err)\r\n        } else {\r\n          self._deps.fileManager.writeFile(type + '/' + cleanUrl, content)\r\n          try {\r\n            content = JSON.parse(content)\r\n            async.eachOfSeries(content.sources, (value, file, callbackSource) => {\r\n              var url = value.urls[0] // @TODO retrieve all other contents ?\r\n              self._components.fileImport.import(url,\r\n                (loadingMsg) => { toolTip(loadingMsg) },\r\n                async (error, content, cleanUrl, type, url) => {\r\n                  if (error) {\r\n                    toolTip(`Cannot retrieve the content of ${url}: ${error}`)\r\n                    return callbackSource(`Cannot retrieve the content of ${url}: ${error}`)\r\n                  } else {\r\n                    try {\r\n                      await self._deps.fileManager.writeFile(type + '/' + cleanUrl, content)\r\n                      callbackSource()\r\n                    } catch (e) {\r\n                      callbackSource(e.message)\r\n                    }\r\n                  }\r\n                })\r\n            }, (error) => {\r\n              if (cb) cb(error)\r\n            })\r\n          } catch (e) {}\r\n          if (cb) cb()\r\n        }\r\n      })\r\n  }\r\n\r\n  exeCurrent (cb) {\r\n    return this.execute(undefined, cb)\r\n  }\r\n\r\n  execute (file, cb) {\r\n    const self = this\r\n\r\n    function _execute (content, cb) {\r\n      if (!content) {\r\n        toolTip('no content to execute')\r\n        if (cb) cb()\r\n        return\r\n      }\r\n\r\n      self._components.terminal.commands.script(content)\r\n    }\r\n\r\n    if (typeof file === 'undefined') {\r\n      var content = self._deps.editor.currentContent()\r\n      _execute(content, cb)\r\n      return\r\n    }\r\n\r\n    var provider = self._deps.fileManager.fileProviderOf(file)\r\n\r\n    if (!provider) {\r\n      toolTip(`provider for path ${file} not found`)\r\n      if (cb) cb()\r\n      return\r\n    }\r\n\r\n    provider.get(file, (error, content) => {\r\n      if (error) {\r\n        toolTip(error)\r\n        if (cb) cb()\r\n        return\r\n      }\r\n\r\n      _execute(content, cb)\r\n    })\r\n  }\r\n\r\n  help (cb) {\r\n    const self = this\r\n    var help = yo`<div></div>`\r\n    for (var k in self.commandHelp) {\r\n      help.appendChild(yo`<div>${k}: ${self.commandHelp[k]}</div>`)\r\n      help.appendChild(yo`<br>`)\r\n    }\r\n    self._components.terminal.commands.html(help)\r\n    if (cb) cb()\r\n    return ''\r\n  }\r\n}\r\n\r\nmodule.exports = CmdInterpreterAPI\r\n","const allPrograms = [\r\n  { ethers: 'The ethers.js library is a compact and complete JavaScript library for Ethereum.' },\r\n  { remix: 'Ethereum IDE and tools for the web.' },\r\n  { web3: 'The web3.js library is a collection of modules which contain specific functionality for the ethereum ecosystem.' },\r\n  { swarmgw: 'This library can be used to upload/download files to Swarm via https://swarm-gateways.net/.' }\r\n]\r\n\r\nconst allCommands = [\r\n  { 'remix.execute(filepath)': 'Run the script specified by file path. If filepath is empty, script currently displayed in the editor is executed.' },\r\n  { 'remix.exeCurrent()': 'Run the script currently displayed in the editor.' },\r\n  { 'remix.help()': 'Display this help message.' },\r\n  { 'remix.loadgist(id)': 'Load a gist in the file explorer.' },\r\n  { 'remix.loadurl(url)': 'Load the given url in the file explorer. The url can be of type github, swarm or ipfs.' },\r\n\r\n  { 'swarmgw.get(url, cb)': 'Download files from Swarm via https://swarm-gateways.net/' },\r\n  { 'swarmgw.put(content, cb)': 'Upload files to Swarm via https://swarm-gateways.net/' },\r\n\r\n  { 'ethers.Contract': 'This API provides a graceful connection to a contract deployed on the blockchain, simplifying calling and querying its functions and handling all the binary protocol and conversion as necessarily.' },\r\n  { 'ethers.HDNode': 'A Hierarchical Deterministic Wallet represents a large tree of private keys which can reliably be reproduced from an initial seed.' },\r\n  { 'ethers.Interface': 'The Interface Object is a meta-class that accepts a Solidity (or compatible) Application Binary Interface (ABI) and populates functions to deal with encoding and decoding the parameters to pass in and results returned.' },\r\n  { 'ethers.providers': 'A Provider abstracts a connection to the Ethereum blockchain, for issuing queries and sending state changing transactions.' },\r\n  { 'ethers.SigningKey': 'The SigningKey interface provides an abstraction around the secp256k1 elliptic curve cryptography library.' },\r\n  { 'ethers.utils': 'The utility functions exposed in both the ethers umbrella package and the ethers-utils.' },\r\n  { 'ethers.utils.AbiCoder': 'Create a new ABI Coder object' },\r\n  { 'ethers.utils.RLP': 'This encoding method is used internally for several aspects of Ethereum, such as encoding transactions and determining contract addresses.' },\r\n  { 'ethers.Wallet': 'A wallet manages a private/public key pair which is used to cryptographically sign transactions and prove ownership on the Ethereum network.' },\r\n  { 'ethers.version': 'Contains the version of the ethers container object.' },\r\n\r\n  { 'web3.eth': 'Eth module for interacting with the Ethereum network.' },\r\n  { 'web3.eth.accounts': 'The web3.eth.accounts contains functions to generate Ethereum accounts and sign transactions and data.' },\r\n  { 'web3.eth.abi': 'The web3.eth.abi functions let you de- and encode parameters to ABI (Application Binary Interface) for function calls to the EVM (Ethereum Virtual Machine).' },\r\n  { 'web3.eth.ens': 'The web3.eth.ens functions let you interacting with ENS.' },\r\n  { 'web3.eth.Iban': 'The web3.eth.Iban function lets convert Ethereum addresses from and to IBAN and BBAN.' },\r\n  { 'web3.eth.net': 'Net module for interacting with network properties.' },\r\n  { 'web3.eth.personal': 'Personal module for interacting with the Ethereum accounts.' },\r\n  { 'web3.eth.subscribe': 'The web3.eth.subscribe function lets you subscribe to specific events in the blockchain.' },\r\n  { 'web3.givenProvider': 'When using web3.js in an Ethereum compatible browser, it will set with the current native provider by that browser. Will return the given provider by the (browser) environment, otherwise null.' },\r\n  { 'web3.modules': 'Contains the version of the web3 container object.' },\r\n  { 'web3.providers': 'Contains the current available providers.' },\r\n  { 'web3.shh': 'Shh module for interacting with the whisper protocol' },\r\n  { 'web3.utils': 'This package provides utility functions for Ethereum dapps and other web3.js packages.' },\r\n  { 'web3.version': 'Contains the version of the web3 container object.' },\r\n\r\n  { 'web3.eth.clearSubscriptions();': 'Resets subscriptions.' },\r\n  { 'web3.eth.Contract(jsonInterface[, address][, options])': 'The web3.eth.Contract object makes it easy to interact with smart contracts on the ethereum blockchain.' },\r\n  { 'web3.eth.accounts.create([entropy]);': 'The web3.eth.accounts contains functions to generate Ethereum accounts and sign transactions and data.' },\r\n  { 'web3.eth.getAccounts();': 'Retrieve the list of accounts' },\r\n  { 'web3.eth.accounts.privateKeyToAccount(privateKey [, ignoreLength ]);': 'Get the account from the private key' },\r\n  { 'web3.eth.accounts.signTransaction(tx, privateKey [, callback]);': 'Sign Transaction' },\r\n  { 'web3.eth.accounts.recoverTransaction(rawTransaction);': 'Sign Transaction' },\r\n  { 'web3.eth.accounts.hashMessage(message);': 'Hash message' }\r\n]\r\n\r\nmodule.exports = {\r\n  allPrograms,\r\n  allCommands\r\n}\r\n","var remixLib = require('@remix-project/remix-lib')\r\nvar EventManager = remixLib.EventManager\r\n\r\nmodule.exports = EventManager\r\n","'use strict'\r\nvar modalDialogCustom = require('../app/ui/modal-dialog-custom')\r\nvar request = require('request')\r\n\r\n// Allowing window to be overriden for testing\r\nfunction GistHandler (_window) {\r\n  if (_window !== undefined) {\r\n    modalDialogCustom = _window\r\n  }\r\n\r\n  this.handleLoad = function (params, cb) {\r\n    if (!cb) cb = () => {}\r\n    var loadingFromGist = false\r\n    var gistId\r\n    if (params.gist === '') {\r\n      loadingFromGist = true\r\n      modalDialogCustom.prompt('Load a Gist', 'Enter the ID of the Gist or URL you would like to load.', null, (target) => {\r\n        if (target !== '') {\r\n          gistId = getGistId(target)\r\n          if (gistId) {\r\n            cb(gistId)\r\n          } else {\r\n            modalDialogCustom.alert('Error while loading gist. Please provide a valid Gist ID or URL.')\r\n          }\r\n        }\r\n      })\r\n      return loadingFromGist\r\n    } else {\r\n      gistId = params.gist\r\n      loadingFromGist = !!gistId\r\n    }\r\n    if (loadingFromGist) {\r\n      cb(gistId)\r\n    }\r\n    return loadingFromGist\r\n  }\r\n\r\n  function getGistId (str) {\r\n    var idr = /[0-9A-Fa-f]{8,}/\r\n    var match = idr.exec(str)\r\n    return match ? match[0] : null\r\n  }\r\n\r\n  this.loadFromGist = (params, fileManager) => {\r\n    const gistProvider = fileManager.fileProviderOf('browser')\r\n    const self = this\r\n    return self.handleLoad(params, function (gistId) {\r\n      request.get({\r\n        url: `https://api.github.com/gists/${gistId}`,\r\n        json: true\r\n      }, (error, response, data = {}) => {\r\n        if (error || !data.files) {\r\n          modalDialogCustom.alert(`Gist load error: ${error || data.message}`)\r\n          return\r\n        }\r\n        const obj = {}\r\n        Object.keys(data.files).forEach((element) => {\r\n          obj['/gists/' + gistId + '/' + element] = data.files[element]\r\n        })\r\n        fileManager.setBatchFiles(obj, 'browser', true, (errorLoadingFile) => {\r\n          if (!errorLoadingFile) {\r\n            gistProvider.id = gistId\r\n            gistProvider.origGistFiles = data.files\r\n          }\r\n        })\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = GistHandler\r\n","var async = require('async')\r\n\r\nmodule.exports = {\r\n  shortenAddress: function (address, etherBalance) {\r\n    var len = address.length\r\n    return address.slice(0, 5) + '...' + address.slice(len - 5, len) + (etherBalance ? ' (' + etherBalance.toString() + ' ether)' : '')\r\n  },\r\n  shortenHexData: function (data) {\r\n    if (!data) return ''\r\n    if (data.length < 5) return data\r\n    var len = data.length\r\n    return data.slice(0, 5) + '...' + data.slice(len - 5, len)\r\n  },\r\n  createNonClashingNameWithPrefix (name, fileProvider, prefix, cb) {\r\n    if (!name) name = 'Undefined'\r\n    var counter = ''\r\n    var ext = 'sol'\r\n    var reg = /(.*)\\.([^.]+)/g\r\n    var split = reg.exec(name)\r\n    if (split) {\r\n      name = split[1]\r\n      ext = split[2]\r\n    }\r\n    var exist = true\r\n    async.whilst(\r\n      () => { return exist },\r\n      (callback) => {\r\n        fileProvider.exists(name + counter + prefix + '.' + ext, (error, currentExist) => {\r\n          if (error) {\r\n            callback(error)\r\n          } else {\r\n            exist = currentExist\r\n            if (exist) counter = (counter | 0) + 1\r\n            callback()\r\n          }\r\n        })\r\n      },\r\n      (error) => { cb(error, name + counter + prefix + '.' + ext) }\r\n    )\r\n  },\r\n  createNonClashingName (name, fileProvider, cb) {\r\n    this.createNonClashingNameWithPrefix(name, fileProvider, '', cb)\r\n  },\r\n  checkSpecialChars (name) {\r\n    return name.match(/[:*?\"<>\\\\'|]/) != null\r\n  },\r\n  isHexadecimal (value) {\r\n    return /^[0-9a-fA-F]+$/.test(value) && (value.length % 2 === 0)\r\n  },\r\n  is0XPrefixed (value) {\r\n    return value.substr(0, 2) === '0x'\r\n  },\r\n  isNumeric (value) {\r\n    return /^\\+?(0|[1-9]\\d*)$/.test(value)\r\n  },\r\n  find: find\r\n}\r\n\r\nfunction findDeep (object, fn, found = { break: false, value: undefined }) {\r\n  if (typeof object !== 'object' || object === null) return\r\n  for (var i in object) {\r\n    if (found.break) break\r\n    var el = object[i]\r\n    if (el && el.innerText !== undefined && el.innerText !== null) el = el.innerText\r\n    if (fn(el, i, object)) {\r\n      found.value = el\r\n      found.break = true\r\n      break\r\n    } else {\r\n      findDeep(el, fn, found)\r\n    }\r\n  }\r\n  return found.value\r\n}\r\n\r\nfunction find (args, query) {\r\n  query = query.trim()\r\n  var isMatch = !!findDeep(args, function check (value, key) {\r\n    if (value === undefined || value === null) return false\r\n    if (typeof value === 'function') return false\r\n    if (typeof value === 'object') return false\r\n    var contains = String(value).indexOf(query.trim()) !== -1\r\n    return contains\r\n  })\r\n  return isMatch\r\n}\r\n","'use strict'\r\nimport { Plugin } from '@remixproject/engine'\r\nimport * as packageJson from '../../../../package.json'\r\nimport { sourceMappingDecoder } from '@remix-project/remix-debug'\r\n\r\nconst profile = {\r\n  name: 'offsetToLineColumnConverter',\r\n  methods: [],\r\n  events: [],\r\n  version: packageJson.version\r\n}\r\n\r\nexport class OffsetToLineColumnConverter extends Plugin {\r\n  constructor () {\r\n    super(profile)\r\n    this.lineBreakPositionsByContent = {}\r\n    this.sourceMappingDecoder = sourceMappingDecoder\r\n  }\r\n\r\n  /**\r\n   * Convert offset representation with line/column representation.\r\n   * This is also used to resolve the content:\r\n   * @arg file is the index of the file in the content sources array and content sources array does have filename as key and not index.\r\n   * So we use the asts (which references both index and filename) to look up the actual content targeted by the @arg file index.\r\n   * @param {{start, length}} rawLocation - offset location\r\n   * @param {number} file - The index where to find the source in the sources parameters\r\n   * @param {Object.<string, {content}>} sources - Map of content sources\r\n   * @param {Object.<string, {ast, id}>} asts - Map of content sources\r\n   */\r\n  offsetToLineColumn (rawLocation, file, sources, asts) {\r\n    if (!this.lineBreakPositionsByContent[file]) {\r\n      const sourcesArray = Object.keys(sources)\r\n      if (!asts || (file === 0 && sourcesArray.length === 1)) {\r\n        // if we don't have ast, we process the only one available content (applicable also for compiler older than 0.4.12)\r\n        this.lineBreakPositionsByContent[file] = this.sourceMappingDecoder.getLinebreakPositions(sources[sourcesArray[0]].content)\r\n      } else {\r\n        for (var filename in asts) {\r\n          const source = asts[filename]\r\n          if (source.id === file) {\r\n            this.lineBreakPositionsByContent[file] = this.sourceMappingDecoder.getLinebreakPositions(sources[filename].content)\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return this.sourceMappingDecoder.convertOffsetToLineColumn(rawLocation, this.lineBreakPositionsByContent[file])\r\n  }\r\n\r\n  /**\r\n   * Convert offset representation with line/column representation.\r\n   * @param {{start, length}} rawLocation - offset location\r\n   * @param {number} file - The index where to find the source in the sources parameters\r\n   * @param {string} content - source\r\n   */\r\n  offsetToLineColumnWithContent (rawLocation, file, content) {\r\n    this.lineBreakPositionsByContent[file] = this.sourceMappingDecoder.getLinebreakPositions(content)\r\n    return this.sourceMappingDecoder.convertOffsetToLineColumn(rawLocation, this.lineBreakPositionsByContent[file])\r\n  }\r\n\r\n  /**\r\n   * Clear the cache\r\n   */\r\n  clear () {\r\n    this.lineBreakPositionsByContent = {}\r\n  }\r\n\r\n  /**\r\n   * called by plugin API\r\n   */\r\n  activate () {\r\n    this.on('solidity', 'compilationFinished', () => {\r\n      this.clear()\r\n    })\r\n  }\r\n}\r\n","const yo = require('yo-yo')\r\nconst csjs = require('csjs-inject')\r\n\r\nconst css = csjs`\r\n  .dragbar            {\r\n    width             : 2px;\r\n    height            : 100%;\r\n    cursor            : col-resize;\r\n    z-index           : 999;\r\n  }\r\n  .ghostbar           {\r\n    width             : 3px;\r\n    background-color  : var(--primary);\r\n    opacity           : 0.5;\r\n    position          : absolute;\r\n    cursor            : col-resize;\r\n    z-index           : 9999;\r\n    top               : 0;\r\n    bottom            : 0;\r\n  }\r\n`\r\n\r\nexport default class PanelsResize {\r\n  constructor (panel) {\r\n    this.panel = panel\r\n    const string = panel.style.minWidth\r\n    this.minWidth = string.length > 2 ? parseInt(string.substring(0, string.length - 2)) : 0\r\n  }\r\n\r\n  render () {\r\n    this.ghostbar = yo`<div class=${css.ghostbar}></div>`\r\n\r\n    const mousedown = (event) => {\r\n      event.preventDefault()\r\n      if (event.which === 1) {\r\n        moveGhostbar(event)\r\n        document.body.appendChild(this.ghostbar)\r\n        document.addEventListener('mousemove', moveGhostbar)\r\n        document.addEventListener('mouseup', removeGhostbar)\r\n        document.addEventListener('keydown', cancelGhostbar)\r\n      }\r\n    }\r\n\r\n    const cancelGhostbar = (event) => {\r\n      if (event.keyCode === 27) {\r\n        document.body.removeChild(this.ghostbar)\r\n        document.removeEventListener('mousemove', moveGhostbar)\r\n        document.removeEventListener('mouseup', removeGhostbar)\r\n        document.removeEventListener('keydown', cancelGhostbar)\r\n      }\r\n    }\r\n\r\n    const moveGhostbar = (event) => {\r\n      this.ghostbar.style.left = event.x + 'px'\r\n    }\r\n\r\n    const removeGhostbar = (event) => {\r\n      document.body.removeChild(this.ghostbar)\r\n      document.removeEventListener('mousemove', moveGhostbar)\r\n      document.removeEventListener('mouseup', removeGhostbar)\r\n      document.removeEventListener('keydown', cancelGhostbar)\r\n      this.setPosition(event)\r\n    }\r\n\r\n    return yo`<div onmousedown=${mousedown} class=${css.dragbar}></div>`\r\n  }\r\n\r\n  calculatePanelWidth (event) {\r\n    return event.x - this.panel.offsetLeft\r\n  }\r\n\r\n  setPosition (event) {\r\n    const panelWidth = this.calculatePanelWidth(event)\r\n    // close the panel if the width is less than a minWidth\r\n    if (panelWidth > this.minWidth - 10 || this.panel.style.display === 'none') {\r\n      this.panel.style.width = panelWidth + 'px'\r\n      this.showPanel()\r\n    } else this.hidePanel()\r\n  }\r\n\r\n  hidePanel () {\r\n    this.panel.style.display = 'none'\r\n  }\r\n\r\n  showPanel () {\r\n    this.panel.style.display = 'flex'\r\n  }\r\n}\r\n","'use strict'\r\n\r\nconst async = require('async')\r\nconst IpfsClient = require('ipfs-mini')\r\n\r\nconst ipfsNodes = [\r\n  new IpfsClient({ host: 'ipfs.komputing.org', port: 443, protocol: 'https' }),\r\n  new IpfsClient({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' }),\r\n  new IpfsClient({ host: '127.0.0.1', port: 5001, protocol: 'http' })\r\n]\r\n\r\nmodule.exports = (contract, fileManager, cb, ipfsVerifiedPublishCallBack) => {\r\n  // gather list of files to publish\r\n  var sources = []\r\n\r\n  var metadata\r\n\r\n  try {\r\n    metadata = JSON.parse(contract.metadata)\r\n  } catch (e) {\r\n    return cb(e)\r\n  }\r\n\r\n  if (metadata === undefined) {\r\n    return cb('No metadata')\r\n  }\r\n\r\n  async.eachSeries(Object.keys(metadata.sources), function (fileName, cb) {\r\n    // find hash\r\n    let hash = null\r\n    try {\r\n      // we try extract the hash defined in the metadata.json\r\n      // in order to check if the hash that we get after publishing is the same as the one located in metadata.json\r\n      // if it's not the same, we throw \"hash mismatch between solidity bytecode and uploaded content\"\r\n      // if we don't find the hash in the metadata.json, the check is not done.\r\n      //\r\n      // TODO: refactor this with publishOnSwarm\r\n      if (metadata.sources[fileName].urls) {\r\n        metadata.sources[fileName].urls.forEach(url => {\r\n          if (url.includes('ipfs')) hash = url.match('dweb:/ipfs/(.+)')[1]\r\n        })\r\n      }\r\n    } catch (e) {\r\n      return cb('Error while extracting the hash from metadata.json')\r\n    }\r\n\r\n    fileManager.fileProviderOf(fileName).get(fileName, (error, content) => {\r\n      if (error) {\r\n        console.log(error)\r\n      } else {\r\n        sources.push({\r\n          content: content,\r\n          hash: hash,\r\n          filename: fileName\r\n        })\r\n      }\r\n      cb()\r\n    })\r\n  }, function (error) {\r\n    if (error) {\r\n      cb(error)\r\n    } else {\r\n      // publish the list of sources in order, fail if any failed\r\n      var uploaded = []\r\n      async.eachSeries(sources, function (item, cb) {\r\n        ipfsVerifiedPublish(item.content, item.hash, (error, result) => {\r\n          try {\r\n            item.hash = result.url.match('dweb:/ipfs/(.+)')[1]\r\n          } catch (e) {\r\n            item.hash = '<Metadata inconsistency> - ' + item.fileName\r\n          }\r\n          if (!error && ipfsVerifiedPublishCallBack) ipfsVerifiedPublishCallBack(item)\r\n          item.output = result\r\n          uploaded.push(item)\r\n          cb(error)\r\n        })\r\n      }, () => {\r\n        const metadataContent = JSON.stringify(metadata)\r\n        ipfsVerifiedPublish(metadataContent, '', (error, result) => {\r\n          try {\r\n            contract.metadataHash = result.url.match('dweb:/ipfs/(.+)')[1]\r\n          } catch (e) {\r\n            contract.metadataHash = '<Metadata inconsistency> - metadata.json'\r\n          }\r\n          if (!error && ipfsVerifiedPublishCallBack) {\r\n            ipfsVerifiedPublishCallBack({\r\n              content: metadataContent,\r\n              hash: contract.metadataHash\r\n            })\r\n          }\r\n          uploaded.push({\r\n            content: contract.metadata,\r\n            hash: contract.metadataHash,\r\n            filename: 'metadata.json',\r\n            output: result\r\n          })\r\n          cb(error, uploaded)\r\n        })\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nasync function ipfsVerifiedPublish (content, expectedHash, cb) {\r\n  try {\r\n    const results = await severalGatewaysPush(content)\r\n    if (expectedHash && results !== expectedHash) {\r\n      cb(null, { message: 'hash mismatch between solidity bytecode and uploaded content.', url: 'dweb:/ipfs/' + results, hash: results })\r\n    } else {\r\n      cb(null, { message: 'ok', url: 'dweb:/ipfs/' + results, hash: results })\r\n    }\r\n  } catch (error) {\r\n    cb(error)\r\n  }\r\n}\r\n\r\nfunction severalGatewaysPush (content) {\r\n  const invert = p => new Promise((resolve, reject) => p.then(reject).catch(resolve)) // Invert res and rej\r\n  const promises = ipfsNodes.map((node) => invert(node.add(content)))\r\n  return invert(Promise.all(promises))\r\n}\r\n","'use strict'\r\n\r\nvar async = require('async')\r\nvar swarmgw = require('swarmgw')()\r\n\r\nmodule.exports = (contract, fileManager, cb, swarmVerifiedPublishCallBack) => {\r\n  // gather list of files to publish\r\n  var sources = []\r\n\r\n  var metadata\r\n  try {\r\n    metadata = JSON.parse(contract.metadata)\r\n  } catch (e) {\r\n    return cb(e)\r\n  }\r\n\r\n  if (metadata === undefined) {\r\n    return cb('No metadata')\r\n  }\r\n\r\n  async.eachSeries(Object.keys(metadata.sources), function (fileName, cb) {\r\n    // find hash\r\n    let hash = null\r\n    try {\r\n      // we try extract the hash defined in the metadata.json\r\n      // in order to check if the hash that we get after publishing is the same as the one located in metadata.json\r\n      // if it's not the same, we throw \"hash mismatch between solidity bytecode and uploaded content\"\r\n      // if we don't find the hash in the metadata.json, the check is not done.\r\n      //\r\n      // TODO: refactor this with publishOnIpfs\r\n      if (metadata.sources[fileName].urls) {\r\n        metadata.sources[fileName].urls.forEach(url => {\r\n          if (url.includes('bzz')) hash = url.match('(bzzr|bzz-raw)://(.+)')[1]\r\n        })\r\n      }\r\n    } catch (e) {\r\n      return cb('Error while extracting the hash from metadata.json')\r\n    }\r\n\r\n    fileManager.fileProviderOf(fileName).get(fileName, (error, content) => {\r\n      if (error) {\r\n        console.log(error)\r\n      } else {\r\n        sources.push({\r\n          content: content,\r\n          hash: hash,\r\n          filename: fileName\r\n        })\r\n      }\r\n      cb()\r\n    })\r\n  }, function (error) {\r\n    if (error) {\r\n      cb(error)\r\n    } else {\r\n      // publish the list of sources in order, fail if any failed\r\n      var uploaded = []\r\n      async.eachSeries(sources, function (item, cb) {\r\n        swarmVerifiedPublish(item.content, item.hash, (error, result) => {\r\n          try {\r\n            item.hash = result.url.match('bzz-raw://(.+)')[1]\r\n          } catch (e) {\r\n            item.hash = '<Metadata inconsistency> - ' + item.fileName\r\n          }\r\n          if (!error && swarmVerifiedPublishCallBack) swarmVerifiedPublishCallBack(item)\r\n          item.output = result\r\n          uploaded.push(item)\r\n          // TODO this is a fix cause Solidity metadata does not contain the right swarm hash (poc 0.3)\r\n          metadata.sources[item.filename].urls[0] = result.url\r\n          cb(error)\r\n        })\r\n      }, () => {\r\n        const metadataContent = JSON.stringify(metadata)\r\n        swarmVerifiedPublish(metadataContent, '', (error, result) => {\r\n          try {\r\n            contract.metadataHash = result.url.match('bzz-raw://(.+)')[1]\r\n          } catch (e) {\r\n            contract.metadataHash = '<Metadata inconsistency> - metadata.json'\r\n          }\r\n          if (!error && swarmVerifiedPublishCallBack) {\r\n            swarmVerifiedPublishCallBack({\r\n              content: metadataContent,\r\n              hash: contract.metadataHash\r\n            })\r\n          }\r\n          uploaded.push({\r\n            content: contract.metadata,\r\n            hash: contract.metadataHash,\r\n            filename: 'metadata.json',\r\n            output: result\r\n          })\r\n          cb(error, uploaded)\r\n        })\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction swarmVerifiedPublish (content, expectedHash, cb) {\r\n  swarmgw.put(content, function (err, ret) {\r\n    if (err) {\r\n      cb(err)\r\n    } else if (expectedHash && ret !== expectedHash) {\r\n      cb(null, { message: 'hash mismatch between solidity bytecode and uploaded content.', url: 'bzz-raw://' + ret, hash: ret })\r\n    } else {\r\n      cb(null, { message: 'ok', url: 'bzz-raw://' + ret, hash: ret })\r\n    }\r\n  })\r\n}\r\n","'use strict'\r\n\r\n// Allowing window to be overriden for testing\r\nfunction QueryParams (_window) {\r\n  if (_window === undefined) _window = window\r\n\r\n  this.get = function () {\r\n    var qs = _window.location.hash.substr(1)\r\n\r\n    if (_window.location.search.length > 0) {\r\n      // use legacy query params instead of hash\r\n      _window.location.hash = _window.location.search.substr(1)\r\n      _window.location.search = ''\r\n    }\r\n\r\n    var params = {}\r\n    var parts = qs.split('&')\r\n    for (var x in parts) {\r\n      var keyValue = parts[x].split('=')\r\n      if (keyValue[0] !== '') {\r\n        params[keyValue[0]] = keyValue[1]\r\n      }\r\n    }\r\n    return params\r\n  }\r\n\r\n  this.update = function (params) {\r\n    var currentParams = this.get()\r\n    var keys = Object.keys(params)\r\n    for (var x in keys) {\r\n      currentParams[keys[x]] = params[keys[x]]\r\n    }\r\n    var queryString = '#'\r\n    var updatedKeys = Object.keys(currentParams)\r\n    for (var y in updatedKeys) {\r\n      queryString += updatedKeys[y] + '=' + currentParams[updatedKeys[y]] + '&'\r\n    }\r\n    _window.location.hash = queryString.slice(0, -1)\r\n  }\r\n}\r\n\r\nmodule.exports = QueryParams\r\n","module.exports = (fileManager) => {\r\n  // The event listener needs to be registered as early as possible, because the\r\n  // parent will send the message upon the \"load\" event.\r\n  let filesToLoad = null\r\n  let loadFilesCallback = function (files) { filesToLoad = files } // will be replaced later\r\n\r\n  window.addEventListener('message', function (ev) {\r\n    if (typeof ev.data === typeof [] && ev.data[0] === 'loadFiles') {\r\n      loadFilesCallback(ev.data[1])\r\n    }\r\n  }, false)\r\n\r\n  // Replace early callback with instant response\r\n  loadFilesCallback = function (files) {\r\n    fileManager.setBatchFiles(files)\r\n  }\r\n\r\n  // Run if we did receive an event from remote instance while starting up\r\n  if (filesToLoad !== null) {\r\n    fileManager.setBatchFiles(filesToLoad)\r\n  }\r\n}\r\n","import './index'\r\n","\r\nimport { Storage } from '@remix-project/remix-lib'\r\n\r\n/*\r\n  Migrating the files to the BrowserFS storage instead or raw localstorage\r\n*/\r\nexport default (fileProvider) => {\r\n  const fileStorage = new Storage('sol:')\r\n  const flag = 'status'\r\n  const fileStorageBrowserFS = new Storage('remix_browserFS_migration:')\r\n  if (fileStorageBrowserFS.get(flag) === 'done') return\r\n  fileStorage.keys().forEach((path) => {\r\n    if (path !== '.remix.config') {\r\n      const content = fileStorage.get(path)\r\n      fileProvider.set(path, content)\r\n      // TODO https://github.com/ethereum/remix-ide/issues/2377\r\n      // fileStorage.remove(path) we don't want to remove it as we are still supporting the old version\r\n      console.log('file migrated', path)\r\n    }\r\n  })\r\n  fileStorageBrowserFS.set(flag, 'done')\r\n}\r\n","const yo = require('yo-yo')\r\nconst publishOnSwarm = require('./lib/publishOnSwarm')\r\nconst publishOnIpfs = require('./lib/publishOnIpfs')\r\nconst modalDialogCustom = require('./app/ui/modal-dialog-custom')\r\n\r\nexport default function publish (storage, fileProvider, fileManager, contract) {\r\n  if (contract) {\r\n    if (contract.metadata === undefined || contract.metadata.length === 0) {\r\n      modalDialogCustom.alert('This contract may be abstract, may not implement an abstract parent\\'s methods completely or not invoke an inherited contract\\'s constructor correctly.')\r\n    } else {\r\n      if (storage === 'swarm') {\r\n        publishOnSwarm(contract, fileManager, function (err, uploaded) {\r\n          if (err) {\r\n            try {\r\n              err = JSON.stringify(err)\r\n            } catch (e) {}\r\n            console.log(`Failed to publish metadata file to swarm, please check the Swarm gateways is available ( swarm-gateways.net ) ${err}`)\r\n          } else {\r\n            var result = yo`<div>${uploaded.map((value) => {\r\n              return yo`<div><b>${value.filename}</b> : <pre>${value.output.url}</pre></div>`\r\n            })}</div>`\r\n            modalDialogCustom.alert(`Published ${contract.name}'s Metadata`, yo`<span>Metadata of \"${contract.name.toLowerCase()}\" was published successfully.<br> <pre>${result}</pre> </span>`)\r\n          }\r\n        }, (item) => { // triggered each time there's a new verified publish (means hash correspond)\r\n          fileProvider.addExternal('swarm/' + item.hash, item.content)\r\n        })\r\n      } else {\r\n        publishOnIpfs(contract, fileManager, function (err, uploaded) {\r\n          if (err) {\r\n            try {\r\n              err = JSON.stringify(err)\r\n            } catch (e) {}\r\n            modalDialogCustom.alert(yo`<span>Failed to publish metadata file to ${storage}, please check the ${storage} gateways is available.<br />\r\n            ${err}</span>`)\r\n          } else {\r\n            var result = yo`<div>${uploaded.map((value) => {\r\n              return yo`<div><b>${value.filename}</b> : <pre>${value.output.url}</pre></div>`\r\n            })}</div>`\r\n            modalDialogCustom.alert(`Published ${contract.name}'s Metadata`, yo`<span>Metadata of \"${contract.name.toLowerCase()}\" was published successfully.<br> <pre>${result}</pre> </span>`)\r\n          }\r\n        }, (item) => { // triggered each time there's a new verified publish (means hash correspond)\r\n          fileProvider.addExternal('ipfs/' + item.hash, item.content)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n","// const moduleID = require('./module-id.js')\r\n\r\nmodule.exports = class registry {\r\n  constructor () {\r\n    this.state = {}\r\n  }\r\n\r\n  put ({ api, name }) {\r\n    // const serveruid = moduleID() + '.' + (name || '')\r\n    if (this.state[name]) return this.state[name]\r\n    const server = {\r\n      // uid: serveruid,\r\n      api\r\n    }\r\n    this.state[name] = { server }\r\n    return server\r\n  }\r\n\r\n  get (name) {\r\n    // const clientuid = moduleID()\r\n    const state = this.state[name]\r\n    if (!state) return\r\n    const server = state.server\r\n    return server\r\n  }\r\n}\r\n","/* global localStorage, fetch */\r\nimport { PluginManager } from '@remixproject/engine'\r\nimport { IframePlugin } from '@remixproject/engine-web'\r\nimport { EventEmitter } from 'events'\r\nimport QueryParams from './lib/query-params'\r\nimport { PermissionHandler } from './app/ui/persmission-handler'\r\n\r\nconst requiredModules = [ // services + layout views + system views\r\n  'manager', 'compilerArtefacts', 'compilerMetadata', 'contextualListener', 'editor', 'offsetToLineColumnConverter', 'network', 'theme', 'fileManager', 'contentImport', 'web3Provider', 'scriptRunner', 'fetchAndCompile',\r\n  'mainPanel', 'hiddenPanel', 'sidePanel', 'menuicons', 'fileExplorers',\r\n  'terminal', 'settings', 'pluginManager', 'tabs']\r\n\r\nexport function isNative (name) {\r\n  const nativePlugins = ['vyper', 'workshops', 'debugger', 'remixd']\r\n  return nativePlugins.includes(name) || requiredModules.includes(name)\r\n}\r\n\r\nexport function canActivate (name) {\r\n  return ['ethdoc'].includes(name) || isNative(name)\r\n}\r\n\r\nexport class RemixAppManager extends PluginManager {\r\n  constructor () {\r\n    super()\r\n    this.event = new EventEmitter()\r\n    this.pluginsDirectory = 'https://raw.githubusercontent.com/ethereum/remix-plugins-directory/master/build/metadata.json'\r\n    this.pluginLoader = new PluginLoader()\r\n    this.permissionHandler = new PermissionHandler()\r\n  }\r\n\r\n  async canActivatePlugin (from, to) {\r\n    return canActivate(from.name)\r\n  }\r\n\r\n  async canDeactivatePlugin (from, to) {\r\n    if (requiredModules.includes(to.name)) return false\r\n    return isNative(from.name)\r\n  }\r\n\r\n  async canCall (from, to, method, message) {\r\n    // Make sure the caller of this methods is the target plugin\r\n    if (to !== this.currentRequest.from) {\r\n      return false\r\n    }\r\n    // skipping native plugins' requests\r\n    if (isNative(from)) {\r\n      return true\r\n    }\r\n    // ask the user for permission\r\n    return await this.permissionHandler.askPermission(this.profiles[from], this.profiles[to], method, message)\r\n  }\r\n\r\n  onPluginActivated (plugin) {\r\n    this.pluginLoader.set(plugin, this.actives)\r\n    this.event.emit('activate', plugin)\r\n  }\r\n\r\n  getAll () {\r\n    return Object.keys(this.profiles).map((p) => {\r\n      return this.profiles[p]\r\n    })\r\n  }\r\n\r\n  getIds () {\r\n    return Object.keys(this.profiles)\r\n  }\r\n\r\n  onPluginDeactivated (plugin) {\r\n    this.pluginLoader.set(plugin, this.actives)\r\n    this.event.emit('deactivate', plugin)\r\n  }\r\n\r\n  isRequired (name) {\r\n    // excluding internal use plugins\r\n    return requiredModules.includes(name)\r\n  }\r\n\r\n  async registeredPlugins () {\r\n    let plugins\r\n    try {\r\n      const res = await fetch(this.pluginsDirectory)\r\n      plugins = await res.json()\r\n      localStorage.setItem('plugins-directory', JSON.stringify(plugins))\r\n    } catch (e) {\r\n      console.log('getting plugins list from localstorage...')\r\n      const savedPlugins = localStorage.getItem('plugins-directory')\r\n      if (savedPlugins) {\r\n        try {\r\n          plugins = JSON.parse(savedPlugins)\r\n        } catch (e) {\r\n          console.error(e)\r\n        }\r\n      }\r\n    }\r\n    plugins.push({\r\n      name: 'walletconnect',\r\n      kind: 'provider',\r\n      displayName: 'Wallet Connect',\r\n      events: [],\r\n      methods: ['sendAsync'],\r\n      url: 'ipfs://QmUD93rF9RKaDabCM5jFTHraBKd72HApbv7m9Vd5i5EHZe',\r\n      description: 'Use an external wallet for transacting',\r\n      icon: 'data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxyYWRpYWxHcmFkaWVudCBpZD0iYSIgY3g9IjAlIiBjeT0iNTAlIiByPSIxMDAlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM1ZDlkZjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDZmZmYiLz48L3JhZGlhbEdyYWRpZW50PjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0ibTI1NiAwYzE0MS4zODQ4OTYgMCAyNTYgMTE0LjYxNTEwNCAyNTYgMjU2cy0xMTQuNjE1MTA0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjE1MTA0LTI1Ni0yNTYgMTE0LjYxNTEwNC0yNTYgMjU2LTI1NnoiIGZpbGw9InVybCgjYSkiLz48cGF0aCBkPSJtNjQuNjkxNzU1OCAzNy43MDg4Mjk4YzUxLjUzMjgwNzItNTAuMjc4NDM5NyAxMzUuMDgzOTk0Mi01MC4yNzg0Mzk3IDE4Ni42MTY3OTkyIDBsNi4yMDIwNTcgNi4wNTEwOTA2YzIuNTc2NjQgMi41MTM5MjE4IDIuNTc2NjQgNi41ODk3OTQ4IDAgOS4xMDM3MTc3bC0yMS4yMTU5OTggMjAuNjk5NTc1OWMtMS4yODgzMjEgMS4yNTY5NjE5LTMuMzc3MSAxLjI1Njk2MTktNC42NjU0MjEgMGwtOC41MzQ3NjYtOC4zMjcwMjA1Yy0zNS45NTA1NzMtMzUuMDc1NDk2Mi05NC4yMzc5NjktMzUuMDc1NDk2Mi0xMzAuMTg4NTQ0IDBsLTkuMTQwMDI4MiA4LjkxNzU1MTljLTEuMjg4MzIxNyAxLjI1Njk2MDktMy4zNzcxMDE2IDEuMjU2OTYwOS00LjY2NTQyMDggMGwtMjEuMjE1OTk3My0yMC42OTk1NzU5Yy0yLjU3NjY0MDMtMi41MTM5MjI5LTIuNTc2NjQwMy02LjU4OTc5NTggMC05LjEwMzcxNzd6bTIzMC40OTM0ODUyIDQyLjgwODkxMTcgMTguODgyMjc5IDE4LjQyMjcyNjJjMi41NzY2MjcgMi41MTM5MTAzIDIuNTc2NjQyIDYuNTg5NzU5My4wMDAwMzIgOS4xMDM2ODYzbC04NS4xNDE0OTggODMuMDcwMzU4Yy0yLjU3NjYyMyAyLjUxMzk0MS02Ljc1NDE4MiAyLjUxMzk2OS05LjMzMDg0LjAwMDA2Ni0uMDAwMDEtLjAwMDAxLS4wMDAwMjMtLjAwMDAyMy0uMDAwMDMzLS4wMDAwMzRsLTYwLjQyODI1Ni01OC45NTc0NTFjLS42NDQxNi0uNjI4NDgxLTEuNjg4NTUtLjYyODQ4MS0yLjMzMjcxIDAtLjAwMDAwNC4wMDAwMDQtLjAwMDAwOC4wMDAwMDctLjAwMDAxMi4wMDAwMTFsLTYwLjQyNjk2ODMgNTguOTU3NDA4Yy0yLjU3NjYxNDEgMi41MTM5NDctNi43NTQxNzQ2IDIuNTEzOTktOS4zMzA4NDA4LjAwMDA5Mi0uMDAwMDE1MS0uMDAwMDE0LS4wMDAwMzA5LS4wMDAwMjktLjAwMDA0NjctLjAwMDA0NmwtODUuMTQzODY3NzQtODMuMDcxNDYzYy0yLjU3NjYzOTI4LTIuNTEzOTIxLTIuNTc2NjM5MjgtNi41ODk3OTUgMC05LjEwMzcxNjNsMTguODgyMzEyNjQtMTguNDIyNjk1NWMyLjU3NjYzOTMtMi41MTM5MjIyIDYuNzU0MTk5My0yLjUxMzkyMjIgOS4zMzA4Mzk3IDBsNjAuNDI5MTM0NyA1OC45NTgyNzU4Yy42NDQxNjA4LjYyODQ4IDEuNjg4NTQ5NS42Mjg0OCAyLjMzMjcxMDMgMCAuMDAwMDA5NS0uMDAwMDA5LjAwMDAxODItLjAwMDAxOC4wMDAwMjc3LS4wMDAwMjVsNjAuNDI2MTA2NS01OC45NTgyNTA4YzIuNTc2NTgxLTIuNTEzOTggNi43NTQxNDItMi41MTQwNzQzIDkuMzMwODQtLjAwMDIxMDMuMDAwMDM3LjAwMDAzNTQuMDAwMDcyLjAwMDA3MDkuMDAwMTA3LjAwMDEwNjNsNjAuNDI5MDU2IDU4Ljk1ODM1NDhjLjY0NDE1OS42Mjg0NzkgMS42ODg1NDkuNjI4NDc5IDIuMzMyNzA5IDBsNjAuNDI4MDc5LTU4Ljk1NzE5MjVjMi41NzY2NC0yLjUxMzkyMzEgNi43NTQxOTktMi41MTM5MjMxIDkuMzMwODM5IDB6IiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk4IDE2MCkiLz48L2c+PC9zdmc+',\r\n      location: 'mainPanel'\r\n    })\r\n    return plugins.map(plugin => {\r\n      if (plugin.name === 'scriptRunner') {\r\n        plugin.url = 'ipfs://QmYCUgBadbcHj3B8d8TsT4A2fKYvXGFWt1izxyXasjdWtF'\r\n      }\r\n      return new IframePlugin(plugin)\r\n    })\r\n  }\r\n}\r\n\r\n/** @class Reference loaders.\r\n *  A loader is a get,set based object which load a workspace from a defined sources.\r\n *  (localStorage, queryParams)\r\n **/\r\nclass PluginLoader {\r\n  get currentLoader () {\r\n    return this.loaders[this.current]\r\n  }\r\n\r\n  constructor () {\r\n    const queryParams = new QueryParams()\r\n    this.donotAutoReload = ['remixd'] // that would be a bad practice to force loading some plugins at page load.\r\n    this.loaders = {}\r\n    this.loaders.localStorage = {\r\n      set: (plugin, actives) => {\r\n        if (!this.donotAutoReload.includes(plugin.name)) {\r\n          localStorage.setItem('workspace', JSON.stringify(actives))\r\n        }\r\n      },\r\n      get: () => { return JSON.parse(localStorage.getItem('workspace')) }\r\n    }\r\n\r\n    this.loaders.queryParams = {\r\n      set: () => {},\r\n      get: () => {\r\n        const { activate } = queryParams.get()\r\n        if (!activate) return []\r\n        return activate.split(',')\r\n      }\r\n    }\r\n\r\n    this.current = queryParams.get().activate ? 'queryParams' : 'localStorage'\r\n  }\r\n\r\n  set (plugin, actives) {\r\n    this.currentLoader.set(plugin, actives)\r\n  }\r\n\r\n  get () {\r\n    return this.currentLoader.get()\r\n  }\r\n}\r\n","import { Engine } from '@remixproject/engine'\r\nimport { EventEmitter } from 'events'\r\n\r\nexport class RemixEngine extends Engine {\r\n  constructor () {\r\n    super()\r\n    this.event = new EventEmitter()\r\n  }\r\n\r\n  setPluginOption ({ name, kind }) {\r\n    if (kind === 'provider') return { queueTimeout: 60000 * 2 }\r\n    if (name === 'LearnEth') return { queueTimeout: 60000 }\r\n    return { queueTimeout: 10000 }\r\n  }\r\n\r\n  onRegistration (plugin) {\r\n    this.event.emit('onRegistration', plugin)\r\n  }\r\n}\r\n","const csjs = require('csjs-inject')\r\n\r\nvar css = csjs`\r\n  .instanceTitleContainer {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .calldataInput{\r\n    height: 32px;\r\n  }\r\n  .title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    font-size: 11px;\r\n    width: 100%;\r\n    overflow: hidden;\r\n    word-break: break-word;\r\n    line-height: initial;\r\n    overflow: visible;\r\n    padding: 0 0 8px;\r\n    margin: 0;\r\n    background: none;\r\n    border: none;\r\n  }\r\n  .title button {\r\n    background: none;\r\n    border: none;\r\n  }\r\n  .titleLine {\r\n    display: flex;\r\n    align-items: baseline;\r\n  }\r\n  .titleText {\r\n    word-break: break-word;\r\n    width: 100%;\r\n    border: none;\r\n    overflow: hidden;\r\n  }\r\n  .spanTitleText {\r\n    line-height: 12px;\r\n    padding: 0;\r\n    font-size: 11px;\r\n    width:100%;\r\n    border: none;\r\n    background: none;\r\n    text-transform: uppercase;\r\n    overflow: hidden;\r\n  }\r\n  .inputGroupText {\r\n    width: 100%;\r\n  }\r\n  .title .copy {\r\n    color: var(--primary);\r\n  }\r\n  .titleExpander {\r\n    padding: 5px 7px;\r\n  }\r\n  .nameNbuts {\r\n    display: contents;\r\n    flex-wrap: nowrap;\r\n    width: 100%;\r\n  }\r\n  .instance {\r\n    display: block;\r\n    flex-direction: column;\r\n    margin-bottom: 12px;\r\n    background: none;\r\n    border-radius: 2px;\r\n  }\r\n  .instance.hidesub {\r\n    border-bottom: 1px solid;\r\n  }\r\n  .instance.hidesub .title {\r\n      display: flex;\r\n  }\r\n  .instance.hidesub .udappClose {\r\n      display: flex;\r\n  }\r\n  .instance.hidesub > * {\r\n    display: none;\r\n  }\r\n  .methCaret {\r\n    min-width: 12px;\r\n    width: 12px;\r\n    margin-left: 4px;\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n    line-height: 0.6;\r\n    vertical-align: middle;\r\n    padding: 0;\r\n  }\r\n  .cActionsWrapper {\r\n    border-top-left-radius: 0;\r\n    border-bottom-left-radius: 0.25rem;\r\n    border-top-rightt-radius: 0;\r\n    border-bottom-right-radius: 0.25rem;\r\n    padding: 8px 10px 7px;\r\n  }\r\n  .group:after {\r\n    content: \"\";\r\n    display: table;\r\n    clear: both;\r\n  }\r\n  .buttonsContainer {\r\n    margin-top: 2%;\r\n    display: flex;\r\n    overflow: hidden;\r\n  }\r\n  .instanceButton {\r\n    height: 32px;\r\n    border-radius: 3px;\r\n    white-space: nowrap;\r\n    font-size: 11px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .closeIcon {\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n    margin-left: 5px;\r\n  }\r\n  .udappClose {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n  }\r\n  .contractProperty {\r\n    width:100%;\r\n  }\r\n  .contractProperty.hasArgs input {\r\n    padding: .36em;\r\n    border-radius: 5px;\r\n  }\r\n  .contractProperty .contractActionsContainerSingle input{\r\n    border-top-left-radius: 0;\r\n    border-bottom-left-radius: 0;\r\n  }\r\n  .contractProperty button {\r\n    min-width: 100px;\r\n    width: 100px;\r\n    margin:0;\r\n    word-break: inherit;\r\n  }\r\n  .contractProperty button:disabled {\r\n    cursor: not-allowed;\r\n    background-color: white;\r\n    border-color: lightgray;\r\n  }\r\n  .contractProperty.constant button {\r\n    min-width: 100px;\r\n    width: 100px;\r\n    margin:0;\r\n    word-break: inherit;\r\n    outline: none;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .contractProperty > .value {\r\n    box-sizing: border-box;\r\n    float: left;\r\n    align-self: center;\r\n    margin-left: 4px;\r\n  }\r\n  .contractActionsContainer {\r\n    width: 100%;\r\n    margin-bottom: 8px;\r\n  }\r\n  .contractActionsContainerSingle {\r\n    display: flex;\r\n    width: 100%;\r\n  }\r\n  .contractActionsContainerSingle i {\r\n    line-height: 2;\r\n  }\r\n  .contractActionsContainerMulti {\r\n    display:none;\r\n    width: 100%;\r\n  }\r\n  .contractActionsContainerMultiInner {\r\n    width: 100%;\r\n    padding: 16px 8px 16px 14px;\r\n    border-radius: 3px;\r\n    margin-bottom: 8px;\r\n  }\r\n  .multiHeader {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 8px;\r\n    text-align: left;\r\n    font-size: 10px;\r\n    font-weight: bold;\r\n  }\r\n  .contractActionsContainerMultiInner .multiTitle {\r\n    padding-left: 10px;\r\n  }\r\n  .contractProperty .multiTitle {\r\n    padding: 0;\r\n    line-height: 16px;\r\n    display: inline-block;\r\n    font-size: 12px;\r\n    font-weight: bold;\r\n    cursor: default;\r\n  }\r\n  .contractProperty .contractActionsContainerMultiInner .multiArg label{\r\n    text-align: right;\r\n  }\r\n  .multiHeader .methCaret {\r\n    float: right;\r\n    margin-right: 0;\r\n  }\r\n  .contractProperty.constant .multiTitle {\r\n    display: inline-block;\r\n    width: 90%;\r\n    /* font-size: 10px; */\r\n    height: 25px;\r\n    padding-left: 20px;\r\n    font-weight: bold;\r\n    line-height: 25px;\r\n    cursor: default;\r\n  }\r\n  .multiArg {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    margin-top: 4px;\r\n  }\r\n  .multiArg input{\r\n    padding: 5px;\r\n  }\r\n  .multiArg label {\r\n    width: auto;\r\n    padding: 0;\r\n    margin: 0 4px 0 0;\r\n    font-size: 10px;\r\n    line-height: 12px;\r\n    text-align: right;\r\n    word-break: initial;\r\n  }\r\n  .multiArg button {\r\n    max-width: 100px;\r\n    border-radius: 3px;\r\n    border-width: 1px;\r\n    width: inherit;\r\n  }\r\n  .multiHeader button {\r\n    display: inline-block;\r\n    width: 94%;\r\n  }\r\n  .hasArgs .multiArg input {\r\n    border-left: 1px solid #dddddd;\r\n    width: 67%;\r\n  }\r\n  .hasArgs input {\r\n    display: block;\r\n    height: 32px;\r\n    border: 1px solid #dddddd;\r\n    padding: .36em;\r\n    border-left: none;\r\n    padding: 8px 8px 8px 10px;\r\n    font-size: 10px !important;\r\n  }\r\n  .hasArgs button {\r\n    border-top-right-radius: 0;\r\n    border-bottom-right-radius: 0;\r\n    border-right: 0;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    font-size: 11px;\r\n  }\r\n  .hasArgs .contractActionsContainerMulti button {\r\n    border-radius: 3px;\r\n  }\r\n  .contractActionsContainerMultiInner .multiArg i {\r\n    padding-right: 10px;\r\n  }\r\n  .hideWarningsContainer {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-left: 2%\r\n  }\r\n`\r\n\r\nmodule.exports = css\r\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":"webpack:///"}